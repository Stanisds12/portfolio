{"ast":null,"code":"/**\r\n * Dark Reader v4.9.109\r\n * https://darkreader.org/\r\n */\n\nvar MessageTypeUItoBG;\n(function (MessageTypeUItoBG) {\n  MessageTypeUItoBG[\"GET_DATA\"] = \"ui-bg-get-data\";\n  MessageTypeUItoBG[\"GET_DEVTOOLS_DATA\"] = \"ui-bg-get-devtools-data\";\n  MessageTypeUItoBG[\"SUBSCRIBE_TO_CHANGES\"] = \"ui-bg-subscribe-to-changes\";\n  MessageTypeUItoBG[\"UNSUBSCRIBE_FROM_CHANGES\"] = \"ui-bg-unsubscribe-from-changes\";\n  MessageTypeUItoBG[\"CHANGE_SETTINGS\"] = \"ui-bg-change-settings\";\n  MessageTypeUItoBG[\"SET_THEME\"] = \"ui-bg-set-theme\";\n  MessageTypeUItoBG[\"TOGGLE_ACTIVE_TAB\"] = \"ui-bg-toggle-active-tab\";\n  MessageTypeUItoBG[\"MARK_NEWS_AS_READ\"] = \"ui-bg-mark-news-as-read\";\n  MessageTypeUItoBG[\"MARK_NEWS_AS_DISPLAYED\"] = \"ui-bg-mark-news-as-displayed\";\n  MessageTypeUItoBG[\"LOAD_CONFIG\"] = \"ui-bg-load-config\";\n  MessageTypeUItoBG[\"APPLY_DEV_DYNAMIC_THEME_FIXES\"] = \"ui-bg-apply-dev-dynamic-theme-fixes\";\n  MessageTypeUItoBG[\"RESET_DEV_DYNAMIC_THEME_FIXES\"] = \"ui-bg-reset-dev-dynamic-theme-fixes\";\n  MessageTypeUItoBG[\"APPLY_DEV_INVERSION_FIXES\"] = \"ui-bg-apply-dev-inversion-fixes\";\n  MessageTypeUItoBG[\"RESET_DEV_INVERSION_FIXES\"] = \"ui-bg-reset-dev-inversion-fixes\";\n  MessageTypeUItoBG[\"APPLY_DEV_STATIC_THEMES\"] = \"ui-bg-apply-dev-static-themes\";\n  MessageTypeUItoBG[\"RESET_DEV_STATIC_THEMES\"] = \"ui-bg-reset-dev-static-themes\";\n  MessageTypeUItoBG[\"START_ACTIVATION\"] = \"ui-bg-start-activation\";\n  MessageTypeUItoBG[\"RESET_ACTIVATION\"] = \"ui-bg-reset-activation\";\n  MessageTypeUItoBG[\"COLOR_SCHEME_CHANGE\"] = \"ui-bg-color-scheme-change\";\n  MessageTypeUItoBG[\"HIDE_HIGHLIGHTS\"] = \"ui-bg-hide-highlights\";\n})(MessageTypeUItoBG || (MessageTypeUItoBG = {}));\nvar MessageTypeBGtoUI;\n(function (MessageTypeBGtoUI) {\n  MessageTypeBGtoUI[\"CHANGES\"] = \"bg-ui-changes\";\n})(MessageTypeBGtoUI || (MessageTypeBGtoUI = {}));\nvar DebugMessageTypeBGtoUI;\n(function (DebugMessageTypeBGtoUI) {\n  DebugMessageTypeBGtoUI[\"CSS_UPDATE\"] = \"debug-bg-ui-css-update\";\n  DebugMessageTypeBGtoUI[\"UPDATE\"] = \"debug-bg-ui-update\";\n})(DebugMessageTypeBGtoUI || (DebugMessageTypeBGtoUI = {}));\nvar MessageTypeBGtoCS;\n(function (MessageTypeBGtoCS) {\n  MessageTypeBGtoCS[\"ADD_CSS_FILTER\"] = \"bg-cs-add-css-filter\";\n  MessageTypeBGtoCS[\"ADD_DYNAMIC_THEME\"] = \"bg-cs-add-dynamic-theme\";\n  MessageTypeBGtoCS[\"ADD_STATIC_THEME\"] = \"bg-cs-add-static-theme\";\n  MessageTypeBGtoCS[\"ADD_SVG_FILTER\"] = \"bg-cs-add-svg-filter\";\n  MessageTypeBGtoCS[\"CLEAN_UP\"] = \"bg-cs-clean-up\";\n  MessageTypeBGtoCS[\"FETCH_RESPONSE\"] = \"bg-cs-fetch-response\";\n  MessageTypeBGtoCS[\"UNSUPPORTED_SENDER\"] = \"bg-cs-unsupported-sender\";\n})(MessageTypeBGtoCS || (MessageTypeBGtoCS = {}));\nvar DebugMessageTypeBGtoCS;\n(function (DebugMessageTypeBGtoCS) {\n  DebugMessageTypeBGtoCS[\"RELOAD\"] = \"debug-bg-cs-reload\";\n})(DebugMessageTypeBGtoCS || (DebugMessageTypeBGtoCS = {}));\nvar MessageTypeCStoBG;\n(function (MessageTypeCStoBG) {\n  MessageTypeCStoBG[\"COLOR_SCHEME_CHANGE\"] = \"cs-bg-color-scheme-change\";\n  MessageTypeCStoBG[\"DARK_THEME_DETECTED\"] = \"cs-bg-dark-theme-detected\";\n  MessageTypeCStoBG[\"DARK_THEME_NOT_DETECTED\"] = \"cs-bg-dark-theme-not-detected\";\n  MessageTypeCStoBG[\"FETCH\"] = \"cs-bg-fetch\";\n  MessageTypeCStoBG[\"DOCUMENT_CONNECT\"] = \"cs-bg-document-connect\";\n  MessageTypeCStoBG[\"DOCUMENT_FORGET\"] = \"cs-bg-document-forget\";\n  MessageTypeCStoBG[\"DOCUMENT_FREEZE\"] = \"cs-bg-document-freeze\";\n  MessageTypeCStoBG[\"DOCUMENT_RESUME\"] = \"cs-bg-document-resume\";\n})(MessageTypeCStoBG || (MessageTypeCStoBG = {}));\nvar DebugMessageTypeCStoBG;\n(function (DebugMessageTypeCStoBG) {\n  DebugMessageTypeCStoBG[\"LOG\"] = \"debug-cs-bg-log\";\n})(DebugMessageTypeCStoBG || (DebugMessageTypeCStoBG = {}));\nvar MessageTypeCStoUI;\n(function (MessageTypeCStoUI) {\n  MessageTypeCStoUI[\"EXPORT_CSS_RESPONSE\"] = \"cs-ui-export-css-response\";\n})(MessageTypeCStoUI || (MessageTypeCStoUI = {}));\nvar MessageTypeUItoCS;\n(function (MessageTypeUItoCS) {\n  MessageTypeUItoCS[\"EXPORT_CSS\"] = \"ui-cs-export-css\";\n})(MessageTypeUItoCS || (MessageTypeUItoCS = {}));\nconst isNavigatorDefined = typeof navigator !== \"undefined\";\nconst userAgent = isNavigatorDefined ? navigator.userAgentData && Array.isArray(navigator.userAgentData.brands) ? navigator.userAgentData.brands.map(brand => `${brand.brand.toLowerCase()} ${brand.version}`).join(\" \") : navigator.userAgent.toLowerCase() : \"some useragent\";\nconst platform = isNavigatorDefined ? navigator.userAgentData && typeof navigator.userAgentData.platform === \"string\" ? navigator.userAgentData.platform.toLowerCase() : navigator.platform.toLowerCase() : \"some platform\";\nconst isChromium = userAgent.includes(\"chrome\") || userAgent.includes(\"chromium\");\nconst isFirefox = userAgent.includes(\"firefox\") || userAgent.includes(\"thunderbird\") || userAgent.includes(\"librewolf\");\nconst isSafari = userAgent.includes(\"safari\") && !isChromium;\nconst isWindows = platform.startsWith(\"win\");\nconst isMacOS = platform.startsWith(\"mac\");\nisNavigatorDefined && navigator.userAgentData ? navigator.userAgentData.mobile : userAgent.includes(\"mobile\");\nconst isShadowDomSupported = typeof ShadowRoot === \"function\";\nconst isMatchMediaChangeEventListenerSupported = typeof MediaQueryList === \"function\" && typeof MediaQueryList.prototype.addEventListener === \"function\";\nconst isLayerRuleSupported = typeof CSSLayerBlockRule === \"function\";\n(() => {\n  const m = userAgent.match(/chrom(?:e|ium)(?:\\/| )([^ ]+)/);\n  if (m && m[1]) {\n    return m[1];\n  }\n  return \"\";\n})();\n(() => {\n  const m = userAgent.match(/(?:firefox|librewolf)(?:\\/| )([^ ]+)/);\n  if (m && m[1]) {\n    return m[1];\n  }\n  return \"\";\n})();\nconst isDefinedSelectorSupported = (() => {\n  try {\n    document.querySelector(\":defined\");\n    return true;\n  } catch (err) {\n    return false;\n  }\n})();\nconst isCSSColorSchemePropSupported = (() => {\n  try {\n    if (typeof document === \"undefined\") {\n      return false;\n    }\n    const el = document.createElement(\"div\");\n    if (!el || typeof el.style !== \"object\") {\n      return false;\n    }\n    if (typeof el.style.colorScheme === \"string\") {\n      return true;\n    }\n    el.setAttribute(\"style\", \"color-scheme: dark\");\n    return el.style.colorScheme === \"dark\";\n  } catch (e) {\n    return false;\n  }\n})();\nasync function getOKResponse(url, mimeType, origin) {\n  const credentials = origin && url.startsWith(`${origin}/`) ? undefined : \"omit\";\n  const response = await fetch(url, {\n    cache: \"force-cache\",\n    credentials,\n    referrer: origin\n  });\n  if (isFirefox && mimeType === \"text/css\" && url.startsWith(\"moz-extension://\") && url.endsWith(\".css\")) {\n    return response;\n  }\n  if (mimeType && !response.headers.get(\"Content-Type\").startsWith(mimeType)) {\n    throw new Error(`Mime type mismatch when loading ${url}`);\n  }\n  if (!response.ok) {\n    throw new Error(`Unable to load ${url} ${response.status} ${response.statusText}`);\n  }\n  return response;\n}\nasync function loadAsDataURL(url, mimeType) {\n  const response = await getOKResponse(url, mimeType);\n  return await readResponseAsDataURL(response);\n}\nasync function loadAsBlob(url, mimeType) {\n  const response = await getOKResponse(url, mimeType);\n  return await response.blob();\n}\nasync function readResponseAsDataURL(response) {\n  const blob = await response.blob();\n  const dataURL = await new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result);\n    reader.readAsDataURL(blob);\n  });\n  return dataURL;\n}\nasync function loadAsText(url, mimeType, origin) {\n  const response = await getOKResponse(url, mimeType, origin);\n  return await response.text();\n}\nconst throwCORSError = async url => {\n  return Promise.reject(new Error([\"Embedded Dark Reader cannot access a cross-origin resource\", url, \"Overview your URLs and CORS policies or use\", \"`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.\", \"See if using `DarkReader.setFetchMethod(window.fetch)`\", \"before `DarkReader.enable()` works.\"].join(\" \")));\n};\nlet fetcher = throwCORSError;\nfunction setFetchMethod$1(fetch) {\n  if (fetch) {\n    fetcher = fetch;\n  } else {\n    fetcher = throwCORSError;\n  }\n}\nasync function callFetchMethod(url) {\n  return await fetcher(url);\n}\nif (!window.chrome) {\n  window.chrome = {};\n}\nif (!chrome.runtime) {\n  chrome.runtime = {};\n}\nconst messageListeners = new Set();\nasync function sendMessage(...args) {\n  if (args[0] && args[0].type === MessageTypeCStoBG.FETCH) {\n    const {\n      id\n    } = args[0];\n    try {\n      const {\n        url,\n        responseType\n      } = args[0].data;\n      const response = await callFetchMethod(url);\n      let text;\n      if (responseType === \"data-url\") {\n        text = await readResponseAsDataURL(response);\n      } else {\n        text = await response.text();\n      }\n      messageListeners.forEach(cb => cb({\n        type: MessageTypeBGtoCS.FETCH_RESPONSE,\n        data: text,\n        error: null,\n        id\n      }));\n    } catch (error) {\n      console.error(error);\n      messageListeners.forEach(cb => cb({\n        type: MessageTypeBGtoCS.FETCH_RESPONSE,\n        data: null,\n        error,\n        id\n      }));\n    }\n  }\n}\nfunction addMessageListener(callback) {\n  messageListeners.add(callback);\n}\nif (typeof chrome.runtime.sendMessage === \"function\") {\n  const nativeSendMessage = chrome.runtime.sendMessage;\n  chrome.runtime.sendMessage = (...args) => {\n    sendMessage(...args);\n    nativeSendMessage.apply(chrome.runtime, args);\n  };\n} else {\n  chrome.runtime.sendMessage = sendMessage;\n}\nif (!chrome.runtime.onMessage) {\n  chrome.runtime.onMessage = {};\n}\nif (typeof chrome.runtime.onMessage.addListener === \"function\") {\n  const nativeAddListener = chrome.runtime.onMessage.addListener;\n  chrome.runtime.onMessage.addListener = (...args) => {\n    addMessageListener(args[0]);\n    nativeAddListener.apply(chrome.runtime.onMessage, args);\n  };\n} else {\n  chrome.runtime.onMessage.addListener = (...args) => addMessageListener(args[0]);\n}\nvar ThemeEngine;\n(function (ThemeEngine) {\n  ThemeEngine[\"cssFilter\"] = \"cssFilter\";\n  ThemeEngine[\"svgFilter\"] = \"svgFilter\";\n  ThemeEngine[\"staticTheme\"] = \"staticTheme\";\n  ThemeEngine[\"dynamicTheme\"] = \"dynamicTheme\";\n})(ThemeEngine || (ThemeEngine = {}));\nvar AutomationMode;\n(function (AutomationMode) {\n  AutomationMode[\"NONE\"] = \"\";\n  AutomationMode[\"TIME\"] = \"time\";\n  AutomationMode[\"SYSTEM\"] = \"system\";\n  AutomationMode[\"LOCATION\"] = \"location\";\n})(AutomationMode || (AutomationMode = {}));\nconst DEFAULT_COLORS = {\n  darkScheme: {\n    background: \"#181a1b\",\n    text: \"#e8e6e3\"\n  },\n  lightScheme: {\n    background: \"#dcdad7\",\n    text: \"#181a1b\"\n  }\n};\nconst DEFAULT_THEME = {\n  mode: 1,\n  brightness: 100,\n  contrast: 100,\n  grayscale: 0,\n  sepia: 0,\n  useFont: false,\n  fontFamily: isMacOS ? \"Helvetica Neue\" : isWindows ? \"Segoe UI\" : \"Open Sans\",\n  textStroke: 0,\n  engine: ThemeEngine.dynamicTheme,\n  stylesheet: \"\",\n  darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,\n  darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,\n  lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,\n  lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,\n  scrollbarColor: \"\",\n  selectionColor: \"auto\",\n  styleSystemControls: !isCSSColorSchemePropSupported,\n  lightColorScheme: \"Default\",\n  darkColorScheme: \"Default\",\n  immediateModify: false\n};\nconst filterModeSites = [\"*.officeapps.live.com\", \"*.sharepoint.com\", \"docs.google.com\", \"onedrive.live.com\"];\n({\n  customThemes: filterModeSites.map(url => {\n    const engine = ThemeEngine.cssFilter;\n    return {\n      url: [url],\n      theme: {\n        ...DEFAULT_THEME,\n        engine\n      },\n      builtIn: true\n    };\n  }),\n  automation: {\n    mode: AutomationMode.NONE\n  }\n});\nfunction getMatches(regex, input, group = 0) {\n  const matches = [];\n  let m;\n  while (m = regex.exec(input)) {\n    matches.push(m[group]);\n  }\n  return matches;\n}\nfunction getMatchesWithOffsets(regex, input, group = 0) {\n  const matches = [];\n  let m;\n  while (m = regex.exec(input)) {\n    matches.push({\n      text: m[group],\n      offset: m.index\n    });\n  }\n  return matches;\n}\nfunction getHashCode(text) {\n  const len = text.length;\n  let hash = 0;\n  for (let i = 0; i < len; i++) {\n    const c = text.charCodeAt(i);\n    hash = (hash << 5) - hash + c & 4294967295;\n  }\n  return hash;\n}\nfunction escapeRegExpSpecialChars(input) {\n  return input.replaceAll(/[\\^$.*+?\\(\\)\\[\\]{}|\\-\\\\]/g, \"\\\\$&\");\n}\nfunction getParenthesesRange(input, searchStartIndex = 0) {\n  return getOpenCloseRange(input, searchStartIndex, \"(\", \")\", []);\n}\nfunction getOpenCloseRange(input, searchStartIndex, openToken, closeToken, excludeRanges) {\n  let indexOf;\n  if (excludeRanges.length === 0) {\n    indexOf = (token, pos) => input.indexOf(token, pos);\n  } else {\n    indexOf = (token, pos) => indexOfExcluding(input, token, pos, excludeRanges);\n  }\n  const {\n    length\n  } = input;\n  let depth = 0;\n  let firstOpenIndex = -1;\n  for (let i = searchStartIndex; i < length; i++) {\n    if (depth === 0) {\n      const openIndex = indexOf(openToken, i);\n      if (openIndex < 0) {\n        break;\n      }\n      firstOpenIndex = openIndex;\n      depth++;\n      i = openIndex;\n    } else {\n      const closeIndex = indexOf(closeToken, i);\n      if (closeIndex < 0) {\n        break;\n      }\n      const openIndex = indexOf(openToken, i);\n      if (openIndex < 0 || closeIndex <= openIndex) {\n        depth--;\n        if (depth === 0) {\n          return {\n            start: firstOpenIndex,\n            end: closeIndex + 1\n          };\n        }\n        i = closeIndex;\n      } else {\n        depth++;\n        i = openIndex;\n      }\n    }\n  }\n  return null;\n}\nfunction indexOfExcluding(input, search, position, excludeRanges) {\n  const i = input.indexOf(search, position);\n  const exclusion = excludeRanges.find(r => i >= r.start && i < r.end);\n  if (exclusion) {\n    return indexOfExcluding(input, search, exclusion.end, excludeRanges);\n  }\n  return i;\n}\nfunction splitExcluding(input, separator, excludeRanges) {\n  const parts = [];\n  let commaIndex = -1;\n  let currIndex = 0;\n  while ((commaIndex = indexOfExcluding(input, separator, currIndex, excludeRanges)) >= 0) {\n    parts.push(input.substring(currIndex, commaIndex).trim());\n    currIndex = commaIndex + 1;\n  }\n  parts.push(input.substring(currIndex).trim());\n  return parts;\n}\nlet anchor;\nconst parsedURLCache = new Map();\nfunction fixBaseURL($url) {\n  if (!anchor) {\n    anchor = document.createElement(\"a\");\n  }\n  anchor.href = $url;\n  return anchor.href;\n}\nfunction parseURL($url, $base = null) {\n  const key = `${$url}${$base ? `;${$base}` : \"\"}`;\n  if (parsedURLCache.has(key)) {\n    return parsedURLCache.get(key);\n  }\n  if ($base) {\n    const parsedURL = new URL($url, fixBaseURL($base));\n    parsedURLCache.set(key, parsedURL);\n    return parsedURL;\n  }\n  const parsedURL = new URL(fixBaseURL($url));\n  parsedURLCache.set($url, parsedURL);\n  return parsedURL;\n}\nfunction getAbsoluteURL($base, $relative) {\n  if ($relative.match(/^data\\\\?\\:/)) {\n    return $relative;\n  }\n  if (/^\\/\\//.test($relative)) {\n    return `${location.protocol}${$relative}`;\n  }\n  const b = parseURL($base);\n  const a = parseURL($relative, b.href);\n  return a.href;\n}\nfunction isRelativeHrefOnAbsolutePath(href) {\n  if (href.startsWith(\"data:\")) {\n    return true;\n  }\n  const url = parseURL(href);\n  if (url.protocol !== location.protocol) {\n    return false;\n  }\n  if (url.hostname !== location.hostname) {\n    return false;\n  }\n  if (url.port !== location.port) {\n    return false;\n  }\n  return url.pathname === location.pathname;\n}\nconst excludedSelectors = [\"pre\", \"pre *\", \"code\", '[aria-hidden=\"true\"]', '[class*=\"fa-\"]', \".fa\", \".fab\", \".fad\", \".fal\", \".far\", \".fas\", \".fass\", \".fasr\", \".fat\", \".icofont\", '[style*=\"font-\"]', '[class*=\"icon\"]', '[class*=\"Icon\"]', '[class*=\"symbol\"]', '[class*=\"Symbol\"]', \".glyphicon\", '[class*=\"material-symbol\"]', '[class*=\"material-icon\"]', \"mu\", '[class*=\"mu-\"]', \".typcn\", '[class*=\"vjs-\"]'];\nfunction createTextStyle(config) {\n  const lines = [];\n  lines.push(`*:not(${excludedSelectors.join(\", \")}) {`);\n  if (config.useFont && config.fontFamily) {\n    lines.push(`  font-family: ${config.fontFamily} !important;`);\n  }\n  if (config.textStroke > 0) {\n    lines.push(`  -webkit-text-stroke: ${config.textStroke}px !important;`);\n    lines.push(`  text-stroke: ${config.textStroke}px !important;`);\n  }\n  lines.push(\"}\");\n  return lines.join(\"\\n\");\n}\nfunction isArrayLike(items) {\n  return items.length != null;\n}\nfunction forEach(items, iterator) {\n  if (isArrayLike(items)) {\n    for (let i = 0, len = items.length; i < len; i++) {\n      iterator(items[i]);\n    }\n  } else {\n    for (const item of items) {\n      iterator(item);\n    }\n  }\n}\nfunction push(array, addition) {\n  forEach(addition, a => array.push(a));\n}\nfunction toArray(items) {\n  const results = [];\n  for (let i = 0, len = items.length; i < len; i++) {\n    results.push(items[i]);\n  }\n  return results;\n}\nfunction scale(x, inLow, inHigh, outLow, outHigh) {\n  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;\n}\nfunction clamp(x, min, max) {\n  return Math.min(max, Math.max(min, x));\n}\nfunction multiplyMatrices(m1, m2) {\n  const result = [];\n  for (let i = 0, len = m1.length; i < len; i++) {\n    result[i] = [];\n    for (let j = 0, len2 = m2[0].length; j < len2; j++) {\n      let sum = 0;\n      for (let k = 0, len3 = m1[0].length; k < len3; k++) {\n        sum += m1[i][k] * m2[k][j];\n      }\n      result[i][j] = sum;\n    }\n  }\n  return result;\n}\nfunction createFilterMatrix(config) {\n  let m = Matrix.identity();\n  if (config.sepia !== 0) {\n    m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));\n  }\n  if (config.grayscale !== 0) {\n    m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));\n  }\n  if (config.contrast !== 100) {\n    m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));\n  }\n  if (config.brightness !== 100) {\n    m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));\n  }\n  if (config.mode === 1) {\n    m = multiplyMatrices(m, Matrix.invertNHue());\n  }\n  return m;\n}\nfunction applyColorMatrix([r, g, b], matrix) {\n  const rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];\n  const result = multiplyMatrices(matrix, rgb);\n  return [0, 1, 2].map(i => clamp(Math.round(result[i][0] * 255), 0, 255));\n}\nconst Matrix = {\n  identity() {\n    return [[1, 0, 0, 0, 0], [0, 1, 0, 0, 0], [0, 0, 1, 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  invertNHue() {\n    return [[0.333, -0.667, -0.667, 0, 1], [-0.667, 0.333, -0.667, 0, 1], [-0.667, -0.667, 0.333, 0, 1], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  brightness(v) {\n    return [[v, 0, 0, 0, 0], [0, v, 0, 0, 0], [0, 0, v, 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  contrast(v) {\n    const t = (1 - v) / 2;\n    return [[v, 0, 0, 0, t], [0, v, 0, 0, t], [0, 0, v, 0, t], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  sepia(v) {\n    return [[0.393 + 0.607 * (1 - v), 0.769 - 0.769 * (1 - v), 0.189 - 0.189 * (1 - v), 0, 0], [0.349 - 0.349 * (1 - v), 0.686 + 0.314 * (1 - v), 0.168 - 0.168 * (1 - v), 0, 0], [0.272 - 0.272 * (1 - v), 0.534 - 0.534 * (1 - v), 0.131 + 0.869 * (1 - v), 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  grayscale(v) {\n    return [[0.2126 + 0.7874 * (1 - v), 0.7152 - 0.7152 * (1 - v), 0.0722 - 0.0722 * (1 - v), 0, 0], [0.2126 - 0.2126 * (1 - v), 0.7152 + 0.2848 * (1 - v), 0.0722 - 0.0722 * (1 - v), 0, 0], [0.2126 - 0.2126 * (1 - v), 0.7152 - 0.7152 * (1 - v), 0.0722 + 0.9278 * (1 - v), 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  }\n};\nvar FilterMode;\n(function (FilterMode) {\n  FilterMode[FilterMode[\"light\"] = 0] = \"light\";\n  FilterMode[FilterMode[\"dark\"] = 1] = \"dark\";\n})(FilterMode || (FilterMode = {}));\nfunction getCSSFilterValue(config) {\n  const filters = [];\n  if (config.mode === FilterMode.dark) {\n    filters.push(\"invert(100%) hue-rotate(180deg)\");\n  }\n  if (config.brightness !== 100) {\n    filters.push(`brightness(${config.brightness}%)`);\n  }\n  if (config.contrast !== 100) {\n    filters.push(`contrast(${config.contrast}%)`);\n  }\n  if (config.grayscale !== 0) {\n    filters.push(`grayscale(${config.grayscale}%)`);\n  }\n  if (config.sepia !== 0) {\n    filters.push(`sepia(${config.sepia}%)`);\n  }\n  if (filters.length === 0) {\n    return null;\n  }\n  return filters.join(\" \");\n}\nfunction evalMath(expression) {\n  const rpnStack = [];\n  const workingStack = [];\n  let lastToken;\n  for (let i = 0, len = expression.length; i < len; i++) {\n    const token = expression[i];\n    if (!token || token === \" \") {\n      continue;\n    }\n    if (operators.has(token)) {\n      const op = operators.get(token);\n      while (workingStack.length) {\n        const currentOp = operators.get(workingStack[0]);\n        if (!currentOp) {\n          break;\n        }\n        if (op.lessOrEqualThan(currentOp)) {\n          rpnStack.push(workingStack.shift());\n        } else {\n          break;\n        }\n      }\n      workingStack.unshift(token);\n    } else if (!lastToken || operators.has(lastToken)) {\n      rpnStack.push(token);\n    } else {\n      rpnStack[rpnStack.length - 1] += token;\n    }\n    lastToken = token;\n  }\n  rpnStack.push(...workingStack);\n  const stack = [];\n  for (let i = 0, len = rpnStack.length; i < len; i++) {\n    const op = operators.get(rpnStack[i]);\n    if (op) {\n      const args = stack.splice(0, 2);\n      stack.push(op.exec(args[1], args[0]));\n    } else {\n      stack.unshift(parseFloat(rpnStack[i]));\n    }\n  }\n  return stack[0];\n}\nclass Operator {\n  constructor(precedence, method) {\n    this.precendce = precedence;\n    this.execMethod = method;\n  }\n  exec(left, right) {\n    return this.execMethod(left, right);\n  }\n  lessOrEqualThan(op) {\n    return this.precendce <= op.precendce;\n  }\n}\nconst operators = new Map([[\"+\", new Operator(1, (left, right) => left + right)], [\"-\", new Operator(1, (left, right) => left - right)], [\"*\", new Operator(2, (left, right) => left * right)], [\"/\", new Operator(2, (left, right) => left / right)]]);\nconst isSystemDarkModeEnabled = () => matchMedia(\"(prefers-color-scheme: dark)\").matches;\nconst hslaParseCache = new Map();\nconst rgbaParseCache = new Map();\nfunction parseColorWithCache($color) {\n  $color = $color.trim();\n  if (rgbaParseCache.has($color)) {\n    return rgbaParseCache.get($color);\n  }\n  if ($color.includes(\"calc(\")) {\n    $color = lowerCalcExpression($color);\n  }\n  const color = parse($color);\n  if (color) {\n    rgbaParseCache.set($color, color);\n    return color;\n  }\n  return null;\n}\nfunction parseToHSLWithCache(color) {\n  if (hslaParseCache.has(color)) {\n    return hslaParseCache.get(color);\n  }\n  const rgb = parseColorWithCache(color);\n  if (!rgb) {\n    return null;\n  }\n  const hsl = rgbToHSL(rgb);\n  hslaParseCache.set(color, hsl);\n  return hsl;\n}\nfunction clearColorCache() {\n  hslaParseCache.clear();\n  rgbaParseCache.clear();\n}\nfunction hslToRGB({\n  h,\n  s,\n  l,\n  a = 1\n}) {\n  if (s === 0) {\n    const [r, b, g] = [l, l, l].map(x => Math.round(x * 255));\n    return {\n      r,\n      g,\n      b,\n      a\n    };\n  }\n  const c = (1 - Math.abs(2 * l - 1)) * s;\n  const x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  const m = l - c / 2;\n  const [r, g, b] = (h < 60 ? [c, x, 0] : h < 120 ? [x, c, 0] : h < 180 ? [0, c, x] : h < 240 ? [0, x, c] : h < 300 ? [x, 0, c] : [c, 0, x]).map(n => Math.round((n + m) * 255));\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\nfunction rgbToHSL({\n  r: r255,\n  g: g255,\n  b: b255,\n  a = 1\n}) {\n  const r = r255 / 255;\n  const g = g255 / 255;\n  const b = b255 / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const c = max - min;\n  const l = (max + min) / 2;\n  if (c === 0) {\n    return {\n      h: 0,\n      s: 0,\n      l,\n      a\n    };\n  }\n  let h = (max === r ? (g - b) / c % 6 : max === g ? (b - r) / c + 2 : (r - g) / c + 4) * 60;\n  if (h < 0) {\n    h += 360;\n  }\n  const s = c / (1 - Math.abs(2 * l - 1));\n  return {\n    h,\n    s,\n    l,\n    a\n  };\n}\nfunction toFixed(n, digits = 0) {\n  const fixed = n.toFixed(digits);\n  if (digits === 0) {\n    return fixed;\n  }\n  const dot = fixed.indexOf(\".\");\n  if (dot >= 0) {\n    const zerosMatch = fixed.match(/0+$/);\n    if (zerosMatch) {\n      if (zerosMatch.index === dot + 1) {\n        return fixed.substring(0, dot);\n      }\n      return fixed.substring(0, zerosMatch.index);\n    }\n  }\n  return fixed;\n}\nfunction rgbToString(rgb) {\n  const {\n    r,\n    g,\n    b,\n    a\n  } = rgb;\n  if (a != null && a < 1) {\n    return `rgba(${toFixed(r)}, ${toFixed(g)}, ${toFixed(b)}, ${toFixed(a, 2)})`;\n  }\n  return `rgb(${toFixed(r)}, ${toFixed(g)}, ${toFixed(b)})`;\n}\nfunction rgbToHexString({\n  r,\n  g,\n  b,\n  a\n}) {\n  return `#${(a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b]).map(x => {\n    return `${x < 16 ? \"0\" : \"\"}${x.toString(16)}`;\n  }).join(\"\")}`;\n}\nfunction hslToString(hsl) {\n  const {\n    h,\n    s,\n    l,\n    a\n  } = hsl;\n  if (a != null && a < 1) {\n    return `hsla(${toFixed(h)}, ${toFixed(s * 100)}%, ${toFixed(l * 100)}%, ${toFixed(a, 2)})`;\n  }\n  return `hsl(${toFixed(h)}, ${toFixed(s * 100)}%, ${toFixed(l * 100)}%)`;\n}\nconst rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;\nconst hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;\nconst hexMatch = /^#[0-9a-f]+$/i;\nconst supportedColorFuncs = [\"color\", \"color-mix\", \"hwb\", \"lab\", \"lch\", \"oklab\", \"oklch\"];\nfunction parse($color) {\n  const c = $color.trim().toLowerCase();\n  if (c.includes(\"(from \")) {\n    if (c.indexOf(\"(from\") !== c.lastIndexOf(\"(from\")) {\n      return null;\n    }\n    return domParseColor(c);\n  }\n  if (c.match(rgbMatch)) {\n    if (c.startsWith(\"rgb(#\") || c.startsWith(\"rgba(#\")) {\n      if (c.lastIndexOf(\"rgb\") > 0) {\n        return null;\n      }\n      return domParseColor(c);\n    }\n    return parseRGB(c);\n  }\n  if (c.match(hslMatch)) {\n    return parseHSL(c);\n  }\n  if (c.match(hexMatch)) {\n    return parseHex(c);\n  }\n  if (knownColors.has(c)) {\n    return getColorByName(c);\n  }\n  if (systemColors.has(c)) {\n    return getSystemColor(c);\n  }\n  if (c === \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0\n    };\n  }\n  if (c.endsWith(\")\") && supportedColorFuncs.some(fn => c.startsWith(fn) && c[fn.length] === \"(\" && c.lastIndexOf(fn) === 0)) {\n    return domParseColor(c);\n  }\n  if (c.startsWith(\"light-dark(\") && c.endsWith(\")\")) {\n    const match = c.match(/^light-dark\\(\\s*([a-z]+(\\(.*\\))?),\\s*([a-z]+(\\(.*\\))?)\\s*\\)$/);\n    if (match) {\n      const schemeColor = isSystemDarkModeEnabled() ? match[3] : match[1];\n      return parse(schemeColor);\n    }\n  }\n  return null;\n}\nfunction getNumbers($color) {\n  const numbers = [];\n  let prevPos = 0;\n  let isMining = false;\n  const startIndex = $color.indexOf(\"(\");\n  $color = $color.substring(startIndex + 1, $color.length - 1);\n  for (let i = 0; i < $color.length; i++) {\n    const c = $color[i];\n    if (c >= \"0\" && c <= \"9\" || c === \".\" || c === \"+\" || c === \"-\") {\n      isMining = true;\n    } else if (isMining && (c === \" \" || c === \",\" || c === \"/\")) {\n      numbers.push($color.substring(prevPos, i));\n      isMining = false;\n      prevPos = i + 1;\n    } else if (!isMining) {\n      prevPos = i + 1;\n    }\n  }\n  if (isMining) {\n    numbers.push($color.substring(prevPos, $color.length));\n  }\n  return numbers;\n}\nfunction getNumbersFromString(str, range, units) {\n  const raw = getNumbers(str);\n  const unitsList = Object.entries(units);\n  const numbers = raw.map(r => r.trim()).map((r, i) => {\n    let n;\n    const unit = unitsList.find(([u]) => r.endsWith(u));\n    if (unit) {\n      n = parseFloat(r.substring(0, r.length - unit[0].length)) / unit[1] * range[i];\n    } else {\n      n = parseFloat(r);\n    }\n    if (range[i] > 1) {\n      return Math.round(n);\n    }\n    return n;\n  });\n  return numbers;\n}\nconst rgbRange = [255, 255, 255, 1];\nconst rgbUnits = {\n  \"%\": 100\n};\nfunction parseRGB($rgb) {\n  const [r, g, b, a = 1] = getNumbersFromString($rgb, rgbRange, rgbUnits);\n  if (r == null || g == null || b == null || a == null) {\n    return null;\n  }\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\nconst hslRange = [360, 1, 1, 1];\nconst hslUnits = {\n  \"%\": 100,\n  \"deg\": 360,\n  \"rad\": 2 * Math.PI,\n  \"turn\": 1\n};\nfunction parseHSL($hsl) {\n  const [h, s, l, a = 1] = getNumbersFromString($hsl, hslRange, hslUnits);\n  if (h == null || s == null || l == null || a == null) {\n    return null;\n  }\n  return hslToRGB({\n    h,\n    s,\n    l,\n    a\n  });\n}\nfunction parseHex($hex) {\n  const h = $hex.substring(1);\n  switch (h.length) {\n    case 3:\n    case 4:\n      {\n        const [r, g, b] = [0, 1, 2].map(i => parseInt(`${h[i]}${h[i]}`, 16));\n        const a = h.length === 3 ? 1 : parseInt(`${h[3]}${h[3]}`, 16) / 255;\n        return {\n          r,\n          g,\n          b,\n          a\n        };\n      }\n    case 6:\n    case 8:\n      {\n        const [r, g, b] = [0, 2, 4].map(i => parseInt(h.substring(i, i + 2), 16));\n        const a = h.length === 6 ? 1 : parseInt(h.substring(6, 8), 16) / 255;\n        return {\n          r,\n          g,\n          b,\n          a\n        };\n      }\n  }\n  return null;\n}\nfunction getColorByName($color) {\n  const n = knownColors.get($color);\n  return {\n    r: n >> 16 & 255,\n    g: n >> 8 & 255,\n    b: n >> 0 & 255,\n    a: 1\n  };\n}\nfunction getSystemColor($color) {\n  const n = systemColors.get($color);\n  return {\n    r: n >> 16 & 255,\n    g: n >> 8 & 255,\n    b: n >> 0 & 255,\n    a: 1\n  };\n}\nfunction lowerCalcExpression(color) {\n  let searchIndex = 0;\n  const replaceBetweenIndices = (start, end, replacement) => {\n    color = color.substring(0, start) + replacement + color.substring(end);\n  };\n  while ((searchIndex = color.indexOf(\"calc(\")) !== -1) {\n    const range = getParenthesesRange(color, searchIndex);\n    if (!range) {\n      break;\n    }\n    let slice = color.slice(range.start + 1, range.end - 1);\n    const includesPercentage = slice.includes(\"%\");\n    slice = slice.split(\"%\").join(\"\");\n    const output = Math.round(evalMath(slice));\n    replaceBetweenIndices(range.start - 4, range.end, output + (includesPercentage ? \"%\" : \"\"));\n  }\n  return color;\n}\nconst knownColors = new Map(Object.entries({\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgrey: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  grey: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgrey: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n}));\nconst systemColors = new Map(Object.entries({\n  \"ActiveBorder\": 0x3b99fc,\n  \"ActiveCaption\": 0x000000,\n  \"AppWorkspace\": 0xaaaaaa,\n  \"Background\": 0x6363ce,\n  \"ButtonFace\": 0xffffff,\n  \"ButtonHighlight\": 0xe9e9e9,\n  \"ButtonShadow\": 0x9fa09f,\n  \"ButtonText\": 0x000000,\n  \"CaptionText\": 0x000000,\n  \"GrayText\": 0x7f7f7f,\n  \"Highlight\": 0xb2d7ff,\n  \"HighlightText\": 0x000000,\n  \"InactiveBorder\": 0xffffff,\n  \"InactiveCaption\": 0xffffff,\n  \"InactiveCaptionText\": 0x000000,\n  \"InfoBackground\": 0xfbfcc5,\n  \"InfoText\": 0x000000,\n  \"Menu\": 0xf6f6f6,\n  \"MenuText\": 0xffffff,\n  \"Scrollbar\": 0xaaaaaa,\n  \"ThreeDDarkShadow\": 0x000000,\n  \"ThreeDFace\": 0xc0c0c0,\n  \"ThreeDHighlight\": 0xffffff,\n  \"ThreeDLightShadow\": 0xffffff,\n  \"ThreeDShadow\": 0x000000,\n  \"Window\": 0xececec,\n  \"WindowFrame\": 0xaaaaaa,\n  \"WindowText\": 0x000000,\n  \"-webkit-focus-ring-color\": 0xe59700\n}).map(([key, value]) => [key.toLowerCase(), value]));\nfunction getSRGBLightness(r, g, b) {\n  return (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\n}\nlet canvas$1;\nlet context$1;\nfunction domParseColor($color) {\n  if (!context$1) {\n    canvas$1 = document.createElement(\"canvas\");\n    canvas$1.width = 1;\n    canvas$1.height = 1;\n    context$1 = canvas$1.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n  }\n  context$1.fillStyle = $color;\n  context$1.fillRect(0, 0, 1, 1);\n  const d = context$1.getImageData(0, 0, 1, 1).data;\n  const color = `rgba(${d[0]}, ${d[1]}, ${d[2]}, ${(d[3] / 255).toFixed(2)})`;\n  return parseRGB(color);\n}\nfunction throttle(callback) {\n  let pending = false;\n  let frameId = null;\n  let lastArgs;\n  const throttled = (...args) => {\n    lastArgs = args;\n    if (frameId) {\n      pending = true;\n    } else {\n      callback(...lastArgs);\n      frameId = requestAnimationFrame(() => {\n        frameId = null;\n        if (pending) {\n          callback(...lastArgs);\n          pending = false;\n        }\n      });\n    }\n  };\n  const cancel = () => {\n    cancelAnimationFrame(frameId);\n    pending = false;\n    frameId = null;\n  };\n  return Object.assign(throttled, {\n    cancel\n  });\n}\nfunction createAsyncTasksQueue() {\n  const tasks = [];\n  let frameId = null;\n  function runTasks() {\n    let task;\n    while (task = tasks.shift()) {\n      task();\n    }\n    frameId = null;\n  }\n  function add(task) {\n    tasks.push(task);\n    if (!frameId) {\n      frameId = requestAnimationFrame(runTasks);\n    }\n  }\n  function cancel() {\n    tasks.splice(0);\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  }\n  return {\n    add,\n    cancel\n  };\n}\nconst delayTokens = new Set();\nfunction requestAnimationFrameOnce(token, callback) {\n  if (delayTokens.has(token)) {\n    return;\n  }\n  delayTokens.add(token);\n  requestAnimationFrame(() => {\n    delayTokens.delete(token);\n    callback();\n  });\n}\nfunction hexify(number) {\n  return (number < 16 ? \"0\" : \"\") + number.toString(16);\n}\nfunction generateUID() {\n  if (\"randomUUID\" in crypto) {\n    const uuid = crypto.randomUUID();\n    return uuid.substring(0, 8) + uuid.substring(9, 13) + uuid.substring(14, 18) + uuid.substring(19, 23) + uuid.substring(24);\n  }\n  if (\"getRandomValues\" in crypto) {\n    return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(x => hexify(x)).join(\"\");\n  }\n  return Math.floor(Math.random() * 2 ** 55).toString(36);\n}\nlet documentVisibilityListener = null;\nlet documentIsVisible_ = !document.hidden;\nconst listenerOptions = {\n  capture: true,\n  passive: true\n};\nfunction watchForDocumentVisibility() {\n  document.addEventListener(\"visibilitychange\", documentVisibilityListener, listenerOptions);\n  window.addEventListener(\"pageshow\", documentVisibilityListener, listenerOptions);\n  window.addEventListener(\"focus\", documentVisibilityListener, listenerOptions);\n}\nfunction stopWatchingForDocumentVisibility() {\n  document.removeEventListener(\"visibilitychange\", documentVisibilityListener, listenerOptions);\n  window.removeEventListener(\"pageshow\", documentVisibilityListener, listenerOptions);\n  window.removeEventListener(\"focus\", documentVisibilityListener, listenerOptions);\n}\nfunction setDocumentVisibilityListener(callback) {\n  const alreadyWatching = Boolean(documentVisibilityListener);\n  documentVisibilityListener = () => {\n    if (!document.hidden) {\n      removeDocumentVisibilityListener();\n      callback();\n      documentIsVisible_ = true;\n    }\n  };\n  if (!alreadyWatching) {\n    watchForDocumentVisibility();\n  }\n}\nfunction removeDocumentVisibilityListener() {\n  stopWatchingForDocumentVisibility();\n  documentVisibilityListener = null;\n}\nfunction documentIsVisible() {\n  return documentIsVisible_;\n}\nfunction getDuration(time) {\n  let duration = 0;\n  if (time.seconds) {\n    duration += time.seconds * 1000;\n  }\n  if (time.minutes) {\n    duration += time.minutes * 60 * 1000;\n  }\n  if (time.hours) {\n    duration += time.hours * 60 * 60 * 1000;\n  }\n  if (time.days) {\n    duration += time.days * 24 * 60 * 60 * 1000;\n  }\n  return duration;\n}\nfunction logInfo(...args) {}\nfunction logWarn(...args) {}\nfunction logAssert(...args) {}\nfunction ASSERT(description, condition) {\n  if (!condition) {\n    logAssert(description);\n  }\n}\nfunction removeNode(node) {\n  node && node.parentNode && node.parentNode.removeChild(node);\n}\nfunction watchForNodePosition(node, mode, onRestore = Function.prototype) {\n  const MAX_ATTEMPTS_COUNT = 10;\n  const RETRY_TIMEOUT = getDuration({\n    seconds: 2\n  });\n  const ATTEMPTS_INTERVAL = getDuration({\n    seconds: 10\n  });\n  let prevSibling = node.previousSibling;\n  let parent = node.parentNode;\n  if (!parent) {\n    throw new Error(\"Unable to watch for node position: parent element not found\");\n  }\n  if (mode === \"prev-sibling\" && !prevSibling) {\n    throw new Error(\"Unable to watch for node position: there is no previous sibling\");\n  }\n  let attempts = 0;\n  let start = null;\n  let timeoutId = null;\n  const restore = throttle(() => {\n    if (timeoutId) {\n      return;\n    }\n    attempts++;\n    const now = Date.now();\n    if (start == null) {\n      start = now;\n    } else if (attempts >= MAX_ATTEMPTS_COUNT) {\n      if (now - start < ATTEMPTS_INTERVAL) {\n        logWarn(`Node position watcher paused: retry in ${RETRY_TIMEOUT}ms`, node, prevSibling);\n        timeoutId = setTimeout(() => {\n          start = null;\n          attempts = 0;\n          timeoutId = null;\n          restore();\n        }, RETRY_TIMEOUT);\n        return;\n      }\n      start = now;\n      attempts = 1;\n    }\n    if (mode === \"head\") {\n      if (prevSibling && prevSibling.parentNode !== parent) {\n        logWarn(\"Sibling moved, moving node to the head end\", node, prevSibling, parent);\n        prevSibling = document.head.lastChild;\n      }\n    }\n    if (mode === \"prev-sibling\") {\n      if (prevSibling.parentNode == null) {\n        logWarn(\"Unable to restore node position: sibling was removed\", node, prevSibling, parent);\n        stop();\n        return;\n      }\n      if (prevSibling.parentNode !== parent) {\n        logWarn(\"Style was moved to another parent\", node, prevSibling, parent);\n        updateParent(prevSibling.parentNode);\n      }\n    }\n    if (mode === \"head\" && !parent.isConnected) {\n      parent = document.head;\n    }\n    logWarn(\"Restoring node position\", node, prevSibling, parent);\n    parent.insertBefore(node, prevSibling && prevSibling.isConnected ? prevSibling.nextSibling : parent.firstChild);\n    observer.takeRecords();\n    onRestore && onRestore();\n  });\n  const observer = new MutationObserver(() => {\n    if (mode === \"head\" && (node.parentNode !== parent || !node.parentNode.isConnected) || mode === \"prev-sibling\" && node.previousSibling !== prevSibling) {\n      restore();\n    }\n  });\n  const run = () => {\n    observer.observe(parent, {\n      childList: true\n    });\n  };\n  const stop = () => {\n    clearTimeout(timeoutId);\n    observer.disconnect();\n    restore.cancel();\n  };\n  const skip = () => {\n    observer.takeRecords();\n  };\n  const updateParent = parentNode => {\n    parent = parentNode;\n    stop();\n    run();\n  };\n  run();\n  return {\n    run,\n    stop,\n    skip\n  };\n}\nfunction iterateShadowHosts(root, iterator) {\n  if (root == null) {\n    return;\n  }\n  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      return node.shadowRoot == null ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;\n    }\n  });\n  for (let node = root.shadowRoot ? walker.currentNode : walker.nextNode(); node != null; node = walker.nextNode()) {\n    if (node.classList.contains(\"surfingkeys_hints_host\")) {\n      continue;\n    }\n    iterator(node);\n    iterateShadowHosts(node.shadowRoot, iterator);\n  }\n}\nlet isDOMReady = () => {\n  return document.readyState === \"complete\" || document.readyState === \"interactive\";\n};\nfunction setIsDOMReady(newFunc) {\n  isDOMReady = newFunc;\n}\nconst readyStateListeners = new Set();\nfunction addDOMReadyListener(listener) {\n  isDOMReady() ? listener() : readyStateListeners.add(listener);\n}\nfunction removeDOMReadyListener(listener) {\n  readyStateListeners.delete(listener);\n}\nfunction isReadyStateComplete() {\n  return document.readyState === \"complete\";\n}\nconst readyStateCompleteListeners = new Set();\nfunction addReadyStateCompleteListener(listener) {\n  isReadyStateComplete() ? listener() : readyStateCompleteListeners.add(listener);\n}\nfunction cleanReadyStateCompleteListeners() {\n  readyStateCompleteListeners.clear();\n}\nif (!isDOMReady()) {\n  const onReadyStateChange = () => {\n    if (isDOMReady()) {\n      readyStateListeners.forEach(listener => listener());\n      readyStateListeners.clear();\n      if (isReadyStateComplete()) {\n        document.removeEventListener(\"readystatechange\", onReadyStateChange);\n        readyStateCompleteListeners.forEach(listener => listener());\n        readyStateCompleteListeners.clear();\n      }\n    }\n  };\n  document.addEventListener(\"readystatechange\", onReadyStateChange);\n}\nconst HUGE_MUTATIONS_COUNT = 1000;\nfunction isHugeMutation(mutations) {\n  if (mutations.length > HUGE_MUTATIONS_COUNT) {\n    return true;\n  }\n  let addedNodesCount = 0;\n  for (let i = 0; i < mutations.length; i++) {\n    addedNodesCount += mutations[i].addedNodes.length;\n    if (addedNodesCount > HUGE_MUTATIONS_COUNT) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getElementsTreeOperations(mutations) {\n  const additions = new Set();\n  const deletions = new Set();\n  const moves = new Set();\n  mutations.forEach(m => {\n    forEach(m.addedNodes, n => {\n      if (n instanceof Element && n.isConnected) {\n        additions.add(n);\n      }\n    });\n    forEach(m.removedNodes, n => {\n      if (n instanceof Element) {\n        if (n.isConnected) {\n          moves.add(n);\n          additions.delete(n);\n        } else {\n          deletions.add(n);\n        }\n      }\n    });\n  });\n  const duplicateAdditions = [];\n  const duplicateDeletions = [];\n  additions.forEach(node => {\n    if (additions.has(node.parentElement)) {\n      duplicateAdditions.push(node);\n    }\n  });\n  deletions.forEach(node => {\n    if (deletions.has(node.parentElement)) {\n      duplicateDeletions.push(node);\n    }\n  });\n  duplicateAdditions.forEach(node => additions.delete(node));\n  duplicateDeletions.forEach(node => deletions.delete(node));\n  return {\n    additions,\n    moves,\n    deletions\n  };\n}\nconst optimizedTreeObservers = new Map();\nconst optimizedTreeCallbacks = new WeakMap();\nfunction createOptimizedTreeObserver(root, callbacks) {\n  let observer;\n  let observerCallbacks;\n  let domReadyListener;\n  if (optimizedTreeObservers.has(root)) {\n    observer = optimizedTreeObservers.get(root);\n    observerCallbacks = optimizedTreeCallbacks.get(observer);\n  } else {\n    let hadHugeMutationsBefore = false;\n    let subscribedForReadyState = false;\n    observer = new MutationObserver(mutations => {\n      if (isHugeMutation(mutations)) {\n        if (!hadHugeMutationsBefore || isDOMReady()) {\n          observerCallbacks.forEach(({\n            onHugeMutations\n          }) => onHugeMutations(root));\n        } else if (!subscribedForReadyState) {\n          domReadyListener = () => observerCallbacks.forEach(({\n            onHugeMutations\n          }) => onHugeMutations(root));\n          addDOMReadyListener(domReadyListener);\n          subscribedForReadyState = true;\n        }\n        hadHugeMutationsBefore = true;\n      } else {\n        const elementsOperations = getElementsTreeOperations(mutations);\n        observerCallbacks.forEach(({\n          onMinorMutations\n        }) => onMinorMutations(root, elementsOperations));\n      }\n    });\n    observer.observe(root, {\n      childList: true,\n      subtree: true\n    });\n    optimizedTreeObservers.set(root, observer);\n    observerCallbacks = new Set();\n    optimizedTreeCallbacks.set(observer, observerCallbacks);\n  }\n  observerCallbacks.add(callbacks);\n  return {\n    disconnect() {\n      observerCallbacks.delete(callbacks);\n      if (domReadyListener) {\n        removeDOMReadyListener(domReadyListener);\n      }\n      if (observerCallbacks.size === 0) {\n        observer.disconnect();\n        optimizedTreeCallbacks.delete(observer);\n        optimizedTreeObservers.delete(root);\n      }\n    }\n  };\n}\nfunction iterateCSSRules(rules, iterate, onImportError) {\n  forEach(rules, rule => {\n    if (isStyleRule(rule)) {\n      iterate(rule);\n      if (rule.cssRules?.length > 0) {\n        iterateCSSRules(rule.cssRules, iterate);\n      }\n    } else if (isImportRule(rule)) {\n      try {\n        iterateCSSRules(rule.styleSheet.cssRules, iterate, onImportError);\n      } catch (err) {\n        onImportError?.();\n      }\n    } else if (isMediaRule(rule)) {\n      const media = Array.from(rule.media);\n      const isScreenOrAllOrQuery = media.some(m => m.startsWith(\"screen\") || m.startsWith(\"all\") || m.startsWith(\"(\"));\n      const isPrintOrSpeech = media.some(m => m.startsWith(\"print\") || m.startsWith(\"speech\"));\n      if (isScreenOrAllOrQuery || !isPrintOrSpeech) {\n        iterateCSSRules(rule.cssRules, iterate, onImportError);\n      }\n    } else if (isSupportsRule(rule)) {\n      if (CSS.supports(rule.conditionText)) {\n        iterateCSSRules(rule.cssRules, iterate, onImportError);\n      }\n    } else if (isLayerRule(rule)) {\n      iterateCSSRules(rule.cssRules, iterate, onImportError);\n    } else {\n      logWarn(`CSSRule type not supported`, rule);\n    }\n  });\n}\nconst shorthandVarDependantProperties = [\"background\", \"border\", \"border-color\", \"border-bottom\", \"border-left\", \"border-right\", \"border-top\", \"outline\", \"outline-color\"];\nconst shorthandVarDepPropRegexps = isSafari ? shorthandVarDependantProperties.map(prop => {\n  const regexp = new RegExp(`${prop}:\\\\s*(.*?)\\\\s*;`);\n  return [prop, regexp];\n}) : null;\nfunction iterateCSSDeclarations(style, iterate) {\n  forEach(style, property => {\n    const value = style.getPropertyValue(property).trim();\n    if (!value) {\n      return;\n    }\n    iterate(property, value);\n  });\n  const cssText = style.cssText;\n  if (cssText.includes(\"var(\")) {\n    if (isSafari) {\n      shorthandVarDepPropRegexps.forEach(([prop, regexp]) => {\n        const match = cssText.match(regexp);\n        if (match && match[1]) {\n          const val = match[1].trim();\n          iterate(prop, val);\n        }\n      });\n    } else {\n      shorthandVarDependantProperties.forEach(prop => {\n        const val = style.getPropertyValue(prop);\n        if (val && val.includes(\"var(\")) {\n          iterate(prop, val);\n        }\n      });\n    }\n  }\n  if (cssText.includes(\"background-color: ;\") && !style.getPropertyValue(\"background\")) {\n    handleEmptyShorthand(\"background\", style, iterate);\n  }\n  if (cssText.includes(\"border-\") && cssText.includes(\"-color: ;\") && !style.getPropertyValue(\"border\")) {\n    handleEmptyShorthand(\"border\", style, iterate);\n  }\n}\nfunction handleEmptyShorthand(shorthand, style, iterate) {\n  const parentRule = style.parentRule;\n  if (isStyleRule(parentRule)) {\n    const sourceCSSText = parentRule.parentStyleSheet?.ownerNode?.textContent;\n    if (sourceCSSText) {\n      let escapedSelector = escapeRegExpSpecialChars(parentRule.selectorText);\n      escapedSelector = escapedSelector.replaceAll(/\\s+/g, \"\\\\s*\");\n      escapedSelector = escapedSelector.replaceAll(/::/g, \"::?\");\n      const regexp = new RegExp(`${escapedSelector}\\\\s*{[^}]*${shorthand}:\\\\s*([^;}]+)`);\n      const match = sourceCSSText.match(regexp);\n      if (match) {\n        iterate(shorthand, match[1]);\n      }\n    } else if (shorthand === \"background\") {\n      iterate(\"background-color\", \"#ffffff\");\n    }\n  }\n}\nconst cssURLRegex = /url\\((('.*?')|(\".*?\")|([^\\)]*?))\\)/g;\nconst cssImportRegex = /@import\\s*(url\\()?(('.+?')|(\".+?\")|([^\\)]*?))\\)? ?(screen)?;?/gi;\nfunction getCSSURLValue(cssURL) {\n  return cssURL.trim().replace(/[\\n\\r\\\\]+/g, \"\").replace(/^url\\((.*)\\)$/, \"$1\").trim().replace(/^\"(.*)\"$/, \"$1\").replace(/^'(.*)'$/, \"$1\").replace(/(?:\\\\(.))/g, \"$1\");\n}\nfunction getCSSBaseBath(url) {\n  const cssURL = parseURL(url);\n  return `${cssURL.origin}${cssURL.pathname.replace(/\\?.*$/, \"\").replace(/(\\/)([^\\/]+)$/i, \"$1\")}`;\n}\nfunction replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {\n  return $css.replace(cssURLRegex, match => {\n    try {\n      const url = getCSSURLValue(match);\n      const absoluteURL = getAbsoluteURL(cssBasePath, url);\n      const escapedURL = absoluteURL.replaceAll(\"'\", \"\\\\'\");\n      return `url('${escapedURL}')`;\n    } catch (err) {\n      logWarn(\"Not able to replace relative URL with Absolute URL, skipping\");\n      return match;\n    }\n  });\n}\nconst fontFaceRegex = /@font-face\\s*{[^}]*}/g;\nfunction replaceCSSFontFace($css) {\n  return $css.replace(fontFaceRegex, \"\");\n}\nconst styleRules = new WeakSet();\nconst importRules = new WeakSet();\nconst mediaRules = new WeakSet();\nconst supportsRules = new WeakSet();\nconst layerRules = new WeakSet();\nfunction isStyleRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return true;\n  }\n  if (rule.selectorText) {\n    styleRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isImportRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (importRules.has(rule)) {\n    return true;\n  }\n  if (rule.href) {\n    importRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isMediaRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (mediaRules.has(rule)) {\n    return true;\n  }\n  if (rule.media) {\n    mediaRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isSupportsRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (supportsRules.has(rule)) {\n    return true;\n  }\n  if (rule instanceof CSSSupportsRule) {\n    supportsRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isLayerRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (layerRules.has(rule)) {\n    return true;\n  }\n  if (isLayerRuleSupported && rule instanceof CSSLayerBlockRule) {\n    layerRules.add(rule);\n    return true;\n  }\n  return false;\n}\nconst sheetsScopes = new WeakMap();\nfunction defineSheetScope(sheet, node) {\n  sheetsScopes.set(sheet, node);\n}\nfunction getSheetScope(sheet) {\n  if (!sheet.ownerNode) {\n    return null;\n  }\n  if (sheetsScopes.has(sheet)) {\n    return sheetsScopes.get(sheet);\n  }\n  let node = sheet.ownerNode;\n  while (node) {\n    if (node instanceof ShadowRoot || node instanceof Document) {\n      defineSheetScope(sheet, node);\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return null;\n}\nlet variablesSheet;\nconst registeredColors = new Map();\nfunction registerVariablesSheet(sheet) {\n  variablesSheet = sheet;\n  const types = [\"background\", \"text\", \"border\"];\n  registeredColors.forEach(registered => {\n    types.forEach(type => {\n      if (registered[type]) {\n        const {\n          variable,\n          value\n        } = registered[type];\n        variablesSheet?.cssRules[0].style.setProperty(variable, value);\n      }\n    });\n  });\n}\nfunction releaseVariablesSheet() {\n  variablesSheet = null;\n  clearColorPalette();\n}\nfunction getRegisteredVariableValue(type, registered) {\n  return `var(${registered[type].variable}, ${registered[type].value})`;\n}\nfunction getRegisteredColor(type, parsed) {\n  const hex = rgbToHexString(parsed);\n  const registered = registeredColors.get(hex);\n  if (registered?.[type]) {\n    return getRegisteredVariableValue(type, registered);\n  }\n  return null;\n}\nfunction registerColor(type, parsed, value) {\n  const hex = rgbToHexString(parsed);\n  let registered;\n  if (registeredColors.has(hex)) {\n    registered = registeredColors.get(hex);\n  } else {\n    const parsed = parseColorWithCache(hex);\n    registered = {\n      parsed\n    };\n    registeredColors.set(hex, registered);\n  }\n  const variable = `--darkreader-${type}-${hex.replace(\"#\", \"\")}`;\n  registered[type] = {\n    variable,\n    value\n  };\n  if (variablesSheet?.cssRules[0]?.style) {\n    variablesSheet?.cssRules[0].style.setProperty(variable, value);\n  }\n  return getRegisteredVariableValue(type, registered);\n}\nfunction getColorPalette() {\n  const background = [];\n  const border = [];\n  const text = [];\n  registeredColors.forEach(registered => {\n    if (registered.background) {\n      background.push(registered.parsed);\n    }\n    if (registered.border) {\n      border.push(registered.parsed);\n    }\n    if (registered.text) {\n      text.push(registered.parsed);\n    }\n  });\n  return {\n    background,\n    border,\n    text\n  };\n}\nfunction clearColorPalette() {\n  registeredColors.clear();\n}\nfunction getBgPole(theme) {\n  const isDarkScheme = theme.mode === 1;\n  const prop = isDarkScheme ? \"darkSchemeBackgroundColor\" : \"lightSchemeBackgroundColor\";\n  return theme[prop];\n}\nfunction getFgPole(theme) {\n  const isDarkScheme = theme.mode === 1;\n  const prop = isDarkScheme ? \"darkSchemeTextColor\" : \"lightSchemeTextColor\";\n  return theme[prop];\n}\nconst colorModificationCache = new Map();\nfunction clearColorModificationCache() {\n  colorModificationCache.clear();\n}\nconst rgbCacheKeys = [\"r\", \"g\", \"b\", \"a\"];\nconst themeCacheKeys = [\"mode\", \"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"darkSchemeBackgroundColor\", \"darkSchemeTextColor\", \"lightSchemeBackgroundColor\", \"lightSchemeTextColor\"];\nfunction getCacheId(rgb, theme) {\n  let resultId = \"\";\n  rgbCacheKeys.forEach(key => {\n    resultId += `${rgb[key]};`;\n  });\n  themeCacheKeys.forEach(key => {\n    resultId += `${theme[key]};`;\n  });\n  return resultId;\n}\nfunction modifyColorWithCache(rgb, theme, modifyHSL, poleColor, anotherPoleColor) {\n  let fnCache;\n  if (colorModificationCache.has(modifyHSL)) {\n    fnCache = colorModificationCache.get(modifyHSL);\n  } else {\n    fnCache = new Map();\n    colorModificationCache.set(modifyHSL, fnCache);\n  }\n  const id = getCacheId(rgb, theme);\n  if (fnCache.has(id)) {\n    return fnCache.get(id);\n  }\n  const hsl = rgbToHSL(rgb);\n  const pole = poleColor == null ? null : parseToHSLWithCache(poleColor);\n  const anotherPole = anotherPoleColor == null ? null : parseToHSLWithCache(anotherPoleColor);\n  const modified = modifyHSL(hsl, pole, anotherPole);\n  const {\n    r,\n    g,\n    b,\n    a\n  } = hslToRGB(modified);\n  const matrix = createFilterMatrix({\n    ...theme,\n    mode: 0\n  });\n  const [rf, gf, bf] = applyColorMatrix([r, g, b], matrix);\n  const color = a === 1 ? rgbToHexString({\n    r: rf,\n    g: gf,\n    b: bf\n  }) : rgbToString({\n    r: rf,\n    g: gf,\n    b: bf,\n    a\n  });\n  fnCache.set(id, color);\n  return color;\n}\nfunction modifyAndRegisterColor(type, rgb, theme, modifier) {\n  const registered = getRegisteredColor(type, rgb);\n  if (registered) {\n    return registered;\n  }\n  const value = modifier(rgb, theme);\n  return registerColor(type, rgb, value);\n}\nfunction modifyLightSchemeColor(rgb, theme) {\n  const poleBg = getBgPole(theme);\n  const poleFg = getFgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyLightModeHSL, poleFg, poleBg);\n}\nfunction modifyLightModeHSL({\n  h,\n  s,\n  l,\n  a\n}, poleFg, poleBg) {\n  const isDark = l < 0.5;\n  let isNeutral;\n  if (isDark) {\n    isNeutral = l < 0.2 || s < 0.12;\n  } else {\n    const isBlue = h > 200 && h < 280;\n    isNeutral = s < 0.24 || l > 0.8 && isBlue;\n  }\n  let hx = h;\n  let sx = s;\n  if (isNeutral) {\n    if (isDark) {\n      hx = poleFg.h;\n      sx = poleFg.s;\n    } else {\n      hx = poleBg.h;\n      sx = poleBg.s;\n    }\n  }\n  const lx = scale(l, 0, 1, poleFg.l, poleBg.l);\n  return {\n    h: hx,\n    s: sx,\n    l: lx,\n    a\n  };\n}\nconst MAX_BG_LIGHTNESS = 0.4;\nfunction modifyBgHSL({\n  h,\n  s,\n  l,\n  a\n}, pole) {\n  const isDark = l < 0.5;\n  const isBlue = h > 200 && h < 280;\n  const isNeutral = s < 0.12 || l > 0.8 && isBlue;\n  if (isDark) {\n    const lx = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);\n    if (isNeutral) {\n      const hx = pole.h;\n      const sx = pole.s;\n      return {\n        h: hx,\n        s: sx,\n        l: lx,\n        a\n      };\n    }\n    return {\n      h,\n      s,\n      l: lx,\n      a\n    };\n  }\n  let lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);\n  if (isNeutral) {\n    const hx = pole.h;\n    const sx = pole.s;\n    return {\n      h: hx,\n      s: sx,\n      l: lx,\n      a\n    };\n  }\n  let hx = h;\n  const isYellow = h > 60 && h < 180;\n  if (isYellow) {\n    const isCloserToGreen = h > 120;\n    if (isCloserToGreen) {\n      hx = scale(h, 120, 180, 135, 180);\n    } else {\n      hx = scale(h, 60, 120, 60, 105);\n    }\n  }\n  if (hx > 40 && hx < 80) {\n    lx *= 0.75;\n  }\n  return {\n    h: hx,\n    s,\n    l: lx,\n    a\n  };\n}\nfunction _modifyBackgroundColor(rgb, theme) {\n  if (theme.mode === 0) {\n    return modifyLightSchemeColor(rgb, theme);\n  }\n  const pole = getBgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyBgHSL, pole);\n}\nfunction modifyBackgroundColor(rgb, theme, shouldRegisterColorVariable = true) {\n  if (!shouldRegisterColorVariable) {\n    return _modifyBackgroundColor(rgb, theme);\n  }\n  return modifyAndRegisterColor(\"background\", rgb, theme, _modifyBackgroundColor);\n}\nconst MIN_FG_LIGHTNESS = 0.55;\nfunction modifyBlueFgHue(hue) {\n  return scale(hue, 205, 245, 205, 220);\n}\nfunction modifyFgHSL({\n  h,\n  s,\n  l,\n  a\n}, pole) {\n  const isLight = l > 0.5;\n  const isNeutral = l < 0.2 || s < 0.24;\n  const isBlue = !isNeutral && h > 205 && h < 245;\n  if (isLight) {\n    const lx = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);\n    if (isNeutral) {\n      const hx = pole.h;\n      const sx = pole.s;\n      return {\n        h: hx,\n        s: sx,\n        l: lx,\n        a\n      };\n    }\n    let hx = h;\n    if (isBlue) {\n      hx = modifyBlueFgHue(h);\n    }\n    return {\n      h: hx,\n      s,\n      l: lx,\n      a\n    };\n  }\n  if (isNeutral) {\n    const hx = pole.h;\n    const sx = pole.s;\n    const lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\n    return {\n      h: hx,\n      s: sx,\n      l: lx,\n      a\n    };\n  }\n  let hx = h;\n  let lx;\n  if (isBlue) {\n    hx = modifyBlueFgHue(h);\n    lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));\n  } else {\n    lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\n  }\n  return {\n    h: hx,\n    s,\n    l: lx,\n    a\n  };\n}\nfunction _modifyForegroundColor(rgb, theme) {\n  if (theme.mode === 0) {\n    return modifyLightSchemeColor(rgb, theme);\n  }\n  const pole = getFgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyFgHSL, pole);\n}\nfunction modifyForegroundColor(rgb, theme, shouldRegisterColorVariable = true) {\n  if (!shouldRegisterColorVariable) {\n    return _modifyForegroundColor(rgb, theme);\n  }\n  return modifyAndRegisterColor(\"text\", rgb, theme, _modifyForegroundColor);\n}\nfunction modifyBorderHSL({\n  h,\n  s,\n  l,\n  a\n}, poleFg, poleBg) {\n  const isDark = l < 0.5;\n  const isNeutral = l < 0.2 || s < 0.24;\n  let hx = h;\n  let sx = s;\n  if (isNeutral) {\n    if (isDark) {\n      hx = poleFg.h;\n      sx = poleFg.s;\n    } else {\n      hx = poleBg.h;\n      sx = poleBg.s;\n    }\n  }\n  const lx = scale(l, 0, 1, 0.5, 0.2);\n  return {\n    h: hx,\n    s: sx,\n    l: lx,\n    a\n  };\n}\nfunction _modifyBorderColor(rgb, theme) {\n  if (theme.mode === 0) {\n    return modifyLightSchemeColor(rgb, theme);\n  }\n  const poleFg = getFgPole(theme);\n  const poleBg = getBgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyBorderHSL, poleFg, poleBg);\n}\nfunction modifyBorderColor(rgb, theme, shouldRegisterColorVariable = true) {\n  if (!shouldRegisterColorVariable) {\n    return _modifyBorderColor(rgb, theme);\n  }\n  return modifyAndRegisterColor(\"border\", rgb, theme, _modifyBorderColor);\n}\nfunction modifyShadowColor(rgb, theme) {\n  return modifyBackgroundColor(rgb, theme);\n}\nfunction modifyGradientColor(rgb, theme) {\n  return modifyBackgroundColor(rgb, theme);\n}\nconst gradientLength = \"gradient\".length;\nconst conicGradient = \"conic-\";\nconst conicGradientLength = conicGradient.length;\nconst radialGradient = \"radial-\";\nconst linearGradient = \"linear-\";\nfunction parseGradient(value) {\n  const result = [];\n  let index = 0;\n  let startIndex = conicGradient.length;\n  while ((index = value.indexOf(\"gradient\", startIndex)) !== -1) {\n    let typeGradient;\n    [linearGradient, radialGradient, conicGradient].find(possibleType => {\n      if (index - possibleType.length >= 0) {\n        const possibleGradient = value.substring(index - possibleType.length, index);\n        if (possibleGradient === possibleType) {\n          if (value.slice(index - possibleType.length - 10, index - possibleType.length - 1) === \"repeating\") {\n            typeGradient = `repeating-${possibleType}gradient`;\n            return true;\n          }\n          if (value.slice(index - possibleType.length - 8, index - possibleType.length - 1) === \"-webkit\") {\n            typeGradient = `-webkit-${possibleType}gradient`;\n            return true;\n          }\n          typeGradient = `${possibleType}gradient`;\n          return true;\n        }\n      }\n    });\n    if (!typeGradient) {\n      break;\n    }\n    const {\n      start,\n      end\n    } = getParenthesesRange(value, index + gradientLength);\n    const match = value.substring(start + 1, end - 1);\n    startIndex = end + 1 + conicGradientLength;\n    result.push({\n      typeGradient,\n      match,\n      offset: typeGradient.length + 2,\n      index: index - typeGradient.length + gradientLength,\n      hasComma: true\n    });\n  }\n  if (result.length) {\n    result[result.length - 1].hasComma = false;\n  }\n  return result;\n}\nconst STORAGE_KEY_IMAGE_DETAILS_LIST = \"__darkreader__imageDetails_v2_list\";\nconst STORAGE_KEY_IMAGE_DETAILS_PREFIX = \"__darkreader__imageDetails_v2_\";\nconst STORAGE_KEY_CSS_FETCH_PREFIX = \"__darkreader__cssFetch_\";\nlet imageCacheTimeout = 0;\nconst imageDetailsCacheQueue = new Map();\nconst cachedImageUrls = [];\nfunction writeImageDetailsQueue() {\n  imageDetailsCacheQueue.forEach((details, url) => {\n    if (url && url.startsWith(\"https://\")) {\n      try {\n        const json = JSON.stringify(details);\n        sessionStorage.setItem(`${STORAGE_KEY_IMAGE_DETAILS_PREFIX}${url}`, json);\n        cachedImageUrls.push(url);\n      } catch (err) {}\n    }\n  });\n  imageDetailsCacheQueue.clear();\n  sessionStorage.setItem(STORAGE_KEY_IMAGE_DETAILS_LIST, JSON.stringify(cachedImageUrls));\n}\nfunction writeImageDetailsCache(url, imageDetails) {\n  if (!url || !url.startsWith(\"https://\")) {\n    return;\n  }\n  imageDetailsCacheQueue.set(url, imageDetails);\n  clearTimeout(imageCacheTimeout);\n  imageCacheTimeout = setTimeout(writeImageDetailsQueue, 1000);\n}\nfunction readImageDetailsCache(targetMap) {\n  try {\n    const jsonList = sessionStorage.getItem(STORAGE_KEY_IMAGE_DETAILS_LIST);\n    if (!jsonList) {\n      return;\n    }\n    const list = JSON.parse(jsonList);\n    list.forEach(url => {\n      const json = sessionStorage.getItem(`${STORAGE_KEY_IMAGE_DETAILS_PREFIX}${url}`);\n      if (json) {\n        const details = JSON.parse(json);\n        targetMap.set(url, details);\n      }\n    });\n  } catch (err) {}\n}\nfunction writeCSSFetchCache(url, cssText) {\n  const key = `${STORAGE_KEY_CSS_FETCH_PREFIX}${url}`;\n  try {\n    sessionStorage.setItem(key, cssText);\n  } catch (err) {}\n}\nfunction readCSSFetchCache(url) {\n  const key = `${STORAGE_KEY_CSS_FETCH_PREFIX}${url}`;\n  try {\n    return sessionStorage.getItem(key) ?? null;\n  } catch (err) {}\n  return null;\n}\nfunction toSVGMatrix(matrix) {\n  return matrix.slice(0, 4).map(m => m.map(m => m.toFixed(3)).join(\" \")).join(\" \");\n}\nfunction getSVGFilterMatrixValue(config) {\n  return toSVGMatrix(createFilterMatrix(config));\n}\nconst MAX_FRAME_DURATION = 1000 / 60;\nclass AsyncQueue {\n  constructor() {\n    this.queue = [];\n    this.timerId = null;\n  }\n  addTask(task) {\n    this.queue.push(task);\n    this.scheduleFrame();\n  }\n  stop() {\n    if (this.timerId !== null) {\n      cancelAnimationFrame(this.timerId);\n      this.timerId = null;\n    }\n    this.queue = [];\n  }\n  scheduleFrame() {\n    if (this.timerId) {\n      return;\n    }\n    this.timerId = requestAnimationFrame(() => {\n      this.timerId = null;\n      const start = Date.now();\n      let cb;\n      while (cb = this.queue.shift()) {\n        cb();\n        if (Date.now() - start >= MAX_FRAME_DURATION) {\n          this.scheduleFrame();\n          break;\n        }\n      }\n    });\n  }\n}\nconst resolvers$1 = new Map();\nconst rejectors = new Map();\nasync function bgFetch(request) {\n  if (window.DarkReader?.Plugins?.fetch) {\n    return window.DarkReader.Plugins.fetch(request);\n  }\n  return new Promise((resolve, reject) => {\n    const id = generateUID();\n    resolvers$1.set(id, resolve);\n    rejectors.set(id, reject);\n    chrome.runtime.sendMessage({\n      type: MessageTypeCStoBG.FETCH,\n      data: request,\n      id\n    });\n  });\n}\nchrome.runtime.onMessage.addListener(({\n  type,\n  data,\n  error,\n  id\n}) => {\n  if (type === MessageTypeBGtoCS.FETCH_RESPONSE) {\n    const resolve = resolvers$1.get(id);\n    const reject = rejectors.get(id);\n    resolvers$1.delete(id);\n    rejectors.delete(id);\n    if (error) {\n      reject && reject(typeof error === \"string\" ? new Error(error) : error);\n    } else {\n      resolve && resolve(data);\n    }\n  }\n});\nconst imageManager = new AsyncQueue();\nasync function getImageDetails(url) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const dataURL = url.startsWith(\"data:\") ? url : await getDataURL(url);\n      const blob = tryConvertDataURLToBlobSync(dataURL) ?? (await loadAsBlob(url));\n      let image;\n      if (dataURL.startsWith(\"data:image/svg+xml\")) {\n        image = await loadImage(dataURL);\n      } else {\n        image = (await tryCreateImageBitmap(blob)) ?? (await loadImage(dataURL));\n      }\n      imageManager.addTask(() => {\n        const analysis = analyzeImage(image);\n        resolve({\n          src: url,\n          dataURL: analysis.isLarge ? \"\" : dataURL,\n          width: image.width,\n          height: image.height,\n          ...analysis\n        });\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\nasync function getDataURL(url) {\n  const parsedURL = new URL(url);\n  if (parsedURL.origin === location.origin) {\n    return await loadAsDataURL(url);\n  }\n  return await bgFetch({\n    url,\n    responseType: \"data-url\"\n  });\n}\nasync function tryCreateImageBitmap(blob) {\n  try {\n    return await createImageBitmap(blob);\n  } catch (err) {\n    logWarn(`Unable to create image bitmap for type ${blob.type}: ${String(err)}`);\n    return null;\n  }\n}\nconst INCOMPLETE_DOC_LOADING_IMAGE_LIMIT = 256;\nlet loadingImagesCount = 0;\nasync function loadImage(url) {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.onload = () => resolve(image);\n    image.onerror = () => reject(`Unable to load image ${url}`);\n    if (++loadingImagesCount <= INCOMPLETE_DOC_LOADING_IMAGE_LIMIT || isReadyStateComplete()) {\n      image.src = url;\n    } else {\n      addReadyStateCompleteListener(() => image.src = url);\n    }\n  });\n}\nconst MAX_ANALYSIS_PIXELS_COUNT = 32 * 32;\nlet canvas;\nlet context;\nfunction createCanvas() {\n  const maxWidth = MAX_ANALYSIS_PIXELS_COUNT;\n  const maxHeight = MAX_ANALYSIS_PIXELS_COUNT;\n  canvas = document.createElement(\"canvas\");\n  canvas.width = maxWidth;\n  canvas.height = maxHeight;\n  context = canvas.getContext(\"2d\", {\n    willReadFrequently: true\n  });\n  context.imageSmoothingEnabled = false;\n}\nfunction removeCanvas() {\n  canvas = null;\n  context = null;\n}\nconst LARGE_IMAGE_PIXELS_COUNT = 512 * 512;\nfunction analyzeImage(image) {\n  if (!canvas) {\n    createCanvas();\n  }\n  let sw;\n  let sh;\n  if (image instanceof HTMLImageElement) {\n    sw = image.naturalWidth;\n    sh = image.naturalHeight;\n  } else {\n    sw = image.width;\n    sh = image.height;\n  }\n  if (sw === 0 || sh === 0) {\n    logWarn(\"Image is empty\");\n    return {\n      isDark: false,\n      isLight: false,\n      isTransparent: false,\n      isLarge: false\n    };\n  }\n  const isLarge = sw * sh > LARGE_IMAGE_PIXELS_COUNT;\n  const sourcePixelsCount = sw * sh;\n  const k = Math.min(1, Math.sqrt(MAX_ANALYSIS_PIXELS_COUNT / sourcePixelsCount));\n  const width = Math.ceil(sw * k);\n  const height = Math.ceil(sh * k);\n  context.clearRect(0, 0, width, height);\n  context.drawImage(image, 0, 0, sw, sh, 0, 0, width, height);\n  const imageData = context.getImageData(0, 0, width, height);\n  const d = imageData.data;\n  const TRANSPARENT_ALPHA_THRESHOLD = 0.05;\n  const DARK_LIGHTNESS_THRESHOLD = 0.4;\n  const LIGHT_LIGHTNESS_THRESHOLD = 0.7;\n  let transparentPixelsCount = 0;\n  let darkPixelsCount = 0;\n  let lightPixelsCount = 0;\n  let i, x, y;\n  let r, g, b, a;\n  let l;\n  for (y = 0; y < height; y++) {\n    for (x = 0; x < width; x++) {\n      i = 4 * (y * width + x);\n      r = d[i + 0];\n      g = d[i + 1];\n      b = d[i + 2];\n      a = d[i + 3];\n      if (a / 255 < TRANSPARENT_ALPHA_THRESHOLD) {\n        transparentPixelsCount++;\n      } else {\n        l = getSRGBLightness(r, g, b);\n        if (l < DARK_LIGHTNESS_THRESHOLD) {\n          darkPixelsCount++;\n        }\n        if (l > LIGHT_LIGHTNESS_THRESHOLD) {\n          lightPixelsCount++;\n        }\n      }\n    }\n  }\n  const totalPixelsCount = width * height;\n  const opaquePixelsCount = totalPixelsCount - transparentPixelsCount;\n  const DARK_IMAGE_THRESHOLD = 0.7;\n  const LIGHT_IMAGE_THRESHOLD = 0.7;\n  const TRANSPARENT_IMAGE_THRESHOLD = 0.1;\n  return {\n    isDark: darkPixelsCount / opaquePixelsCount >= DARK_IMAGE_THRESHOLD,\n    isLight: lightPixelsCount / opaquePixelsCount >= LIGHT_IMAGE_THRESHOLD,\n    isTransparent: transparentPixelsCount / totalPixelsCount >= TRANSPARENT_IMAGE_THRESHOLD,\n    isLarge\n  };\n}\nlet isBlobURLSupported = null;\nlet canUseProxy = false;\nlet blobURLCheckRequested = false;\nconst blobURLCheckAwaiters = [];\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => canUseProxy = true, {\n  once: true\n});\nasync function requestBlobURLCheck() {\n  if (!canUseProxy) {\n    return;\n  }\n  if (blobURLCheckRequested) {\n    return await new Promise(resolve => blobURLCheckAwaiters.push(resolve));\n  }\n  blobURLCheckRequested = true;\n  await new Promise(resolve => {\n    document.addEventListener(\"__darkreader__blobURLCheckResponse\", e => {\n      isBlobURLSupported = e.detail.blobURLAllowed;\n      resolve();\n      blobURLCheckAwaiters.forEach(r => r());\n      blobURLCheckAwaiters.splice(0);\n    }, {\n      once: true\n    });\n    document.dispatchEvent(new CustomEvent(\"__darkreader__blobURLCheckRequest\"));\n  });\n}\nfunction isBlobURLCheckResultReady() {\n  return isBlobURLSupported != null || !canUseProxy;\n}\nfunction onCSPError(err) {\n  if (err.blockedURI === \"blob\") {\n    isBlobURLSupported = false;\n    document.removeEventListener(\"securitypolicyviolation\", onCSPError);\n  }\n}\ndocument.addEventListener(\"securitypolicyviolation\", onCSPError);\nconst objectURLs = new Set();\nfunction getFilteredImageURL({\n  dataURL,\n  width,\n  height\n}, theme) {\n  if (dataURL.startsWith(\"data:image/svg+xml\")) {\n    dataURL = escapeXML(dataURL);\n  }\n  const matrix = getSVGFilterMatrixValue(theme);\n  const svg = [`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"${width}\" height=\"${height}\">`, \"<defs>\", '<filter id=\"darkreader-image-filter\">', `<feColorMatrix type=\"matrix\" values=\"${matrix}\" />`, \"</filter>\", \"</defs>\", `<image width=\"${width}\" height=\"${height}\" filter=\"url(#darkreader-image-filter)\" xlink:href=\"${dataURL}\" />`, \"</svg>\"].join(\"\");\n  if (!isBlobURLSupported) {\n    return `data:image/svg+xml;base64,${btoa(svg)}`;\n  }\n  const bytes = new Uint8Array(svg.length);\n  for (let i = 0; i < svg.length; i++) {\n    bytes[i] = svg.charCodeAt(i);\n  }\n  const blob = new Blob([bytes], {\n    type: \"image/svg+xml\"\n  });\n  const objectURL = URL.createObjectURL(blob);\n  objectURLs.add(objectURL);\n  return objectURL;\n}\nconst xmlEscapeChars = {\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  \"&\": \"&amp;\",\n  \"'\": \"&apos;\",\n  '\"': \"&quot;\"\n};\nfunction escapeXML(str) {\n  return str.replace(/[<>&'\"]/g, c => xmlEscapeChars[c] ?? c);\n}\nconst dataURLBlobURLs = new Map();\nfunction tryConvertDataURLToBlobSync(dataURL) {\n  const colonIndex = dataURL.indexOf(\":\");\n  const semicolonIndex = dataURL.indexOf(\";\", colonIndex + 1);\n  const commaIndex = dataURL.indexOf(\",\", semicolonIndex + 1);\n  const encoding = dataURL.substring(semicolonIndex + 1, commaIndex).toLocaleLowerCase();\n  const mediaType = dataURL.substring(colonIndex + 1, semicolonIndex);\n  if (encoding !== \"base64\" || !mediaType) {\n    return null;\n  }\n  const characters = atob(dataURL.substring(commaIndex + 1));\n  const bytes = new Uint8Array(characters.length);\n  for (let i = 0; i < characters.length; i++) {\n    bytes[i] = characters.charCodeAt(i);\n  }\n  return new Blob([bytes], {\n    type: mediaType\n  });\n}\nasync function tryConvertDataURLToBlobURL(dataURL) {\n  if (!isBlobURLSupported) {\n    return null;\n  }\n  const hash = getHashCode(dataURL);\n  let blobURL = dataURLBlobURLs.get(hash);\n  if (blobURL) {\n    return blobURL;\n  }\n  let blob = tryConvertDataURLToBlobSync(dataURL);\n  if (!blob) {\n    const response = await fetch(dataURL);\n    blob = await response.blob();\n  }\n  blobURL = URL.createObjectURL(blob);\n  dataURLBlobURLs.set(hash, blobURL);\n  return blobURL;\n}\nfunction cleanImageProcessingCache() {\n  imageManager && imageManager.stop();\n  removeCanvas();\n  objectURLs.forEach(u => URL.revokeObjectURL(u));\n  objectURLs.clear();\n  dataURLBlobURLs.forEach(u => URL.revokeObjectURL(u));\n  dataURLBlobURLs.clear();\n}\nfunction getPriority(ruleStyle, property) {\n  return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));\n}\nfunction getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageSelectors, isCancelled) {\n  let modifier = null;\n  if (property.startsWith(\"--\")) {\n    modifier = getVariableModifier(variablesStore, property, value, rule, ignoreImageSelectors, isCancelled);\n  } else if (value.includes(\"var(\")) {\n    modifier = getVariableDependantModifier(variablesStore, property, value);\n  } else if (property === \"color-scheme\") {\n    modifier = getColorSchemeModifier();\n  } else if (property === \"scrollbar-color\") {\n    modifier = getScrollbarColorModifier(value);\n  } else if (property.includes(\"color\") && property !== \"-webkit-print-color-adjust\" || property === \"fill\" || property === \"stroke\" || property === \"stop-color\") {\n    if (property.startsWith(\"border\") && property !== \"border-color\" && value === \"initial\") {\n      const borderSideProp = property.substring(0, property.length - 6);\n      const borderSideVal = rule.style.getPropertyValue(borderSideProp);\n      if (borderSideVal.startsWith(\"0px\") || borderSideVal === \"none\") {\n        property = borderSideProp;\n        modifier = borderSideVal;\n      } else {\n        modifier = value;\n      }\n    } else {\n      modifier = getColorModifier(property, value, rule);\n    }\n  } else if (property === \"background-image\" || property === \"list-style-image\") {\n    modifier = getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled);\n  } else if (property.includes(\"shadow\")) {\n    modifier = getShadowModifier(value);\n  }\n  if (!modifier) {\n    return null;\n  }\n  return {\n    property,\n    value: modifier,\n    important: getPriority(rule.style, property),\n    sourceValue: value\n  };\n}\nfunction joinSelectors(...selectors) {\n  return selectors.filter(Boolean).join(\", \");\n}\nconst hostsWithOddScrollbars = [\"calendar.google.com\"];\nfunction getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {\n  const lines = [];\n  if (!isIFrame) {\n    lines.push(\"html {\");\n    lines.push(`    background-color: ${modifyBackgroundColor({\n      r: 255,\n      g: 255,\n      b: 255\n    }, theme)} !important;`);\n    lines.push(\"}\");\n  }\n  if (isCSSColorSchemePropSupported && theme.mode === 1) {\n    lines.push(\"html {\");\n    lines.push(`    color-scheme: dark !important;`);\n    lines.push(\"}\");\n    lines.push(\"iframe {\");\n    lines.push(`    color-scheme: dark !important;`);\n    lines.push(\"}\");\n  }\n  const bgSelectors = joinSelectors(isIFrame ? \"\" : \"html, body\", styleSystemControls ? \"input, textarea, select, button, dialog\" : \"\");\n  if (bgSelectors) {\n    lines.push(`${bgSelectors} {`);\n    lines.push(`    background-color: ${modifyBackgroundColor({\n      r: 255,\n      g: 255,\n      b: 255\n    }, theme)};`);\n    lines.push(\"}\");\n  }\n  lines.push(`${joinSelectors(\"html, body\", styleSystemControls ? \"input, textarea, select, button\" : \"\")} {`);\n  lines.push(`    border-color: ${modifyBorderColor({\n    r: 76,\n    g: 76,\n    b: 76\n  }, theme)};`);\n  lines.push(`    color: ${modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme)};`);\n  lines.push(\"}\");\n  lines.push(\"a {\");\n  lines.push(`    color: ${modifyForegroundColor({\n    r: 0,\n    g: 64,\n    b: 255\n  }, theme)};`);\n  lines.push(\"}\");\n  lines.push(\"table {\");\n  lines.push(`    border-color: ${modifyBorderColor({\n    r: 128,\n    g: 128,\n    b: 128\n  }, theme)};`);\n  lines.push(\"}\");\n  lines.push(\"mark {\");\n  lines.push(`    color: ${modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme)};`);\n  lines.push(\"}\");\n  lines.push(\"::placeholder {\");\n  lines.push(`    color: ${modifyForegroundColor({\n    r: 169,\n    g: 169,\n    b: 169\n  }, theme)};`);\n  lines.push(\"}\");\n  lines.push(\"input:-webkit-autofill,\");\n  lines.push(\"textarea:-webkit-autofill,\");\n  lines.push(\"select:-webkit-autofill {\");\n  lines.push(`    background-color: ${modifyBackgroundColor({\n    r: 250,\n    g: 255,\n    b: 189\n  }, theme)} !important;`);\n  lines.push(`    color: ${modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme)} !important;`);\n  lines.push(\"}\");\n  if (theme.scrollbarColor && !hostsWithOddScrollbars.includes(location.hostname)) {\n    lines.push(getModifiedScrollbarStyle(theme));\n  }\n  if (theme.selectionColor) {\n    lines.push(getModifiedSelectionStyle(theme));\n  }\n  if (isLayerRuleSupported) {\n    lines.unshift(\"@layer {\");\n    lines.push(\"}\");\n  }\n  return lines.join(\"\\n\");\n}\nfunction getSelectionColor(theme) {\n  let backgroundColorSelection;\n  let foregroundColorSelection;\n  if (theme.selectionColor === \"auto\") {\n    backgroundColorSelection = modifyBackgroundColor({\n      r: 0,\n      g: 96,\n      b: 212\n    }, {\n      ...theme,\n      grayscale: 0\n    });\n    foregroundColorSelection = modifyForegroundColor({\n      r: 255,\n      g: 255,\n      b: 255\n    }, {\n      ...theme,\n      grayscale: 0\n    });\n  } else {\n    const rgb = parseColorWithCache(theme.selectionColor);\n    const hsl = rgbToHSL(rgb);\n    backgroundColorSelection = theme.selectionColor;\n    if (hsl.l < 0.5) {\n      foregroundColorSelection = \"#FFF\";\n    } else {\n      foregroundColorSelection = \"#000\";\n    }\n  }\n  return {\n    backgroundColorSelection,\n    foregroundColorSelection\n  };\n}\nfunction getModifiedSelectionStyle(theme) {\n  const lines = [];\n  const modifiedSelectionColor = getSelectionColor(theme);\n  const backgroundColorSelection = modifiedSelectionColor.backgroundColorSelection;\n  const foregroundColorSelection = modifiedSelectionColor.foregroundColorSelection;\n  [\"::selection\", \"::-moz-selection\"].forEach(selection => {\n    lines.push(`${selection} {`);\n    lines.push(`    background-color: ${backgroundColorSelection} !important;`);\n    lines.push(`    color: ${foregroundColorSelection} !important;`);\n    lines.push(\"}\");\n  });\n  return lines.join(\"\\n\");\n}\nfunction getModifiedScrollbarStyle(theme) {\n  let colorTrack;\n  let colorThumb;\n  if (theme.scrollbarColor === \"auto\") {\n    colorTrack = modifyBackgroundColor({\n      r: 241,\n      g: 241,\n      b: 241\n    }, theme);\n    colorThumb = modifyBackgroundColor({\n      r: 176,\n      g: 176,\n      b: 176\n    }, theme);\n  } else {\n    const rgb = parseColorWithCache(theme.scrollbarColor);\n    const hsl = rgbToHSL(rgb);\n    const darken = darker => ({\n      ...hsl,\n      l: clamp(hsl.l - darker, 0, 1)\n    });\n    colorTrack = hslToString(darken(0.4));\n    colorThumb = hslToString(hsl);\n  }\n  return [`* {`, `    scrollbar-color: ${colorThumb} ${colorTrack};`, `}`].join(\"\\n\");\n}\nfunction getModifiedFallbackStyle(theme, {\n  strict\n}) {\n  const factory = defaultFallbackFactory;\n  return factory(theme, {\n    strict\n  });\n}\nfunction defaultFallbackFactory(theme, {\n  strict\n}) {\n  const lines = [];\n  lines.push(`html, body, ${strict ? \"body :not(iframe)\" : \"body > :not(iframe)\"} {`);\n  lines.push(`    background-color: ${modifyBackgroundColor({\n    r: 255,\n    g: 255,\n    b: 255\n  }, theme)} !important;`);\n  lines.push(`    border-color: ${modifyBorderColor({\n    r: 64,\n    g: 64,\n    b: 64\n  }, theme)} !important;`);\n  lines.push(`    color: ${modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme)} !important;`);\n  lines.push(\"}\");\n  lines.push(`div[style*=\"background-color: rgb(135, 135, 135)\"] {`);\n  lines.push(`    background-color: #878787 !important;`);\n  lines.push(\"}\");\n  return lines.join(\"\\n\");\n}\nconst unparsableColors = new Set([\"inherit\", \"transparent\", \"initial\", \"currentcolor\", \"none\", \"unset\", \"auto\"]);\nfunction getColorModifier(prop, value, rule) {\n  if (unparsableColors.has(value.toLowerCase()) && !(prop === \"color\" && value === \"initial\")) {\n    return value;\n  }\n  let rgb = null;\n  if (prop === \"color\" && value === \"initial\") {\n    rgb = {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 1\n    };\n  } else {\n    rgb = parseColorWithCache(value);\n  }\n  if (!rgb) {\n    logWarn(\"Couldn't parse color\", value);\n    return null;\n  }\n  if (prop.includes(\"background\")) {\n    if (rule.style.webkitMaskImage && rule.style.webkitMaskImage !== \"none\" || rule.style.webkitMask && !rule.style.webkitMask.startsWith(\"none\") || rule.style.mask && rule.style.mask !== \"none\" || rule.style.getPropertyValue(\"mask-image\") && rule.style.getPropertyValue(\"mask-image\") !== \"none\") {\n      return theme => modifyForegroundColor(rgb, theme);\n    }\n    return theme => modifyBackgroundColor(rgb, theme);\n  }\n  if (prop.includes(\"border\") || prop.includes(\"outline\")) {\n    return theme => modifyBorderColor(rgb, theme);\n  }\n  return theme => modifyForegroundColor(rgb, theme);\n}\nconst imageDetailsCache = new Map();\nconst awaitingForImageLoading = new Map();\nlet didTryLoadCache = false;\nfunction shouldIgnoreImage(selectorText, selectors) {\n  if (!selectorText || selectors.length === 0) {\n    return false;\n  }\n  if (selectors.some(s => s === \"*\")) {\n    return true;\n  }\n  const ruleSelectors = selectorText.split(/,\\s*/g);\n  for (let i = 0; i < selectors.length; i++) {\n    const ignoredSelector = selectors[i];\n    if (ignoredSelector.startsWith(\"^\")) {\n      const beginning = ignoredSelector.slice(1);\n      if (ruleSelectors.some(s => s.startsWith(beginning))) {\n        return true;\n      }\n    } else if (ignoredSelector.endsWith(\"$\")) {\n      const ending = ignoredSelector.slice(0, ignoredSelector.length - 1);\n      if (ruleSelectors.some(s => s.endsWith(ending))) {\n        return true;\n      }\n    } else if (ruleSelectors.some(s => s === ignoredSelector)) {\n      return true;\n    }\n  }\n  return false;\n}\nconst imageSelectorQueue = new Map();\nconst imageSelectorValues = new Map();\nconst imageSelectorNodeQueue = new Set();\nlet imageSelectorQueueFrameId = null;\nlet classObserver = null;\nfunction checkImageSelectors(node) {\n  for (const [selector, callbacks] of imageSelectorQueue) {\n    if (node.querySelector(selector) || node instanceof Element && node.matches(selector)) {\n      imageSelectorQueue.delete(selector);\n      callbacks.forEach(cb => cb());\n    }\n  }\n  if (!classObserver) {\n    classObserver = new MutationObserver(mutations => {\n      mutations.forEach(mutation => {\n        imageSelectorNodeQueue.add(mutation.target);\n        if (!imageSelectorQueueFrameId) {\n          imageSelectorQueueFrameId = requestAnimationFrame(() => {\n            imageSelectorNodeQueue.forEach(element => {\n              checkImageSelectors(element);\n            });\n            imageSelectorNodeQueue.clear();\n            imageSelectorQueueFrameId = null;\n          });\n        }\n      });\n    });\n    classObserver.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\"],\n      subtree: true\n    });\n  }\n}\nfunction getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled) {\n  try {\n    if (shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)) {\n      return value;\n    }\n    const gradients = parseGradient(value);\n    const urls = getMatches(cssURLRegex, value);\n    if (urls.length === 0 && gradients.length === 0) {\n      return value;\n    }\n    const getIndices = matches => {\n      let index = 0;\n      return matches.map(match => {\n        const valueIndex = value.indexOf(match, index);\n        index = valueIndex + match.length;\n        return {\n          match,\n          index: valueIndex\n        };\n      });\n    };\n    const matches = gradients.map(i => ({\n      type: \"gradient\",\n      ...i\n    })).concat(getIndices(urls).map(i => ({\n      type: \"url\",\n      offset: 0,\n      ...i\n    }))).sort((a, b) => a.index > b.index ? 1 : -1);\n    const getGradientModifier = gradient => {\n      const {\n        typeGradient,\n        match,\n        hasComma\n      } = gradient;\n      const partsRegex = /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?([^\\(\\), ]|( (?!calc)))*),?/g;\n      const colorStopRegex = /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;\n      const parts = getMatches(partsRegex, match, 1).map(part => {\n        part = part.trim();\n        let rgb = parseColorWithCache(part);\n        if (rgb) {\n          return theme => modifyGradientColor(rgb, theme);\n        }\n        const space = part.lastIndexOf(\" \");\n        rgb = parseColorWithCache(part.substring(0, space));\n        if (rgb) {\n          return theme => `${modifyGradientColor(rgb, theme)} ${part.substring(space + 1)}`;\n        }\n        const colorStopMatch = part.match(colorStopRegex);\n        if (colorStopMatch) {\n          rgb = parseColorWithCache(colorStopMatch[3]);\n          if (rgb) {\n            return theme => `${colorStopMatch[1]}(${colorStopMatch[2] ? `${colorStopMatch[2]}, ` : \"\"}${modifyGradientColor(rgb, theme)})`;\n          }\n        }\n        return () => part;\n      });\n      return theme => {\n        return `${typeGradient}(${parts.map(modify => modify(theme)).join(\", \")})${hasComma ? \", \" : \"\"}`;\n      };\n    };\n    const getURLModifier = urlValue => {\n      if (!didTryLoadCache) {\n        didTryLoadCache = true;\n        readImageDetailsCache(imageDetailsCache);\n      }\n      let url = getCSSURLValue(urlValue);\n      const isURLEmpty = url.length === 0;\n      const {\n        parentStyleSheet\n      } = rule;\n      const ownerNode = parentStyleSheet?.ownerNode;\n      const scope = (parentStyleSheet && getSheetScope(parentStyleSheet)) ?? document;\n      const baseURL = parentStyleSheet && parentStyleSheet.href ? getCSSBaseBath(parentStyleSheet.href) : ownerNode?.baseURI || location.origin;\n      url = getAbsoluteURL(baseURL, url);\n      return async theme => {\n        if (isURLEmpty) {\n          return \"url('')\";\n        }\n        let selector = rule.selectorText;\n        if (selector) {\n          if (selector.includes(\"::before\")) {\n            selector = selector.replaceAll(\"::before\", \"\");\n          }\n          if (selector.includes(\"::after\")) {\n            selector = selector.replaceAll(\"::after\", \"\");\n          }\n          if (!scope.querySelector(selector)) {\n            await new Promise(resolve => {\n              if (imageSelectorQueue.has(selector)) {\n                imageSelectorQueue.get(selector).push(resolve);\n              } else {\n                imageSelectorQueue.set(selector, [resolve]);\n                imageSelectorValues.set(selector, urlValue);\n              }\n            });\n          }\n        }\n        let imageDetails = null;\n        if (imageDetailsCache.has(url)) {\n          imageDetails = imageDetailsCache.get(url);\n        } else {\n          try {\n            if (!isBlobURLCheckResultReady()) {\n              await requestBlobURLCheck();\n            }\n            if (awaitingForImageLoading.has(url)) {\n              const awaiters = awaitingForImageLoading.get(url);\n              imageDetails = await new Promise(resolve => awaiters.push(resolve));\n              if (!imageDetails) {\n                return null;\n              }\n            } else {\n              awaitingForImageLoading.set(url, []);\n              imageDetails = await getImageDetails(url);\n              imageDetailsCache.set(url, imageDetails);\n              writeImageDetailsCache(url, imageDetails);\n              awaitingForImageLoading.get(url).forEach(resolve => resolve(imageDetails));\n              awaitingForImageLoading.delete(url);\n            }\n            if (isCancelled()) {\n              return null;\n            }\n          } catch (err) {\n            logWarn(err);\n            if (awaitingForImageLoading.has(url)) {\n              awaitingForImageLoading.get(url).forEach(resolve => resolve(null));\n              awaitingForImageLoading.delete(url);\n            }\n          }\n        }\n        if (imageDetails) {\n          const bgImageValue = getBgImageValue(imageDetails, theme);\n          if (bgImageValue) {\n            return bgImageValue;\n          }\n        }\n        if (url.startsWith(\"data:\")) {\n          const blobURL = await tryConvertDataURLToBlobURL(url);\n          if (blobURL) {\n            return `url(\"${blobURL}\")`;\n          }\n        }\n        return `url(\"${url}\")`;\n      };\n    };\n    const getBgImageValue = (imageDetails, theme) => {\n      const {\n        isDark,\n        isLight,\n        isTransparent,\n        isLarge,\n        width\n      } = imageDetails;\n      let result;\n      const logSrc = imageDetails.src.startsWith(\"data:\") ? \"data:\" : imageDetails.src;\n      if (isLarge && isLight && !isTransparent && theme.mode === 1) {\n        logInfo(`Hiding large light image ${logSrc}`);\n        result = \"none\";\n      } else if (isDark && isTransparent && theme.mode === 1 && width > 2) {\n        logInfo(`Inverting dark image ${logSrc}`);\n        const inverted = getFilteredImageURL(imageDetails, {\n          ...theme,\n          sepia: clamp(theme.sepia + 10, 0, 100)\n        });\n        result = `url(\"${inverted}\")`;\n      } else if (isLight && !isTransparent && theme.mode === 1) {\n        logInfo(`Dimming light image ${logSrc}`);\n        const dimmed = getFilteredImageURL(imageDetails, theme);\n        result = `url(\"${dimmed}\")`;\n      } else if (theme.mode === 0 && isLight) {\n        logInfo(`Applying filter to image ${logSrc}`);\n        const filtered = getFilteredImageURL(imageDetails, {\n          ...theme,\n          brightness: clamp(theme.brightness - 10, 5, 200),\n          sepia: clamp(theme.sepia + 10, 0, 100)\n        });\n        result = `url(\"${filtered}\")`;\n      } else {\n        logInfo(`Not modifying the image ${logSrc}`);\n        result = null;\n      }\n      return result;\n    };\n    const modifiers = [];\n    let matchIndex = 0;\n    let prevHasComma = false;\n    matches.forEach(({\n      type,\n      match,\n      index,\n      typeGradient,\n      hasComma,\n      offset\n    }, i) => {\n      const matchStart = index;\n      const prefixStart = matchIndex;\n      const matchEnd = matchStart + match.length + offset;\n      matchIndex = matchEnd;\n      if (prefixStart !== matchStart) {\n        if (prevHasComma) {\n          modifiers.push(() => {\n            let betweenValue = value.substring(prefixStart, matchStart);\n            if (betweenValue[0] === \",\") {\n              betweenValue = betweenValue.substring(1);\n            }\n            return betweenValue;\n          });\n        } else {\n          modifiers.push(() => value.substring(prefixStart, matchStart));\n        }\n      }\n      prevHasComma = hasComma || false;\n      if (type === \"url\") {\n        modifiers.push(getURLModifier(match));\n      } else if (type === \"gradient\") {\n        modifiers.push(getGradientModifier({\n          match,\n          index,\n          typeGradient: typeGradient,\n          hasComma: hasComma || false,\n          offset\n        }));\n      }\n      if (i === matches.length - 1) {\n        modifiers.push(() => value.substring(matchEnd));\n      }\n    });\n    return theme => {\n      const results = modifiers.filter(Boolean).map(modify => modify(theme));\n      if (results.some(r => r instanceof Promise)) {\n        return Promise.all(results).then(asyncResults => {\n          return asyncResults.filter(Boolean).join(\"\");\n        });\n      }\n      const combinedResult = results.join(\"\");\n      if (combinedResult.endsWith(\", initial\")) {\n        return combinedResult.slice(0, -9);\n      }\n      return combinedResult;\n    };\n  } catch (err) {\n    logWarn(`Unable to parse gradient ${value}`, err);\n    return null;\n  }\n}\nfunction getShadowModifierWithInfo(value) {\n  try {\n    let index = 0;\n    const colorMatches = getMatches(/(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi, value, 2);\n    let notParsed = 0;\n    const modifiers = colorMatches.map((match, i) => {\n      const prefixIndex = index;\n      const matchIndex = value.indexOf(match, index);\n      const matchEnd = matchIndex + match.length;\n      index = matchEnd;\n      const rgb = parseColorWithCache(match);\n      if (!rgb) {\n        notParsed++;\n        return () => value.substring(prefixIndex, matchEnd);\n      }\n      return theme => `${value.substring(prefixIndex, matchIndex)}${modifyShadowColor(rgb, theme)}${i === colorMatches.length - 1 ? value.substring(matchEnd) : \"\"}`;\n    });\n    return theme => {\n      const modified = modifiers.map(modify => modify(theme)).join(\"\");\n      return {\n        matchesLength: colorMatches.length,\n        unparsableMatchesLength: notParsed,\n        result: modified\n      };\n    };\n  } catch (err) {\n    logWarn(`Unable to parse shadow ${value}`, err);\n    return null;\n  }\n}\nfunction getShadowModifier(value) {\n  const shadowModifier = getShadowModifierWithInfo(value);\n  if (!shadowModifier) {\n    return null;\n  }\n  return theme => shadowModifier(theme).result;\n}\nfunction getScrollbarColorModifier(value) {\n  const colorsMatch = value.match(/^\\s*([a-z]+(\\(.*\\))?)\\s+([a-z]+(\\(.*\\))?)\\s*$/);\n  if (!colorsMatch) {\n    return value;\n  }\n  const thumb = parseColorWithCache(colorsMatch[1]);\n  const track = parseColorWithCache(colorsMatch[3]);\n  if (!thumb || !track) {\n    logWarn(\"Couldn't parse color\", ...[thumb, track].filter(c => !c));\n    return null;\n  }\n  return theme => `${modifyForegroundColor(thumb, theme)} ${modifyBackgroundColor(track, theme)}`;\n}\nfunction getColorSchemeModifier() {\n  return theme => theme.mode === 0 ? \"dark light\" : \"dark\";\n}\nfunction getVariableModifier(variablesStore, prop, value, rule, ignoredImgSelectors, isCancelled) {\n  return variablesStore.getModifierForVariable({\n    varName: prop,\n    sourceValue: value,\n    rule,\n    ignoredImgSelectors,\n    isCancelled\n  });\n}\nfunction getVariableDependantModifier(variablesStore, prop, value) {\n  return variablesStore.getModifierForVarDependant(prop, value);\n}\nfunction cleanModificationCache() {\n  clearColorModificationCache();\n  imageDetailsCache.clear();\n  cleanImageProcessingCache();\n  awaitingForImageLoading.clear();\n  imageSelectorQueue.clear();\n  classObserver?.disconnect();\n  classObserver = null;\n}\nconst VAR_TYPE_BG_COLOR = 1 << 0;\nconst VAR_TYPE_TEXT_COLOR = 1 << 1;\nconst VAR_TYPE_BORDER_COLOR = 1 << 2;\nconst VAR_TYPE_BG_IMG = 1 << 3;\nclass VariablesStore {\n  constructor() {\n    this.varTypes = new Map();\n    this.rulesQueue = new Set();\n    this.inlineStyleQueue = [];\n    this.definedVars = new Set();\n    this.varRefs = new Map();\n    this.unknownColorVars = new Set();\n    this.unknownBgVars = new Set();\n    this.undefinedVars = new Set();\n    this.initialVarTypes = new Map();\n    this.changedTypeVars = new Set();\n    this.typeChangeSubscriptions = new Map();\n    this.unstableVarValues = new Map();\n  }\n  clear() {\n    this.varTypes.clear();\n    this.rulesQueue.clear();\n    this.inlineStyleQueue.splice(0);\n    this.definedVars.clear();\n    this.varRefs.clear();\n    this.unknownColorVars.clear();\n    this.unknownBgVars.clear();\n    this.undefinedVars.clear();\n    this.initialVarTypes.clear();\n    this.changedTypeVars.clear();\n    this.typeChangeSubscriptions.clear();\n    this.unstableVarValues.clear();\n  }\n  isVarType(varName, typeNum) {\n    return this.varTypes.has(varName) && (this.varTypes.get(varName) & typeNum) > 0;\n  }\n  addRulesForMatching(rules) {\n    this.rulesQueue.add(rules);\n  }\n  addInlineStyleForMatching(style) {\n    this.inlineStyleQueue.push(style);\n  }\n  matchVariablesAndDependents() {\n    if (this.rulesQueue.size === 0 && this.inlineStyleQueue.length === 0) {\n      return;\n    }\n    this.changedTypeVars.clear();\n    this.initialVarTypes = new Map(this.varTypes);\n    this.collectRootVariables();\n    this.collectVariablesAndVarDep();\n    this.collectRootVarDependents();\n    this.varRefs.forEach((refs, v) => {\n      refs.forEach(r => {\n        if (this.varTypes.has(v)) {\n          this.resolveVariableType(r, this.varTypes.get(v));\n        }\n      });\n    });\n    this.unknownColorVars.forEach(v => {\n      if (this.unknownBgVars.has(v)) {\n        this.unknownColorVars.delete(v);\n        this.unknownBgVars.delete(v);\n        this.resolveVariableType(v, VAR_TYPE_BG_COLOR);\n      } else if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_TEXT_COLOR | VAR_TYPE_BORDER_COLOR)) {\n        this.unknownColorVars.delete(v);\n      } else {\n        this.undefinedVars.add(v);\n      }\n    });\n    this.unknownBgVars.forEach(v => {\n      const hasColor = this.findVarRef(v, ref => {\n        return this.unknownColorVars.has(ref) || this.isVarType(ref, VAR_TYPE_BG_COLOR | VAR_TYPE_TEXT_COLOR | VAR_TYPE_BORDER_COLOR);\n      }) != null;\n      if (hasColor) {\n        this.iterateVarRefs(v, ref => {\n          this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\n        });\n      } else if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\n        this.unknownBgVars.delete(v);\n      } else {\n        this.undefinedVars.add(v);\n      }\n    });\n    this.changedTypeVars.forEach(varName => {\n      if (this.typeChangeSubscriptions.has(varName)) {\n        this.typeChangeSubscriptions.get(varName).forEach(callback => {\n          callback();\n        });\n      }\n    });\n    this.changedTypeVars.clear();\n  }\n  getModifierForVariable(options) {\n    return theme => {\n      const {\n        varName,\n        sourceValue,\n        rule,\n        ignoredImgSelectors,\n        isCancelled\n      } = options;\n      const getDeclarations = () => {\n        const declarations = [];\n        const addModifiedValue = (typeNum, varNameWrapper, colorModifier) => {\n          if (!this.isVarType(varName, typeNum)) {\n            return;\n          }\n          const property = varNameWrapper(varName);\n          let modifiedValue;\n          if (isVarDependant(sourceValue)) {\n            if (isConstructedColorVar(sourceValue)) {\n              let value = insertVarValues(sourceValue, this.unstableVarValues);\n              if (!value) {\n                value = typeNum === VAR_TYPE_BG_COLOR ? \"#ffffff\" : \"#000000\";\n              }\n              modifiedValue = colorModifier(value, theme);\n            } else {\n              modifiedValue = replaceCSSVariablesNames(sourceValue, v => varNameWrapper(v), fallback => colorModifier(fallback, theme));\n            }\n          } else {\n            modifiedValue = colorModifier(sourceValue, theme);\n          }\n          declarations.push({\n            property,\n            value: modifiedValue\n          });\n        };\n        addModifiedValue(VAR_TYPE_BG_COLOR, wrapBgColorVariableName, tryModifyBgColor);\n        addModifiedValue(VAR_TYPE_TEXT_COLOR, wrapTextColorVariableName, tryModifyTextColor);\n        addModifiedValue(VAR_TYPE_BORDER_COLOR, wrapBorderColorVariableName, tryModifyBorderColor);\n        if (this.isVarType(varName, VAR_TYPE_BG_IMG)) {\n          const property = wrapBgImgVariableName(varName);\n          let modifiedValue = sourceValue;\n          if (isVarDependant(sourceValue)) {\n            modifiedValue = replaceCSSVariablesNames(sourceValue, v => wrapBgColorVariableName(v), fallback => tryModifyBgColor(fallback, theme));\n          }\n          const bgModifier = getBgImageModifier(modifiedValue, rule, ignoredImgSelectors, isCancelled);\n          modifiedValue = typeof bgModifier === \"function\" ? bgModifier(theme) : bgModifier;\n          declarations.push({\n            property,\n            value: modifiedValue\n          });\n        }\n        return declarations;\n      };\n      const callbacks = new Set();\n      const addListener = onTypeChange => {\n        const callback = () => {\n          const decs = getDeclarations();\n          onTypeChange(decs);\n        };\n        callbacks.add(callback);\n        this.subscribeForVarTypeChange(varName, callback);\n      };\n      const removeListeners = () => {\n        callbacks.forEach(callback => {\n          this.unsubscribeFromVariableTypeChanges(varName, callback);\n        });\n      };\n      return {\n        declarations: getDeclarations(),\n        onTypeChange: {\n          addListener,\n          removeListeners\n        }\n      };\n    };\n  }\n  getModifierForVarDependant(property, sourceValue) {\n    const isConstructedColor = sourceValue.match(/^\\s*(rgb|hsl)a?\\(/);\n    const isSimpleConstructedColor = sourceValue.match(/^rgba?\\(var\\(--[\\-_A-Za-z0-9]+\\)(\\s*,?\\/?\\s*0?\\.\\d+)?\\)$/);\n    if (isConstructedColor && !isSimpleConstructedColor) {\n      const isBg = property.startsWith(\"background\");\n      const isText = isTextColorProperty(property);\n      return theme => {\n        let value = insertVarValues(sourceValue, this.unstableVarValues);\n        if (!value) {\n          value = isBg ? \"#ffffff\" : \"#000000\";\n        }\n        const modifier = isBg ? tryModifyBgColor : isText ? tryModifyTextColor : tryModifyBorderColor;\n        return modifier(value, theme);\n      };\n    }\n    if (property === \"background-color\" || isSimpleConstructedColor && property === \"background\") {\n      return theme => {\n        const defaultFallback = tryModifyBgColor(isConstructedColor ? \"255, 255, 255\" : \"#ffffff\", theme);\n        return replaceCSSVariablesNames(sourceValue, v => wrapBgColorVariableName(v), fallback => tryModifyBgColor(fallback, theme), defaultFallback);\n      };\n    }\n    if (isTextColorProperty(property)) {\n      return theme => {\n        const defaultFallback = tryModifyTextColor(isConstructedColor ? \"0, 0, 0\" : \"#000000\", theme);\n        return replaceCSSVariablesNames(sourceValue, v => wrapTextColorVariableName(v), fallback => tryModifyTextColor(fallback, theme), defaultFallback);\n      };\n    }\n    if (property === \"background\" || property === \"background-image\" || property === \"box-shadow\") {\n      return theme => {\n        const unknownVars = new Set();\n        const modify = () => {\n          const variableReplaced = replaceCSSVariablesNames(sourceValue, v => {\n            if (this.isVarType(v, VAR_TYPE_BG_COLOR)) {\n              return wrapBgColorVariableName(v);\n            }\n            if (this.isVarType(v, VAR_TYPE_BG_IMG)) {\n              return wrapBgImgVariableName(v);\n            }\n            unknownVars.add(v);\n            return v;\n          }, fallback => tryModifyBgColor(fallback, theme));\n          if (property === \"box-shadow\") {\n            const shadowModifier = getShadowModifierWithInfo(variableReplaced);\n            const modifiedShadow = shadowModifier(theme);\n            if (modifiedShadow.unparsableMatchesLength !== modifiedShadow.matchesLength) {\n              return modifiedShadow.result;\n            }\n          }\n          return variableReplaced;\n        };\n        const modified = modify();\n        if (unknownVars.size > 0) {\n          const isFallbackResolved = modified.match(/^var\\(.*?, ((var\\(--darkreader-bg--.*\\))|(#[0-9A-Fa-f]+)|([a-z]+)|(rgba?\\(.+\\))|(hsla?\\(.+\\)))\\)$/);\n          if (isFallbackResolved) {\n            return modified;\n          }\n          return new Promise(resolve => {\n            for (const unknownVar of unknownVars.values()) {\n              const callback = () => {\n                this.unsubscribeFromVariableTypeChanges(unknownVar, callback);\n                const newValue = modify();\n                resolve(newValue);\n              };\n              this.subscribeForVarTypeChange(unknownVar, callback);\n            }\n          });\n        }\n        return modified;\n      };\n    }\n    if (property.startsWith(\"border\") || property.startsWith(\"outline\")) {\n      return theme => {\n        return replaceCSSVariablesNames(sourceValue, v => wrapBorderColorVariableName(v), fallback => tryModifyBorderColor(fallback, theme));\n      };\n    }\n    return null;\n  }\n  subscribeForVarTypeChange(varName, callback) {\n    if (!this.typeChangeSubscriptions.has(varName)) {\n      this.typeChangeSubscriptions.set(varName, new Set());\n    }\n    const rootStore = this.typeChangeSubscriptions.get(varName);\n    if (!rootStore.has(callback)) {\n      rootStore.add(callback);\n    }\n  }\n  unsubscribeFromVariableTypeChanges(varName, callback) {\n    if (this.typeChangeSubscriptions.has(varName)) {\n      this.typeChangeSubscriptions.get(varName).delete(callback);\n    }\n  }\n  collectVariablesAndVarDep() {\n    this.rulesQueue.forEach(rules => {\n      iterateCSSRules(rules, rule => {\n        if (rule.style) {\n          this.collectVarsFromCSSDeclarations(rule.style);\n        }\n      });\n    });\n    this.inlineStyleQueue.forEach(style => {\n      this.collectVarsFromCSSDeclarations(style);\n    });\n    this.rulesQueue.clear();\n    this.inlineStyleQueue.splice(0);\n  }\n  collectVarsFromCSSDeclarations(style) {\n    iterateCSSDeclarations(style, (property, value) => {\n      if (isVariable(property)) {\n        this.inspectVariable(property, value);\n      }\n      if (isVarDependant(value)) {\n        this.inspectVarDependant(property, value);\n      }\n    });\n  }\n  shouldProcessRootVariables() {\n    return this.rulesQueue.size > 0 && document.documentElement.getAttribute(\"style\")?.includes(\"--\");\n  }\n  collectRootVariables() {\n    if (!this.shouldProcessRootVariables()) {\n      return;\n    }\n    iterateCSSDeclarations(document.documentElement.style, (property, value) => {\n      if (isVariable(property)) {\n        this.inspectVariable(property, value);\n      }\n    });\n  }\n  inspectVariable(varName, value) {\n    this.unstableVarValues.set(varName, value);\n    if (isVarDependant(value) && isConstructedColorVar(value)) {\n      this.unknownColorVars.add(varName);\n      this.definedVars.add(varName);\n    }\n    if (this.definedVars.has(varName)) {\n      return;\n    }\n    this.definedVars.add(varName);\n    const isColor = Boolean(value.match(rawRGBSpaceRegex) || value.match(rawRGBCommaRegex) || parseColorWithCache(value));\n    if (isColor) {\n      this.unknownColorVars.add(varName);\n    } else if (value.includes(\"url(\") || value.includes(\"linear-gradient(\") || value.includes(\"radial-gradient(\")) {\n      this.resolveVariableType(varName, VAR_TYPE_BG_IMG);\n    }\n  }\n  resolveVariableType(varName, typeNum) {\n    const initialType = this.initialVarTypes.get(varName) || 0;\n    const currentType = this.varTypes.get(varName) || 0;\n    const newType = currentType | typeNum;\n    this.varTypes.set(varName, newType);\n    if (newType !== initialType || this.undefinedVars.has(varName)) {\n      this.changedTypeVars.add(varName);\n      this.undefinedVars.delete(varName);\n    }\n    this.unknownColorVars.delete(varName);\n    this.unknownBgVars.delete(varName);\n  }\n  collectRootVarDependents() {\n    if (!this.shouldProcessRootVariables()) {\n      return;\n    }\n    iterateCSSDeclarations(document.documentElement.style, (property, value) => {\n      if (isVarDependant(value)) {\n        this.inspectVarDependant(property, value);\n      }\n    });\n  }\n  inspectVarDependant(property, value) {\n    if (isVariable(property)) {\n      this.iterateVarDeps(value, ref => {\n        if (!this.varRefs.has(property)) {\n          this.varRefs.set(property, new Set());\n        }\n        this.varRefs.get(property).add(ref);\n      });\n    } else if (property === \"background-color\" || property === \"box-shadow\") {\n      this.iterateVarDeps(value, v => this.resolveVariableType(v, VAR_TYPE_BG_COLOR));\n    } else if (isTextColorProperty(property)) {\n      this.iterateVarDeps(value, v => this.resolveVariableType(v, VAR_TYPE_TEXT_COLOR));\n    } else if (property.startsWith(\"border\") || property.startsWith(\"outline\")) {\n      this.iterateVarDeps(value, v => this.resolveVariableType(v, VAR_TYPE_BORDER_COLOR));\n    } else if (property === \"background\" || property === \"background-image\") {\n      this.iterateVarDeps(value, v => {\n        if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\n          return;\n        }\n        const isBgColor = this.findVarRef(v, ref => {\n          return this.unknownColorVars.has(ref) || this.isVarType(ref, VAR_TYPE_BG_COLOR | VAR_TYPE_TEXT_COLOR | VAR_TYPE_BORDER_COLOR);\n        }) != null;\n        this.iterateVarRefs(v, ref => {\n          if (isBgColor) {\n            this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\n          } else {\n            this.unknownBgVars.add(ref);\n          }\n        });\n      });\n    }\n  }\n  iterateVarDeps(value, iterator) {\n    const varDeps = new Set();\n    iterateVarDependencies(value, v => varDeps.add(v));\n    varDeps.forEach(v => iterator(v));\n  }\n  findVarRef(varName, iterator, stack = new Set()) {\n    if (stack.has(varName)) {\n      return null;\n    }\n    stack.add(varName);\n    const result = iterator(varName);\n    if (result) {\n      return varName;\n    }\n    const refs = this.varRefs.get(varName);\n    if (!refs || refs.size === 0) {\n      return null;\n    }\n    for (const ref of refs) {\n      const found = this.findVarRef(ref, iterator, stack);\n      if (found) {\n        return found;\n      }\n    }\n    return null;\n  }\n  iterateVarRefs(varName, iterator) {\n    this.findVarRef(varName, ref => {\n      iterator(ref);\n      return false;\n    });\n  }\n  setOnRootVariableChange(callback) {\n    this.onRootVariableDefined = callback;\n  }\n  putRootVars(styleElement, theme) {\n    const sheet = styleElement.sheet;\n    if (sheet.cssRules.length > 0) {\n      sheet.deleteRule(0);\n    }\n    const declarations = new Map();\n    iterateCSSDeclarations(document.documentElement.style, (property, value) => {\n      if (isVariable(property)) {\n        if (this.isVarType(property, VAR_TYPE_BG_COLOR)) {\n          declarations.set(wrapBgColorVariableName(property), tryModifyBgColor(value, theme));\n        }\n        if (this.isVarType(property, VAR_TYPE_TEXT_COLOR)) {\n          declarations.set(wrapTextColorVariableName(property), tryModifyTextColor(value, theme));\n        }\n        if (this.isVarType(property, VAR_TYPE_BORDER_COLOR)) {\n          declarations.set(wrapBorderColorVariableName(property), tryModifyBorderColor(value, theme));\n        }\n        this.subscribeForVarTypeChange(property, this.onRootVariableDefined);\n      }\n    });\n    const cssLines = [];\n    cssLines.push(\":root {\");\n    for (const [property, value] of declarations) {\n      cssLines.push(`    ${property}: ${value};`);\n    }\n    cssLines.push(\"}\");\n    const cssText = cssLines.join(\"\\n\");\n    sheet.insertRule(cssText);\n  }\n}\nconst variablesStore = new VariablesStore();\nfunction getVariableRange(input, searchStart = 0) {\n  const start = input.indexOf(\"var(\", searchStart);\n  if (start >= 0) {\n    const range = getParenthesesRange(input, start + 3);\n    if (range) {\n      return {\n        start,\n        end: range.end\n      };\n    }\n  }\n  return null;\n}\nfunction getVariablesMatches(input) {\n  const ranges = [];\n  let i = 0;\n  let range;\n  while (range = getVariableRange(input, i)) {\n    const {\n      start,\n      end\n    } = range;\n    ranges.push({\n      start,\n      end,\n      value: input.substring(start, end)\n    });\n    i = range.end + 1;\n  }\n  return ranges;\n}\nfunction replaceVariablesMatches(input, replacer) {\n  const matches = getVariablesMatches(input);\n  const matchesCount = matches.length;\n  if (matchesCount === 0) {\n    return input;\n  }\n  const inputLength = input.length;\n  const replacements = matches.map(m => replacer(m.value, matches.length));\n  const parts = [];\n  parts.push(input.substring(0, matches[0].start));\n  for (let i = 0; i < matchesCount; i++) {\n    parts.push(replacements[i]);\n    const start = matches[i].end;\n    const end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;\n    parts.push(input.substring(start, end));\n  }\n  return parts.join(\"\");\n}\nfunction getVariableNameAndFallback(match) {\n  const commaIndex = match.indexOf(\",\");\n  let name;\n  let fallback;\n  if (commaIndex >= 0) {\n    name = match.substring(4, commaIndex).trim();\n    fallback = match.substring(commaIndex + 1, match.length - 1).trim();\n  } else {\n    name = match.substring(4, match.length - 1).trim();\n    fallback = \"\";\n  }\n  return {\n    name,\n    fallback\n  };\n}\nfunction replaceCSSVariablesNames(value, nameReplacer, fallbackReplacer, finalFallback) {\n  const matchReplacer = match => {\n    const {\n      name,\n      fallback\n    } = getVariableNameAndFallback(match);\n    const newName = nameReplacer(name);\n    if (!fallback) {\n      if (finalFallback) {\n        return `var(${newName}, ${finalFallback})`;\n      }\n      return `var(${newName})`;\n    }\n    let newFallback;\n    if (isVarDependant(fallback)) {\n      newFallback = replaceCSSVariablesNames(fallback, nameReplacer, fallbackReplacer);\n    } else if (fallbackReplacer) {\n      newFallback = fallbackReplacer(fallback);\n    } else {\n      newFallback = fallback;\n    }\n    return `var(${newName}, ${newFallback})`;\n  };\n  return replaceVariablesMatches(value, matchReplacer);\n}\nfunction iterateVarDependencies(value, iterator) {\n  replaceCSSVariablesNames(value, varName => {\n    iterator(varName);\n    return varName;\n  });\n}\nfunction wrapBgColorVariableName(name) {\n  return `--darkreader-bg${name}`;\n}\nfunction wrapTextColorVariableName(name) {\n  return `--darkreader-text${name}`;\n}\nfunction wrapBorderColorVariableName(name) {\n  return `--darkreader-border${name}`;\n}\nfunction wrapBgImgVariableName(name) {\n  return `--darkreader-bgimg${name}`;\n}\nfunction isVariable(property) {\n  return property.startsWith(\"--\");\n}\nfunction isVarDependant(value) {\n  return value.includes(\"var(\");\n}\nfunction isConstructedColorVar(value) {\n  return value.match(/^\\s*(rgb|hsl)a?\\(/) || value.match(/^(((\\d{1,3})|(var\\([\\-_A-Za-z0-9]+\\))),?\\s*?){3}$/);\n}\nconst textColorProps = [\"color\", \"caret-color\", \"-webkit-text-fill-color\", \"fill\", \"stroke\"];\nfunction isTextColorProperty(property) {\n  return textColorProps.includes(property);\n}\nconst rawRGBSpaceRegex = /^(\\d{1,3})\\s+(\\d{1,3})\\s+(\\d{1,3})$/;\nconst rawRGBCommaRegex = /^(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})$/;\nfunction parseRawColorValue(input) {\n  const match = input.match(rawRGBSpaceRegex) ?? input.match(rawRGBCommaRegex);\n  if (match) {\n    const color = `rgb(${match[1]}, ${match[2]}, ${match[3]})`;\n    return {\n      isRaw: true,\n      color\n    };\n  }\n  return {\n    isRaw: false,\n    color: input\n  };\n}\nfunction handleRawColorValue(input, theme, modifyFunction) {\n  const {\n    isRaw,\n    color\n  } = parseRawColorValue(input);\n  const rgb = parseColorWithCache(color);\n  if (rgb) {\n    const outputColor = modifyFunction(rgb, theme, !isRaw);\n    if (isRaw) {\n      const outputInRGB = parseColorWithCache(outputColor);\n      return outputInRGB ? `${outputInRGB.r}, ${outputInRGB.g}, ${outputInRGB.b}` : outputColor;\n    }\n    return outputColor;\n  }\n  return color;\n}\nfunction tryModifyBgColor(color, theme) {\n  return handleRawColorValue(color, theme, modifyBackgroundColor);\n}\nfunction tryModifyTextColor(color, theme) {\n  return handleRawColorValue(color, theme, modifyForegroundColor);\n}\nfunction tryModifyBorderColor(color, theme) {\n  return handleRawColorValue(color, theme, modifyBorderColor);\n}\nfunction insertVarValues(source, varValues, fullStack = new Set()) {\n  let containsUnresolvedVar = false;\n  const matchReplacer = (match, count) => {\n    const {\n      name,\n      fallback\n    } = getVariableNameAndFallback(match);\n    const stack = count > 1 ? new Set(fullStack) : fullStack;\n    if (stack.has(name)) {\n      containsUnresolvedVar = true;\n      return null;\n    }\n    stack.add(name);\n    const varValue = varValues.get(name) || fallback;\n    let inserted = null;\n    if (varValue) {\n      if (isVarDependant(varValue)) {\n        inserted = insertVarValues(varValue, varValues, stack);\n      } else {\n        inserted = varValue;\n      }\n    }\n    if (!inserted) {\n      containsUnresolvedVar = true;\n      return null;\n    }\n    return inserted;\n  };\n  const replaced = replaceVariablesMatches(source, matchReplacer);\n  if (containsUnresolvedVar) {\n    return null;\n  }\n  return replaced;\n}\nfunction getThemeKey(theme) {\n  let resultKey = \"\";\n  themeCacheKeys.forEach(key => {\n    resultKey += `${key}:${theme[key]};`;\n  });\n  return resultKey;\n}\nconst asyncQueue = createAsyncTasksQueue();\nfunction createStyleSheetModifier() {\n  let renderId = 0;\n  function getStyleRuleHash(rule) {\n    let cssText = rule.cssText;\n    if (isMediaRule(rule.parentRule)) {\n      cssText = `${rule.parentRule.media.mediaText} { ${cssText} }`;\n    }\n    return getHashCode(cssText);\n  }\n  const rulesTextCache = new Set();\n  const rulesModCache = new Map();\n  const varTypeChangeCleaners = new Set();\n  let prevFilterKey = null;\n  let hasNonLoadedLink = false;\n  let wasRebuilt = false;\n  function shouldRebuildStyle() {\n    return hasNonLoadedLink && !wasRebuilt;\n  }\n  function modifySheet(options) {\n    const rules = options.sourceCSSRules;\n    const {\n      theme,\n      ignoreImageAnalysis,\n      force,\n      prepareSheet,\n      isAsyncCancelled\n    } = options;\n    let rulesChanged = rulesModCache.size === 0;\n    const notFoundCacheKeys = new Set(rulesModCache.keys());\n    const themeKey = getThemeKey(theme);\n    const themeChanged = themeKey !== prevFilterKey;\n    if (hasNonLoadedLink) {\n      wasRebuilt = true;\n    }\n    const modRules = [];\n    iterateCSSRules(rules, rule => {\n      const hash = getStyleRuleHash(rule);\n      let textDiffersFromPrev = false;\n      notFoundCacheKeys.delete(hash);\n      if (!rulesTextCache.has(hash)) {\n        rulesTextCache.add(hash);\n        textDiffersFromPrev = true;\n      }\n      if (textDiffersFromPrev) {\n        rulesChanged = true;\n      } else {\n        modRules.push(rulesModCache.get(hash));\n        return;\n      }\n      if (rule.style.all === \"revert\") {\n        return;\n      }\n      const modDecs = [];\n      rule.style && iterateCSSDeclarations(rule.style, (property, value) => {\n        const mod = getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageAnalysis, isAsyncCancelled);\n        if (mod) {\n          modDecs.push(mod);\n        }\n      });\n      let modRule = null;\n      if (modDecs.length > 0) {\n        const parentRule = rule.parentRule;\n        modRule = {\n          selector: rule.selectorText,\n          declarations: modDecs,\n          parentRule\n        };\n        modRules.push(modRule);\n      }\n      rulesModCache.set(hash, modRule);\n    }, () => {\n      hasNonLoadedLink = true;\n    });\n    notFoundCacheKeys.forEach(key => {\n      rulesTextCache.delete(key);\n      rulesModCache.delete(key);\n    });\n    prevFilterKey = themeKey;\n    if (!force && !rulesChanged && !themeChanged) {\n      return;\n    }\n    renderId++;\n    function setRule(target, index, rule) {\n      const {\n        selector,\n        declarations\n      } = rule;\n      let selectorText = selector;\n      const emptyIsWhereSelector = isChromium && selector.startsWith(\":is(\") && (selector.includes(\":is()\") || selector.includes(\":where()\") || selector.includes(\":where(\") && selector.includes(\":-moz\"));\n      const viewTransitionSelector = selector.includes(\"::view-transition-\");\n      if (emptyIsWhereSelector || viewTransitionSelector) {\n        selectorText = \".darkreader-unsupported-selector\";\n      }\n      let ruleText = `${selectorText} {`;\n      for (const dec of declarations) {\n        const {\n          property,\n          value,\n          important\n        } = dec;\n        if (value) {\n          ruleText += ` ${property}: ${value}${important ? \" !important\" : \"\"};`;\n        }\n      }\n      ruleText += \" }\";\n      target.insertRule(ruleText, index);\n    }\n    const asyncDeclarations = new Map();\n    const varDeclarations = new Map();\n    let asyncDeclarationCounter = 0;\n    let varDeclarationCounter = 0;\n    const rootReadyGroup = {\n      rule: null,\n      rules: [],\n      isGroup: true\n    };\n    const groupRefs = new WeakMap();\n    function getGroup(rule) {\n      if (rule == null) {\n        return rootReadyGroup;\n      }\n      if (groupRefs.has(rule)) {\n        return groupRefs.get(rule);\n      }\n      const group = {\n        rule,\n        rules: [],\n        isGroup: true\n      };\n      groupRefs.set(rule, group);\n      const parentGroup = getGroup(rule.parentRule);\n      parentGroup.rules.push(group);\n      return group;\n    }\n    varTypeChangeCleaners.forEach(clear => clear());\n    varTypeChangeCleaners.clear();\n    modRules.filter(r => r).forEach(({\n      selector,\n      declarations,\n      parentRule\n    }) => {\n      const group = getGroup(parentRule);\n      const readyStyleRule = {\n        selector,\n        declarations: [],\n        isGroup: false\n      };\n      const readyDeclarations = readyStyleRule.declarations;\n      group.rules.push(readyStyleRule);\n      function handleAsyncDeclaration(property, modified, important, sourceValue) {\n        const asyncKey = ++asyncDeclarationCounter;\n        const asyncDeclaration = {\n          property,\n          value: null,\n          important,\n          asyncKey,\n          sourceValue\n        };\n        readyDeclarations.push(asyncDeclaration);\n        const currentRenderId = renderId;\n        modified.then(asyncValue => {\n          if (!asyncValue || isAsyncCancelled() || currentRenderId !== renderId) {\n            return;\n          }\n          asyncDeclaration.value = asyncValue;\n          asyncQueue.add(() => {\n            if (isAsyncCancelled() || currentRenderId !== renderId) {\n              return;\n            }\n            rebuildAsyncRule(asyncKey);\n          });\n        });\n      }\n      function handleVarDeclarations(property, modified, important, sourceValue) {\n        const {\n          declarations: varDecs,\n          onTypeChange\n        } = modified;\n        const varKey = ++varDeclarationCounter;\n        const currentRenderId = renderId;\n        const initialIndex = readyDeclarations.length;\n        let oldDecs = [];\n        if (varDecs.length === 0) {\n          const tempDec = {\n            property,\n            value: sourceValue,\n            important,\n            sourceValue,\n            varKey\n          };\n          readyDeclarations.push(tempDec);\n          oldDecs = [tempDec];\n        }\n        varDecs.forEach(mod => {\n          if (mod.value instanceof Promise) {\n            handleAsyncDeclaration(mod.property, mod.value, important, sourceValue);\n          } else {\n            const readyDec = {\n              property: mod.property,\n              value: mod.value,\n              important,\n              sourceValue,\n              varKey\n            };\n            readyDeclarations.push(readyDec);\n            oldDecs.push(readyDec);\n          }\n        });\n        onTypeChange.addListener(newDecs => {\n          if (isAsyncCancelled() || currentRenderId !== renderId) {\n            return;\n          }\n          const readyVarDecs = newDecs.map(mod => {\n            return {\n              property: mod.property,\n              value: mod.value,\n              important,\n              sourceValue,\n              varKey\n            };\n          });\n          const index = readyDeclarations.indexOf(oldDecs[0], initialIndex);\n          readyDeclarations.splice(index, oldDecs.length, ...readyVarDecs);\n          oldDecs = readyVarDecs;\n          rebuildVarRule(varKey);\n        });\n        varTypeChangeCleaners.add(() => onTypeChange.removeListeners());\n      }\n      declarations.forEach(({\n        property,\n        value,\n        important,\n        sourceValue\n      }) => {\n        if (typeof value === \"function\") {\n          const modified = value(theme);\n          if (modified instanceof Promise) {\n            handleAsyncDeclaration(property, modified, important, sourceValue);\n          } else if (property.startsWith(\"--\")) {\n            handleVarDeclarations(property, modified, important, sourceValue);\n          } else {\n            readyDeclarations.push({\n              property,\n              value: modified,\n              important,\n              sourceValue\n            });\n          }\n        } else {\n          readyDeclarations.push({\n            property,\n            value,\n            important,\n            sourceValue\n          });\n        }\n      });\n    });\n    const sheet = prepareSheet();\n    function buildStyleSheet() {\n      function createTarget(group, parent) {\n        const {\n          rule\n        } = group;\n        if (isStyleRule(rule)) {\n          const {\n            selectorText\n          } = rule;\n          const index = parent.cssRules.length;\n          parent.insertRule(`${selectorText} {}`, index);\n          return parent.cssRules[index];\n        }\n        if (isMediaRule(rule)) {\n          const {\n            media\n          } = rule;\n          const index = parent.cssRules.length;\n          parent.insertRule(`@media ${media.mediaText} {}`, index);\n          return parent.cssRules[index];\n        }\n        if (isLayerRule(rule)) {\n          const {\n            name\n          } = rule;\n          const index = parent.cssRules.length;\n          parent.insertRule(`@layer ${name} {}`, index);\n          return parent.cssRules[index];\n        }\n        return parent;\n      }\n      function iterateReadyRules(group, target, styleIterator) {\n        group.rules.forEach(r => {\n          if (r.isGroup) {\n            const t = createTarget(r, target);\n            iterateReadyRules(r, t, styleIterator);\n          } else {\n            styleIterator(r, target);\n          }\n        });\n      }\n      iterateReadyRules(rootReadyGroup, sheet, (rule, target) => {\n        const index = target.cssRules.length;\n        rule.declarations.forEach(({\n          asyncKey,\n          varKey\n        }) => {\n          if (asyncKey != null) {\n            asyncDeclarations.set(asyncKey, {\n              rule,\n              target,\n              index\n            });\n          }\n          if (varKey != null) {\n            varDeclarations.set(varKey, {\n              rule,\n              target,\n              index\n            });\n          }\n        });\n        setRule(target, index, rule);\n      });\n    }\n    function rebuildAsyncRule(key) {\n      const {\n        rule,\n        target,\n        index\n      } = asyncDeclarations.get(key);\n      target.deleteRule(index);\n      setRule(target, index, rule);\n      asyncDeclarations.delete(key);\n    }\n    function rebuildVarRule(key) {\n      const {\n        rule,\n        target,\n        index\n      } = varDeclarations.get(key);\n      target.deleteRule(index);\n      setRule(target, index, rule);\n    }\n    buildStyleSheet();\n  }\n  return {\n    modifySheet,\n    shouldRebuildStyle\n  };\n}\nlet canUseSheetProxy$1 = false;\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => canUseSheetProxy$1 = true, {\n  once: true\n});\nconst overrides$1 = new WeakSet();\nconst overridesBySource = new WeakMap();\nfunction canHaveAdoptedStyleSheets(node) {\n  return Array.isArray(node.adoptedStyleSheets);\n}\nfunction createAdoptedStyleSheetOverride(node) {\n  let cancelAsyncOperations = false;\n  function iterateSourceSheets(iterator) {\n    node.adoptedStyleSheets.forEach(sheet => {\n      if (!overrides$1.has(sheet)) {\n        iterator(sheet);\n      }\n      defineSheetScope(sheet, node);\n    });\n  }\n  function injectSheet(sheet, override) {\n    const newSheets = [...node.adoptedStyleSheets];\n    const sheetIndex = newSheets.indexOf(sheet);\n    const overrideIndex = newSheets.indexOf(override);\n    if (overrideIndex >= 0) {\n      newSheets.splice(overrideIndex, 1);\n    }\n    newSheets.splice(sheetIndex + 1, 0, override);\n    node.adoptedStyleSheets = newSheets;\n  }\n  function clear() {\n    const newSheets = [...node.adoptedStyleSheets];\n    for (let i = newSheets.length - 1; i >= 0; i--) {\n      const sheet = newSheets[i];\n      if (overrides$1.has(sheet)) {\n        newSheets.splice(i, 1);\n      }\n    }\n    if (node.adoptedStyleSheets.length !== newSheets.length) {\n      node.adoptedStyleSheets = newSheets;\n    }\n    sourceSheets = new WeakSet();\n    sourceDeclarations = new WeakSet();\n  }\n  const cleaners = [];\n  function destroy() {\n    cleaners.forEach(c => c());\n    cleaners.splice(0);\n    cancelAsyncOperations = true;\n    clear();\n    if (frameId) {\n      cancelAnimationFrame(frameId);\n      frameId = null;\n    }\n  }\n  let rulesChangeKey = 0;\n  function getRulesChangeKey() {\n    let count = 0;\n    iterateSourceSheets(sheet => {\n      count += sheet.cssRules.length;\n    });\n    if (count === 1) {\n      const rule = node.adoptedStyleSheets[0].cssRules[0];\n      return rule instanceof CSSStyleRule ? rule.style.length : count;\n    }\n    return count;\n  }\n  let sourceSheets = new WeakSet();\n  let sourceDeclarations = new WeakSet();\n  function render(theme, ignoreImageAnalysis) {\n    clear();\n    for (let i = node.adoptedStyleSheets.length - 1; i >= 0; i--) {\n      const sheet = node.adoptedStyleSheets[i];\n      if (overrides$1.has(sheet)) {\n        continue;\n      }\n      sourceSheets.add(sheet);\n      const readyOverride = overridesBySource.get(sheet);\n      if (readyOverride) {\n        rulesChangeKey = getRulesChangeKey();\n        injectSheet(sheet, readyOverride);\n        continue;\n      }\n      const rules = sheet.cssRules;\n      const override = new CSSStyleSheet();\n      overridesBySource.set(sheet, override);\n      iterateCSSRules(rules, rule => sourceDeclarations.add(rule.style));\n      const prepareSheet = () => {\n        for (let i = override.cssRules.length - 1; i >= 0; i--) {\n          override.deleteRule(i);\n        }\n        override.insertRule(\"#__darkreader__adoptedOverride {}\");\n        injectSheet(sheet, override);\n        overrides$1.add(override);\n        return override;\n      };\n      const sheetModifier = createStyleSheetModifier();\n      sheetModifier.modifySheet({\n        prepareSheet,\n        sourceCSSRules: rules,\n        theme,\n        ignoreImageAnalysis,\n        force: false,\n        isAsyncCancelled: () => cancelAsyncOperations\n      });\n    }\n    rulesChangeKey = getRulesChangeKey();\n  }\n  let callbackRequested = false;\n  function handleArrayChange(callback) {\n    if (callbackRequested) {\n      return;\n    }\n    callbackRequested = true;\n    queueMicrotask(() => {\n      callbackRequested = false;\n      const sheets = node.adoptedStyleSheets.filter(s => !overrides$1.has(s));\n      sheets.forEach(sheet => overridesBySource.delete(sheet));\n      callback(sheets);\n    });\n  }\n  function checkForUpdates() {\n    return getRulesChangeKey() !== rulesChangeKey;\n  }\n  let frameId = null;\n  function watchUsingRAF(callback) {\n    frameId = requestAnimationFrame(() => {\n      if (canUseSheetProxy$1) {\n        return;\n      }\n      if (checkForUpdates()) {\n        handleArrayChange(callback);\n      }\n      watchUsingRAF(callback);\n    });\n  }\n  function addSheetChangeEventListener(type, listener) {\n    node.addEventListener(type, listener);\n    cleaners.push(() => node.removeEventListener(type, listener));\n  }\n  function watch(callback) {\n    const onAdoptedSheetsChange = () => {\n      canUseSheetProxy$1 = true;\n      handleArrayChange(callback);\n    };\n    addSheetChangeEventListener(\"__darkreader__adoptedStyleSheetsChange\", onAdoptedSheetsChange);\n    addSheetChangeEventListener(\"__darkreader__adoptedStyleSheetChange\", onAdoptedSheetsChange);\n    addSheetChangeEventListener(\"__darkreader__adoptedStyleDeclarationChange\", onAdoptedSheetsChange);\n    if (canUseSheetProxy$1) {\n      return;\n    }\n    watchUsingRAF(callback);\n  }\n  return {\n    render,\n    destroy,\n    watch\n  };\n}\nclass StyleSheetCommandBuilder {\n  constructor() {\n    this.cssRules = [];\n    this.commands = [];\n  }\n  insertRule(cssText, index = 0) {\n    this.commands.push({\n      type: \"insert\",\n      index,\n      cssText\n    });\n    this.cssRules.splice(index, 0, new StyleSheetCommandBuilder());\n    return index;\n  }\n  deleteRule(index) {\n    this.commands.push({\n      type: \"delete\",\n      index\n    });\n    this.cssRules.splice(index, 1);\n  }\n  replaceSync(cssText) {\n    this.commands.splice(0);\n    this.commands.push({\n      type: \"replace\",\n      cssText\n    });\n    if (cssText === \"\") {\n      this.cssRules.splice(0);\n    } else {\n      throw new Error(\"StyleSheetCommandBuilder.replaceSync() is not fully supported\");\n    }\n  }\n  getDeepCSSCommands() {\n    const deep = [];\n    this.commands.forEach(command => {\n      deep.push({\n        type: command.type,\n        cssText: command.type !== \"delete\" ? command.cssText : \"\",\n        path: command.type === \"replace\" ? [] : [command.index]\n      });\n    });\n    this.cssRules.forEach((rule, i) => {\n      const childCommands = rule.getDeepCSSCommands();\n      childCommands.forEach(c => c.path.unshift(i));\n    });\n    return deep;\n  }\n  clearDeepCSSCommands() {\n    this.commands.splice(0);\n    this.cssRules.forEach(rule => rule.clearDeepCSSCommands());\n  }\n}\nfunction createAdoptedStyleSheetFallback() {\n  let cancelAsyncOperations = false;\n  const builder = new StyleSheetCommandBuilder();\n  function render(options) {\n    const prepareSheet = () => {\n      builder.replaceSync(\"\");\n      return builder;\n    };\n    const sheetModifier = createStyleSheetModifier();\n    sheetModifier.modifySheet({\n      prepareSheet,\n      sourceCSSRules: options.cssRules,\n      theme: options.theme,\n      ignoreImageAnalysis: options.ignoreImageAnalysis,\n      force: false,\n      isAsyncCancelled: () => cancelAsyncOperations\n    });\n  }\n  function commands() {\n    const commands = builder.getDeepCSSCommands();\n    builder.clearDeepCSSCommands();\n    return commands;\n  }\n  function destroy() {\n    cancelAsyncOperations = true;\n  }\n  return {\n    render,\n    destroy,\n    commands\n  };\n}\nconst hostsBreakingOnStylePosition = [\"www.diffusioneshop.com\", \"zhale.me\"];\nconst mode = hostsBreakingOnStylePosition.includes(location.hostname) ? \"away\" : \"next\";\nfunction getStyleInjectionMode() {\n  return mode;\n}\nfunction injectStyleAway(styleElement) {\n  let container = document.body.querySelector(\".darkreader-style-container\");\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.classList.add(\"darkreader\");\n    container.classList.add(\"darkreader-style-container\");\n    container.style.display = \"none\";\n    document.body.append(container);\n  }\n  container.append(styleElement);\n}\nconst overrides = {\n  \"background-color\": {\n    customProp: \"--darkreader-inline-bgcolor\",\n    cssProp: \"background-color\",\n    dataAttr: \"data-darkreader-inline-bgcolor\"\n  },\n  \"background-image\": {\n    customProp: \"--darkreader-inline-bgimage\",\n    cssProp: \"background-image\",\n    dataAttr: \"data-darkreader-inline-bgimage\"\n  },\n  \"border-color\": {\n    customProp: \"--darkreader-inline-border\",\n    cssProp: \"border-color\",\n    dataAttr: \"data-darkreader-inline-border\"\n  },\n  \"border-bottom-color\": {\n    customProp: \"--darkreader-inline-border-bottom\",\n    cssProp: \"border-bottom-color\",\n    dataAttr: \"data-darkreader-inline-border-bottom\"\n  },\n  \"border-left-color\": {\n    customProp: \"--darkreader-inline-border-left\",\n    cssProp: \"border-left-color\",\n    dataAttr: \"data-darkreader-inline-border-left\"\n  },\n  \"border-right-color\": {\n    customProp: \"--darkreader-inline-border-right\",\n    cssProp: \"border-right-color\",\n    dataAttr: \"data-darkreader-inline-border-right\"\n  },\n  \"border-top-color\": {\n    customProp: \"--darkreader-inline-border-top\",\n    cssProp: \"border-top-color\",\n    dataAttr: \"data-darkreader-inline-border-top\"\n  },\n  \"box-shadow\": {\n    customProp: \"--darkreader-inline-boxshadow\",\n    cssProp: \"box-shadow\",\n    dataAttr: \"data-darkreader-inline-boxshadow\"\n  },\n  \"color\": {\n    customProp: \"--darkreader-inline-color\",\n    cssProp: \"color\",\n    dataAttr: \"data-darkreader-inline-color\"\n  },\n  \"fill\": {\n    customProp: \"--darkreader-inline-fill\",\n    cssProp: \"fill\",\n    dataAttr: \"data-darkreader-inline-fill\"\n  },\n  \"stroke\": {\n    customProp: \"--darkreader-inline-stroke\",\n    cssProp: \"stroke\",\n    dataAttr: \"data-darkreader-inline-stroke\"\n  },\n  \"outline-color\": {\n    customProp: \"--darkreader-inline-outline\",\n    cssProp: \"outline-color\",\n    dataAttr: \"data-darkreader-inline-outline\"\n  },\n  \"stop-color\": {\n    customProp: \"--darkreader-inline-stopcolor\",\n    cssProp: \"stop-color\",\n    dataAttr: \"data-darkreader-inline-stopcolor\"\n  }\n};\nconst shorthandOverrides = {\n  \"background\": {\n    customProp: \"--darkreader-inline-bg\",\n    cssProp: \"background\",\n    dataAttr: \"data-darkreader-inline-bg\"\n  },\n  \"border\": {\n    customProp: \"--darkreader-inline-border-short\",\n    cssProp: \"border\",\n    dataAttr: \"data-darkreader-inline-border-short\"\n  },\n  \"border-bottom\": {\n    customProp: \"--darkreader-inline-border-bottom-short\",\n    cssProp: \"border-bottom\",\n    dataAttr: \"data-darkreader-inline-border-bottom-short\"\n  },\n  \"border-left\": {\n    customProp: \"--darkreader-inline-border-left-short\",\n    cssProp: \"border-left\",\n    dataAttr: \"data-darkreader-inline-border-left-short\"\n  },\n  \"border-right\": {\n    customProp: \"--darkreader-inline-border-right-short\",\n    cssProp: \"border-right\",\n    dataAttr: \"data-darkreader-inline-border-right-short\"\n  },\n  \"border-top\": {\n    customProp: \"--darkreader-inline-border-top-short\",\n    cssProp: \"border-top\",\n    dataAttr: \"data-darkreader-inline-border-top-short\"\n  }\n};\nconst overridesList = Object.values(overrides);\nconst normalizedPropList = {};\noverridesList.forEach(({\n  cssProp,\n  customProp\n}) => normalizedPropList[customProp] = cssProp);\nconst INLINE_STYLE_ATTRS = [\"style\", \"fill\", \"stop-color\", \"stroke\", \"bgcolor\", \"color\", \"background\"];\nconst INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(attr => `[${attr}]`).join(\", \");\nfunction getInlineOverrideStyle() {\n  const allOverrides = overridesList.concat(Object.values(shorthandOverrides));\n  return allOverrides.map(({\n    dataAttr,\n    customProp,\n    cssProp\n  }) => {\n    return [`[${dataAttr}] {`, `  ${cssProp}: var(${customProp}) !important;`, \"}\"].join(\"\\n\");\n  }).concat([\"[data-darkreader-inline-invert] {\", \"    filter: invert(100%) hue-rotate(180deg);\", \"}\"]).join(\"\\n\");\n}\nfunction getInlineStyleElements(root) {\n  const results = [];\n  if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {\n    results.push(root);\n  }\n  if (root instanceof Element || isShadowDomSupported && root instanceof ShadowRoot || root instanceof Document) {\n    push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));\n  }\n  return results;\n}\nconst treeObservers = new Map();\nconst attrObservers = new Map();\nfunction watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {\n  deepWatchForInlineStyles(document, elementStyleDidChange, shadowRootDiscovered);\n  iterateShadowHosts(document.documentElement, host => {\n    deepWatchForInlineStyles(host.shadowRoot, elementStyleDidChange, shadowRootDiscovered);\n  });\n}\nfunction deepWatchForInlineStyles(root, elementStyleDidChange, shadowRootDiscovered) {\n  if (treeObservers.has(root)) {\n    treeObservers.get(root).disconnect();\n    attrObservers.get(root).disconnect();\n  }\n  const discoveredNodes = new WeakSet();\n  function discoverNodes(node) {\n    getInlineStyleElements(node).forEach(el => {\n      if (discoveredNodes.has(el)) {\n        return;\n      }\n      discoveredNodes.add(el);\n      elementStyleDidChange(el);\n    });\n    iterateShadowHosts(node, n => {\n      if (discoveredNodes.has(node)) {\n        return;\n      }\n      discoveredNodes.add(node);\n      shadowRootDiscovered(n.shadowRoot);\n      deepWatchForInlineStyles(n.shadowRoot, elementStyleDidChange, shadowRootDiscovered);\n    });\n    variablesStore.matchVariablesAndDependents();\n  }\n  const treeObserver = createOptimizedTreeObserver(root, {\n    onMinorMutations: (_root, {\n      additions\n    }) => {\n      additions.forEach(added => discoverNodes(added));\n    },\n    onHugeMutations: () => {\n      discoverNodes(root);\n    }\n  });\n  treeObservers.set(root, treeObserver);\n  let attemptCount = 0;\n  let start = null;\n  const ATTEMPTS_INTERVAL = getDuration({\n    seconds: 10\n  });\n  const RETRY_TIMEOUT = getDuration({\n    seconds: 2\n  });\n  const MAX_ATTEMPTS_COUNT = 50;\n  let cache = [];\n  let timeoutId = null;\n  const handleAttributeMutations = throttle(mutations => {\n    const handledTargets = new Set();\n    mutations.forEach(m => {\n      const target = m.target;\n      if (handledTargets.has(target)) {\n        return;\n      }\n      if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {\n        handledTargets.add(target);\n        elementStyleDidChange(target);\n      }\n    });\n    variablesStore.matchVariablesAndDependents();\n  });\n  const attrObserver = new MutationObserver(mutations => {\n    if (timeoutId) {\n      cache.push(...mutations);\n      return;\n    }\n    attemptCount++;\n    const now = Date.now();\n    if (start == null) {\n      start = now;\n    } else if (attemptCount >= MAX_ATTEMPTS_COUNT) {\n      if (now - start < ATTEMPTS_INTERVAL) {\n        timeoutId = setTimeout(() => {\n          start = null;\n          attemptCount = 0;\n          timeoutId = null;\n          const attributeCache = cache;\n          cache = [];\n          handleAttributeMutations(attributeCache);\n        }, RETRY_TIMEOUT);\n        cache.push(...mutations);\n        return;\n      }\n      start = now;\n      attemptCount = 1;\n    }\n    handleAttributeMutations(mutations);\n  });\n  attrObserver.observe(root, {\n    attributes: true,\n    attributeFilter: INLINE_STYLE_ATTRS.concat(overridesList.map(({\n      dataAttr\n    }) => dataAttr)),\n    subtree: true\n  });\n  attrObservers.set(root, attrObserver);\n}\nfunction stopWatchingForInlineStyles() {\n  treeObservers.forEach(o => o.disconnect());\n  attrObservers.forEach(o => o.disconnect());\n  treeObservers.clear();\n  attrObservers.clear();\n}\nconst inlineStyleCache = new WeakMap();\nconst svgInversionCache = new WeakSet();\nconst svgAnalysisConditionCache = new WeakMap();\nconst themeProps = [\"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"mode\"];\nfunction shouldAnalyzeSVGAsImage(svg) {\n  if (svgAnalysisConditionCache.has(svg)) {\n    return svgAnalysisConditionCache.get(svg);\n  }\n  const shouldAnalyze = Boolean(svg && (svg.getAttribute(\"class\")?.includes(\"logo\") || svg.parentElement?.getAttribute(\"class\")?.includes(\"logo\")));\n  svgAnalysisConditionCache.set(svg, shouldAnalyze);\n  return shouldAnalyze;\n}\nfunction getInlineStyleCacheKey(el, theme) {\n  return INLINE_STYLE_ATTRS.map(attr => `${attr}=\"${el.getAttribute(attr)}\"`).concat(themeProps.map(prop => `${prop}=\"${theme[prop]}\"`)).join(\" \");\n}\nfunction shouldIgnoreInlineStyle(element, selectors) {\n  for (let i = 0, len = selectors.length; i < len; i++) {\n    const ingnoredSelector = selectors[i];\n    if (element.matches(ingnoredSelector)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction overrideInlineStyle(element, theme, ignoreInlineSelectors, ignoreImageSelectors) {\n  const cacheKey = getInlineStyleCacheKey(element, theme);\n  if (cacheKey === inlineStyleCache.get(element)) {\n    return;\n  }\n  const unsetProps = new Set(Object.keys(overrides));\n  function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {\n    const mod = getModifiableCSSDeclaration(modifierCSSProp, cssVal, {\n      style: element.style\n    }, variablesStore, ignoreImageSelectors, null);\n    if (!mod) {\n      return;\n    }\n    function setStaticValue(value) {\n      const {\n        customProp,\n        dataAttr\n      } = overrides[targetCSSProp] ?? shorthandOverrides[targetCSSProp];\n      element.style.setProperty(customProp, value);\n      if (!element.hasAttribute(dataAttr)) {\n        element.setAttribute(dataAttr, \"\");\n      }\n      unsetProps.delete(targetCSSProp);\n    }\n    function setVarDeclaration(mod) {\n      let prevDeclarations = [];\n      function setProps(declarations) {\n        prevDeclarations.forEach(({\n          property\n        }) => {\n          element.style.removeProperty(property);\n        });\n        declarations.forEach(({\n          property,\n          value\n        }) => {\n          if (!(value instanceof Promise)) {\n            element.style.setProperty(property, value);\n          }\n        });\n        prevDeclarations = declarations;\n      }\n      setProps(mod.declarations);\n      mod.onTypeChange.addListener(setProps);\n    }\n    function setAsyncValue(promise, sourceValue) {\n      promise.then(value => {\n        if (value && targetCSSProp === \"background\" && value.startsWith(\"var(--darkreader-bg--\")) {\n          setStaticValue(value);\n        }\n        if (value && targetCSSProp === \"background-image\") {\n          if ((element === document.documentElement || element === document.body) && value === sourceValue) {\n            value = \"none\";\n          }\n          setStaticValue(value);\n        }\n        inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\n      });\n    }\n    const value = typeof mod.value === \"function\" ? mod.value(theme) : mod.value;\n    if (typeof value === \"string\") {\n      setStaticValue(value);\n    } else if (value instanceof Promise) {\n      setAsyncValue(value, cssVal);\n    } else if (typeof value === \"object\") {\n      setVarDeclaration(value);\n    }\n  }\n  if (ignoreInlineSelectors.length > 0) {\n    if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {\n      unsetProps.forEach(cssProp => {\n        element.removeAttribute(overrides[cssProp].dataAttr);\n      });\n      return;\n    }\n  }\n  const isSVGElement = element instanceof SVGElement;\n  const svg = isSVGElement ? element.ownerSVGElement ?? (element instanceof SVGSVGElement ? element : null) : null;\n  if (isSVGElement && theme.mode === 1 && svg) {\n    if (svgInversionCache.has(svg)) {\n      return;\n    }\n    if (shouldAnalyzeSVGAsImage(svg)) {\n      svgInversionCache.add(svg);\n      const analyzeSVGAsImage = () => {\n        let svgString = svg.outerHTML;\n        svgString = svgString.replaceAll('<style class=\"darkreader darkreader--sync\" media=\"screen\"></style>', \"\");\n        const dataURL = `data:image/svg+xml;base64,${btoa(svgString)}`;\n        getImageDetails(dataURL).then(details => {\n          if (details.isDark && details.isTransparent || details.isLarge && details.isLight && !details.isTransparent) {\n            svg.setAttribute(\"data-darkreader-inline-invert\", \"\");\n          } else {\n            svg.removeAttribute(\"data-darkreader-inline-invert\");\n          }\n        });\n      };\n      analyzeSVGAsImage();\n      if (!isDOMReady()) {\n        addDOMReadyListener(analyzeSVGAsImage);\n      }\n      return;\n    }\n  }\n  if (element.hasAttribute(\"bgcolor\")) {\n    let value = element.getAttribute(\"bgcolor\");\n    if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\n      value = `#${value}`;\n    }\n    setCustomProp(\"background-color\", \"background-color\", value);\n  }\n  if ((element === document.documentElement || element === document.body) && element.hasAttribute(\"background\")) {\n    const url = getAbsoluteURL(location.href, element.getAttribute(\"background\") ?? \"\");\n    const value = `url(\"${url}\")`;\n    setCustomProp(\"background-image\", \"background-image\", value);\n  }\n  if (element.hasAttribute(\"color\") && element.rel !== \"mask-icon\") {\n    let value = element.getAttribute(\"color\");\n    if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\n      value = `#${value}`;\n    }\n    setCustomProp(\"color\", \"color\", value);\n  }\n  if (isSVGElement) {\n    if (element.hasAttribute(\"fill\")) {\n      const SMALL_SVG_LIMIT = 32;\n      const value = element.getAttribute(\"fill\");\n      if (value !== \"none\") {\n        if (!(element instanceof SVGTextElement)) {\n          const handleSVGElement = () => {\n            const {\n              width,\n              height\n            } = element.getBoundingClientRect();\n            const isBg = width > SMALL_SVG_LIMIT || height > SMALL_SVG_LIMIT;\n            setCustomProp(\"fill\", isBg ? \"background-color\" : \"color\", value);\n          };\n          if (isReadyStateComplete()) {\n            handleSVGElement();\n          } else {\n            addReadyStateCompleteListener(handleSVGElement);\n          }\n        } else {\n          setCustomProp(\"fill\", \"color\", value);\n        }\n      }\n    }\n    if (element.hasAttribute(\"stop-color\")) {\n      setCustomProp(\"stop-color\", \"background-color\", element.getAttribute(\"stop-color\"));\n    }\n  }\n  if (element.hasAttribute(\"stroke\")) {\n    const value = element.getAttribute(\"stroke\");\n    setCustomProp(\"stroke\", element instanceof SVGLineElement || element instanceof SVGTextElement ? \"border-color\" : \"color\", value);\n  }\n  element.style && iterateCSSDeclarations(element.style, (property, value) => {\n    if (property === \"background-image\" && value.includes(\"url\")) {\n      if (element === document.documentElement || element === document.body) {\n        setCustomProp(property, property, value);\n      }\n      return;\n    }\n    if (overrides.hasOwnProperty(property) || property.startsWith(\"--\") && !normalizedPropList[property]) {\n      setCustomProp(property, property, value);\n    } else if (shorthandOverrides[property] && value.includes(\"var(\")) {\n      setCustomProp(property, property, value);\n    } else {\n      const overriddenProp = normalizedPropList[property];\n      if (overriddenProp && !element.style.getPropertyValue(overriddenProp) && !element.hasAttribute(overriddenProp)) {\n        if (overriddenProp === \"background-color\" && element.hasAttribute(\"bgcolor\")) {\n          return;\n        }\n        element.style.setProperty(property, \"\");\n      }\n    }\n  });\n  if (element.style && element instanceof SVGTextElement && element.style.fill) {\n    setCustomProp(\"fill\", \"color\", element.style.getPropertyValue(\"fill\"));\n  }\n  if (element.getAttribute(\"style\")?.includes(\"--\")) {\n    variablesStore.addInlineStyleForMatching(element.style);\n  }\n  forEach(unsetProps, cssProp => {\n    element.removeAttribute(overrides[cssProp].dataAttr);\n  });\n  inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\n}\nconst metaThemeColorName = \"theme-color\";\nconst metaThemeColorSelector = `meta[name=\"${metaThemeColorName}\"]`;\nlet srcMetaThemeColor = null;\nlet observer = null;\nfunction changeMetaThemeColor(meta, theme) {\n  srcMetaThemeColor = srcMetaThemeColor || meta.content;\n  const color = parseColorWithCache(srcMetaThemeColor);\n  if (!color) {\n    logWarn(\"Invalid meta color\", color);\n    return;\n  }\n  meta.content = modifyBackgroundColor(color, theme, false);\n}\nfunction changeMetaThemeColorWhenAvailable(theme) {\n  const meta = document.querySelector(metaThemeColorSelector);\n  if (meta) {\n    changeMetaThemeColor(meta, theme);\n  } else {\n    if (observer) {\n      observer.disconnect();\n    }\n    observer = new MutationObserver(mutations => {\n      loop: for (let i = 0; i < mutations.length; i++) {\n        const {\n          addedNodes\n        } = mutations[i];\n        for (let j = 0; j < addedNodes.length; j++) {\n          const node = addedNodes[j];\n          if (node instanceof HTMLMetaElement && node.name === metaThemeColorName) {\n            observer.disconnect();\n            observer = null;\n            changeMetaThemeColor(node, theme);\n            break loop;\n          }\n        }\n      }\n    });\n    observer.observe(document.head, {\n      childList: true\n    });\n  }\n}\nfunction restoreMetaThemeColor() {\n  if (observer) {\n    observer.disconnect();\n    observer = null;\n  }\n  const meta = document.querySelector(metaThemeColorSelector);\n  if (meta && srcMetaThemeColor) {\n    meta.content = srcMetaThemeColor;\n  }\n}\nconst cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;\nfunction removeCSSComments(cssText) {\n  return cssText.replace(cssCommentsRegex, \"\");\n}\nlet canUseSheetProxy = false;\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => canUseSheetProxy = true, {\n  once: true\n});\nfunction createSheetWatcher(element, safeGetSheetRules, callback, isCancelled) {\n  let rafSheetWatcher = null;\n  function watchForSheetChanges() {\n    watchForSheetChangesUsingProxy();\n    if (!(canUseSheetProxy && element.sheet)) {\n      rafSheetWatcher = createRAFSheetWatcher(element, safeGetSheetRules, callback, isCancelled);\n      rafSheetWatcher.start();\n    }\n  }\n  let areSheetChangesPending = false;\n  function onSheetChange() {\n    canUseSheetProxy = true;\n    rafSheetWatcher?.stop();\n    if (areSheetChangesPending) {\n      return;\n    }\n    function handleSheetChanges() {\n      areSheetChangesPending = false;\n      if (isCancelled()) {\n        return;\n      }\n      callback();\n    }\n    areSheetChangesPending = true;\n    queueMicrotask(handleSheetChanges);\n  }\n  function watchForSheetChangesUsingProxy() {\n    element.addEventListener(\"__darkreader__updateSheet\", onSheetChange);\n  }\n  function stopWatchingForSheetChangesUsingProxy() {\n    element.removeEventListener(\"__darkreader__updateSheet\", onSheetChange);\n  }\n  function stopWatchingForSheetChanges() {\n    stopWatchingForSheetChangesUsingProxy();\n    rafSheetWatcher?.stop();\n  }\n  return {\n    start: watchForSheetChanges,\n    stop: stopWatchingForSheetChanges\n  };\n}\nfunction createRAFSheetWatcher(element, safeGetSheetRules, callback, isCancelled) {\n  let rulesChangeKey = null;\n  let rulesCheckFrameId = null;\n  function getRulesChangeKey() {\n    const rules = safeGetSheetRules();\n    return rules ? rules.length : null;\n  }\n  function didRulesKeyChange() {\n    return getRulesChangeKey() !== rulesChangeKey;\n  }\n  function watchForSheetChangesUsingRAF() {\n    rulesChangeKey = getRulesChangeKey();\n    stopWatchingForSheetChangesUsingRAF();\n    const checkForUpdate = () => {\n      const cancelled = isCancelled();\n      if (!cancelled && didRulesKeyChange()) {\n        rulesChangeKey = getRulesChangeKey();\n        callback();\n      }\n      if (cancelled || canUseSheetProxy && element.sheet) {\n        stopWatchingForSheetChangesUsingRAF();\n        return;\n      }\n      rulesCheckFrameId = requestAnimationFrame(checkForUpdate);\n    };\n    checkForUpdate();\n  }\n  function stopWatchingForSheetChangesUsingRAF() {\n    rulesCheckFrameId && cancelAnimationFrame(rulesCheckFrameId);\n  }\n  return {\n    start: watchForSheetChangesUsingRAF,\n    stop: stopWatchingForSheetChangesUsingRAF\n  };\n}\nconst STYLE_SELECTOR = 'style, link[rel*=\"stylesheet\" i]:not([disabled])';\nfunction isFontsGoogleApiStyle(element) {\n  if (!element.href) {\n    return false;\n  }\n  try {\n    const elementURL = new URL(element.href);\n    return elementURL.hostname === \"fonts.googleapis.com\";\n  } catch (err) {\n    logInfo(`Couldn't construct ${element.href} as URL`);\n    return false;\n  }\n}\nconst hostsBreakingOnSVGStyleOverride = [\"account.containerstore.com\", \"containerstore.com\", \"www.onet.pl\"];\nfunction shouldManageStyle(element) {\n  return (element instanceof HTMLStyleElement || element instanceof SVGStyleElement && !hostsBreakingOnSVGStyleOverride.includes(location.hostname) || element instanceof HTMLLinkElement && Boolean(element.rel) && element.rel.toLowerCase().includes(\"stylesheet\") && Boolean(element.href) && !element.disabled && (isFirefox ? !element.href.startsWith(\"moz-extension://\") : true) && !isFontsGoogleApiStyle(element)) && !element.classList.contains(\"darkreader\") && element.media.toLowerCase() !== \"print\" && !element.classList.contains(\"stylus\");\n}\nfunction getManageableStyles(node, results = [], deep = true) {\n  if (shouldManageStyle(node)) {\n    results.push(node);\n  } else if (node instanceof Element || isShadowDomSupported && node instanceof ShadowRoot || node === document) {\n    forEach(node.querySelectorAll(STYLE_SELECTOR), style => getManageableStyles(style, results, false));\n    if (deep) {\n      iterateShadowHosts(node, host => getManageableStyles(host.shadowRoot, results, false));\n    }\n  }\n  return results;\n}\nconst syncStyleSet = new WeakSet();\nconst corsStyleSet = new WeakSet();\nlet loadingLinkCounter = 0;\nconst rejectorsForLoadingLinks = new Map();\nfunction cleanLoadingLinks() {\n  rejectorsForLoadingLinks.clear();\n}\nfunction manageStyle(element, {\n  update,\n  loadingStart,\n  loadingEnd\n}) {\n  const inMode = getStyleInjectionMode();\n  let corsCopy = null;\n  let syncStyle = null;\n  if (inMode === \"next\") {\n    const prevStyles = [];\n    let next = element;\n    while ((next = next.nextElementSibling) && next.matches(\".darkreader\")) {\n      prevStyles.push(next);\n    }\n    corsCopy = prevStyles.find(el => el.matches(\".darkreader--cors\") && !corsStyleSet.has(el)) || null;\n    syncStyle = prevStyles.find(el => el.matches(\".darkreader--sync\") && !syncStyleSet.has(el)) || null;\n  }\n  let corsCopyPositionWatcher = null;\n  let syncStylePositionWatcher = null;\n  let cancelAsyncOperations = false;\n  let isOverrideEmpty = true;\n  const isAsyncCancelled = () => cancelAsyncOperations;\n  const sheetModifier = createStyleSheetModifier();\n  const observer = new MutationObserver(mutations => {\n    if (mutations.some(m => m.type === \"characterData\") && containsCSSImport()) {\n      const cssText = (element.textContent ?? \"\").trim();\n      createOrUpdateCORSCopy(cssText, location.href).then(update);\n    } else {\n      update();\n    }\n  });\n  const observerOptions = {\n    attributes: true,\n    childList: true,\n    subtree: true,\n    characterData: true\n  };\n  function containsCSSImport() {\n    if (!(element instanceof HTMLStyleElement)) {\n      return false;\n    }\n    const cssText = removeCSSComments(element.textContent ?? \"\").trim();\n    return cssText.match(cssImportRegex);\n  }\n  function hasImports(cssRules, checkCrossOrigin) {\n    let result = false;\n    if (cssRules) {\n      let rule;\n      cssRulesLoop: for (let i = 0, len = cssRules.length; i < len; i++) {\n        rule = cssRules[i];\n        if (rule.href) {\n          if (checkCrossOrigin) {\n            if (!rule.href.startsWith(\"https://fonts.googleapis.com/\") && rule.href.startsWith(\"http\") && !rule.href.startsWith(location.origin)) {\n              result = true;\n              break cssRulesLoop;\n            }\n          } else {\n            result = true;\n            break cssRulesLoop;\n          }\n        }\n      }\n    }\n    return result;\n  }\n  function getRulesSync() {\n    if (corsCopy) {\n      return corsCopy.sheet.cssRules;\n    }\n    if (containsCSSImport()) {\n      return null;\n    }\n    const cssRules = safeGetSheetRules();\n    if (element instanceof HTMLLinkElement && !isRelativeHrefOnAbsolutePath(element.href) && hasImports(cssRules, false)) {\n      return null;\n    }\n    if (hasImports(cssRules, true)) {\n      return null;\n    }\n    !cssRules && logWarn(\"[getRulesSync] cssRules is null, trying again.\");\n    return cssRules;\n  }\n  function insertStyle() {\n    if (inMode === \"next\") {\n      if (corsCopy) {\n        if (element.nextSibling !== corsCopy) {\n          element.parentNode.insertBefore(corsCopy, element.nextSibling);\n        }\n        if (corsCopy.nextSibling !== syncStyle) {\n          element.parentNode.insertBefore(syncStyle, corsCopy.nextSibling);\n        }\n      } else if (element.nextSibling !== syncStyle) {\n        element.parentNode.insertBefore(syncStyle, element.nextSibling);\n      }\n    } else if (inMode === \"away\") {\n      if (corsCopy && !corsCopy.parentNode) {\n        injectStyleAway(corsCopy);\n      }\n      injectStyleAway(syncStyle);\n    }\n  }\n  function createSyncStyle() {\n    syncStyle = element instanceof SVGStyleElement ? document.createElementNS(\"http://www.w3.org/2000/svg\", \"style\") : document.createElement(\"style\");\n    syncStyle.classList.add(\"darkreader\");\n    syncStyle.classList.add(\"darkreader--sync\");\n    syncStyle.media = \"screen\";\n    if (element.title) {\n      syncStyle.title = element.title;\n    }\n    syncStyleSet.add(syncStyle);\n  }\n  let isLoadingRules = false;\n  let wasLoadingError = false;\n  const loadingLinkId = ++loadingLinkCounter;\n  async function getRulesAsync() {\n    let cssText;\n    let cssBasePath;\n    if (element instanceof HTMLLinkElement) {\n      let [cssRules, accessError] = getRulesOrError();\n      if (accessError) {\n        logWarn(accessError);\n      }\n      if (isSafari && !element.sheet || !isSafari && !cssRules && !accessError || isStillLoadingError(accessError)) {\n        try {\n          logInfo(`Linkelement ${loadingLinkId} is not loaded yet and thus will be await for`, element);\n          await linkLoading(element, loadingLinkId);\n        } catch (err) {\n          logWarn(err);\n          wasLoadingError = true;\n        }\n        if (cancelAsyncOperations) {\n          return null;\n        }\n        [cssRules, accessError] = getRulesOrError();\n        if (accessError) {\n          logWarn(accessError);\n        }\n      }\n      if (cssRules) {\n        if (!hasImports(cssRules, false)) {\n          return cssRules;\n        }\n      }\n      try {\n        cssText = await loadText(element.href);\n      } catch (err) {\n        logWarn(err);\n        cssText = \"\";\n      }\n      cssBasePath = getCSSBaseBath(element.href);\n      if (cancelAsyncOperations) {\n        return null;\n      }\n    } else if (containsCSSImport()) {\n      cssText = element.textContent.trim();\n      cssBasePath = getCSSBaseBath(location.href);\n    } else {\n      return null;\n    }\n    await createOrUpdateCORSCopy(cssText, cssBasePath);\n    if (corsCopy) {\n      return corsCopy.sheet.cssRules;\n    }\n    return null;\n  }\n  async function createOrUpdateCORSCopy(cssText, cssBasePath) {\n    if (cssText) {\n      try {\n        const fullCSSText = await replaceCSSImports(cssText, cssBasePath);\n        if (corsCopy) {\n          if ((corsCopy.textContent?.length ?? 0) < fullCSSText.length) {\n            corsCopy.textContent = fullCSSText;\n          }\n        } else {\n          corsCopy = createCORSCopy(fullCSSText, inMode === \"next\" ? cc => element.parentNode.insertBefore(cc, element.nextSibling) : injectStyleAway);\n          if (corsCopy) {\n            if (inMode === \"next\") {\n              element.parentNode.insertBefore(corsCopy, element.nextSibling);\n            } else if (inMode === \"away\") {\n              injectStyleAway(corsCopy);\n            }\n          }\n        }\n      } catch (err) {\n        logWarn(err);\n      }\n      if (corsCopy && inMode === \"next\") {\n        corsCopyPositionWatcher = watchForNodePosition(corsCopy, \"prev-sibling\");\n      }\n    }\n  }\n  function details(options) {\n    const rules = getRulesSync();\n    if (!rules) {\n      if (options.secondRound) {\n        logWarn(\"Detected dead-lock at details(), returning early to prevent it.\");\n        return null;\n      }\n      if (isLoadingRules || wasLoadingError) {\n        return null;\n      }\n      isLoadingRules = true;\n      loadingStart();\n      getRulesAsync().then(results => {\n        isLoadingRules = false;\n        loadingEnd();\n        if (results) {\n          update();\n        }\n      }).catch(err => {\n        logWarn(err);\n        isLoadingRules = false;\n        loadingEnd();\n      });\n      return null;\n    }\n    return {\n      rules\n    };\n  }\n  let forceRenderStyle = false;\n  function render(theme, ignoreImageAnalysis) {\n    const rules = getRulesSync();\n    if (!rules) {\n      return;\n    }\n    cancelAsyncOperations = false;\n    function removeCSSRulesFromSheet(sheet) {\n      if (!sheet) {\n        return;\n      }\n      for (let i = sheet.cssRules.length - 1; i >= 0; i--) {\n        sheet.deleteRule(i);\n      }\n    }\n    function prepareOverridesSheet() {\n      if (!syncStyle) {\n        createSyncStyle();\n      }\n      syncStylePositionWatcher && syncStylePositionWatcher.stop();\n      insertStyle();\n      if (syncStyle.sheet == null) {\n        syncStyle.textContent = \"\";\n      }\n      const sheet = syncStyle.sheet;\n      removeCSSRulesFromSheet(sheet);\n      if (syncStylePositionWatcher) {\n        syncStylePositionWatcher.run();\n      } else if (inMode === \"next\") {\n        syncStylePositionWatcher = watchForNodePosition(syncStyle, \"prev-sibling\", () => {\n          forceRenderStyle = true;\n          buildOverrides();\n        });\n      }\n      return syncStyle.sheet;\n    }\n    function buildOverrides() {\n      const force = forceRenderStyle;\n      forceRenderStyle = false;\n      sheetModifier.modifySheet({\n        prepareSheet: prepareOverridesSheet,\n        sourceCSSRules: rules,\n        theme,\n        ignoreImageAnalysis,\n        force,\n        isAsyncCancelled\n      });\n      isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;\n      if (sheetModifier.shouldRebuildStyle()) {\n        addReadyStateCompleteListener(() => update());\n      }\n    }\n    buildOverrides();\n  }\n  function getRulesOrError() {\n    try {\n      if (element.sheet == null) {\n        return [null, null];\n      }\n      return [element.sheet.cssRules, null];\n    } catch (err) {\n      return [null, err];\n    }\n  }\n  function isStillLoadingError(error) {\n    return error && error.message && error.message.includes(\"loading\");\n  }\n  function safeGetSheetRules() {\n    const [cssRules, err] = getRulesOrError();\n    if (err) {\n      logWarn(err);\n      return null;\n    }\n    return cssRules;\n  }\n  const sheetChangeWatcher = createSheetWatcher(element, safeGetSheetRules, update, isAsyncCancelled);\n  function pause() {\n    observer.disconnect();\n    cancelAsyncOperations = true;\n    corsCopyPositionWatcher && corsCopyPositionWatcher.stop();\n    syncStylePositionWatcher && syncStylePositionWatcher.stop();\n    sheetChangeWatcher.stop();\n  }\n  function destroy() {\n    pause();\n    removeNode(corsCopy);\n    removeNode(syncStyle);\n    loadingEnd();\n    if (rejectorsForLoadingLinks.has(loadingLinkId)) {\n      const reject = rejectorsForLoadingLinks.get(loadingLinkId);\n      rejectorsForLoadingLinks.delete(loadingLinkId);\n      reject && reject();\n    }\n  }\n  function watch() {\n    observer.observe(element, observerOptions);\n    if (element instanceof HTMLStyleElement) {\n      sheetChangeWatcher.start();\n    }\n  }\n  const maxMoveCount = 10;\n  let moveCount = 0;\n  function restore() {\n    if (!syncStyle) {\n      return;\n    }\n    moveCount++;\n    if (moveCount > maxMoveCount) {\n      logWarn(\"Style sheet was moved multiple times\", element);\n      return;\n    }\n    logWarn(\"Restore style\", syncStyle, element);\n    insertStyle();\n    corsCopyPositionWatcher && corsCopyPositionWatcher.skip();\n    syncStylePositionWatcher && syncStylePositionWatcher.skip();\n    if (!isOverrideEmpty) {\n      forceRenderStyle = true;\n      update();\n    }\n  }\n  return {\n    details,\n    render,\n    pause,\n    destroy,\n    watch,\n    restore\n  };\n}\nasync function linkLoading(link, loadingId) {\n  return new Promise((resolve, reject) => {\n    const cleanUp = () => {\n      link.removeEventListener(\"load\", onLoad);\n      link.removeEventListener(\"error\", onError);\n      rejectorsForLoadingLinks.delete(loadingId);\n    };\n    const onLoad = () => {\n      cleanUp();\n      resolve();\n    };\n    const onError = () => {\n      cleanUp();\n      reject(`Linkelement ${loadingId} couldn't be loaded. ${link.href}`);\n    };\n    rejectorsForLoadingLinks.set(loadingId, () => {\n      cleanUp();\n      reject();\n    });\n    link.addEventListener(\"load\", onLoad, {\n      passive: true\n    });\n    link.addEventListener(\"error\", onError, {\n      passive: true\n    });\n    if (!link.href) {\n      onError();\n    }\n  });\n}\nfunction getCSSImportURL(importDeclaration) {\n  return getCSSURLValue(importDeclaration.substring(7).trim().replace(/;$/, \"\").replace(/screen$/, \"\"));\n}\nasync function loadText(url) {\n  if (url.startsWith(\"data:\")) {\n    return await (await fetch(url)).text();\n  }\n  const cache = readCSSFetchCache(url);\n  if (cache) {\n    return cache;\n  }\n  const parsedURL = new URL(url);\n  let text;\n  if (parsedURL.origin === location.origin) {\n    text = await loadAsText(url, \"text/css\", location.origin);\n  } else {\n    text = await bgFetch({\n      url,\n      responseType: \"text\",\n      mimeType: \"text/css\",\n      origin: location.origin\n    });\n  }\n  writeCSSFetchCache(url, text);\n  return text;\n}\nasync function replaceCSSImports(cssText, basePath, cache = new Map()) {\n  cssText = removeCSSComments(cssText);\n  cssText = replaceCSSFontFace(cssText);\n  cssText = replaceCSSRelativeURLsWithAbsolute(cssText, basePath);\n  const importMatches = getMatchesWithOffsets(cssImportRegex, cssText);\n  let prev = null;\n  let shouldIgnoreImportsInBetween = false;\n  let diff = 0;\n  for (const match of importMatches) {\n    let importedCSS;\n    const prevImportEnd = prev ? prev.offset + prev.text.length : 0;\n    const nextImportStart = match.offset;\n    const openBraceIndex = cssText.indexOf(\"{\", prevImportEnd);\n    const closeBraceIndex = cssText.indexOf(\"}\", prevImportEnd);\n    if (shouldIgnoreImportsInBetween || openBraceIndex >= 0 && openBraceIndex < nextImportStart && closeBraceIndex >= 0 && closeBraceIndex < nextImportStart) {\n      shouldIgnoreImportsInBetween = true;\n      importedCSS = \"\";\n    } else {\n      const importURL = getCSSImportURL(match.text);\n      const absoluteURL = getAbsoluteURL(basePath, importURL);\n      if (cache.has(absoluteURL)) {\n        importedCSS = cache.get(absoluteURL);\n      } else {\n        try {\n          importedCSS = await loadText(absoluteURL);\n          cache.set(absoluteURL, importedCSS);\n          importedCSS = await replaceCSSImports(importedCSS, getCSSBaseBath(absoluteURL), cache);\n        } catch (err) {\n          logWarn(err);\n          importedCSS = \"\";\n        }\n      }\n    }\n    cssText = cssText.substring(0, match.offset + diff) + importedCSS + cssText.substring(match.offset + match.text.length + diff);\n    diff += importedCSS.length - match.text.length;\n    prev = match;\n  }\n  cssText = cssText.trim();\n  return cssText;\n}\nfunction createCORSCopy(cssText, inject) {\n  if (!cssText) {\n    return null;\n  }\n  const cors = document.createElement(\"style\");\n  cors.classList.add(\"darkreader\");\n  cors.classList.add(\"darkreader--cors\");\n  cors.media = \"screen\";\n  cors.textContent = cssText;\n  inject(cors);\n  cors.sheet.disabled = true;\n  corsStyleSet.add(cors);\n  return cors;\n}\nfunction injectProxy(enableStyleSheetsProxy, enableCustomElementRegistryProxy) {\n  document.dispatchEvent(new CustomEvent(\"__darkreader__inlineScriptsAllowed\"));\n  const cleaners = [];\n  function cleanUp() {\n    cleaners.forEach(clean => clean());\n    cleaners.splice(0);\n  }\n  function documentEventListener(type, listener, options) {\n    document.addEventListener(type, listener, options);\n    cleaners.push(() => document.removeEventListener(type, listener));\n  }\n  function disableConflictingPlugins() {\n    const disableWPDarkMode = () => {\n      if (window?.WPDarkMode?.deactivate) {\n        window.WPDarkMode.deactivate();\n      }\n    };\n    disableWPDarkMode();\n  }\n  documentEventListener(\"__darkreader__cleanUp\", cleanUp);\n  documentEventListener(\"__darkreader__disableConflictingPlugins\", disableConflictingPlugins);\n  function overrideProperty(cls, prop, overrides) {\n    const proto = cls.prototype;\n    const oldDescriptor = Object.getOwnPropertyDescriptor(proto, prop);\n    if (!oldDescriptor) {\n      return;\n    }\n    const newDescriptor = {\n      ...oldDescriptor\n    };\n    Object.keys(overrides).forEach(key => {\n      const factory = overrides[key];\n      newDescriptor[key] = factory(oldDescriptor[key]);\n    });\n    Object.defineProperty(proto, prop, newDescriptor);\n    cleaners.push(() => Object.defineProperty(proto, prop, oldDescriptor));\n  }\n  function override(cls, prop, factory) {\n    overrideProperty(cls, prop, {\n      value: factory\n    });\n  }\n  function isDRElement(element) {\n    return element?.classList?.contains(\"darkreader\");\n  }\n  function isDRSheet(sheet) {\n    return isDRElement(sheet.ownerNode);\n  }\n  const updateSheetEvent = new CustomEvent(\"__darkreader__updateSheet\");\n  const adoptedSheetChangeEvent = new CustomEvent(\"__darkreader__adoptedStyleSheetChange\");\n  const shadowDomAttachingEvent = new CustomEvent(\"__darkreader__shadowDomAttaching\", {\n    bubbles: true\n  });\n  const adoptedSheetOwners = new WeakMap();\n  const adoptedDeclarationSheets = new WeakMap();\n  function onAdoptedSheetChange(sheet) {\n    const owners = adoptedSheetOwners.get(sheet);\n    owners?.forEach(node => {\n      if (node.isConnected) {\n        node.dispatchEvent(adoptedSheetChangeEvent);\n      } else {\n        owners.delete(node);\n      }\n    });\n  }\n  function reportSheetChange(sheet) {\n    if (sheet.ownerNode && !isDRSheet(sheet)) {\n      sheet.ownerNode.dispatchEvent(updateSheetEvent);\n    }\n    if (adoptedSheetOwners.has(sheet)) {\n      onAdoptedSheetChange(sheet);\n    }\n  }\n  function reportSheetChangeAsync(sheet, promise) {\n    const {\n      ownerNode\n    } = sheet;\n    if (ownerNode && !isDRSheet(sheet) && promise && promise instanceof Promise) {\n      promise.then(() => ownerNode.dispatchEvent(updateSheetEvent));\n    }\n    if (adoptedSheetOwners.has(sheet)) {\n      if (promise && promise instanceof Promise) {\n        promise.then(() => onAdoptedSheetChange(sheet));\n      }\n    }\n  }\n  override(CSSStyleSheet, \"addRule\", native => function (selector, style, index) {\n    native.call(this, selector, style, index);\n    reportSheetChange(this);\n    return -1;\n  });\n  override(CSSStyleSheet, \"insertRule\", native => function (rule, index) {\n    const returnValue = native.call(this, rule, index);\n    reportSheetChange(this);\n    return returnValue;\n  });\n  override(CSSStyleSheet, \"deleteRule\", native => function (index) {\n    native.call(this, index);\n    reportSheetChange(this);\n  });\n  override(CSSStyleSheet, \"removeRule\", native => function (index) {\n    native.call(this, index);\n    reportSheetChange(this);\n  });\n  override(CSSStyleSheet, \"replace\", native => function (cssText) {\n    const returnValue = native.call(this, cssText);\n    reportSheetChangeAsync(this, returnValue);\n    return returnValue;\n  });\n  override(CSSStyleSheet, \"replaceSync\", native => function (cssText) {\n    native.call(this, cssText);\n    reportSheetChange(this);\n  });\n  override(Element, \"attachShadow\", native => function (options) {\n    this.dispatchEvent(shadowDomAttachingEvent);\n    return native.call(this, options);\n  });\n  const shouldWrapHTMLElement = location.hostname === \"baidu.com\" || location.hostname.endsWith(\".baidu.com\");\n  if (shouldWrapHTMLElement) {\n    override(Element, \"getElementsByTagName\", native => function (tagName) {\n      if (tagName !== \"style\") {\n        return native.call(this, tagName);\n      }\n      const getCurrentElementValue = () => {\n        const elements = native.call(this, tagName);\n        return Object.setPrototypeOf([...elements].filter(element => element && !isDRElement(element)), NodeList.prototype);\n      };\n      let elements = getCurrentElementValue();\n      const nodeListBehavior = {\n        get: function (_, property) {\n          return getCurrentElementValue()[Number(property) || property];\n        }\n      };\n      elements = new Proxy(elements, nodeListBehavior);\n      return elements;\n    });\n  }\n  const shouldProxyChildNodes = [\"brilliant.org\", \"www.vy.no\"].includes(location.hostname);\n  if (shouldProxyChildNodes) {\n    overrideProperty(Node, \"childNodes\", {\n      get: native => function () {\n        const childNodes = native.call(this);\n        return Object.setPrototypeOf([...childNodes].filter(element => {\n          return !isDRElement(element);\n        }), NodeList.prototype);\n      }\n    });\n  }\n  function resolveCustomElement(tag) {\n    customElements.whenDefined(tag).then(() => {\n      document.dispatchEvent(new CustomEvent(\"__darkreader__isDefined\", {\n        detail: {\n          tag\n        }\n      }));\n    });\n  }\n  documentEventListener(\"__darkreader__addUndefinedResolver\", e => resolveCustomElement(e.detail.tag));\n  if (enableCustomElementRegistryProxy) {\n    override(CustomElementRegistry, \"define\", native => function (name, constructor, options) {\n      resolveCustomElement(name);\n      native.call(this, name, constructor, options);\n    });\n  }\n  let blobURLAllowed = null;\n  function checkBlobURLSupport() {\n    if (blobURLAllowed != null) {\n      document.dispatchEvent(new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\n        detail: {\n          blobURLAllowed\n        }\n      }));\n      return;\n    }\n    const svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1\" height=\"1\"><rect width=\"1\" height=\"1\" fill=\"transparent\"/></svg>';\n    const bytes = new Uint8Array(svg.length);\n    for (let i = 0; i < svg.length; i++) {\n      bytes[i] = svg.charCodeAt(i);\n    }\n    const blob = new Blob([bytes], {\n      type: \"image/svg+xml\"\n    });\n    const objectURL = URL.createObjectURL(blob);\n    const image = new Image();\n    image.onload = () => {\n      blobURLAllowed = true;\n      sendBlobURLCheckResponse();\n    };\n    image.onerror = () => {\n      blobURLAllowed = false;\n      sendBlobURLCheckResponse();\n    };\n    image.src = objectURL;\n  }\n  function sendBlobURLCheckResponse() {\n    document.dispatchEvent(new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\n      detail: {\n        blobURLAllowed\n      }\n    }));\n  }\n  documentEventListener(\"__darkreader__blobURLCheckRequest\", checkBlobURLSupport);\n  if (enableStyleSheetsProxy) {\n    overrideProperty(Document, \"styleSheets\", {\n      get: native => function () {\n        const getCurrentValue = () => {\n          const docSheets = native.call(this);\n          const filteredSheets = [...docSheets].filter(styleSheet => styleSheet.ownerNode && !isDRSheet(styleSheet));\n          filteredSheets.item = item => filteredSheets[item];\n          return Object.setPrototypeOf(filteredSheets, StyleSheetList.prototype);\n        };\n        let elements = getCurrentValue();\n        const styleSheetListBehavior = {\n          get: function (_, property) {\n            return getCurrentValue()[property];\n          }\n        };\n        elements = new Proxy(elements, styleSheetListBehavior);\n        return elements;\n      }\n    });\n  }\n  {\n    const adoptedSheetsSourceProxies = new WeakMap();\n    const adoptedSheetsProxySources = new WeakMap();\n    const adoptedSheetsChangeEvent = new CustomEvent(\"__darkreader__adoptedStyleSheetsChange\");\n    const adoptedSheetOverrideCache = new WeakSet();\n    const adoptedSheetsSnapshots = new WeakMap();\n    const isDRAdoptedSheetOverride = sheet => {\n      if (!sheet || !sheet.cssRules) {\n        return false;\n      }\n      if (adoptedSheetOverrideCache.has(sheet)) {\n        return true;\n      }\n      if (sheet.cssRules.length > 0 && sheet.cssRules[0].cssText.startsWith(\"#__darkreader__adoptedOverride\")) {\n        adoptedSheetOverrideCache.add(sheet);\n        return true;\n      }\n      return false;\n    };\n    const areArraysEqual = (a, b) => {\n      return a.length === b.length && a.every((x, i) => x === b[i]);\n    };\n    const onAdoptedSheetsChange = node => {\n      const prev = adoptedSheetsSnapshots.get(node);\n      const curr = (node.adoptedStyleSheets || []).filter(s => !isDRAdoptedSheetOverride(s));\n      adoptedSheetsSnapshots.set(node, curr);\n      if (!prev || !areArraysEqual(prev, curr)) {\n        curr.forEach(sheet => {\n          if (!adoptedSheetOwners.has(sheet)) {\n            adoptedSheetOwners.set(sheet, new Set());\n          }\n          adoptedSheetOwners.get(sheet).add(node);\n          for (const rule of sheet.cssRules) {\n            const declaration = rule.style;\n            if (declaration) {\n              adoptedDeclarationSheets.set(declaration, sheet);\n            }\n          }\n        });\n        node.dispatchEvent(adoptedSheetsChangeEvent);\n      }\n    };\n    const proxyAdoptedSheetsArray = (node, source) => {\n      if (adoptedSheetsProxySources.has(source)) {\n        return source;\n      }\n      if (adoptedSheetsSourceProxies.has(source)) {\n        return adoptedSheetsSourceProxies.get(source);\n      }\n      const proxy = new Proxy(source, {\n        deleteProperty(target, property) {\n          delete target[property];\n          return true;\n        },\n        set(target, property, value) {\n          target[property] = value;\n          if (property === \"length\") {\n            onAdoptedSheetsChange(node);\n          }\n          return true;\n        }\n      });\n      adoptedSheetsSourceProxies.set(source, proxy);\n      adoptedSheetsProxySources.set(proxy, source);\n      return proxy;\n    };\n    [Document, ShadowRoot].forEach(ctor => {\n      overrideProperty(ctor, \"adoptedStyleSheets\", {\n        get: native => function () {\n          const source = native.call(this);\n          return proxyAdoptedSheetsArray(this, source);\n        },\n        set: native => function (source) {\n          if (adoptedSheetsProxySources.has(source)) {\n            source = adoptedSheetsProxySources.get(source);\n          }\n          native.call(this, source);\n          onAdoptedSheetsChange(this);\n        }\n      });\n    });\n    const adoptedDeclarationChangeEvent = new CustomEvent(\"__darkreader__adoptedStyleDeclarationChange\");\n    [\"setProperty\", \"removeProperty\"].forEach(key => {\n      override(CSSStyleDeclaration, key, native => {\n        return function (...args) {\n          const returnValue = native.apply(this, args);\n          const sheet = adoptedDeclarationSheets.get(this);\n          if (sheet) {\n            const owners = adoptedSheetOwners.get(sheet);\n            if (owners) {\n              owners.forEach(node => {\n                node.dispatchEvent(adoptedDeclarationChangeEvent);\n              });\n            }\n          }\n          return returnValue;\n        };\n      });\n    });\n  }\n}\nconst definedCustomElements = new Set();\nconst undefinedGroups = new Map();\nlet elementsDefinitionCallback;\nfunction isCustomElement(element) {\n  if (element.tagName.includes(\"-\") || element.getAttribute(\"is\")) {\n    return true;\n  }\n  return false;\n}\nfunction recordUndefinedElement(element) {\n  let tag = element.tagName.toLowerCase();\n  if (!tag.includes(\"-\")) {\n    const extendedTag = element.getAttribute(\"is\");\n    if (extendedTag) {\n      tag = extendedTag;\n    } else {\n      return;\n    }\n  }\n  if (!undefinedGroups.has(tag)) {\n    undefinedGroups.set(tag, new Set());\n    customElementsWhenDefined(tag).then(() => {\n      if (elementsDefinitionCallback) {\n        const elements = undefinedGroups.get(tag);\n        ASSERT(\"recordUndefinedElement() undefined groups should not be empty\", elements);\n        undefinedGroups.delete(tag);\n        elementsDefinitionCallback(Array.from(elements));\n      }\n    });\n  }\n  undefinedGroups.get(tag).add(element);\n}\nfunction collectUndefinedElements(root) {\n  if (!isDefinedSelectorSupported) {\n    return;\n  }\n  forEach(root.querySelectorAll(\":not(:defined)\"), recordUndefinedElement);\n}\nlet canOptimizeUsingProxy = false;\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => {\n  canOptimizeUsingProxy = true;\n}, {\n  once: true,\n  passive: true\n});\nconst unhandledShadowHosts = new Set();\ndocument.addEventListener(\"__darkreader__shadowDomAttaching\", e => {\n  const host = e.target;\n  if (unhandledShadowHosts.size === 0) {\n    queueMicrotask(() => {\n      const hosts = [...unhandledShadowHosts].filter(el => el.shadowRoot);\n      elementsDefinitionCallback?.(hosts);\n      unhandledShadowHosts.clear();\n    });\n  }\n  unhandledShadowHosts.add(host);\n});\nconst resolvers = new Map();\nfunction handleIsDefined(e) {\n  canOptimizeUsingProxy = true;\n  const tag = e.detail.tag;\n  ASSERT(\"handleIsDefined() expects lower-case node names\", () => tag.toLowerCase() === tag);\n  definedCustomElements.add(tag);\n  if (resolvers.has(tag)) {\n    const r = resolvers.get(tag);\n    resolvers.delete(tag);\n    r.forEach(r => r());\n  }\n}\nasync function customElementsWhenDefined(tag) {\n  ASSERT(\"customElementsWhenDefined() expects lower-case node names\", () => tag.toLowerCase() === tag);\n  if (definedCustomElements.has(tag)) {\n    return;\n  }\n  return new Promise(resolve => {\n    if (window.customElements && typeof customElements.whenDefined === \"function\") {\n      customElements.whenDefined(tag).then(() => resolve());\n    } else if (canOptimizeUsingProxy) {\n      if (resolvers.has(tag)) {\n        resolvers.get(tag).push(resolve);\n      } else {\n        resolvers.set(tag, [resolve]);\n      }\n      document.dispatchEvent(new CustomEvent(\"__darkreader__addUndefinedResolver\", {\n        detail: {\n          tag\n        }\n      }));\n    } else {\n      const checkIfDefined = () => {\n        const elements = undefinedGroups.get(tag);\n        if (elements && elements.size > 0) {\n          if (elements.values().next().value.matches(\":defined\")) {\n            resolve();\n          } else {\n            requestAnimationFrame(checkIfDefined);\n          }\n        }\n      };\n      requestAnimationFrame(checkIfDefined);\n    }\n  });\n}\nfunction watchWhenCustomElementsDefined(callback) {\n  elementsDefinitionCallback = callback;\n}\nfunction unsubscribeFromDefineCustomElements() {\n  elementsDefinitionCallback = null;\n  undefinedGroups.clear();\n  document.removeEventListener(\"__darkreader__isDefined\", handleIsDefined);\n}\nconst observers = [];\nlet observedRoots;\nlet handledShadowHosts;\nfunction watchForStylePositions(currentStyles, update, shadowRootDiscovered) {\n  stopWatchingForStylePositions();\n  const prevStylesByRoot = new WeakMap();\n  const getPrevStyles = root => {\n    if (!prevStylesByRoot.has(root)) {\n      prevStylesByRoot.set(root, new Set());\n    }\n    return prevStylesByRoot.get(root);\n  };\n  currentStyles.forEach(node => {\n    let root = node;\n    while (root = root.parentNode) {\n      if (root === document || root.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        const prevStyles = getPrevStyles(root);\n        prevStyles.add(node);\n        break;\n      }\n    }\n  });\n  const prevStyleSiblings = new WeakMap();\n  const nextStyleSiblings = new WeakMap();\n  function saveStylePosition(style) {\n    prevStyleSiblings.set(style, style.previousElementSibling);\n    nextStyleSiblings.set(style, style.nextElementSibling);\n  }\n  function forgetStylePosition(style) {\n    prevStyleSiblings.delete(style);\n    nextStyleSiblings.delete(style);\n  }\n  function didStylePositionChange(style) {\n    return style.previousElementSibling !== prevStyleSiblings.get(style) || style.nextElementSibling !== nextStyleSiblings.get(style);\n  }\n  currentStyles.forEach(saveStylePosition);\n  function handleStyleOperations(root, operations) {\n    const {\n      createdStyles,\n      removedStyles,\n      movedStyles\n    } = operations;\n    createdStyles.forEach(s => saveStylePosition(s));\n    movedStyles.forEach(s => saveStylePosition(s));\n    removedStyles.forEach(s => forgetStylePosition(s));\n    const prevStyles = getPrevStyles(root);\n    createdStyles.forEach(s => prevStyles.add(s));\n    removedStyles.forEach(s => prevStyles.delete(s));\n    if (createdStyles.size + removedStyles.size + movedStyles.size > 0) {\n      update({\n        created: Array.from(createdStyles),\n        removed: Array.from(removedStyles),\n        moved: Array.from(movedStyles),\n        updated: []\n      });\n    }\n  }\n  function handleMinorTreeMutations(root, {\n    additions,\n    moves,\n    deletions\n  }) {\n    const createdStyles = new Set();\n    const removedStyles = new Set();\n    const movedStyles = new Set();\n    additions.forEach(node => getManageableStyles(node).forEach(style => createdStyles.add(style)));\n    deletions.forEach(node => getManageableStyles(node).forEach(style => removedStyles.add(style)));\n    moves.forEach(node => getManageableStyles(node).forEach(style => movedStyles.add(style)));\n    handleStyleOperations(root, {\n      createdStyles,\n      removedStyles,\n      movedStyles\n    });\n    additions.forEach(n => {\n      deepObserve(n);\n      collectUndefinedElements(n);\n    });\n    additions.forEach(node => isCustomElement(node) && recordUndefinedElement(node));\n    additions.forEach(node => checkImageSelectors(node));\n  }\n  function handleHugeTreeMutations(root) {\n    const styles = new Set(getManageableStyles(root));\n    const createdStyles = new Set();\n    const removedStyles = new Set();\n    const movedStyles = new Set();\n    const prevStyles = getPrevStyles(root);\n    styles.forEach(s => {\n      if (!prevStyles.has(s)) {\n        createdStyles.add(s);\n      }\n    });\n    prevStyles.forEach(s => {\n      if (!styles.has(s)) {\n        removedStyles.add(s);\n      }\n    });\n    styles.forEach(s => {\n      if (!createdStyles.has(s) && !removedStyles.has(s) && didStylePositionChange(s)) {\n        movedStyles.add(s);\n      }\n    });\n    handleStyleOperations(root, {\n      createdStyles,\n      removedStyles,\n      movedStyles\n    });\n    deepObserve(root);\n    collectUndefinedElements(root);\n    checkImageSelectors(root);\n  }\n  function handleAttributeMutations(mutations) {\n    const updatedStyles = new Set();\n    const removedStyles = new Set();\n    mutations.forEach(m => {\n      const {\n        target\n      } = m;\n      if (target.isConnected) {\n        if (shouldManageStyle(target)) {\n          updatedStyles.add(target);\n        } else if (target instanceof HTMLLinkElement && target.disabled) {\n          removedStyles.add(target);\n        }\n      }\n    });\n    if (updatedStyles.size + removedStyles.size > 0) {\n      update({\n        updated: Array.from(updatedStyles),\n        created: [],\n        removed: Array.from(removedStyles),\n        moved: []\n      });\n    }\n  }\n  function observe(root) {\n    if (observedRoots.has(root)) {\n      return;\n    }\n    const treeObserver = createOptimizedTreeObserver(root, {\n      onMinorMutations: handleMinorTreeMutations,\n      onHugeMutations: handleHugeTreeMutations\n    });\n    const attrObserver = new MutationObserver(handleAttributeMutations);\n    attrObserver.observe(root, {\n      attributeFilter: [\"rel\", \"disabled\", \"media\", \"href\"],\n      subtree: true\n    });\n    observers.push(treeObserver, attrObserver);\n    observedRoots.add(root);\n  }\n  function subscribeForShadowRootChanges(node) {\n    const {\n      shadowRoot\n    } = node;\n    if (shadowRoot == null || observedRoots.has(shadowRoot)) {\n      return;\n    }\n    observe(shadowRoot);\n    shadowRootDiscovered(shadowRoot);\n  }\n  function deepObserve(node) {\n    iterateShadowHosts(node, subscribeForShadowRootChanges);\n  }\n  observe(document);\n  deepObserve(document.documentElement);\n  watchWhenCustomElementsDefined(hosts => {\n    hosts = hosts.filter(node => !handledShadowHosts.has(node));\n    const newStyles = [];\n    hosts.forEach(host => push(newStyles, getManageableStyles(host.shadowRoot)));\n    update({\n      created: newStyles,\n      updated: [],\n      removed: [],\n      moved: []\n    });\n    hosts.forEach(host => {\n      const {\n        shadowRoot\n      } = host;\n      if (shadowRoot == null) {\n        return;\n      }\n      subscribeForShadowRootChanges(host);\n      deepObserve(shadowRoot);\n      collectUndefinedElements(shadowRoot);\n    });\n    hosts.forEach(node => handledShadowHosts.add(node));\n  });\n  document.addEventListener(\"__darkreader__isDefined\", handleIsDefined);\n  collectUndefinedElements(document);\n}\nfunction resetObservers() {\n  observers.forEach(o => o.disconnect());\n  observers.splice(0, observers.length);\n  observedRoots = new WeakSet();\n  handledShadowHosts = new WeakSet();\n}\nfunction stopWatchingForStylePositions() {\n  resetObservers();\n  unsubscribeFromDefineCustomElements();\n}\nfunction watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {\n  watchForStylePositions(currentStyles, update, shadowRootDiscovered);\n}\nfunction stopWatchingForStyleChanges() {\n  stopWatchingForStylePositions();\n}\nconst INSTANCE_ID = generateUID();\nconst styleManagers = new Map();\nconst adoptedStyleManagers = [];\nconst adoptedStyleFallbacks = new Map();\nconst adoptedStyleChangeTokens = new WeakMap();\nlet theme = null;\nlet fixes = null;\nlet isIFrame$1 = null;\nlet ignoredImageAnalysisSelectors = [];\nlet ignoredInlineSelectors = [];\nlet staticStyleMap = new WeakMap();\nfunction createOrUpdateStyle(className, root = document.head || document) {\n  let element = root.querySelector(`.${className}`);\n  if (!staticStyleMap.has(root)) {\n    staticStyleMap.set(root, new Map());\n  }\n  const classMap = staticStyleMap.get(root);\n  if (element) {\n    classMap.set(className, element);\n  } else if (classMap.has(className)) {\n    element = classMap.get(className);\n  } else {\n    element = document.createElement(\"style\");\n    element.classList.add(\"darkreader\");\n    element.classList.add(className);\n    element.media = \"screen\";\n    element.textContent = \"\";\n    classMap.set(className, element);\n  }\n  return element;\n}\nfunction createOrUpdateScript(className, root = document.head || document) {\n  let element = root.querySelector(`.${className}`);\n  if (!element) {\n    element = document.createElement(\"script\");\n    element.classList.add(\"darkreader\");\n    element.classList.add(className);\n  }\n  return element;\n}\nconst nodePositionWatchers = new Map();\nfunction setupNodePositionWatcher(node, alias, callback) {\n  nodePositionWatchers.has(alias) && nodePositionWatchers.get(alias).stop();\n  nodePositionWatchers.set(alias, watchForNodePosition(node, \"head\", callback));\n}\nfunction stopStylePositionWatchers() {\n  forEach(nodePositionWatchers.values(), watcher => watcher.stop());\n  nodePositionWatchers.clear();\n}\nfunction injectStaticStyle(style, prevNode, watchAlias, callback) {\n  const mode = getStyleInjectionMode();\n  if (mode === \"next\") {\n    document.head.insertBefore(style, prevNode ? prevNode.nextSibling : document.head.firstChild);\n    setupNodePositionWatcher(style, watchAlias, callback);\n  } else if (mode === \"away\") {\n    injectStyleAway(style);\n  }\n}\nfunction createStaticStyleOverrides() {\n  const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\", document);\n  fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\n    strict: true\n  });\n  injectStaticStyle(fallbackStyle, null, \"fallback\");\n  const userAgentStyle = createOrUpdateStyle(\"darkreader--user-agent\");\n  userAgentStyle.textContent = getModifiedUserAgentStyle(theme, isIFrame$1, theme.styleSystemControls);\n  injectStaticStyle(userAgentStyle, fallbackStyle, \"user-agent\");\n  const textStyle = createOrUpdateStyle(\"darkreader--text\");\n  if (theme.useFont || theme.textStroke > 0) {\n    textStyle.textContent = createTextStyle(theme);\n  } else {\n    textStyle.textContent = \"\";\n  }\n  injectStaticStyle(textStyle, userAgentStyle, \"text\");\n  const invertStyle = createOrUpdateStyle(\"darkreader--invert\");\n  if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\n    invertStyle.textContent = [`${fixes.invert.join(\", \")} {`, `    filter: ${getCSSFilterValue({\n      ...theme,\n      contrast: theme.mode === 0 ? theme.contrast : clamp(theme.contrast - 10, 0, 100)\n    })} !important;`, \"}\"].join(\"\\n\");\n  } else {\n    invertStyle.textContent = \"\";\n  }\n  injectStaticStyle(invertStyle, textStyle, \"invert\");\n  const inlineStyle = createOrUpdateStyle(\"darkreader--inline\");\n  inlineStyle.textContent = getInlineOverrideStyle();\n  injectStaticStyle(inlineStyle, invertStyle, \"inline\");\n  const variableStyle = createOrUpdateStyle(\"darkreader--variables\");\n  const selectionColors = theme?.selectionColor ? getSelectionColor(theme) : null;\n  const neutralBackgroundColor = modifyBackgroundColor(parseColorWithCache(\"#ffffff\"), theme);\n  const neutralTextColor = modifyForegroundColor(parseColorWithCache(\"#000000\"), theme);\n  variableStyle.textContent = [`:root {`, `   --darkreader-neutral-background: ${neutralBackgroundColor};`, `   --darkreader-neutral-text: ${neutralTextColor};`, `   --darkreader-selection-background: ${selectionColors?.backgroundColorSelection ?? \"initial\"};`, `   --darkreader-selection-text: ${selectionColors?.foregroundColorSelection ?? \"initial\"};`, `}`].join(\"\\n\");\n  injectStaticStyle(variableStyle, inlineStyle, \"variables\", () => registerVariablesSheet(variableStyle.sheet));\n  registerVariablesSheet(variableStyle.sheet);\n  const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n  injectStaticStyle(rootVarsStyle, variableStyle, \"root-vars\");\n  const enableStyleSheetsProxy = !(fixes && fixes.disableStyleSheetsProxy);\n  const enableCustomElementRegistryProxy = !(fixes && fixes.disableCustomElementRegistryProxy);\n  document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\n  {\n    const proxyScript = createOrUpdateScript(\"darkreader--proxy\");\n    proxyScript.append(`(${injectProxy})(${enableStyleSheetsProxy}, ${enableCustomElementRegistryProxy})`);\n    document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);\n    proxyScript.remove();\n  }\n  const overrideStyle = createOrUpdateStyle(\"darkreader--override\");\n  overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\n  injectStaticStyle(overrideStyle, document.head.lastChild, \"override\");\n}\nconst shadowRootsWithOverrides = new Set();\nfunction createShadowStaticStyleOverridesInner(root) {\n  const inlineStyle = createOrUpdateStyle(\"darkreader--inline\", root);\n  inlineStyle.textContent = getInlineOverrideStyle();\n  root.insertBefore(inlineStyle, root.firstChild);\n  const overrideStyle = createOrUpdateStyle(\"darkreader--override\", root);\n  overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\n  root.insertBefore(overrideStyle, inlineStyle.nextSibling);\n  const invertStyle = createOrUpdateStyle(\"darkreader--invert\", root);\n  if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\n    invertStyle.textContent = [`${fixes.invert.join(\", \")} {`, `    filter: ${getCSSFilterValue({\n      ...theme,\n      contrast: theme.mode === 0 ? theme.contrast : clamp(theme.contrast - 10, 0, 100)\n    })} !important;`, \"}\"].join(\"\\n\");\n  } else {\n    invertStyle.textContent = \"\";\n  }\n  root.insertBefore(invertStyle, overrideStyle.nextSibling);\n  shadowRootsWithOverrides.add(root);\n}\nfunction delayedCreateShadowStaticStyleOverrides(root) {\n  const observer = new MutationObserver((mutations, observer) => {\n    observer.disconnect();\n    for (const {\n      type,\n      removedNodes\n    } of mutations) {\n      if (type === \"childList\") {\n        for (const {\n          nodeName,\n          className\n        } of removedNodes) {\n          if (nodeName === \"STYLE\" && [\"darkreader darkreader--inline\", \"darkreader darkreader--override\", \"darkreader darkreader--invert\"].includes(className)) {\n            createShadowStaticStyleOverridesInner(root);\n            return;\n          }\n        }\n      }\n    }\n  });\n  observer.observe(root, {\n    childList: true\n  });\n}\nfunction createShadowStaticStyleOverrides(root) {\n  const delayed = root.firstChild === null;\n  createShadowStaticStyleOverridesInner(root);\n  if (delayed) {\n    delayedCreateShadowStaticStyleOverrides(root);\n  }\n}\nfunction replaceCSSTemplates($cssText) {\n  return $cssText.replace(/\\${(.+?)}/g, (_, $color) => {\n    const color = parseColorWithCache($color);\n    if (color) {\n      const lightness = getSRGBLightness(color.r, color.g, color.b);\n      if (lightness > 0.5) {\n        return modifyBackgroundColor(color, theme);\n      }\n      return modifyForegroundColor(color, theme);\n    }\n    logWarn(\"Couldn't parse CSSTemplate's color.\");\n    return $color;\n  });\n}\nfunction cleanFallbackStyle() {\n  const fallback = staticStyleMap.get(document.head)?.get(\"darkreader--fallback\") || staticStyleMap.get(document)?.get(\"darkreader--fallback\") || document.querySelector(\".darkreader--fallback\");\n  if (fallback) {\n    fallback.textContent = \"\";\n  }\n}\nfunction createDynamicStyleOverrides() {\n  cancelRendering();\n  const allStyles = getManageableStyles(document);\n  const newManagers = allStyles.filter(style => !styleManagers.has(style)).map(style => createManager(style));\n  newManagers.map(manager => manager.details({\n    secondRound: false\n  })).filter(detail => detail && detail.rules.length > 0).forEach(detail => {\n    variablesStore.addRulesForMatching(detail.rules);\n  });\n  variablesStore.matchVariablesAndDependents();\n  variablesStore.setOnRootVariableChange(() => {\n    const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n    variablesStore.putRootVars(rootVarsStyle, theme);\n  });\n  const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n  variablesStore.putRootVars(rootVarsStyle, theme);\n  styleManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n  if (loadingStyles.size === 0) {\n    cleanFallbackStyle();\n  }\n  newManagers.forEach(manager => manager.watch());\n  const inlineStyleElements = toArray(document.querySelectorAll(INLINE_STYLE_SELECTOR));\n  iterateShadowHosts(document.documentElement, host => {\n    createShadowStaticStyleOverrides(host.shadowRoot);\n    const elements = host.shadowRoot.querySelectorAll(INLINE_STYLE_SELECTOR);\n    if (elements.length > 0) {\n      push(inlineStyleElements, elements);\n    }\n  });\n  inlineStyleElements.forEach(el => overrideInlineStyle(el, theme, ignoredInlineSelectors, ignoredImageAnalysisSelectors));\n  handleAdoptedStyleSheets(document);\n  variablesStore.matchVariablesAndDependents();\n  if (isFirefox) {\n    const onAdoptedCssChange = e => {\n      const {\n        sheets\n      } = e.detail;\n      if (!Array.isArray(sheets) || sheets.length === 0) {\n        return;\n      }\n      sheets.forEach(({\n        sheet\n      }) => {\n        const {\n          cssRules\n        } = sheet;\n        variablesStore.addRulesForMatching(cssRules);\n      });\n      variablesStore.matchVariablesAndDependents();\n      const response = [];\n      sheets.forEach(({\n        sheetId,\n        sheet\n      }) => {\n        const fallback = getAdoptedStyleSheetFallback(sheet);\n        const cssRules = sheet.cssRules;\n        fallback.render({\n          theme: theme,\n          ignoreImageAnalysis: ignoredImageAnalysisSelectors,\n          cssRules\n        });\n        const commands = fallback.commands();\n        response.push({\n          sheetId,\n          commands\n        });\n      });\n      requestAnimationFrameOnce(getAdoptedStyleChangeToken(sheets[0].sheet), () => {\n        document.dispatchEvent(new CustomEvent(\"__darkreader__adoptedStyleSheetCommands\", {\n          detail: JSON.stringify(response)\n        }));\n      });\n    };\n    document.addEventListener(\"__darkreader__adoptedStyleSheetsChange\", onAdoptedCssChange);\n    cleaners.push(() => document.removeEventListener(\"__darkreader__adoptedStyleSheetsChange\", onAdoptedCssChange));\n    document.dispatchEvent(new CustomEvent(\"__darkreader__startAdoptedStyleSheetsWatcher\"));\n  }\n}\nlet loadingStylesCounter = 0;\nconst loadingStyles = new Set();\nfunction createManager(element) {\n  const loadingStyleId = ++loadingStylesCounter;\n  function loadingStart() {\n    if (!isDOMReady() || !documentIsVisible()) {\n      loadingStyles.add(loadingStyleId);\n      logInfo(`Current amount of styles loading: ${loadingStyles.size}`);\n      const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\n      if (!fallbackStyle.textContent) {\n        fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\n          strict: false\n        });\n      }\n    }\n  }\n  function loadingEnd() {\n    loadingStyles.delete(loadingStyleId);\n    logInfo(`Removed loadingStyle ${loadingStyleId}, now awaiting: ${loadingStyles.size}`);\n    if (loadingStyles.size === 0 && isDOMReady()) {\n      cleanFallbackStyle();\n    }\n  }\n  function update() {\n    const details = manager.details({\n      secondRound: true\n    });\n    if (!details) {\n      return;\n    }\n    variablesStore.addRulesForMatching(details.rules);\n    variablesStore.matchVariablesAndDependents();\n    manager.render(theme, ignoredImageAnalysisSelectors);\n  }\n  const manager = manageStyle(element, {\n    update,\n    loadingStart,\n    loadingEnd\n  });\n  styleManagers.set(element, manager);\n  return manager;\n}\nfunction removeManager(element) {\n  const manager = styleManagers.get(element);\n  if (manager) {\n    manager.destroy();\n    styleManagers.delete(element);\n  }\n}\nconst throttledRenderAllStyles = throttle(callback => {\n  styleManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n  adoptedStyleManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n  callback && callback();\n});\nconst cancelRendering = function () {\n  throttledRenderAllStyles.cancel();\n};\nfunction onDOMReady() {\n  if (loadingStyles.size === 0) {\n    cleanFallbackStyle();\n    return;\n  }\n  logWarn(`DOM is ready, but still have styles being loaded.`, loadingStyles);\n}\nfunction runDynamicStyle() {\n  createDynamicStyleOverrides();\n  watchForUpdates();\n}\nfunction createThemeAndWatchForUpdates() {\n  createStaticStyleOverrides();\n  if (!documentIsVisible() && !theme.immediateModify) {\n    setDocumentVisibilityListener(runDynamicStyle);\n  } else {\n    runDynamicStyle();\n  }\n  changeMetaThemeColorWhenAvailable(theme);\n}\nfunction handleAdoptedStyleSheets(node) {\n  if (isFirefox) {\n    return;\n  }\n  if (canHaveAdoptedStyleSheets(node)) {\n    node.adoptedStyleSheets.forEach(s => {\n      variablesStore.addRulesForMatching(s.cssRules);\n    });\n    const newManger = createAdoptedStyleSheetOverride(node);\n    adoptedStyleManagers.push(newManger);\n    newManger.render(theme, ignoredImageAnalysisSelectors);\n    newManger.watch(sheets => {\n      sheets.forEach(s => {\n        variablesStore.addRulesForMatching(s.cssRules);\n      });\n      variablesStore.matchVariablesAndDependents();\n      newManger.render(theme, ignoredImageAnalysisSelectors);\n    });\n  }\n}\nfunction getAdoptedStyleChangeToken(sheet) {\n  if (adoptedStyleChangeTokens.has(sheet)) {\n    return adoptedStyleChangeTokens.get(sheet);\n  }\n  const token = Symbol();\n  adoptedStyleChangeTokens.set(sheet, token);\n  return token;\n}\nfunction getAdoptedStyleSheetFallback(sheet) {\n  let fallback = adoptedStyleFallbacks.get(sheet);\n  if (!fallback) {\n    fallback = createAdoptedStyleSheetFallback();\n    adoptedStyleFallbacks.set(sheet, fallback);\n  }\n  return fallback;\n}\nfunction watchForUpdates() {\n  const managedStyles = Array.from(styleManagers.keys());\n  watchForStyleChanges(managedStyles, ({\n    created,\n    updated,\n    removed,\n    moved\n  }) => {\n    const stylesToRemove = removed;\n    const stylesToManage = created.concat(updated).concat(moved).filter(style => !styleManagers.has(style));\n    const stylesToRestore = moved.filter(style => styleManagers.has(style));\n    stylesToRemove.forEach(style => removeManager(style));\n    const newManagers = stylesToManage.map(style => createManager(style));\n    newManagers.map(manager => manager.details({\n      secondRound: false\n    })).filter(detail => detail && detail.rules.length > 0).forEach(detail => {\n      variablesStore.addRulesForMatching(detail.rules);\n    });\n    variablesStore.matchVariablesAndDependents();\n    newManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n    newManagers.forEach(manager => manager.watch());\n    stylesToRestore.forEach(style => styleManagers.get(style).restore());\n  }, shadowRoot => {\n    createShadowStaticStyleOverrides(shadowRoot);\n    handleAdoptedStyleSheets(shadowRoot);\n  });\n  watchForInlineStyles(element => {\n    overrideInlineStyle(element, theme, ignoredInlineSelectors, ignoredImageAnalysisSelectors);\n    if (element === document.documentElement) {\n      const styleAttr = element.getAttribute(\"style\") || \"\";\n      if (styleAttr.includes(\"--\")) {\n        variablesStore.matchVariablesAndDependents();\n        const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n        variablesStore.putRootVars(rootVarsStyle, theme);\n      }\n    }\n  }, root => {\n    createShadowStaticStyleOverrides(root);\n    const inlineStyleElements = root.querySelectorAll(INLINE_STYLE_SELECTOR);\n    if (inlineStyleElements.length > 0) {\n      forEach(inlineStyleElements, el => overrideInlineStyle(el, theme, ignoredInlineSelectors, ignoredImageAnalysisSelectors));\n    }\n  });\n  addDOMReadyListener(onDOMReady);\n}\nfunction stopWatchingForUpdates() {\n  styleManagers.forEach(manager => manager.pause());\n  stopStylePositionWatchers();\n  stopWatchingForStyleChanges();\n  stopWatchingForInlineStyles();\n  removeDOMReadyListener(onDOMReady);\n  cleanReadyStateCompleteListeners();\n}\nlet metaObserver;\nlet headObserver = null;\nfunction addMetaListener() {\n  metaObserver = new MutationObserver(() => {\n    if (document.querySelector('meta[name=\"darkreader-lock\"]')) {\n      metaObserver.disconnect();\n      removeDynamicTheme();\n    }\n  });\n  metaObserver.observe(document.head, {\n    childList: true,\n    subtree: true\n  });\n}\nfunction createDarkReaderInstanceMarker() {\n  const metaElement = document.createElement(\"meta\");\n  metaElement.name = \"darkreader\";\n  metaElement.content = INSTANCE_ID;\n  document.head.appendChild(metaElement);\n}\nfunction isDRLocked() {\n  return document.querySelector('meta[name=\"darkreader-lock\"]') != null;\n}\nfunction isAnotherDarkReaderInstanceActive() {\n  const meta = document.querySelector('meta[name=\"darkreader\"]');\n  if (meta) {\n    if (meta.content !== INSTANCE_ID) {\n      return true;\n    }\n    return false;\n  }\n  createDarkReaderInstanceMarker();\n  addMetaListener();\n  return false;\n}\nlet interceptorAttempts = 2;\nfunction interceptOldScript({\n  success,\n  failure\n}) {\n  if (--interceptorAttempts <= 0) {\n    failure();\n    return;\n  }\n  const oldMeta = document.head.querySelector('meta[name=\"darkreader\"]');\n  if (!oldMeta || oldMeta.content === INSTANCE_ID) {\n    return;\n  }\n  const lock = document.createElement(\"meta\");\n  lock.name = \"darkreader-lock\";\n  document.head.append(lock);\n  queueMicrotask(() => {\n    lock.remove();\n    success();\n  });\n}\nfunction disableConflictingPlugins() {\n  if (document.documentElement.hasAttribute(\"data-wp-dark-mode-preset\")) {\n    const disableWPDarkMode = () => {\n      document.dispatchEvent(new CustomEvent(\"__darkreader__disableConflictingPlugins\"));\n      document.documentElement.classList.remove(\"wp-dark-mode-active\");\n      document.documentElement.removeAttribute(\"data-wp-dark-mode-active\");\n    };\n    disableWPDarkMode();\n    const observer = new MutationObserver(() => {\n      if (document.documentElement.classList.contains(\"wp-dark-mode-active\") || document.documentElement.hasAttribute(\"data-wp-dark-mode-active\")) {\n        disableWPDarkMode();\n      }\n    });\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\", \"data-wp-dark-mode-active\"]\n    });\n  }\n}\nlet prevTheme = null;\nlet prevFixes = null;\nfunction createOrUpdateDynamicThemeInternal(themeConfig, dynamicThemeFixes, iframe) {\n  theme = themeConfig;\n  fixes = dynamicThemeFixes;\n  const colorAffectingKeys = [\"brightness\", \"contrast\", \"darkSchemeBackgroundColor\", \"darkSchemeTextColor\", \"grayscale\", \"lightSchemeBackgroundColor\", \"lightSchemeTextColor\", \"sepia\"];\n  if (prevTheme && prevFixes) {\n    const themeKeys = new Set([...Object.keys(theme), ...Object.keys(prevTheme)]);\n    let onlyColorsChanged = true;\n    for (const key of themeKeys) {\n      if (theme[key] !== prevTheme[key] && !colorAffectingKeys.includes(key)) {\n        onlyColorsChanged = false;\n        break;\n      }\n    }\n    if (onlyColorsChanged && JSON.stringify(fixes) !== JSON.stringify(prevFixes)) {\n      onlyColorsChanged = false;\n    }\n    if (onlyColorsChanged) {\n      const palette = getColorPalette();\n      clearColorPalette();\n      palette.background.forEach(color => modifyBackgroundColor(color, theme));\n      palette.text.forEach(color => modifyForegroundColor(color, theme));\n      palette.border.forEach(color => modifyBorderColor(color, theme));\n      return;\n    }\n    clearColorPalette();\n  }\n  if (fixes) {\n    ignoredImageAnalysisSelectors = Array.isArray(fixes.ignoreImageAnalysis) ? fixes.ignoreImageAnalysis : [];\n    ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle) ? fixes.ignoreInlineStyle : [];\n  } else {\n    ignoredImageAnalysisSelectors = [];\n    ignoredInlineSelectors = [];\n  }\n  if (theme.immediateModify) {\n    setIsDOMReady(() => {\n      return true;\n    });\n  }\n  isIFrame$1 = iframe;\n  const ready = () => {\n    const success = () => {\n      disableConflictingPlugins();\n      document.documentElement.setAttribute(\"data-darkreader-mode\", \"dynamic\");\n      document.documentElement.setAttribute(\"data-darkreader-scheme\", theme.mode ? \"dark\" : \"dimmed\");\n      createThemeAndWatchForUpdates();\n    };\n    const failure = () => {\n      removeDynamicTheme();\n    };\n    if (isDRLocked()) {\n      removeNode(document.querySelector(\".darkreader--fallback\"));\n    } else if (isAnotherDarkReaderInstanceActive()) {\n      interceptOldScript({\n        success,\n        failure\n      });\n    } else {\n      success();\n    }\n  };\n  if (document.head) {\n    ready();\n  } else {\n    if (!isFirefox) {\n      const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\n      document.documentElement.appendChild(fallbackStyle);\n      fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\n        strict: true\n      });\n    }\n    headObserver?.disconnect();\n    headObserver = new MutationObserver(() => {\n      if (document.head) {\n        headObserver?.disconnect();\n        ready();\n      }\n    });\n    cleaners.push(() => {\n      headObserver?.disconnect();\n      headObserver = null;\n    });\n    headObserver.observe(document, {\n      childList: true,\n      subtree: true\n    });\n  }\n  prevTheme = theme;\n  prevFixes = fixes;\n}\nfunction removeProxy() {\n  document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\n  removeNode(document.head.querySelector(\".darkreader--proxy\"));\n}\nconst cleaners = [];\nfunction removeDynamicTheme() {\n  document.documentElement.removeAttribute(`data-darkreader-mode`);\n  document.documentElement.removeAttribute(`data-darkreader-scheme`);\n  cleanDynamicThemeCache();\n  removeNode(document.querySelector(\".darkreader--fallback\"));\n  if (document.head) {\n    const selectors = [\".darkreader--user-agent\", \".darkreader--text\", \".darkreader--invert\", \".darkreader--inline\", \".darkreader--override\", \".darkreader--variables\", \".darkreader--root-vars\", 'meta[name=\"darkreader\"]'];\n    restoreMetaThemeColor();\n    selectors.forEach(selector => removeNode(document.head.querySelector(selector)));\n    staticStyleMap = new WeakMap();\n    removeProxy();\n  }\n  shadowRootsWithOverrides.forEach(root => {\n    removeNode(root.querySelector(\".darkreader--inline\"));\n    removeNode(root.querySelector(\".darkreader--override\"));\n  });\n  shadowRootsWithOverrides.clear();\n  forEach(styleManagers.keys(), el => removeManager(el));\n  loadingStyles.clear();\n  cleanLoadingLinks();\n  forEach(document.querySelectorAll(\".darkreader\"), removeNode);\n  adoptedStyleManagers.forEach(manager => manager.destroy());\n  adoptedStyleManagers.splice(0);\n  adoptedStyleFallbacks.forEach(fallback => fallback.destroy());\n  adoptedStyleFallbacks.clear();\n  metaObserver && metaObserver.disconnect();\n  cleaners.forEach(clean => clean());\n  cleaners.splice(0);\n}\nfunction cleanDynamicThemeCache() {\n  variablesStore.clear();\n  parsedURLCache.clear();\n  removeDocumentVisibilityListener();\n  cancelRendering();\n  stopWatchingForUpdates();\n  cleanModificationCache();\n  clearColorCache();\n  releaseVariablesSheet();\n  prevTheme = null;\n  prevFixes = null;\n}\nfunction parseCSS(cssText) {\n  cssText = removeCSSComments(cssText);\n  cssText = cssText.trim();\n  if (!cssText) {\n    return [];\n  }\n  const rules = [];\n  const excludeRanges = getTokenExclusionRanges(cssText);\n  const bracketRanges = getAllOpenCloseRanges(cssText, \"{\", \"}\", excludeRanges);\n  let ruleStart = 0;\n  bracketRanges.forEach(brackets => {\n    const key = cssText.substring(ruleStart, brackets.start).trim();\n    const content = cssText.substring(brackets.start + 1, brackets.end - 1);\n    if (key.startsWith(\"@\")) {\n      const typeEndIndex = key.search(/[\\s\\(]/);\n      const rule = {\n        type: typeEndIndex < 0 ? key : key.substring(0, typeEndIndex),\n        query: typeEndIndex < 0 ? \"\" : key.substring(typeEndIndex).trim(),\n        rules: parseCSS(content)\n      };\n      rules.push(rule);\n    } else {\n      const rule = {\n        selectors: parseSelectors(key),\n        declarations: parseDeclarations(content)\n      };\n      rules.push(rule);\n    }\n    ruleStart = brackets.end;\n  });\n  return rules;\n}\nfunction getAllOpenCloseRanges(input, openToken, closeToken, excludeRanges = []) {\n  const ranges = [];\n  let i = 0;\n  let range;\n  while (range = getOpenCloseRange(input, i, openToken, closeToken, excludeRanges)) {\n    ranges.push(range);\n    i = range.end;\n  }\n  return ranges;\n}\nfunction getTokenExclusionRanges(cssText) {\n  const singleQuoteGoesFirst = cssText.indexOf(\"'\") < cssText.indexOf('\"');\n  const firstQuote = singleQuoteGoesFirst ? \"'\" : '\"';\n  const secondQuote = singleQuoteGoesFirst ? '\"' : \"'\";\n  const excludeRanges = getAllOpenCloseRanges(cssText, firstQuote, firstQuote);\n  excludeRanges.push(...getAllOpenCloseRanges(cssText, secondQuote, secondQuote, excludeRanges));\n  excludeRanges.push(...getAllOpenCloseRanges(cssText, \"[\", \"]\", excludeRanges));\n  excludeRanges.push(...getAllOpenCloseRanges(cssText, \"(\", \")\", excludeRanges));\n  return excludeRanges;\n}\nfunction parseSelectors(selectorText) {\n  const excludeRanges = getTokenExclusionRanges(selectorText);\n  return splitExcluding(selectorText, \",\", excludeRanges);\n}\nfunction parseDeclarations(cssDeclarationsText) {\n  const declarations = [];\n  const excludeRanges = getTokenExclusionRanges(cssDeclarationsText);\n  splitExcluding(cssDeclarationsText, \";\", excludeRanges).forEach(part => {\n    const colonIndex = part.indexOf(\":\");\n    if (colonIndex > 0) {\n      const importantIndex = part.indexOf(\"!important\");\n      declarations.push({\n        property: part.substring(0, colonIndex).trim(),\n        value: part.substring(colonIndex + 1, importantIndex > 0 ? importantIndex : part.length).trim(),\n        important: importantIndex > 0\n      });\n    }\n  });\n  return declarations;\n}\nfunction isParsedStyleRule(rule) {\n  return \"selectors\" in rule;\n}\nfunction formatCSS(cssText) {\n  const parsed = parseCSS(cssText);\n  return formatParsedCSS(parsed);\n}\nfunction formatParsedCSS(parsed) {\n  const lines = [];\n  const tab = \"    \";\n  function formatRule(rule, indent) {\n    if (isParsedStyleRule(rule)) {\n      formatStyleRule(rule, indent);\n    } else {\n      formatAtRule(rule, indent);\n    }\n  }\n  function formatAtRule({\n    type,\n    query,\n    rules\n  }, indent) {\n    lines.push(`${indent}${type} ${query} {`);\n    rules.forEach(child => formatRule(child, `${indent}${tab}`));\n    lines.push(`${indent}}`);\n  }\n  function formatStyleRule({\n    selectors,\n    declarations\n  }, indent) {\n    const lastSelectorIndex = selectors.length - 1;\n    selectors.forEach((selector, i) => {\n      lines.push(`${indent}${selector}${i < lastSelectorIndex ? \",\" : \" {\"}`);\n    });\n    const sorted = sortDeclarations(declarations);\n    sorted.forEach(({\n      property,\n      value,\n      important\n    }) => {\n      lines.push(`${indent}${tab}${property}: ${value}${important ? \" !important\" : \"\"};`);\n    });\n    lines.push(`${indent}}`);\n  }\n  clearEmptyRules(parsed);\n  parsed.forEach(rule => formatRule(rule, \"\"));\n  return lines.join(\"\\n\");\n}\nfunction sortDeclarations(declarations) {\n  const prefixRegex = /^-[a-z]-/;\n  return [...declarations].sort((a, b) => {\n    const aProp = a.property;\n    const bProp = b.property;\n    const aPrefix = aProp.match(prefixRegex)?.[0] ?? \"\";\n    const bPrefix = bProp.match(prefixRegex)?.[0] ?? \"\";\n    const aNorm = aPrefix ? aProp.replace(prefixRegex, \"\") : aProp;\n    const bNorm = bPrefix ? bProp.replace(prefixRegex, \"\") : bProp;\n    if (aNorm === bNorm) {\n      return aPrefix.localeCompare(bPrefix);\n    }\n    return aNorm.localeCompare(bNorm);\n  });\n}\nfunction clearEmptyRules(rules) {\n  for (let i = rules.length - 1; i >= 0; i--) {\n    const rule = rules[i];\n    if (isParsedStyleRule(rule)) {\n      if (rule.declarations.length === 0) {\n        rules.splice(i, 1);\n      }\n    } else {\n      clearEmptyRules(rule.rules);\n      if (rule.rules.length === 0) {\n        rules.splice(i, 1);\n      }\n    }\n  }\n}\nconst blobRegex = /url\\(\\\"(blob\\:.*?)\\\"\\)/g;\nasync function replaceBlobs(text) {\n  const promises = [];\n  getMatches(blobRegex, text, 1).forEach(url => {\n    const promise = loadAsDataURL(url);\n    promises.push(promise);\n  });\n  const data = await Promise.all(promises);\n  return text.replace(blobRegex, () => `url(\"${data.shift()}\")`);\n}\nconst banner = `/*\n                        _______\n                       /       \\\\\n                      .==.    .==.\n                     ((  ))==((  ))\n                    / \"==\"    \"==\"\\\\\n                   /____|| || ||___\\\\\n       ________     ____    ________  ___    ___\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\n                https://darkreader.org\n*/\n\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */\n`;\nasync function collectCSS() {\n  const css = [banner];\n  function addStaticCSS(selector, comment) {\n    const staticStyle = document.querySelector(selector);\n    if (staticStyle && staticStyle.textContent) {\n      css.push(`/* ${comment} */`);\n      css.push(staticStyle.textContent);\n      css.push(\"\");\n    }\n  }\n  addStaticCSS(\".darkreader--fallback\", \"Fallback Style\");\n  addStaticCSS(\".darkreader--user-agent\", \"User-Agent Style\");\n  addStaticCSS(\".darkreader--text\", \"Text Style\");\n  addStaticCSS(\".darkreader--invert\", \"Invert Style\");\n  addStaticCSS(\".darkreader--variables\", \"Variables Style\");\n  const modifiedCSS = [];\n  document.querySelectorAll(\".darkreader--sync\").forEach(element => {\n    forEach(element.sheet.cssRules, rule => {\n      rule && rule.cssText && modifiedCSS.push(rule.cssText);\n    });\n  });\n  if (modifiedCSS.length) {\n    const formattedCSS = formatCSS(modifiedCSS.join(\"\\n\"));\n    css.push(\"/* Modified CSS */\");\n    css.push(await replaceBlobs(formattedCSS));\n    css.push(\"\");\n  }\n  addStaticCSS(\".darkreader--override\", \"Override Style\");\n  return css.join(\"\\n\");\n}\nlet isDarkReaderEnabled = false;\nconst isIFrame = (() => {\n  try {\n    return window.self !== window.top;\n  } catch (err) {\n    console.warn(err);\n    return true;\n  }\n})();\nfunction enable(themeOptions = {}, fixes = null) {\n  const theme = {\n    ...DEFAULT_THEME,\n    ...themeOptions\n  };\n  if (theme.engine !== ThemeEngine.dynamicTheme) {\n    throw new Error(\"Theme engine is not supported.\");\n  }\n  createOrUpdateDynamicThemeInternal(theme, fixes, isIFrame);\n  isDarkReaderEnabled = true;\n}\nfunction isEnabled() {\n  return isDarkReaderEnabled;\n}\nfunction disable() {\n  removeDynamicTheme();\n  isDarkReaderEnabled = false;\n}\nconst darkScheme = typeof matchMedia === \"function\" ? matchMedia(\"(prefers-color-scheme: dark)\") : undefined;\nlet store = {\n  themeOptions: null,\n  fixes: null\n};\nfunction handleColorScheme() {\n  if (darkScheme?.matches) {\n    enable(store.themeOptions, store.fixes);\n  } else {\n    disable();\n  }\n}\nfunction auto(themeOptions = {}, fixes = null) {\n  if (themeOptions) {\n    store = {\n      themeOptions,\n      fixes\n    };\n    handleColorScheme();\n    if (isMatchMediaChangeEventListenerSupported) {\n      darkScheme?.addEventListener(\"change\", handleColorScheme);\n    } else {\n      darkScheme?.addListener(handleColorScheme);\n    }\n  } else {\n    if (isMatchMediaChangeEventListenerSupported) {\n      darkScheme?.removeEventListener(\"change\", handleColorScheme);\n    } else {\n      darkScheme?.removeListener(handleColorScheme);\n    }\n    disable();\n  }\n}\nasync function exportGeneratedCSS() {\n  return await collectCSS();\n}\nconst setFetchMethod = setFetchMethod$1;\nexport { auto, disable, enable, exportGeneratedCSS, isEnabled, setFetchMethod };","map":{"version":3,"names":["MessageTypeUItoBG","MessageTypeBGtoUI","DebugMessageTypeBGtoUI","MessageTypeBGtoCS","DebugMessageTypeBGtoCS","MessageTypeCStoBG","DebugMessageTypeCStoBG","MessageTypeCStoUI","MessageTypeUItoCS","isNavigatorDefined","navigator","userAgent","userAgentData","Array","isArray","brands","map","brand","toLowerCase","version","join","platform","isChromium","includes","isFirefox","isSafari","isWindows","startsWith","isMacOS","mobile","isShadowDomSupported","ShadowRoot","isMatchMediaChangeEventListenerSupported","MediaQueryList","prototype","addEventListener","isLayerRuleSupported","CSSLayerBlockRule","m","match","isDefinedSelectorSupported","document","querySelector","err","isCSSColorSchemePropSupported","el","createElement","style","colorScheme","setAttribute","e","getOKResponse","url","mimeType","origin","credentials","undefined","response","fetch","cache","referrer","endsWith","headers","get","Error","ok","status","statusText","loadAsDataURL","readResponseAsDataURL","loadAsBlob","blob","dataURL","Promise","resolve","reader","FileReader","onloadend","result","readAsDataURL","loadAsText","text","throwCORSError","reject","fetcher","setFetchMethod$1","callFetchMethod","window","chrome","runtime","messageListeners","Set","sendMessage","args","type","FETCH","id","responseType","data","forEach","cb","FETCH_RESPONSE","error","console","addMessageListener","callback","add","nativeSendMessage","apply","onMessage","addListener","nativeAddListener","ThemeEngine","AutomationMode","DEFAULT_COLORS","darkScheme","background","lightScheme","DEFAULT_THEME","mode","brightness","contrast","grayscale","sepia","useFont","fontFamily","textStroke","engine","dynamicTheme","stylesheet","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor","scrollbarColor","selectionColor","styleSystemControls","lightColorScheme","darkColorScheme","immediateModify","filterModeSites","customThemes","cssFilter","theme","builtIn","automation","NONE","getMatches","regex","input","group","matches","exec","push","getMatchesWithOffsets","offset","index","getHashCode","len","length","hash","i","c","charCodeAt","escapeRegExpSpecialChars","replaceAll","getParenthesesRange","searchStartIndex","getOpenCloseRange","openToken","closeToken","excludeRanges","indexOf","token","pos","indexOfExcluding","depth","firstOpenIndex","openIndex","closeIndex","start","end","search","position","exclusion","find","r","splitExcluding","separator","parts","commaIndex","currIndex","substring","trim","anchor","parsedURLCache","Map","fixBaseURL","$url","href","parseURL","$base","key","has","parsedURL","URL","set","getAbsoluteURL","$relative","test","location","protocol","b","a","isRelativeHrefOnAbsolutePath","hostname","port","pathname","excludedSelectors","createTextStyle","config","lines","isArrayLike","items","iterator","item","array","addition","toArray","results","scale","x","inLow","inHigh","outLow","outHigh","clamp","min","max","Math","multiplyMatrices","m1","m2","j","len2","sum","k","len3","createFilterMatrix","Matrix","identity","invertNHue","applyColorMatrix","g","matrix","rgb","round","v","t","FilterMode","getCSSFilterValue","filters","dark","evalMath","expression","rpnStack","workingStack","lastToken","operators","op","currentOp","lessOrEqualThan","shift","unshift","stack","splice","parseFloat","Operator","constructor","precedence","method","precendce","execMethod","left","right","isSystemDarkModeEnabled","matchMedia","hslaParseCache","rgbaParseCache","parseColorWithCache","$color","lowerCalcExpression","color","parse","parseToHSLWithCache","hsl","rgbToHSL","clearColorCache","clear","hslToRGB","h","s","l","abs","n","r255","g255","b255","toFixed","digits","fixed","dot","zerosMatch","rgbToString","rgbToHexString","toString","hslToString","rgbMatch","hslMatch","hexMatch","supportedColorFuncs","lastIndexOf","domParseColor","parseRGB","parseHSL","parseHex","knownColors","getColorByName","systemColors","getSystemColor","some","fn","schemeColor","getNumbers","numbers","prevPos","isMining","startIndex","getNumbersFromString","str","range","units","raw","unitsList","Object","entries","unit","u","rgbRange","rgbUnits","$rgb","hslRange","hslUnits","PI","$hsl","$hex","parseInt","searchIndex","replaceBetweenIndices","replacement","slice","includesPercentage","split","output","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","value","getSRGBLightness","canvas$1","context$1","width","height","getContext","willReadFrequently","fillStyle","fillRect","d","getImageData","throttle","pending","frameId","lastArgs","throttled","requestAnimationFrame","cancel","cancelAnimationFrame","assign","createAsyncTasksQueue","tasks","runTasks","task","delayTokens","requestAnimationFrameOnce","delete","hexify","number","generateUID","crypto","uuid","randomUUID","from","getRandomValues","Uint8Array","floor","random","documentVisibilityListener","documentIsVisible_","hidden","listenerOptions","capture","passive","watchForDocumentVisibility","stopWatchingForDocumentVisibility","removeEventListener","setDocumentVisibilityListener","alreadyWatching","Boolean","removeDocumentVisibilityListener","documentIsVisible","getDuration","time","duration","seconds","minutes","hours","days","logInfo","logWarn","logAssert","ASSERT","description","condition","removeNode","node","parentNode","removeChild","watchForNodePosition","onRestore","Function","MAX_ATTEMPTS_COUNT","RETRY_TIMEOUT","ATTEMPTS_INTERVAL","prevSibling","previousSibling","parent","attempts","timeoutId","restore","now","Date","setTimeout","head","lastChild","stop","updateParent","isConnected","insertBefore","nextSibling","firstChild","observer","takeRecords","MutationObserver","run","observe","childList","clearTimeout","disconnect","skip","iterateShadowHosts","root","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","acceptNode","shadowRoot","FILTER_SKIP","FILTER_ACCEPT","currentNode","nextNode","classList","contains","isDOMReady","readyState","setIsDOMReady","newFunc","readyStateListeners","addDOMReadyListener","listener","removeDOMReadyListener","isReadyStateComplete","readyStateCompleteListeners","addReadyStateCompleteListener","cleanReadyStateCompleteListeners","onReadyStateChange","HUGE_MUTATIONS_COUNT","isHugeMutation","mutations","addedNodesCount","addedNodes","getElementsTreeOperations","additions","deletions","moves","Element","removedNodes","duplicateAdditions","duplicateDeletions","parentElement","optimizedTreeObservers","optimizedTreeCallbacks","WeakMap","createOptimizedTreeObserver","callbacks","observerCallbacks","domReadyListener","hadHugeMutationsBefore","subscribedForReadyState","onHugeMutations","elementsOperations","onMinorMutations","subtree","size","iterateCSSRules","rules","iterate","onImportError","rule","isStyleRule","cssRules","isImportRule","styleSheet","isMediaRule","media","isScreenOrAllOrQuery","isPrintOrSpeech","isSupportsRule","CSS","supports","conditionText","isLayerRule","shorthandVarDependantProperties","shorthandVarDepPropRegexps","prop","regexp","RegExp","iterateCSSDeclarations","property","getPropertyValue","cssText","val","handleEmptyShorthand","shorthand","parentRule","sourceCSSText","parentStyleSheet","ownerNode","textContent","escapedSelector","selectorText","cssURLRegex","cssImportRegex","getCSSURLValue","cssURL","replace","getCSSBaseBath","replaceCSSRelativeURLsWithAbsolute","$css","cssBasePath","absoluteURL","escapedURL","fontFaceRegex","replaceCSSFontFace","styleRules","WeakSet","importRules","mediaRules","supportsRules","layerRules","CSSSupportsRule","sheetsScopes","defineSheetScope","sheet","getSheetScope","Document","variablesSheet","registeredColors","registerVariablesSheet","types","registered","variable","setProperty","releaseVariablesSheet","clearColorPalette","getRegisteredVariableValue","getRegisteredColor","parsed","hex","registerColor","getColorPalette","border","getBgPole","isDarkScheme","getFgPole","colorModificationCache","clearColorModificationCache","rgbCacheKeys","themeCacheKeys","getCacheId","resultId","modifyColorWithCache","modifyHSL","poleColor","anotherPoleColor","fnCache","pole","anotherPole","modified","rf","gf","bf","modifyAndRegisterColor","modifier","modifyLightSchemeColor","poleBg","poleFg","modifyLightModeHSL","isDark","isNeutral","isBlue","hx","sx","lx","MAX_BG_LIGHTNESS","modifyBgHSL","isYellow","isCloserToGreen","_modifyBackgroundColor","modifyBackgroundColor","shouldRegisterColorVariable","MIN_FG_LIGHTNESS","modifyBlueFgHue","hue","modifyFgHSL","isLight","_modifyForegroundColor","modifyForegroundColor","modifyBorderHSL","_modifyBorderColor","modifyBorderColor","modifyShadowColor","modifyGradientColor","gradientLength","conicGradient","conicGradientLength","radialGradient","linearGradient","parseGradient","typeGradient","possibleType","possibleGradient","hasComma","STORAGE_KEY_IMAGE_DETAILS_LIST","STORAGE_KEY_IMAGE_DETAILS_PREFIX","STORAGE_KEY_CSS_FETCH_PREFIX","imageCacheTimeout","imageDetailsCacheQueue","cachedImageUrls","writeImageDetailsQueue","details","json","JSON","stringify","sessionStorage","setItem","writeImageDetailsCache","imageDetails","readImageDetailsCache","targetMap","jsonList","getItem","list","writeCSSFetchCache","readCSSFetchCache","toSVGMatrix","getSVGFilterMatrixValue","MAX_FRAME_DURATION","AsyncQueue","queue","timerId","addTask","scheduleFrame","resolvers$1","rejectors","bgFetch","request","DarkReader","Plugins","imageManager","getImageDetails","getDataURL","tryConvertDataURLToBlobSync","image","loadImage","tryCreateImageBitmap","analysis","analyzeImage","src","isLarge","createImageBitmap","String","INCOMPLETE_DOC_LOADING_IMAGE_LIMIT","loadingImagesCount","Image","onload","onerror","MAX_ANALYSIS_PIXELS_COUNT","canvas","context","createCanvas","maxWidth","maxHeight","imageSmoothingEnabled","removeCanvas","LARGE_IMAGE_PIXELS_COUNT","sw","sh","HTMLImageElement","naturalWidth","naturalHeight","isTransparent","sourcePixelsCount","sqrt","ceil","clearRect","drawImage","imageData","TRANSPARENT_ALPHA_THRESHOLD","DARK_LIGHTNESS_THRESHOLD","LIGHT_LIGHTNESS_THRESHOLD","transparentPixelsCount","darkPixelsCount","lightPixelsCount","y","totalPixelsCount","opaquePixelsCount","DARK_IMAGE_THRESHOLD","LIGHT_IMAGE_THRESHOLD","TRANSPARENT_IMAGE_THRESHOLD","isBlobURLSupported","canUseProxy","blobURLCheckRequested","blobURLCheckAwaiters","once","requestBlobURLCheck","detail","blobURLAllowed","dispatchEvent","CustomEvent","isBlobURLCheckResultReady","onCSPError","blockedURI","objectURLs","getFilteredImageURL","escapeXML","svg","btoa","bytes","Blob","objectURL","createObjectURL","xmlEscapeChars","dataURLBlobURLs","colonIndex","semicolonIndex","encoding","toLocaleLowerCase","mediaType","characters","atob","tryConvertDataURLToBlobURL","blobURL","cleanImageProcessingCache","revokeObjectURL","getPriority","ruleStyle","getPropertyPriority","getModifiableCSSDeclaration","variablesStore","ignoreImageSelectors","isCancelled","getVariableModifier","getVariableDependantModifier","getColorSchemeModifier","getScrollbarColorModifier","borderSideProp","borderSideVal","getColorModifier","getBgImageModifier","getShadowModifier","important","sourceValue","joinSelectors","selectors","filter","hostsWithOddScrollbars","getModifiedUserAgentStyle","isIFrame","bgSelectors","getModifiedScrollbarStyle","getModifiedSelectionStyle","getSelectionColor","backgroundColorSelection","foregroundColorSelection","modifiedSelectionColor","selection","colorTrack","colorThumb","darken","darker","getModifiedFallbackStyle","strict","factory","defaultFallbackFactory","unparsableColors","webkitMaskImage","webkitMask","mask","imageDetailsCache","awaitingForImageLoading","didTryLoadCache","shouldIgnoreImage","ruleSelectors","ignoredSelector","beginning","ending","imageSelectorQueue","imageSelectorValues","imageSelectorNodeQueue","imageSelectorQueueFrameId","classObserver","checkImageSelectors","selector","mutation","target","element","documentElement","attributes","attributeFilter","gradients","urls","getIndices","valueIndex","concat","sort","getGradientModifier","gradient","partsRegex","colorStopRegex","part","space","colorStopMatch","modify","getURLModifier","urlValue","isURLEmpty","scope","baseURL","baseURI","awaiters","bgImageValue","getBgImageValue","logSrc","inverted","dimmed","filtered","modifiers","matchIndex","prevHasComma","matchStart","prefixStart","matchEnd","betweenValue","all","then","asyncResults","combinedResult","getShadowModifierWithInfo","colorMatches","notParsed","prefixIndex","matchesLength","unparsableMatchesLength","shadowModifier","colorsMatch","thumb","track","ignoredImgSelectors","getModifierForVariable","varName","getModifierForVarDependant","cleanModificationCache","VAR_TYPE_BG_COLOR","VAR_TYPE_TEXT_COLOR","VAR_TYPE_BORDER_COLOR","VAR_TYPE_BG_IMG","VariablesStore","varTypes","rulesQueue","inlineStyleQueue","definedVars","varRefs","unknownColorVars","unknownBgVars","undefinedVars","initialVarTypes","changedTypeVars","typeChangeSubscriptions","unstableVarValues","isVarType","typeNum","addRulesForMatching","addInlineStyleForMatching","matchVariablesAndDependents","collectRootVariables","collectVariablesAndVarDep","collectRootVarDependents","refs","resolveVariableType","hasColor","findVarRef","ref","iterateVarRefs","options","getDeclarations","declarations","addModifiedValue","varNameWrapper","colorModifier","modifiedValue","isVarDependant","isConstructedColorVar","insertVarValues","replaceCSSVariablesNames","fallback","wrapBgColorVariableName","tryModifyBgColor","wrapTextColorVariableName","tryModifyTextColor","wrapBorderColorVariableName","tryModifyBorderColor","wrapBgImgVariableName","bgModifier","onTypeChange","decs","subscribeForVarTypeChange","removeListeners","unsubscribeFromVariableTypeChanges","isConstructedColor","isSimpleConstructedColor","isBg","isText","isTextColorProperty","defaultFallback","unknownVars","variableReplaced","modifiedShadow","isFallbackResolved","unknownVar","values","newValue","rootStore","collectVarsFromCSSDeclarations","isVariable","inspectVariable","inspectVarDependant","shouldProcessRootVariables","getAttribute","isColor","rawRGBSpaceRegex","rawRGBCommaRegex","initialType","currentType","newType","iterateVarDeps","isBgColor","varDeps","iterateVarDependencies","found","setOnRootVariableChange","onRootVariableDefined","putRootVars","styleElement","deleteRule","cssLines","insertRule","getVariableRange","searchStart","getVariablesMatches","ranges","replaceVariablesMatches","replacer","matchesCount","inputLength","replacements","getVariableNameAndFallback","name","nameReplacer","fallbackReplacer","finalFallback","matchReplacer","newName","newFallback","textColorProps","parseRawColorValue","isRaw","handleRawColorValue","modifyFunction","outputColor","outputInRGB","source","varValues","fullStack","containsUnresolvedVar","count","varValue","inserted","replaced","getThemeKey","resultKey","asyncQueue","createStyleSheetModifier","renderId","getStyleRuleHash","mediaText","rulesTextCache","rulesModCache","varTypeChangeCleaners","prevFilterKey","hasNonLoadedLink","wasRebuilt","shouldRebuildStyle","modifySheet","sourceCSSRules","ignoreImageAnalysis","force","prepareSheet","isAsyncCancelled","rulesChanged","notFoundCacheKeys","keys","themeKey","themeChanged","modRules","textDiffersFromPrev","modDecs","mod","modRule","setRule","emptyIsWhereSelector","viewTransitionSelector","ruleText","dec","asyncDeclarations","varDeclarations","asyncDeclarationCounter","varDeclarationCounter","rootReadyGroup","isGroup","groupRefs","getGroup","parentGroup","readyStyleRule","readyDeclarations","handleAsyncDeclaration","asyncKey","asyncDeclaration","currentRenderId","asyncValue","rebuildAsyncRule","handleVarDeclarations","varDecs","varKey","initialIndex","oldDecs","tempDec","readyDec","newDecs","readyVarDecs","rebuildVarRule","buildStyleSheet","createTarget","iterateReadyRules","styleIterator","canUseSheetProxy$1","overrides$1","overridesBySource","canHaveAdoptedStyleSheets","adoptedStyleSheets","createAdoptedStyleSheetOverride","cancelAsyncOperations","iterateSourceSheets","injectSheet","override","newSheets","sheetIndex","overrideIndex","sourceSheets","sourceDeclarations","cleaners","destroy","rulesChangeKey","getRulesChangeKey","CSSStyleRule","render","readyOverride","CSSStyleSheet","sheetModifier","callbackRequested","handleArrayChange","queueMicrotask","sheets","checkForUpdates","watchUsingRAF","addSheetChangeEventListener","watch","onAdoptedSheetsChange","StyleSheetCommandBuilder","commands","replaceSync","getDeepCSSCommands","deep","command","path","childCommands","clearDeepCSSCommands","createAdoptedStyleSheetFallback","builder","hostsBreakingOnStylePosition","getStyleInjectionMode","injectStyleAway","container","body","display","append","overrides","customProp","cssProp","dataAttr","shorthandOverrides","overridesList","normalizedPropList","INLINE_STYLE_ATTRS","INLINE_STYLE_SELECTOR","attr","getInlineOverrideStyle","allOverrides","getInlineStyleElements","querySelectorAll","treeObservers","attrObservers","watchForInlineStyles","elementStyleDidChange","shadowRootDiscovered","deepWatchForInlineStyles","host","discoveredNodes","discoverNodes","treeObserver","_root","added","attemptCount","handleAttributeMutations","handledTargets","attributeName","attrObserver","attributeCache","stopWatchingForInlineStyles","o","inlineStyleCache","svgInversionCache","svgAnalysisConditionCache","themeProps","shouldAnalyzeSVGAsImage","shouldAnalyze","getInlineStyleCacheKey","shouldIgnoreInlineStyle","ingnoredSelector","overrideInlineStyle","ignoreInlineSelectors","cacheKey","unsetProps","setCustomProp","targetCSSProp","modifierCSSProp","cssVal","setStaticValue","hasAttribute","setVarDeclaration","prevDeclarations","setProps","removeProperty","setAsyncValue","promise","removeAttribute","isSVGElement","SVGElement","ownerSVGElement","SVGSVGElement","analyzeSVGAsImage","svgString","outerHTML","rel","SMALL_SVG_LIMIT","SVGTextElement","handleSVGElement","getBoundingClientRect","SVGLineElement","hasOwnProperty","overriddenProp","fill","metaThemeColorName","metaThemeColorSelector","srcMetaThemeColor","changeMetaThemeColor","meta","content","changeMetaThemeColorWhenAvailable","loop","HTMLMetaElement","restoreMetaThemeColor","cssCommentsRegex","removeCSSComments","canUseSheetProxy","createSheetWatcher","safeGetSheetRules","rafSheetWatcher","watchForSheetChanges","watchForSheetChangesUsingProxy","createRAFSheetWatcher","areSheetChangesPending","onSheetChange","handleSheetChanges","stopWatchingForSheetChangesUsingProxy","stopWatchingForSheetChanges","rulesCheckFrameId","didRulesKeyChange","watchForSheetChangesUsingRAF","stopWatchingForSheetChangesUsingRAF","checkForUpdate","cancelled","STYLE_SELECTOR","isFontsGoogleApiStyle","elementURL","hostsBreakingOnSVGStyleOverride","shouldManageStyle","HTMLStyleElement","SVGStyleElement","HTMLLinkElement","disabled","getManageableStyles","syncStyleSet","corsStyleSet","loadingLinkCounter","rejectorsForLoadingLinks","cleanLoadingLinks","manageStyle","update","loadingStart","loadingEnd","inMode","corsCopy","syncStyle","prevStyles","next","nextElementSibling","corsCopyPositionWatcher","syncStylePositionWatcher","isOverrideEmpty","containsCSSImport","createOrUpdateCORSCopy","observerOptions","characterData","hasImports","checkCrossOrigin","cssRulesLoop","getRulesSync","insertStyle","createSyncStyle","createElementNS","title","isLoadingRules","wasLoadingError","loadingLinkId","getRulesAsync","accessError","getRulesOrError","isStillLoadingError","linkLoading","loadText","fullCSSText","replaceCSSImports","createCORSCopy","cc","secondRound","catch","forceRenderStyle","removeCSSRulesFromSheet","prepareOverridesSheet","buildOverrides","message","sheetChangeWatcher","pause","maxMoveCount","moveCount","link","loadingId","cleanUp","onLoad","onError","getCSSImportURL","importDeclaration","basePath","importMatches","prev","shouldIgnoreImportsInBetween","diff","importedCSS","prevImportEnd","nextImportStart","openBraceIndex","closeBraceIndex","importURL","inject","cors","injectProxy","enableStyleSheetsProxy","enableCustomElementRegistryProxy","clean","documentEventListener","disableConflictingPlugins","disableWPDarkMode","WPDarkMode","deactivate","overrideProperty","cls","proto","oldDescriptor","getOwnPropertyDescriptor","newDescriptor","defineProperty","isDRElement","isDRSheet","updateSheetEvent","adoptedSheetChangeEvent","shadowDomAttachingEvent","bubbles","adoptedSheetOwners","adoptedDeclarationSheets","onAdoptedSheetChange","owners","reportSheetChange","reportSheetChangeAsync","native","call","returnValue","shouldWrapHTMLElement","tagName","getCurrentElementValue","elements","setPrototypeOf","NodeList","nodeListBehavior","_","Number","Proxy","shouldProxyChildNodes","Node","childNodes","resolveCustomElement","tag","customElements","whenDefined","CustomElementRegistry","checkBlobURLSupport","sendBlobURLCheckResponse","getCurrentValue","docSheets","filteredSheets","StyleSheetList","styleSheetListBehavior","adoptedSheetsSourceProxies","adoptedSheetsProxySources","adoptedSheetsChangeEvent","adoptedSheetOverrideCache","adoptedSheetsSnapshots","isDRAdoptedSheetOverride","areArraysEqual","every","curr","declaration","proxyAdoptedSheetsArray","proxy","deleteProperty","ctor","adoptedDeclarationChangeEvent","CSSStyleDeclaration","definedCustomElements","undefinedGroups","elementsDefinitionCallback","isCustomElement","recordUndefinedElement","extendedTag","customElementsWhenDefined","collectUndefinedElements","canOptimizeUsingProxy","unhandledShadowHosts","hosts","resolvers","handleIsDefined","checkIfDefined","watchWhenCustomElementsDefined","unsubscribeFromDefineCustomElements","observers","observedRoots","handledShadowHosts","watchForStylePositions","currentStyles","stopWatchingForStylePositions","prevStylesByRoot","getPrevStyles","nodeType","DOCUMENT_FRAGMENT_NODE","prevStyleSiblings","nextStyleSiblings","saveStylePosition","previousElementSibling","forgetStylePosition","didStylePositionChange","handleStyleOperations","operations","createdStyles","removedStyles","movedStyles","created","removed","moved","updated","handleMinorTreeMutations","deepObserve","handleHugeTreeMutations","styles","updatedStyles","subscribeForShadowRootChanges","newStyles","resetObservers","watchForStyleChanges","stopWatchingForStyleChanges","INSTANCE_ID","styleManagers","adoptedStyleManagers","adoptedStyleFallbacks","adoptedStyleChangeTokens","fixes","isIFrame$1","ignoredImageAnalysisSelectors","ignoredInlineSelectors","staticStyleMap","createOrUpdateStyle","className","classMap","createOrUpdateScript","nodePositionWatchers","setupNodePositionWatcher","alias","stopStylePositionWatchers","watcher","injectStaticStyle","prevNode","watchAlias","createStaticStyleOverrides","fallbackStyle","userAgentStyle","textStyle","invertStyle","invert","inlineStyle","variableStyle","selectionColors","neutralBackgroundColor","neutralTextColor","rootVarsStyle","disableStyleSheetsProxy","disableCustomElementRegistryProxy","proxyScript","remove","overrideStyle","css","replaceCSSTemplates","shadowRootsWithOverrides","createShadowStaticStyleOverridesInner","delayedCreateShadowStaticStyleOverrides","nodeName","createShadowStaticStyleOverrides","delayed","$cssText","lightness","cleanFallbackStyle","createDynamicStyleOverrides","cancelRendering","allStyles","newManagers","createManager","manager","loadingStyles","inlineStyleElements","handleAdoptedStyleSheets","onAdoptedCssChange","sheetId","getAdoptedStyleSheetFallback","getAdoptedStyleChangeToken","loadingStylesCounter","loadingStyleId","removeManager","throttledRenderAllStyles","onDOMReady","runDynamicStyle","watchForUpdates","createThemeAndWatchForUpdates","newManger","Symbol","managedStyles","stylesToRemove","stylesToManage","stylesToRestore","styleAttr","stopWatchingForUpdates","metaObserver","headObserver","addMetaListener","removeDynamicTheme","createDarkReaderInstanceMarker","metaElement","appendChild","isDRLocked","isAnotherDarkReaderInstanceActive","interceptorAttempts","interceptOldScript","success","failure","oldMeta","lock","prevTheme","prevFixes","createOrUpdateDynamicThemeInternal","themeConfig","dynamicThemeFixes","iframe","colorAffectingKeys","themeKeys","onlyColorsChanged","palette","ignoreInlineStyle","ready","removeProxy","cleanDynamicThemeCache","parseCSS","getTokenExclusionRanges","bracketRanges","getAllOpenCloseRanges","ruleStart","brackets","typeEndIndex","query","parseSelectors","parseDeclarations","singleQuoteGoesFirst","firstQuote","secondQuote","cssDeclarationsText","importantIndex","isParsedStyleRule","formatCSS","formatParsedCSS","tab","formatRule","indent","formatStyleRule","formatAtRule","child","lastSelectorIndex","sorted","sortDeclarations","clearEmptyRules","prefixRegex","aProp","bProp","aPrefix","bPrefix","aNorm","bNorm","localeCompare","blobRegex","replaceBlobs","promises","banner","collectCSS","addStaticCSS","comment","staticStyle","modifiedCSS","formattedCSS","isDarkReaderEnabled","self","top","warn","enable","themeOptions","isEnabled","disable","store","handleColorScheme","auto","removeListener","exportGeneratedCSS","setFetchMethod"],"sources":["/Users/stanislaudasilva/Downloads/portfolio/node_modules/darkreader/darkreader.mjs"],"sourcesContent":["/**\r\n * Dark Reader v4.9.109\r\n * https://darkreader.org/\r\n */\r\n\r\nvar MessageTypeUItoBG;\r\n(function (MessageTypeUItoBG) {\r\n    MessageTypeUItoBG[\"GET_DATA\"] = \"ui-bg-get-data\";\r\n    MessageTypeUItoBG[\"GET_DEVTOOLS_DATA\"] = \"ui-bg-get-devtools-data\";\r\n    MessageTypeUItoBG[\"SUBSCRIBE_TO_CHANGES\"] = \"ui-bg-subscribe-to-changes\";\r\n    MessageTypeUItoBG[\"UNSUBSCRIBE_FROM_CHANGES\"] =\r\n        \"ui-bg-unsubscribe-from-changes\";\r\n    MessageTypeUItoBG[\"CHANGE_SETTINGS\"] = \"ui-bg-change-settings\";\r\n    MessageTypeUItoBG[\"SET_THEME\"] = \"ui-bg-set-theme\";\r\n    MessageTypeUItoBG[\"TOGGLE_ACTIVE_TAB\"] = \"ui-bg-toggle-active-tab\";\r\n    MessageTypeUItoBG[\"MARK_NEWS_AS_READ\"] = \"ui-bg-mark-news-as-read\";\r\n    MessageTypeUItoBG[\"MARK_NEWS_AS_DISPLAYED\"] =\r\n        \"ui-bg-mark-news-as-displayed\";\r\n    MessageTypeUItoBG[\"LOAD_CONFIG\"] = \"ui-bg-load-config\";\r\n    MessageTypeUItoBG[\"APPLY_DEV_DYNAMIC_THEME_FIXES\"] =\r\n        \"ui-bg-apply-dev-dynamic-theme-fixes\";\r\n    MessageTypeUItoBG[\"RESET_DEV_DYNAMIC_THEME_FIXES\"] =\r\n        \"ui-bg-reset-dev-dynamic-theme-fixes\";\r\n    MessageTypeUItoBG[\"APPLY_DEV_INVERSION_FIXES\"] =\r\n        \"ui-bg-apply-dev-inversion-fixes\";\r\n    MessageTypeUItoBG[\"RESET_DEV_INVERSION_FIXES\"] =\r\n        \"ui-bg-reset-dev-inversion-fixes\";\r\n    MessageTypeUItoBG[\"APPLY_DEV_STATIC_THEMES\"] =\r\n        \"ui-bg-apply-dev-static-themes\";\r\n    MessageTypeUItoBG[\"RESET_DEV_STATIC_THEMES\"] =\r\n        \"ui-bg-reset-dev-static-themes\";\r\n    MessageTypeUItoBG[\"START_ACTIVATION\"] = \"ui-bg-start-activation\";\r\n    MessageTypeUItoBG[\"RESET_ACTIVATION\"] = \"ui-bg-reset-activation\";\r\n    MessageTypeUItoBG[\"COLOR_SCHEME_CHANGE\"] = \"ui-bg-color-scheme-change\";\r\n    MessageTypeUItoBG[\"HIDE_HIGHLIGHTS\"] = \"ui-bg-hide-highlights\";\r\n})(MessageTypeUItoBG || (MessageTypeUItoBG = {}));\r\nvar MessageTypeBGtoUI;\r\n(function (MessageTypeBGtoUI) {\r\n    MessageTypeBGtoUI[\"CHANGES\"] = \"bg-ui-changes\";\r\n})(MessageTypeBGtoUI || (MessageTypeBGtoUI = {}));\r\nvar DebugMessageTypeBGtoUI;\r\n(function (DebugMessageTypeBGtoUI) {\r\n    DebugMessageTypeBGtoUI[\"CSS_UPDATE\"] = \"debug-bg-ui-css-update\";\r\n    DebugMessageTypeBGtoUI[\"UPDATE\"] = \"debug-bg-ui-update\";\r\n})(DebugMessageTypeBGtoUI || (DebugMessageTypeBGtoUI = {}));\r\nvar MessageTypeBGtoCS;\r\n(function (MessageTypeBGtoCS) {\r\n    MessageTypeBGtoCS[\"ADD_CSS_FILTER\"] = \"bg-cs-add-css-filter\";\r\n    MessageTypeBGtoCS[\"ADD_DYNAMIC_THEME\"] = \"bg-cs-add-dynamic-theme\";\r\n    MessageTypeBGtoCS[\"ADD_STATIC_THEME\"] = \"bg-cs-add-static-theme\";\r\n    MessageTypeBGtoCS[\"ADD_SVG_FILTER\"] = \"bg-cs-add-svg-filter\";\r\n    MessageTypeBGtoCS[\"CLEAN_UP\"] = \"bg-cs-clean-up\";\r\n    MessageTypeBGtoCS[\"FETCH_RESPONSE\"] = \"bg-cs-fetch-response\";\r\n    MessageTypeBGtoCS[\"UNSUPPORTED_SENDER\"] = \"bg-cs-unsupported-sender\";\r\n})(MessageTypeBGtoCS || (MessageTypeBGtoCS = {}));\r\nvar DebugMessageTypeBGtoCS;\r\n(function (DebugMessageTypeBGtoCS) {\r\n    DebugMessageTypeBGtoCS[\"RELOAD\"] = \"debug-bg-cs-reload\";\r\n})(DebugMessageTypeBGtoCS || (DebugMessageTypeBGtoCS = {}));\r\nvar MessageTypeCStoBG;\r\n(function (MessageTypeCStoBG) {\r\n    MessageTypeCStoBG[\"COLOR_SCHEME_CHANGE\"] = \"cs-bg-color-scheme-change\";\r\n    MessageTypeCStoBG[\"DARK_THEME_DETECTED\"] = \"cs-bg-dark-theme-detected\";\r\n    MessageTypeCStoBG[\"DARK_THEME_NOT_DETECTED\"] =\r\n        \"cs-bg-dark-theme-not-detected\";\r\n    MessageTypeCStoBG[\"FETCH\"] = \"cs-bg-fetch\";\r\n    MessageTypeCStoBG[\"DOCUMENT_CONNECT\"] = \"cs-bg-document-connect\";\r\n    MessageTypeCStoBG[\"DOCUMENT_FORGET\"] = \"cs-bg-document-forget\";\r\n    MessageTypeCStoBG[\"DOCUMENT_FREEZE\"] = \"cs-bg-document-freeze\";\r\n    MessageTypeCStoBG[\"DOCUMENT_RESUME\"] = \"cs-bg-document-resume\";\r\n})(MessageTypeCStoBG || (MessageTypeCStoBG = {}));\r\nvar DebugMessageTypeCStoBG;\r\n(function (DebugMessageTypeCStoBG) {\r\n    DebugMessageTypeCStoBG[\"LOG\"] = \"debug-cs-bg-log\";\r\n})(DebugMessageTypeCStoBG || (DebugMessageTypeCStoBG = {}));\r\nvar MessageTypeCStoUI;\r\n(function (MessageTypeCStoUI) {\r\n    MessageTypeCStoUI[\"EXPORT_CSS_RESPONSE\"] = \"cs-ui-export-css-response\";\r\n})(MessageTypeCStoUI || (MessageTypeCStoUI = {}));\r\nvar MessageTypeUItoCS;\r\n(function (MessageTypeUItoCS) {\r\n    MessageTypeUItoCS[\"EXPORT_CSS\"] = \"ui-cs-export-css\";\r\n})(MessageTypeUItoCS || (MessageTypeUItoCS = {}));\r\n\r\nconst isNavigatorDefined = typeof navigator !== \"undefined\";\r\nconst userAgent = isNavigatorDefined\r\n    ? navigator.userAgentData && Array.isArray(navigator.userAgentData.brands)\r\n        ? navigator.userAgentData.brands\r\n              .map((brand) => `${brand.brand.toLowerCase()} ${brand.version}`)\r\n              .join(\" \")\r\n        : navigator.userAgent.toLowerCase()\r\n    : \"some useragent\";\r\nconst platform = isNavigatorDefined\r\n    ? navigator.userAgentData &&\r\n      typeof navigator.userAgentData.platform === \"string\"\r\n        ? navigator.userAgentData.platform.toLowerCase()\r\n        : navigator.platform.toLowerCase()\r\n    : \"some platform\";\r\nconst isChromium =\r\n    userAgent.includes(\"chrome\") || userAgent.includes(\"chromium\");\r\nconst isFirefox =\r\n    userAgent.includes(\"firefox\") ||\r\n    userAgent.includes(\"thunderbird\") ||\r\n    userAgent.includes(\"librewolf\");\r\nconst isSafari = userAgent.includes(\"safari\") && !isChromium;\r\nconst isWindows = platform.startsWith(\"win\");\r\nconst isMacOS = platform.startsWith(\"mac\");\r\nisNavigatorDefined && navigator.userAgentData\r\n    ? navigator.userAgentData.mobile\r\n    : userAgent.includes(\"mobile\");\r\nconst isShadowDomSupported = typeof ShadowRoot === \"function\";\r\nconst isMatchMediaChangeEventListenerSupported =\r\n    typeof MediaQueryList === \"function\" &&\r\n    typeof MediaQueryList.prototype.addEventListener === \"function\";\r\nconst isLayerRuleSupported = typeof CSSLayerBlockRule === \"function\";\r\n(() => {\r\n    const m = userAgent.match(/chrom(?:e|ium)(?:\\/| )([^ ]+)/);\r\n    if (m && m[1]) {\r\n        return m[1];\r\n    }\r\n    return \"\";\r\n})();\r\n(() => {\r\n    const m = userAgent.match(/(?:firefox|librewolf)(?:\\/| )([^ ]+)/);\r\n    if (m && m[1]) {\r\n        return m[1];\r\n    }\r\n    return \"\";\r\n})();\r\nconst isDefinedSelectorSupported = (() => {\r\n    try {\r\n        document.querySelector(\":defined\");\r\n        return true;\r\n    } catch (err) {\r\n        return false;\r\n    }\r\n})();\r\nconst isCSSColorSchemePropSupported = (() => {\r\n    try {\r\n        if (typeof document === \"undefined\") {\r\n            return false;\r\n        }\r\n        const el = document.createElement(\"div\");\r\n        if (!el || typeof el.style !== \"object\") {\r\n            return false;\r\n        }\r\n        if (typeof el.style.colorScheme === \"string\") {\r\n            return true;\r\n        }\r\n        el.setAttribute(\"style\", \"color-scheme: dark\");\r\n        return el.style.colorScheme === \"dark\";\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n})();\r\n\r\nasync function getOKResponse(url, mimeType, origin) {\r\n    const credentials =\r\n        origin && url.startsWith(`${origin}/`) ? undefined : \"omit\";\r\n    const response = await fetch(url, {\r\n        cache: \"force-cache\",\r\n        credentials,\r\n        referrer: origin\r\n    });\r\n    if (\r\n        isFirefox &&\r\n        mimeType === \"text/css\" &&\r\n        url.startsWith(\"moz-extension://\") &&\r\n        url.endsWith(\".css\")\r\n    ) {\r\n        return response;\r\n    }\r\n    if (\r\n        mimeType &&\r\n        !response.headers.get(\"Content-Type\").startsWith(mimeType)\r\n    ) {\r\n        throw new Error(`Mime type mismatch when loading ${url}`);\r\n    }\r\n    if (!response.ok) {\r\n        throw new Error(\r\n            `Unable to load ${url} ${response.status} ${response.statusText}`\r\n        );\r\n    }\r\n    return response;\r\n}\r\nasync function loadAsDataURL(url, mimeType) {\r\n    const response = await getOKResponse(url, mimeType);\r\n    return await readResponseAsDataURL(response);\r\n}\r\nasync function loadAsBlob(url, mimeType) {\r\n    const response = await getOKResponse(url, mimeType);\r\n    return await response.blob();\r\n}\r\nasync function readResponseAsDataURL(response) {\r\n    const blob = await response.blob();\r\n    const dataURL = await new Promise((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => resolve(reader.result);\r\n        reader.readAsDataURL(blob);\r\n    });\r\n    return dataURL;\r\n}\r\nasync function loadAsText(url, mimeType, origin) {\r\n    const response = await getOKResponse(url, mimeType, origin);\r\n    return await response.text();\r\n}\r\n\r\nconst throwCORSError = async (url) => {\r\n    return Promise.reject(\r\n        new Error(\r\n            [\r\n                \"Embedded Dark Reader cannot access a cross-origin resource\",\r\n                url,\r\n                \"Overview your URLs and CORS policies or use\",\r\n                \"`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.\",\r\n                \"See if using `DarkReader.setFetchMethod(window.fetch)`\",\r\n                \"before `DarkReader.enable()` works.\"\r\n            ].join(\" \")\r\n        )\r\n    );\r\n};\r\nlet fetcher = throwCORSError;\r\nfunction setFetchMethod$1(fetch) {\r\n    if (fetch) {\r\n        fetcher = fetch;\r\n    } else {\r\n        fetcher = throwCORSError;\r\n    }\r\n}\r\nasync function callFetchMethod(url) {\r\n    return await fetcher(url);\r\n}\r\n\r\nif (!window.chrome) {\r\n    window.chrome = {};\r\n}\r\nif (!chrome.runtime) {\r\n    chrome.runtime = {};\r\n}\r\nconst messageListeners = new Set();\r\nasync function sendMessage(...args) {\r\n    if (args[0] && args[0].type === MessageTypeCStoBG.FETCH) {\r\n        const {id} = args[0];\r\n        try {\r\n            const {url, responseType} = args[0].data;\r\n            const response = await callFetchMethod(url);\r\n            let text;\r\n            if (responseType === \"data-url\") {\r\n                text = await readResponseAsDataURL(response);\r\n            } else {\r\n                text = await response.text();\r\n            }\r\n            messageListeners.forEach((cb) =>\r\n                cb({\r\n                    type: MessageTypeBGtoCS.FETCH_RESPONSE,\r\n                    data: text,\r\n                    error: null,\r\n                    id\r\n                })\r\n            );\r\n        } catch (error) {\r\n            console.error(error);\r\n            messageListeners.forEach((cb) =>\r\n                cb({\r\n                    type: MessageTypeBGtoCS.FETCH_RESPONSE,\r\n                    data: null,\r\n                    error,\r\n                    id\r\n                })\r\n            );\r\n        }\r\n    }\r\n}\r\nfunction addMessageListener(callback) {\r\n    messageListeners.add(callback);\r\n}\r\nif (typeof chrome.runtime.sendMessage === \"function\") {\r\n    const nativeSendMessage = chrome.runtime.sendMessage;\r\n    chrome.runtime.sendMessage = (...args) => {\r\n        sendMessage(...args);\r\n        nativeSendMessage.apply(chrome.runtime, args);\r\n    };\r\n} else {\r\n    chrome.runtime.sendMessage = sendMessage;\r\n}\r\nif (!chrome.runtime.onMessage) {\r\n    chrome.runtime.onMessage = {};\r\n}\r\nif (typeof chrome.runtime.onMessage.addListener === \"function\") {\r\n    const nativeAddListener = chrome.runtime.onMessage.addListener;\r\n    chrome.runtime.onMessage.addListener = (...args) => {\r\n        addMessageListener(args[0]);\r\n        nativeAddListener.apply(chrome.runtime.onMessage, args);\r\n    };\r\n} else {\r\n    chrome.runtime.onMessage.addListener = (...args) =>\r\n        addMessageListener(args[0]);\r\n}\r\n\r\nvar ThemeEngine;\r\n(function (ThemeEngine) {\r\n    ThemeEngine[\"cssFilter\"] = \"cssFilter\";\r\n    ThemeEngine[\"svgFilter\"] = \"svgFilter\";\r\n    ThemeEngine[\"staticTheme\"] = \"staticTheme\";\r\n    ThemeEngine[\"dynamicTheme\"] = \"dynamicTheme\";\r\n})(ThemeEngine || (ThemeEngine = {}));\r\n\r\nvar AutomationMode;\r\n(function (AutomationMode) {\r\n    AutomationMode[\"NONE\"] = \"\";\r\n    AutomationMode[\"TIME\"] = \"time\";\r\n    AutomationMode[\"SYSTEM\"] = \"system\";\r\n    AutomationMode[\"LOCATION\"] = \"location\";\r\n})(AutomationMode || (AutomationMode = {}));\r\n\r\nconst DEFAULT_COLORS = {\r\n    darkScheme: {\r\n        background: \"#181a1b\",\r\n        text: \"#e8e6e3\"\r\n    },\r\n    lightScheme: {\r\n        background: \"#dcdad7\",\r\n        text: \"#181a1b\"\r\n    }\r\n};\r\nconst DEFAULT_THEME = {\r\n    mode: 1,\r\n    brightness: 100,\r\n    contrast: 100,\r\n    grayscale: 0,\r\n    sepia: 0,\r\n    useFont: false,\r\n    fontFamily: isMacOS\r\n        ? \"Helvetica Neue\"\r\n        : isWindows\r\n          ? \"Segoe UI\"\r\n          : \"Open Sans\",\r\n    textStroke: 0,\r\n    engine: ThemeEngine.dynamicTheme,\r\n    stylesheet: \"\",\r\n    darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,\r\n    darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,\r\n    lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,\r\n    lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,\r\n    scrollbarColor: \"\",\r\n    selectionColor: \"auto\",\r\n    styleSystemControls: !isCSSColorSchemePropSupported,\r\n    lightColorScheme: \"Default\",\r\n    darkColorScheme: \"Default\",\r\n    immediateModify: false\r\n};\r\nconst filterModeSites = [\r\n    \"*.officeapps.live.com\",\r\n    \"*.sharepoint.com\",\r\n    \"docs.google.com\",\r\n    \"onedrive.live.com\"\r\n];\r\n({\r\n    customThemes: filterModeSites.map((url) => {\r\n        const engine = ThemeEngine.cssFilter;\r\n        return {\r\n            url: [url],\r\n            theme: {...DEFAULT_THEME, engine},\r\n            builtIn: true\r\n        };\r\n    }),\r\n    automation: {\r\n        mode: AutomationMode.NONE\r\n    }\r\n});\r\n\r\nfunction getMatches(regex, input, group = 0) {\r\n    const matches = [];\r\n    let m;\r\n    while ((m = regex.exec(input))) {\r\n        matches.push(m[group]);\r\n    }\r\n    return matches;\r\n}\r\nfunction getMatchesWithOffsets(regex, input, group = 0) {\r\n    const matches = [];\r\n    let m;\r\n    while ((m = regex.exec(input))) {\r\n        matches.push({text: m[group], offset: m.index});\r\n    }\r\n    return matches;\r\n}\r\nfunction getHashCode(text) {\r\n    const len = text.length;\r\n    let hash = 0;\r\n    for (let i = 0; i < len; i++) {\r\n        const c = text.charCodeAt(i);\r\n        hash = ((hash << 5) - hash + c) & 4294967295;\r\n    }\r\n    return hash;\r\n}\r\nfunction escapeRegExpSpecialChars(input) {\r\n    return input.replaceAll(/[\\^$.*+?\\(\\)\\[\\]{}|\\-\\\\]/g, \"\\\\$&\");\r\n}\r\nfunction getParenthesesRange(input, searchStartIndex = 0) {\r\n    return getOpenCloseRange(input, searchStartIndex, \"(\", \")\", []);\r\n}\r\nfunction getOpenCloseRange(\r\n    input,\r\n    searchStartIndex,\r\n    openToken,\r\n    closeToken,\r\n    excludeRanges\r\n) {\r\n    let indexOf;\r\n    if (excludeRanges.length === 0) {\r\n        indexOf = (token, pos) => input.indexOf(token, pos);\r\n    } else {\r\n        indexOf = (token, pos) =>\r\n            indexOfExcluding(input, token, pos, excludeRanges);\r\n    }\r\n    const {length} = input;\r\n    let depth = 0;\r\n    let firstOpenIndex = -1;\r\n    for (let i = searchStartIndex; i < length; i++) {\r\n        if (depth === 0) {\r\n            const openIndex = indexOf(openToken, i);\r\n            if (openIndex < 0) {\r\n                break;\r\n            }\r\n            firstOpenIndex = openIndex;\r\n            depth++;\r\n            i = openIndex;\r\n        } else {\r\n            const closeIndex = indexOf(closeToken, i);\r\n            if (closeIndex < 0) {\r\n                break;\r\n            }\r\n            const openIndex = indexOf(openToken, i);\r\n            if (openIndex < 0 || closeIndex <= openIndex) {\r\n                depth--;\r\n                if (depth === 0) {\r\n                    return {start: firstOpenIndex, end: closeIndex + 1};\r\n                }\r\n                i = closeIndex;\r\n            } else {\r\n                depth++;\r\n                i = openIndex;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction indexOfExcluding(input, search, position, excludeRanges) {\r\n    const i = input.indexOf(search, position);\r\n    const exclusion = excludeRanges.find((r) => i >= r.start && i < r.end);\r\n    if (exclusion) {\r\n        return indexOfExcluding(input, search, exclusion.end, excludeRanges);\r\n    }\r\n    return i;\r\n}\r\nfunction splitExcluding(input, separator, excludeRanges) {\r\n    const parts = [];\r\n    let commaIndex = -1;\r\n    let currIndex = 0;\r\n    while (\r\n        (commaIndex = indexOfExcluding(\r\n            input,\r\n            separator,\r\n            currIndex,\r\n            excludeRanges\r\n        )) >= 0\r\n    ) {\r\n        parts.push(input.substring(currIndex, commaIndex).trim());\r\n        currIndex = commaIndex + 1;\r\n    }\r\n    parts.push(input.substring(currIndex).trim());\r\n    return parts;\r\n}\r\n\r\nlet anchor;\r\nconst parsedURLCache = new Map();\r\nfunction fixBaseURL($url) {\r\n    if (!anchor) {\r\n        anchor = document.createElement(\"a\");\r\n    }\r\n    anchor.href = $url;\r\n    return anchor.href;\r\n}\r\nfunction parseURL($url, $base = null) {\r\n    const key = `${$url}${$base ? `;${$base}` : \"\"}`;\r\n    if (parsedURLCache.has(key)) {\r\n        return parsedURLCache.get(key);\r\n    }\r\n    if ($base) {\r\n        const parsedURL = new URL($url, fixBaseURL($base));\r\n        parsedURLCache.set(key, parsedURL);\r\n        return parsedURL;\r\n    }\r\n    const parsedURL = new URL(fixBaseURL($url));\r\n    parsedURLCache.set($url, parsedURL);\r\n    return parsedURL;\r\n}\r\nfunction getAbsoluteURL($base, $relative) {\r\n    if ($relative.match(/^data\\\\?\\:/)) {\r\n        return $relative;\r\n    }\r\n    if (/^\\/\\//.test($relative)) {\r\n        return `${location.protocol}${$relative}`;\r\n    }\r\n    const b = parseURL($base);\r\n    const a = parseURL($relative, b.href);\r\n    return a.href;\r\n}\r\nfunction isRelativeHrefOnAbsolutePath(href) {\r\n    if (href.startsWith(\"data:\")) {\r\n        return true;\r\n    }\r\n    const url = parseURL(href);\r\n    if (url.protocol !== location.protocol) {\r\n        return false;\r\n    }\r\n    if (url.hostname !== location.hostname) {\r\n        return false;\r\n    }\r\n    if (url.port !== location.port) {\r\n        return false;\r\n    }\r\n    return url.pathname === location.pathname;\r\n}\r\n\r\nconst excludedSelectors = [\r\n    \"pre\",\r\n    \"pre *\",\r\n    \"code\",\r\n    '[aria-hidden=\"true\"]',\r\n    '[class*=\"fa-\"]',\r\n    \".fa\",\r\n    \".fab\",\r\n    \".fad\",\r\n    \".fal\",\r\n    \".far\",\r\n    \".fas\",\r\n    \".fass\",\r\n    \".fasr\",\r\n    \".fat\",\r\n    \".icofont\",\r\n    '[style*=\"font-\"]',\r\n    '[class*=\"icon\"]',\r\n    '[class*=\"Icon\"]',\r\n    '[class*=\"symbol\"]',\r\n    '[class*=\"Symbol\"]',\r\n    \".glyphicon\",\r\n    '[class*=\"material-symbol\"]',\r\n    '[class*=\"material-icon\"]',\r\n    \"mu\",\r\n    '[class*=\"mu-\"]',\r\n    \".typcn\",\r\n    '[class*=\"vjs-\"]'\r\n];\r\nfunction createTextStyle(config) {\r\n    const lines = [];\r\n    lines.push(`*:not(${excludedSelectors.join(\", \")}) {`);\r\n    if (config.useFont && config.fontFamily) {\r\n        lines.push(`  font-family: ${config.fontFamily} !important;`);\r\n    }\r\n    if (config.textStroke > 0) {\r\n        lines.push(`  -webkit-text-stroke: ${config.textStroke}px !important;`);\r\n        lines.push(`  text-stroke: ${config.textStroke}px !important;`);\r\n    }\r\n    lines.push(\"}\");\r\n    return lines.join(\"\\n\");\r\n}\r\n\r\nfunction isArrayLike(items) {\r\n    return items.length != null;\r\n}\r\nfunction forEach(items, iterator) {\r\n    if (isArrayLike(items)) {\r\n        for (let i = 0, len = items.length; i < len; i++) {\r\n            iterator(items[i]);\r\n        }\r\n    } else {\r\n        for (const item of items) {\r\n            iterator(item);\r\n        }\r\n    }\r\n}\r\nfunction push(array, addition) {\r\n    forEach(addition, (a) => array.push(a));\r\n}\r\nfunction toArray(items) {\r\n    const results = [];\r\n    for (let i = 0, len = items.length; i < len; i++) {\r\n        results.push(items[i]);\r\n    }\r\n    return results;\r\n}\r\n\r\nfunction scale(x, inLow, inHigh, outLow, outHigh) {\r\n    return ((x - inLow) * (outHigh - outLow)) / (inHigh - inLow) + outLow;\r\n}\r\nfunction clamp(x, min, max) {\r\n    return Math.min(max, Math.max(min, x));\r\n}\r\nfunction multiplyMatrices(m1, m2) {\r\n    const result = [];\r\n    for (let i = 0, len = m1.length; i < len; i++) {\r\n        result[i] = [];\r\n        for (let j = 0, len2 = m2[0].length; j < len2; j++) {\r\n            let sum = 0;\r\n            for (let k = 0, len3 = m1[0].length; k < len3; k++) {\r\n                sum += m1[i][k] * m2[k][j];\r\n            }\r\n            result[i][j] = sum;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction createFilterMatrix(config) {\r\n    let m = Matrix.identity();\r\n    if (config.sepia !== 0) {\r\n        m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));\r\n    }\r\n    if (config.grayscale !== 0) {\r\n        m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));\r\n    }\r\n    if (config.contrast !== 100) {\r\n        m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));\r\n    }\r\n    if (config.brightness !== 100) {\r\n        m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));\r\n    }\r\n    if (config.mode === 1) {\r\n        m = multiplyMatrices(m, Matrix.invertNHue());\r\n    }\r\n    return m;\r\n}\r\nfunction applyColorMatrix([r, g, b], matrix) {\r\n    const rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];\r\n    const result = multiplyMatrices(matrix, rgb);\r\n    return [0, 1, 2].map((i) => clamp(Math.round(result[i][0] * 255), 0, 255));\r\n}\r\nconst Matrix = {\r\n    identity() {\r\n        return [\r\n            [1, 0, 0, 0, 0],\r\n            [0, 1, 0, 0, 0],\r\n            [0, 0, 1, 0, 0],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    invertNHue() {\r\n        return [\r\n            [0.333, -0.667, -0.667, 0, 1],\r\n            [-0.667, 0.333, -0.667, 0, 1],\r\n            [-0.667, -0.667, 0.333, 0, 1],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    brightness(v) {\r\n        return [\r\n            [v, 0, 0, 0, 0],\r\n            [0, v, 0, 0, 0],\r\n            [0, 0, v, 0, 0],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    contrast(v) {\r\n        const t = (1 - v) / 2;\r\n        return [\r\n            [v, 0, 0, 0, t],\r\n            [0, v, 0, 0, t],\r\n            [0, 0, v, 0, t],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    sepia(v) {\r\n        return [\r\n            [\r\n                0.393 + 0.607 * (1 - v),\r\n                0.769 - 0.769 * (1 - v),\r\n                0.189 - 0.189 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.349 - 0.349 * (1 - v),\r\n                0.686 + 0.314 * (1 - v),\r\n                0.168 - 0.168 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.272 - 0.272 * (1 - v),\r\n                0.534 - 0.534 * (1 - v),\r\n                0.131 + 0.869 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    grayscale(v) {\r\n        return [\r\n            [\r\n                0.2126 + 0.7874 * (1 - v),\r\n                0.7152 - 0.7152 * (1 - v),\r\n                0.0722 - 0.0722 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.2126 - 0.2126 * (1 - v),\r\n                0.7152 + 0.2848 * (1 - v),\r\n                0.0722 - 0.0722 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.2126 - 0.2126 * (1 - v),\r\n                0.7152 - 0.7152 * (1 - v),\r\n                0.0722 + 0.9278 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    }\r\n};\r\n\r\nvar FilterMode;\r\n(function (FilterMode) {\r\n    FilterMode[(FilterMode[\"light\"] = 0)] = \"light\";\r\n    FilterMode[(FilterMode[\"dark\"] = 1)] = \"dark\";\r\n})(FilterMode || (FilterMode = {}));\r\nfunction getCSSFilterValue(config) {\r\n    const filters = [];\r\n    if (config.mode === FilterMode.dark) {\r\n        filters.push(\"invert(100%) hue-rotate(180deg)\");\r\n    }\r\n    if (config.brightness !== 100) {\r\n        filters.push(`brightness(${config.brightness}%)`);\r\n    }\r\n    if (config.contrast !== 100) {\r\n        filters.push(`contrast(${config.contrast}%)`);\r\n    }\r\n    if (config.grayscale !== 0) {\r\n        filters.push(`grayscale(${config.grayscale}%)`);\r\n    }\r\n    if (config.sepia !== 0) {\r\n        filters.push(`sepia(${config.sepia}%)`);\r\n    }\r\n    if (filters.length === 0) {\r\n        return null;\r\n    }\r\n    return filters.join(\" \");\r\n}\r\n\r\nfunction evalMath(expression) {\r\n    const rpnStack = [];\r\n    const workingStack = [];\r\n    let lastToken;\r\n    for (let i = 0, len = expression.length; i < len; i++) {\r\n        const token = expression[i];\r\n        if (!token || token === \" \") {\r\n            continue;\r\n        }\r\n        if (operators.has(token)) {\r\n            const op = operators.get(token);\r\n            while (workingStack.length) {\r\n                const currentOp = operators.get(workingStack[0]);\r\n                if (!currentOp) {\r\n                    break;\r\n                }\r\n                if (op.lessOrEqualThan(currentOp)) {\r\n                    rpnStack.push(workingStack.shift());\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            workingStack.unshift(token);\r\n        } else if (!lastToken || operators.has(lastToken)) {\r\n            rpnStack.push(token);\r\n        } else {\r\n            rpnStack[rpnStack.length - 1] += token;\r\n        }\r\n        lastToken = token;\r\n    }\r\n    rpnStack.push(...workingStack);\r\n    const stack = [];\r\n    for (let i = 0, len = rpnStack.length; i < len; i++) {\r\n        const op = operators.get(rpnStack[i]);\r\n        if (op) {\r\n            const args = stack.splice(0, 2);\r\n            stack.push(op.exec(args[1], args[0]));\r\n        } else {\r\n            stack.unshift(parseFloat(rpnStack[i]));\r\n        }\r\n    }\r\n    return stack[0];\r\n}\r\nclass Operator {\r\n    constructor(precedence, method) {\r\n        this.precendce = precedence;\r\n        this.execMethod = method;\r\n    }\r\n    exec(left, right) {\r\n        return this.execMethod(left, right);\r\n    }\r\n    lessOrEqualThan(op) {\r\n        return this.precendce <= op.precendce;\r\n    }\r\n}\r\nconst operators = new Map([\r\n    [\"+\", new Operator(1, (left, right) => left + right)],\r\n    [\"-\", new Operator(1, (left, right) => left - right)],\r\n    [\"*\", new Operator(2, (left, right) => left * right)],\r\n    [\"/\", new Operator(2, (left, right) => left / right)]\r\n]);\r\n\r\nconst isSystemDarkModeEnabled = () =>\r\n    matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n\r\nconst hslaParseCache = new Map();\r\nconst rgbaParseCache = new Map();\r\nfunction parseColorWithCache($color) {\r\n    $color = $color.trim();\r\n    if (rgbaParseCache.has($color)) {\r\n        return rgbaParseCache.get($color);\r\n    }\r\n    if ($color.includes(\"calc(\")) {\r\n        $color = lowerCalcExpression($color);\r\n    }\r\n    const color = parse($color);\r\n    if (color) {\r\n        rgbaParseCache.set($color, color);\r\n        return color;\r\n    }\r\n    return null;\r\n}\r\nfunction parseToHSLWithCache(color) {\r\n    if (hslaParseCache.has(color)) {\r\n        return hslaParseCache.get(color);\r\n    }\r\n    const rgb = parseColorWithCache(color);\r\n    if (!rgb) {\r\n        return null;\r\n    }\r\n    const hsl = rgbToHSL(rgb);\r\n    hslaParseCache.set(color, hsl);\r\n    return hsl;\r\n}\r\nfunction clearColorCache() {\r\n    hslaParseCache.clear();\r\n    rgbaParseCache.clear();\r\n}\r\nfunction hslToRGB({h, s, l, a = 1}) {\r\n    if (s === 0) {\r\n        const [r, b, g] = [l, l, l].map((x) => Math.round(x * 255));\r\n        return {r, g, b, a};\r\n    }\r\n    const c = (1 - Math.abs(2 * l - 1)) * s;\r\n    const x = c * (1 - Math.abs(((h / 60) % 2) - 1));\r\n    const m = l - c / 2;\r\n    const [r, g, b] = (\r\n        h < 60\r\n            ? [c, x, 0]\r\n            : h < 120\r\n              ? [x, c, 0]\r\n              : h < 180\r\n                ? [0, c, x]\r\n                : h < 240\r\n                  ? [0, x, c]\r\n                  : h < 300\r\n                    ? [x, 0, c]\r\n                    : [c, 0, x]\r\n    ).map((n) => Math.round((n + m) * 255));\r\n    return {r, g, b, a};\r\n}\r\nfunction rgbToHSL({r: r255, g: g255, b: b255, a = 1}) {\r\n    const r = r255 / 255;\r\n    const g = g255 / 255;\r\n    const b = b255 / 255;\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    const c = max - min;\r\n    const l = (max + min) / 2;\r\n    if (c === 0) {\r\n        return {h: 0, s: 0, l, a};\r\n    }\r\n    let h =\r\n        (max === r\r\n            ? ((g - b) / c) % 6\r\n            : max === g\r\n              ? (b - r) / c + 2\r\n              : (r - g) / c + 4) * 60;\r\n    if (h < 0) {\r\n        h += 360;\r\n    }\r\n    const s = c / (1 - Math.abs(2 * l - 1));\r\n    return {h, s, l, a};\r\n}\r\nfunction toFixed(n, digits = 0) {\r\n    const fixed = n.toFixed(digits);\r\n    if (digits === 0) {\r\n        return fixed;\r\n    }\r\n    const dot = fixed.indexOf(\".\");\r\n    if (dot >= 0) {\r\n        const zerosMatch = fixed.match(/0+$/);\r\n        if (zerosMatch) {\r\n            if (zerosMatch.index === dot + 1) {\r\n                return fixed.substring(0, dot);\r\n            }\r\n            return fixed.substring(0, zerosMatch.index);\r\n        }\r\n    }\r\n    return fixed;\r\n}\r\nfunction rgbToString(rgb) {\r\n    const {r, g, b, a} = rgb;\r\n    if (a != null && a < 1) {\r\n        return `rgba(${toFixed(r)}, ${toFixed(g)}, ${toFixed(b)}, ${toFixed(a, 2)})`;\r\n    }\r\n    return `rgb(${toFixed(r)}, ${toFixed(g)}, ${toFixed(b)})`;\r\n}\r\nfunction rgbToHexString({r, g, b, a}) {\r\n    return `#${(a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b])\r\n        .map((x) => {\r\n            return `${x < 16 ? \"0\" : \"\"}${x.toString(16)}`;\r\n        })\r\n        .join(\"\")}`;\r\n}\r\nfunction hslToString(hsl) {\r\n    const {h, s, l, a} = hsl;\r\n    if (a != null && a < 1) {\r\n        return `hsla(${toFixed(h)}, ${toFixed(s * 100)}%, ${toFixed(l * 100)}%, ${toFixed(a, 2)})`;\r\n    }\r\n    return `hsl(${toFixed(h)}, ${toFixed(s * 100)}%, ${toFixed(l * 100)}%)`;\r\n}\r\nconst rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;\r\nconst hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;\r\nconst hexMatch = /^#[0-9a-f]+$/i;\r\nconst supportedColorFuncs = [\r\n    \"color\",\r\n    \"color-mix\",\r\n    \"hwb\",\r\n    \"lab\",\r\n    \"lch\",\r\n    \"oklab\",\r\n    \"oklch\"\r\n];\r\nfunction parse($color) {\r\n    const c = $color.trim().toLowerCase();\r\n    if (c.includes(\"(from \")) {\r\n        if (c.indexOf(\"(from\") !== c.lastIndexOf(\"(from\")) {\r\n            return null;\r\n        }\r\n        return domParseColor(c);\r\n    }\r\n    if (c.match(rgbMatch)) {\r\n        if (c.startsWith(\"rgb(#\") || c.startsWith(\"rgba(#\")) {\r\n            if (c.lastIndexOf(\"rgb\") > 0) {\r\n                return null;\r\n            }\r\n            return domParseColor(c);\r\n        }\r\n        return parseRGB(c);\r\n    }\r\n    if (c.match(hslMatch)) {\r\n        return parseHSL(c);\r\n    }\r\n    if (c.match(hexMatch)) {\r\n        return parseHex(c);\r\n    }\r\n    if (knownColors.has(c)) {\r\n        return getColorByName(c);\r\n    }\r\n    if (systemColors.has(c)) {\r\n        return getSystemColor(c);\r\n    }\r\n    if (c === \"transparent\") {\r\n        return {r: 0, g: 0, b: 0, a: 0};\r\n    }\r\n    if (\r\n        c.endsWith(\")\") &&\r\n        supportedColorFuncs.some(\r\n            (fn) =>\r\n                c.startsWith(fn) &&\r\n                c[fn.length] === \"(\" &&\r\n                c.lastIndexOf(fn) === 0\r\n        )\r\n    ) {\r\n        return domParseColor(c);\r\n    }\r\n    if (c.startsWith(\"light-dark(\") && c.endsWith(\")\")) {\r\n        const match = c.match(\r\n            /^light-dark\\(\\s*([a-z]+(\\(.*\\))?),\\s*([a-z]+(\\(.*\\))?)\\s*\\)$/\r\n        );\r\n        if (match) {\r\n            const schemeColor = isSystemDarkModeEnabled() ? match[3] : match[1];\r\n            return parse(schemeColor);\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getNumbers($color) {\r\n    const numbers = [];\r\n    let prevPos = 0;\r\n    let isMining = false;\r\n    const startIndex = $color.indexOf(\"(\");\r\n    $color = $color.substring(startIndex + 1, $color.length - 1);\r\n    for (let i = 0; i < $color.length; i++) {\r\n        const c = $color[i];\r\n        if ((c >= \"0\" && c <= \"9\") || c === \".\" || c === \"+\" || c === \"-\") {\r\n            isMining = true;\r\n        } else if (isMining && (c === \" \" || c === \",\" || c === \"/\")) {\r\n            numbers.push($color.substring(prevPos, i));\r\n            isMining = false;\r\n            prevPos = i + 1;\r\n        } else if (!isMining) {\r\n            prevPos = i + 1;\r\n        }\r\n    }\r\n    if (isMining) {\r\n        numbers.push($color.substring(prevPos, $color.length));\r\n    }\r\n    return numbers;\r\n}\r\nfunction getNumbersFromString(str, range, units) {\r\n    const raw = getNumbers(str);\r\n    const unitsList = Object.entries(units);\r\n    const numbers = raw\r\n        .map((r) => r.trim())\r\n        .map((r, i) => {\r\n            let n;\r\n            const unit = unitsList.find(([u]) => r.endsWith(u));\r\n            if (unit) {\r\n                n =\r\n                    (parseFloat(r.substring(0, r.length - unit[0].length)) /\r\n                        unit[1]) *\r\n                    range[i];\r\n            } else {\r\n                n = parseFloat(r);\r\n            }\r\n            if (range[i] > 1) {\r\n                return Math.round(n);\r\n            }\r\n            return n;\r\n        });\r\n    return numbers;\r\n}\r\nconst rgbRange = [255, 255, 255, 1];\r\nconst rgbUnits = {\"%\": 100};\r\nfunction parseRGB($rgb) {\r\n    const [r, g, b, a = 1] = getNumbersFromString($rgb, rgbRange, rgbUnits);\r\n    if (r == null || g == null || b == null || a == null) {\r\n        return null;\r\n    }\r\n    return {r, g, b, a};\r\n}\r\nconst hslRange = [360, 1, 1, 1];\r\nconst hslUnits = {\"%\": 100, \"deg\": 360, \"rad\": 2 * Math.PI, \"turn\": 1};\r\nfunction parseHSL($hsl) {\r\n    const [h, s, l, a = 1] = getNumbersFromString($hsl, hslRange, hslUnits);\r\n    if (h == null || s == null || l == null || a == null) {\r\n        return null;\r\n    }\r\n    return hslToRGB({h, s, l, a});\r\n}\r\nfunction parseHex($hex) {\r\n    const h = $hex.substring(1);\r\n    switch (h.length) {\r\n        case 3:\r\n        case 4: {\r\n            const [r, g, b] = [0, 1, 2].map((i) =>\r\n                parseInt(`${h[i]}${h[i]}`, 16)\r\n            );\r\n            const a = h.length === 3 ? 1 : parseInt(`${h[3]}${h[3]}`, 16) / 255;\r\n            return {r, g, b, a};\r\n        }\r\n        case 6:\r\n        case 8: {\r\n            const [r, g, b] = [0, 2, 4].map((i) =>\r\n                parseInt(h.substring(i, i + 2), 16)\r\n            );\r\n            const a =\r\n                h.length === 6 ? 1 : parseInt(h.substring(6, 8), 16) / 255;\r\n            return {r, g, b, a};\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getColorByName($color) {\r\n    const n = knownColors.get($color);\r\n    return {\r\n        r: (n >> 16) & 255,\r\n        g: (n >> 8) & 255,\r\n        b: (n >> 0) & 255,\r\n        a: 1\r\n    };\r\n}\r\nfunction getSystemColor($color) {\r\n    const n = systemColors.get($color);\r\n    return {\r\n        r: (n >> 16) & 255,\r\n        g: (n >> 8) & 255,\r\n        b: (n >> 0) & 255,\r\n        a: 1\r\n    };\r\n}\r\nfunction lowerCalcExpression(color) {\r\n    let searchIndex = 0;\r\n    const replaceBetweenIndices = (start, end, replacement) => {\r\n        color = color.substring(0, start) + replacement + color.substring(end);\r\n    };\r\n    while ((searchIndex = color.indexOf(\"calc(\")) !== -1) {\r\n        const range = getParenthesesRange(color, searchIndex);\r\n        if (!range) {\r\n            break;\r\n        }\r\n        let slice = color.slice(range.start + 1, range.end - 1);\r\n        const includesPercentage = slice.includes(\"%\");\r\n        slice = slice.split(\"%\").join(\"\");\r\n        const output = Math.round(evalMath(slice));\r\n        replaceBetweenIndices(\r\n            range.start - 4,\r\n            range.end,\r\n            output + (includesPercentage ? \"%\" : \"\")\r\n        );\r\n    }\r\n    return color;\r\n}\r\nconst knownColors = new Map(\r\n    Object.entries({\r\n        aliceblue: 0xf0f8ff,\r\n        antiquewhite: 0xfaebd7,\r\n        aqua: 0x00ffff,\r\n        aquamarine: 0x7fffd4,\r\n        azure: 0xf0ffff,\r\n        beige: 0xf5f5dc,\r\n        bisque: 0xffe4c4,\r\n        black: 0x000000,\r\n        blanchedalmond: 0xffebcd,\r\n        blue: 0x0000ff,\r\n        blueviolet: 0x8a2be2,\r\n        brown: 0xa52a2a,\r\n        burlywood: 0xdeb887,\r\n        cadetblue: 0x5f9ea0,\r\n        chartreuse: 0x7fff00,\r\n        chocolate: 0xd2691e,\r\n        coral: 0xff7f50,\r\n        cornflowerblue: 0x6495ed,\r\n        cornsilk: 0xfff8dc,\r\n        crimson: 0xdc143c,\r\n        cyan: 0x00ffff,\r\n        darkblue: 0x00008b,\r\n        darkcyan: 0x008b8b,\r\n        darkgoldenrod: 0xb8860b,\r\n        darkgray: 0xa9a9a9,\r\n        darkgrey: 0xa9a9a9,\r\n        darkgreen: 0x006400,\r\n        darkkhaki: 0xbdb76b,\r\n        darkmagenta: 0x8b008b,\r\n        darkolivegreen: 0x556b2f,\r\n        darkorange: 0xff8c00,\r\n        darkorchid: 0x9932cc,\r\n        darkred: 0x8b0000,\r\n        darksalmon: 0xe9967a,\r\n        darkseagreen: 0x8fbc8f,\r\n        darkslateblue: 0x483d8b,\r\n        darkslategray: 0x2f4f4f,\r\n        darkslategrey: 0x2f4f4f,\r\n        darkturquoise: 0x00ced1,\r\n        darkviolet: 0x9400d3,\r\n        deeppink: 0xff1493,\r\n        deepskyblue: 0x00bfff,\r\n        dimgray: 0x696969,\r\n        dimgrey: 0x696969,\r\n        dodgerblue: 0x1e90ff,\r\n        firebrick: 0xb22222,\r\n        floralwhite: 0xfffaf0,\r\n        forestgreen: 0x228b22,\r\n        fuchsia: 0xff00ff,\r\n        gainsboro: 0xdcdcdc,\r\n        ghostwhite: 0xf8f8ff,\r\n        gold: 0xffd700,\r\n        goldenrod: 0xdaa520,\r\n        gray: 0x808080,\r\n        grey: 0x808080,\r\n        green: 0x008000,\r\n        greenyellow: 0xadff2f,\r\n        honeydew: 0xf0fff0,\r\n        hotpink: 0xff69b4,\r\n        indianred: 0xcd5c5c,\r\n        indigo: 0x4b0082,\r\n        ivory: 0xfffff0,\r\n        khaki: 0xf0e68c,\r\n        lavender: 0xe6e6fa,\r\n        lavenderblush: 0xfff0f5,\r\n        lawngreen: 0x7cfc00,\r\n        lemonchiffon: 0xfffacd,\r\n        lightblue: 0xadd8e6,\r\n        lightcoral: 0xf08080,\r\n        lightcyan: 0xe0ffff,\r\n        lightgoldenrodyellow: 0xfafad2,\r\n        lightgray: 0xd3d3d3,\r\n        lightgrey: 0xd3d3d3,\r\n        lightgreen: 0x90ee90,\r\n        lightpink: 0xffb6c1,\r\n        lightsalmon: 0xffa07a,\r\n        lightseagreen: 0x20b2aa,\r\n        lightskyblue: 0x87cefa,\r\n        lightslategray: 0x778899,\r\n        lightslategrey: 0x778899,\r\n        lightsteelblue: 0xb0c4de,\r\n        lightyellow: 0xffffe0,\r\n        lime: 0x00ff00,\r\n        limegreen: 0x32cd32,\r\n        linen: 0xfaf0e6,\r\n        magenta: 0xff00ff,\r\n        maroon: 0x800000,\r\n        mediumaquamarine: 0x66cdaa,\r\n        mediumblue: 0x0000cd,\r\n        mediumorchid: 0xba55d3,\r\n        mediumpurple: 0x9370db,\r\n        mediumseagreen: 0x3cb371,\r\n        mediumslateblue: 0x7b68ee,\r\n        mediumspringgreen: 0x00fa9a,\r\n        mediumturquoise: 0x48d1cc,\r\n        mediumvioletred: 0xc71585,\r\n        midnightblue: 0x191970,\r\n        mintcream: 0xf5fffa,\r\n        mistyrose: 0xffe4e1,\r\n        moccasin: 0xffe4b5,\r\n        navajowhite: 0xffdead,\r\n        navy: 0x000080,\r\n        oldlace: 0xfdf5e6,\r\n        olive: 0x808000,\r\n        olivedrab: 0x6b8e23,\r\n        orange: 0xffa500,\r\n        orangered: 0xff4500,\r\n        orchid: 0xda70d6,\r\n        palegoldenrod: 0xeee8aa,\r\n        palegreen: 0x98fb98,\r\n        paleturquoise: 0xafeeee,\r\n        palevioletred: 0xdb7093,\r\n        papayawhip: 0xffefd5,\r\n        peachpuff: 0xffdab9,\r\n        peru: 0xcd853f,\r\n        pink: 0xffc0cb,\r\n        plum: 0xdda0dd,\r\n        powderblue: 0xb0e0e6,\r\n        purple: 0x800080,\r\n        rebeccapurple: 0x663399,\r\n        red: 0xff0000,\r\n        rosybrown: 0xbc8f8f,\r\n        royalblue: 0x4169e1,\r\n        saddlebrown: 0x8b4513,\r\n        salmon: 0xfa8072,\r\n        sandybrown: 0xf4a460,\r\n        seagreen: 0x2e8b57,\r\n        seashell: 0xfff5ee,\r\n        sienna: 0xa0522d,\r\n        silver: 0xc0c0c0,\r\n        skyblue: 0x87ceeb,\r\n        slateblue: 0x6a5acd,\r\n        slategray: 0x708090,\r\n        slategrey: 0x708090,\r\n        snow: 0xfffafa,\r\n        springgreen: 0x00ff7f,\r\n        steelblue: 0x4682b4,\r\n        tan: 0xd2b48c,\r\n        teal: 0x008080,\r\n        thistle: 0xd8bfd8,\r\n        tomato: 0xff6347,\r\n        turquoise: 0x40e0d0,\r\n        violet: 0xee82ee,\r\n        wheat: 0xf5deb3,\r\n        white: 0xffffff,\r\n        whitesmoke: 0xf5f5f5,\r\n        yellow: 0xffff00,\r\n        yellowgreen: 0x9acd32\r\n    })\r\n);\r\nconst systemColors = new Map(\r\n    Object.entries({\r\n        \"ActiveBorder\": 0x3b99fc,\r\n        \"ActiveCaption\": 0x000000,\r\n        \"AppWorkspace\": 0xaaaaaa,\r\n        \"Background\": 0x6363ce,\r\n        \"ButtonFace\": 0xffffff,\r\n        \"ButtonHighlight\": 0xe9e9e9,\r\n        \"ButtonShadow\": 0x9fa09f,\r\n        \"ButtonText\": 0x000000,\r\n        \"CaptionText\": 0x000000,\r\n        \"GrayText\": 0x7f7f7f,\r\n        \"Highlight\": 0xb2d7ff,\r\n        \"HighlightText\": 0x000000,\r\n        \"InactiveBorder\": 0xffffff,\r\n        \"InactiveCaption\": 0xffffff,\r\n        \"InactiveCaptionText\": 0x000000,\r\n        \"InfoBackground\": 0xfbfcc5,\r\n        \"InfoText\": 0x000000,\r\n        \"Menu\": 0xf6f6f6,\r\n        \"MenuText\": 0xffffff,\r\n        \"Scrollbar\": 0xaaaaaa,\r\n        \"ThreeDDarkShadow\": 0x000000,\r\n        \"ThreeDFace\": 0xc0c0c0,\r\n        \"ThreeDHighlight\": 0xffffff,\r\n        \"ThreeDLightShadow\": 0xffffff,\r\n        \"ThreeDShadow\": 0x000000,\r\n        \"Window\": 0xececec,\r\n        \"WindowFrame\": 0xaaaaaa,\r\n        \"WindowText\": 0x000000,\r\n        \"-webkit-focus-ring-color\": 0xe59700\r\n    }).map(([key, value]) => [key.toLowerCase(), value])\r\n);\r\nfunction getSRGBLightness(r, g, b) {\r\n    return (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\r\n}\r\nlet canvas$1;\r\nlet context$1;\r\nfunction domParseColor($color) {\r\n    if (!context$1) {\r\n        canvas$1 = document.createElement(\"canvas\");\r\n        canvas$1.width = 1;\r\n        canvas$1.height = 1;\r\n        context$1 = canvas$1.getContext(\"2d\", {willReadFrequently: true});\r\n    }\r\n    context$1.fillStyle = $color;\r\n    context$1.fillRect(0, 0, 1, 1);\r\n    const d = context$1.getImageData(0, 0, 1, 1).data;\r\n    const color = `rgba(${d[0]}, ${d[1]}, ${d[2]}, ${(d[3] / 255).toFixed(2)})`;\r\n    return parseRGB(color);\r\n}\r\n\r\nfunction throttle(callback) {\r\n    let pending = false;\r\n    let frameId = null;\r\n    let lastArgs;\r\n    const throttled = (...args) => {\r\n        lastArgs = args;\r\n        if (frameId) {\r\n            pending = true;\r\n        } else {\r\n            callback(...lastArgs);\r\n            frameId = requestAnimationFrame(() => {\r\n                frameId = null;\r\n                if (pending) {\r\n                    callback(...lastArgs);\r\n                    pending = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    const cancel = () => {\r\n        cancelAnimationFrame(frameId);\r\n        pending = false;\r\n        frameId = null;\r\n    };\r\n    return Object.assign(throttled, {cancel});\r\n}\r\nfunction createAsyncTasksQueue() {\r\n    const tasks = [];\r\n    let frameId = null;\r\n    function runTasks() {\r\n        let task;\r\n        while ((task = tasks.shift())) {\r\n            task();\r\n        }\r\n        frameId = null;\r\n    }\r\n    function add(task) {\r\n        tasks.push(task);\r\n        if (!frameId) {\r\n            frameId = requestAnimationFrame(runTasks);\r\n        }\r\n    }\r\n    function cancel() {\r\n        tasks.splice(0);\r\n        cancelAnimationFrame(frameId);\r\n        frameId = null;\r\n    }\r\n    return {add, cancel};\r\n}\r\nconst delayTokens = new Set();\r\nfunction requestAnimationFrameOnce(token, callback) {\r\n    if (delayTokens.has(token)) {\r\n        return;\r\n    }\r\n    delayTokens.add(token);\r\n    requestAnimationFrame(() => {\r\n        delayTokens.delete(token);\r\n        callback();\r\n    });\r\n}\r\n\r\nfunction hexify(number) {\r\n    return (number < 16 ? \"0\" : \"\") + number.toString(16);\r\n}\r\nfunction generateUID() {\r\n    if (\"randomUUID\" in crypto) {\r\n        const uuid = crypto.randomUUID();\r\n        return (\r\n            uuid.substring(0, 8) +\r\n            uuid.substring(9, 13) +\r\n            uuid.substring(14, 18) +\r\n            uuid.substring(19, 23) +\r\n            uuid.substring(24)\r\n        );\r\n    }\r\n    if (\"getRandomValues\" in crypto) {\r\n        return Array.from(crypto.getRandomValues(new Uint8Array(16)))\r\n            .map((x) => hexify(x))\r\n            .join(\"\");\r\n    }\r\n    return Math.floor(Math.random() * 2 ** 55).toString(36);\r\n}\r\n\r\nlet documentVisibilityListener = null;\r\nlet documentIsVisible_ = !document.hidden;\r\nconst listenerOptions = {\r\n    capture: true,\r\n    passive: true\r\n};\r\nfunction watchForDocumentVisibility() {\r\n    document.addEventListener(\r\n        \"visibilitychange\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.addEventListener(\r\n        \"pageshow\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.addEventListener(\r\n        \"focus\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n}\r\nfunction stopWatchingForDocumentVisibility() {\r\n    document.removeEventListener(\r\n        \"visibilitychange\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.removeEventListener(\r\n        \"pageshow\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.removeEventListener(\r\n        \"focus\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n}\r\nfunction setDocumentVisibilityListener(callback) {\r\n    const alreadyWatching = Boolean(documentVisibilityListener);\r\n    documentVisibilityListener = () => {\r\n        if (!document.hidden) {\r\n            removeDocumentVisibilityListener();\r\n            callback();\r\n            documentIsVisible_ = true;\r\n        }\r\n    };\r\n    if (!alreadyWatching) {\r\n        watchForDocumentVisibility();\r\n    }\r\n}\r\nfunction removeDocumentVisibilityListener() {\r\n    stopWatchingForDocumentVisibility();\r\n    documentVisibilityListener = null;\r\n}\r\nfunction documentIsVisible() {\r\n    return documentIsVisible_;\r\n}\r\n\r\nfunction getDuration(time) {\r\n    let duration = 0;\r\n    if (time.seconds) {\r\n        duration += time.seconds * 1000;\r\n    }\r\n    if (time.minutes) {\r\n        duration += time.minutes * 60 * 1000;\r\n    }\r\n    if (time.hours) {\r\n        duration += time.hours * 60 * 60 * 1000;\r\n    }\r\n    if (time.days) {\r\n        duration += time.days * 24 * 60 * 60 * 1000;\r\n    }\r\n    return duration;\r\n}\r\n\r\nfunction logInfo(...args) {}\r\nfunction logWarn(...args) {}\r\nfunction logAssert(...args) {}\r\nfunction ASSERT(description, condition) {\r\n    if (!condition) {\r\n        logAssert(description);\r\n    }\r\n}\r\n\r\nfunction removeNode(node) {\r\n    node && node.parentNode && node.parentNode.removeChild(node);\r\n}\r\nfunction watchForNodePosition(node, mode, onRestore = Function.prototype) {\r\n    const MAX_ATTEMPTS_COUNT = 10;\r\n    const RETRY_TIMEOUT = getDuration({seconds: 2});\r\n    const ATTEMPTS_INTERVAL = getDuration({seconds: 10});\r\n    let prevSibling = node.previousSibling;\r\n    let parent = node.parentNode;\r\n    if (!parent) {\r\n        throw new Error(\r\n            \"Unable to watch for node position: parent element not found\"\r\n        );\r\n    }\r\n    if (mode === \"prev-sibling\" && !prevSibling) {\r\n        throw new Error(\r\n            \"Unable to watch for node position: there is no previous sibling\"\r\n        );\r\n    }\r\n    let attempts = 0;\r\n    let start = null;\r\n    let timeoutId = null;\r\n    const restore = throttle(() => {\r\n        if (timeoutId) {\r\n            return;\r\n        }\r\n        attempts++;\r\n        const now = Date.now();\r\n        if (start == null) {\r\n            start = now;\r\n        } else if (attempts >= MAX_ATTEMPTS_COUNT) {\r\n            if (now - start < ATTEMPTS_INTERVAL) {\r\n                logWarn(\r\n                    `Node position watcher paused: retry in ${RETRY_TIMEOUT}ms`,\r\n                    node,\r\n                    prevSibling\r\n                );\r\n                timeoutId = setTimeout(() => {\r\n                    start = null;\r\n                    attempts = 0;\r\n                    timeoutId = null;\r\n                    restore();\r\n                }, RETRY_TIMEOUT);\r\n                return;\r\n            }\r\n            start = now;\r\n            attempts = 1;\r\n        }\r\n        if (mode === \"head\") {\r\n            if (prevSibling && prevSibling.parentNode !== parent) {\r\n                logWarn(\r\n                    \"Sibling moved, moving node to the head end\",\r\n                    node,\r\n                    prevSibling,\r\n                    parent\r\n                );\r\n                prevSibling = document.head.lastChild;\r\n            }\r\n        }\r\n        if (mode === \"prev-sibling\") {\r\n            if (prevSibling.parentNode == null) {\r\n                logWarn(\r\n                    \"Unable to restore node position: sibling was removed\",\r\n                    node,\r\n                    prevSibling,\r\n                    parent\r\n                );\r\n                stop();\r\n                return;\r\n            }\r\n            if (prevSibling.parentNode !== parent) {\r\n                logWarn(\r\n                    \"Style was moved to another parent\",\r\n                    node,\r\n                    prevSibling,\r\n                    parent\r\n                );\r\n                updateParent(prevSibling.parentNode);\r\n            }\r\n        }\r\n        if (mode === \"head\" && !parent.isConnected) {\r\n            parent = document.head;\r\n        }\r\n        logWarn(\"Restoring node position\", node, prevSibling, parent);\r\n        parent.insertBefore(\r\n            node,\r\n            prevSibling && prevSibling.isConnected\r\n                ? prevSibling.nextSibling\r\n                : parent.firstChild\r\n        );\r\n        observer.takeRecords();\r\n        onRestore && onRestore();\r\n    });\r\n    const observer = new MutationObserver(() => {\r\n        if (\r\n            (mode === \"head\" &&\r\n                (node.parentNode !== parent || !node.parentNode.isConnected)) ||\r\n            (mode === \"prev-sibling\" && node.previousSibling !== prevSibling)\r\n        ) {\r\n            restore();\r\n        }\r\n    });\r\n    const run = () => {\r\n        observer.observe(parent, {childList: true});\r\n    };\r\n    const stop = () => {\r\n        clearTimeout(timeoutId);\r\n        observer.disconnect();\r\n        restore.cancel();\r\n    };\r\n    const skip = () => {\r\n        observer.takeRecords();\r\n    };\r\n    const updateParent = (parentNode) => {\r\n        parent = parentNode;\r\n        stop();\r\n        run();\r\n    };\r\n    run();\r\n    return {run, stop, skip};\r\n}\r\nfunction iterateShadowHosts(root, iterator) {\r\n    if (root == null) {\r\n        return;\r\n    }\r\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\r\n        acceptNode(node) {\r\n            return node.shadowRoot == null\r\n                ? NodeFilter.FILTER_SKIP\r\n                : NodeFilter.FILTER_ACCEPT;\r\n        }\r\n    });\r\n    for (\r\n        let node = root.shadowRoot ? walker.currentNode : walker.nextNode();\r\n        node != null;\r\n        node = walker.nextNode()\r\n    ) {\r\n        if (node.classList.contains(\"surfingkeys_hints_host\")) {\r\n            continue;\r\n        }\r\n        iterator(node);\r\n        iterateShadowHosts(node.shadowRoot, iterator);\r\n    }\r\n}\r\nlet isDOMReady = () => {\r\n    return (\r\n        document.readyState === \"complete\" ||\r\n        document.readyState === \"interactive\"\r\n    );\r\n};\r\nfunction setIsDOMReady(newFunc) {\r\n    isDOMReady = newFunc;\r\n}\r\nconst readyStateListeners = new Set();\r\nfunction addDOMReadyListener(listener) {\r\n    isDOMReady() ? listener() : readyStateListeners.add(listener);\r\n}\r\nfunction removeDOMReadyListener(listener) {\r\n    readyStateListeners.delete(listener);\r\n}\r\nfunction isReadyStateComplete() {\r\n    return document.readyState === \"complete\";\r\n}\r\nconst readyStateCompleteListeners = new Set();\r\nfunction addReadyStateCompleteListener(listener) {\r\n    isReadyStateComplete()\r\n        ? listener()\r\n        : readyStateCompleteListeners.add(listener);\r\n}\r\nfunction cleanReadyStateCompleteListeners() {\r\n    readyStateCompleteListeners.clear();\r\n}\r\nif (!isDOMReady()) {\r\n    const onReadyStateChange = () => {\r\n        if (isDOMReady()) {\r\n            readyStateListeners.forEach((listener) => listener());\r\n            readyStateListeners.clear();\r\n            if (isReadyStateComplete()) {\r\n                document.removeEventListener(\r\n                    \"readystatechange\",\r\n                    onReadyStateChange\r\n                );\r\n                readyStateCompleteListeners.forEach((listener) => listener());\r\n                readyStateCompleteListeners.clear();\r\n            }\r\n        }\r\n    };\r\n    document.addEventListener(\"readystatechange\", onReadyStateChange);\r\n}\r\nconst HUGE_MUTATIONS_COUNT = 1000;\r\nfunction isHugeMutation(mutations) {\r\n    if (mutations.length > HUGE_MUTATIONS_COUNT) {\r\n        return true;\r\n    }\r\n    let addedNodesCount = 0;\r\n    for (let i = 0; i < mutations.length; i++) {\r\n        addedNodesCount += mutations[i].addedNodes.length;\r\n        if (addedNodesCount > HUGE_MUTATIONS_COUNT) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction getElementsTreeOperations(mutations) {\r\n    const additions = new Set();\r\n    const deletions = new Set();\r\n    const moves = new Set();\r\n    mutations.forEach((m) => {\r\n        forEach(m.addedNodes, (n) => {\r\n            if (n instanceof Element && n.isConnected) {\r\n                additions.add(n);\r\n            }\r\n        });\r\n        forEach(m.removedNodes, (n) => {\r\n            if (n instanceof Element) {\r\n                if (n.isConnected) {\r\n                    moves.add(n);\r\n                    additions.delete(n);\r\n                } else {\r\n                    deletions.add(n);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const duplicateAdditions = [];\r\n    const duplicateDeletions = [];\r\n    additions.forEach((node) => {\r\n        if (additions.has(node.parentElement)) {\r\n            duplicateAdditions.push(node);\r\n        }\r\n    });\r\n    deletions.forEach((node) => {\r\n        if (deletions.has(node.parentElement)) {\r\n            duplicateDeletions.push(node);\r\n        }\r\n    });\r\n    duplicateAdditions.forEach((node) => additions.delete(node));\r\n    duplicateDeletions.forEach((node) => deletions.delete(node));\r\n    return {additions, moves, deletions};\r\n}\r\nconst optimizedTreeObservers = new Map();\r\nconst optimizedTreeCallbacks = new WeakMap();\r\nfunction createOptimizedTreeObserver(root, callbacks) {\r\n    let observer;\r\n    let observerCallbacks;\r\n    let domReadyListener;\r\n    if (optimizedTreeObservers.has(root)) {\r\n        observer = optimizedTreeObservers.get(root);\r\n        observerCallbacks = optimizedTreeCallbacks.get(observer);\r\n    } else {\r\n        let hadHugeMutationsBefore = false;\r\n        let subscribedForReadyState = false;\r\n        observer = new MutationObserver((mutations) => {\r\n            if (isHugeMutation(mutations)) {\r\n                if (!hadHugeMutationsBefore || isDOMReady()) {\r\n                    observerCallbacks.forEach(({onHugeMutations}) =>\r\n                        onHugeMutations(root)\r\n                    );\r\n                } else if (!subscribedForReadyState) {\r\n                    domReadyListener = () =>\r\n                        observerCallbacks.forEach(({onHugeMutations}) =>\r\n                            onHugeMutations(root)\r\n                        );\r\n                    addDOMReadyListener(domReadyListener);\r\n                    subscribedForReadyState = true;\r\n                }\r\n                hadHugeMutationsBefore = true;\r\n            } else {\r\n                const elementsOperations = getElementsTreeOperations(mutations);\r\n                observerCallbacks.forEach(({onMinorMutations}) =>\r\n                    onMinorMutations(root, elementsOperations)\r\n                );\r\n            }\r\n        });\r\n        observer.observe(root, {childList: true, subtree: true});\r\n        optimizedTreeObservers.set(root, observer);\r\n        observerCallbacks = new Set();\r\n        optimizedTreeCallbacks.set(observer, observerCallbacks);\r\n    }\r\n    observerCallbacks.add(callbacks);\r\n    return {\r\n        disconnect() {\r\n            observerCallbacks.delete(callbacks);\r\n            if (domReadyListener) {\r\n                removeDOMReadyListener(domReadyListener);\r\n            }\r\n            if (observerCallbacks.size === 0) {\r\n                observer.disconnect();\r\n                optimizedTreeCallbacks.delete(observer);\r\n                optimizedTreeObservers.delete(root);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction iterateCSSRules(rules, iterate, onImportError) {\r\n    forEach(rules, (rule) => {\r\n        if (isStyleRule(rule)) {\r\n            iterate(rule);\r\n            if (rule.cssRules?.length > 0) {\r\n                iterateCSSRules(rule.cssRules, iterate);\r\n            }\r\n        } else if (isImportRule(rule)) {\r\n            try {\r\n                iterateCSSRules(\r\n                    rule.styleSheet.cssRules,\r\n                    iterate,\r\n                    onImportError\r\n                );\r\n            } catch (err) {\r\n                onImportError?.();\r\n            }\r\n        } else if (isMediaRule(rule)) {\r\n            const media = Array.from(rule.media);\r\n            const isScreenOrAllOrQuery = media.some(\r\n                (m) =>\r\n                    m.startsWith(\"screen\") ||\r\n                    m.startsWith(\"all\") ||\r\n                    m.startsWith(\"(\")\r\n            );\r\n            const isPrintOrSpeech = media.some(\r\n                (m) => m.startsWith(\"print\") || m.startsWith(\"speech\")\r\n            );\r\n            if (isScreenOrAllOrQuery || !isPrintOrSpeech) {\r\n                iterateCSSRules(rule.cssRules, iterate, onImportError);\r\n            }\r\n        } else if (isSupportsRule(rule)) {\r\n            if (CSS.supports(rule.conditionText)) {\r\n                iterateCSSRules(rule.cssRules, iterate, onImportError);\r\n            }\r\n        } else if (isLayerRule(rule)) {\r\n            iterateCSSRules(rule.cssRules, iterate, onImportError);\r\n        } else {\r\n            logWarn(`CSSRule type not supported`, rule);\r\n        }\r\n    });\r\n}\r\nconst shorthandVarDependantProperties = [\r\n    \"background\",\r\n    \"border\",\r\n    \"border-color\",\r\n    \"border-bottom\",\r\n    \"border-left\",\r\n    \"border-right\",\r\n    \"border-top\",\r\n    \"outline\",\r\n    \"outline-color\"\r\n];\r\nconst shorthandVarDepPropRegexps = isSafari\r\n    ? shorthandVarDependantProperties.map((prop) => {\r\n          const regexp = new RegExp(`${prop}:\\\\s*(.*?)\\\\s*;`);\r\n          return [prop, regexp];\r\n      })\r\n    : null;\r\nfunction iterateCSSDeclarations(style, iterate) {\r\n    forEach(style, (property) => {\r\n        const value = style.getPropertyValue(property).trim();\r\n        if (!value) {\r\n            return;\r\n        }\r\n        iterate(property, value);\r\n    });\r\n    const cssText = style.cssText;\r\n    if (cssText.includes(\"var(\")) {\r\n        if (isSafari) {\r\n            shorthandVarDepPropRegexps.forEach(([prop, regexp]) => {\r\n                const match = cssText.match(regexp);\r\n                if (match && match[1]) {\r\n                    const val = match[1].trim();\r\n                    iterate(prop, val);\r\n                }\r\n            });\r\n        } else {\r\n            shorthandVarDependantProperties.forEach((prop) => {\r\n                const val = style.getPropertyValue(prop);\r\n                if (val && val.includes(\"var(\")) {\r\n                    iterate(prop, val);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    if (\r\n        cssText.includes(\"background-color: ;\") &&\r\n        !style.getPropertyValue(\"background\")\r\n    ) {\r\n        handleEmptyShorthand(\"background\", style, iterate);\r\n    }\r\n    if (\r\n        cssText.includes(\"border-\") &&\r\n        cssText.includes(\"-color: ;\") &&\r\n        !style.getPropertyValue(\"border\")\r\n    ) {\r\n        handleEmptyShorthand(\"border\", style, iterate);\r\n    }\r\n}\r\nfunction handleEmptyShorthand(shorthand, style, iterate) {\r\n    const parentRule = style.parentRule;\r\n    if (isStyleRule(parentRule)) {\r\n        const sourceCSSText =\r\n            parentRule.parentStyleSheet?.ownerNode?.textContent;\r\n        if (sourceCSSText) {\r\n            let escapedSelector = escapeRegExpSpecialChars(\r\n                parentRule.selectorText\r\n            );\r\n            escapedSelector = escapedSelector.replaceAll(/\\s+/g, \"\\\\s*\");\r\n            escapedSelector = escapedSelector.replaceAll(/::/g, \"::?\");\r\n            const regexp = new RegExp(\r\n                `${escapedSelector}\\\\s*{[^}]*${shorthand}:\\\\s*([^;}]+)`\r\n            );\r\n            const match = sourceCSSText.match(regexp);\r\n            if (match) {\r\n                iterate(shorthand, match[1]);\r\n            }\r\n        } else if (shorthand === \"background\") {\r\n            iterate(\"background-color\", \"#ffffff\");\r\n        }\r\n    }\r\n}\r\nconst cssURLRegex = /url\\((('.*?')|(\".*?\")|([^\\)]*?))\\)/g;\r\nconst cssImportRegex =\r\n    /@import\\s*(url\\()?(('.+?')|(\".+?\")|([^\\)]*?))\\)? ?(screen)?;?/gi;\r\nfunction getCSSURLValue(cssURL) {\r\n    return cssURL\r\n        .trim()\r\n        .replace(/[\\n\\r\\\\]+/g, \"\")\r\n        .replace(/^url\\((.*)\\)$/, \"$1\")\r\n        .trim()\r\n        .replace(/^\"(.*)\"$/, \"$1\")\r\n        .replace(/^'(.*)'$/, \"$1\")\r\n        .replace(/(?:\\\\(.))/g, \"$1\");\r\n}\r\nfunction getCSSBaseBath(url) {\r\n    const cssURL = parseURL(url);\r\n    return `${cssURL.origin}${cssURL.pathname.replace(/\\?.*$/, \"\").replace(/(\\/)([^\\/]+)$/i, \"$1\")}`;\r\n}\r\nfunction replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {\r\n    return $css.replace(cssURLRegex, (match) => {\r\n        try {\r\n            const url = getCSSURLValue(match);\r\n            const absoluteURL = getAbsoluteURL(cssBasePath, url);\r\n            const escapedURL = absoluteURL.replaceAll(\"'\", \"\\\\'\");\r\n            return `url('${escapedURL}')`;\r\n        } catch (err) {\r\n            logWarn(\r\n                \"Not able to replace relative URL with Absolute URL, skipping\"\r\n            );\r\n            return match;\r\n        }\r\n    });\r\n}\r\nconst fontFaceRegex = /@font-face\\s*{[^}]*}/g;\r\nfunction replaceCSSFontFace($css) {\r\n    return $css.replace(fontFaceRegex, \"\");\r\n}\r\nconst styleRules = new WeakSet();\r\nconst importRules = new WeakSet();\r\nconst mediaRules = new WeakSet();\r\nconst supportsRules = new WeakSet();\r\nconst layerRules = new WeakSet();\r\nfunction isStyleRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule.selectorText) {\r\n        styleRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isImportRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (importRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule.href) {\r\n        importRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isMediaRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (mediaRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule.media) {\r\n        mediaRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSupportsRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (supportsRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule instanceof CSSSupportsRule) {\r\n        supportsRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isLayerRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (layerRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (isLayerRuleSupported && rule instanceof CSSLayerBlockRule) {\r\n        layerRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nconst sheetsScopes = new WeakMap();\r\nfunction defineSheetScope(sheet, node) {\r\n    sheetsScopes.set(sheet, node);\r\n}\r\nfunction getSheetScope(sheet) {\r\n    if (!sheet.ownerNode) {\r\n        return null;\r\n    }\r\n    if (sheetsScopes.has(sheet)) {\r\n        return sheetsScopes.get(sheet);\r\n    }\r\n    let node = sheet.ownerNode;\r\n    while (node) {\r\n        if (node instanceof ShadowRoot || node instanceof Document) {\r\n            defineSheetScope(sheet, node);\r\n            return node;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return null;\r\n}\r\n\r\nlet variablesSheet;\r\nconst registeredColors = new Map();\r\nfunction registerVariablesSheet(sheet) {\r\n    variablesSheet = sheet;\r\n    const types = [\"background\", \"text\", \"border\"];\r\n    registeredColors.forEach((registered) => {\r\n        types.forEach((type) => {\r\n            if (registered[type]) {\r\n                const {variable, value} = registered[type];\r\n                variablesSheet?.cssRules[0].style.setProperty(variable, value);\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction releaseVariablesSheet() {\r\n    variablesSheet = null;\r\n    clearColorPalette();\r\n}\r\nfunction getRegisteredVariableValue(type, registered) {\r\n    return `var(${registered[type].variable}, ${registered[type].value})`;\r\n}\r\nfunction getRegisteredColor(type, parsed) {\r\n    const hex = rgbToHexString(parsed);\r\n    const registered = registeredColors.get(hex);\r\n    if (registered?.[type]) {\r\n        return getRegisteredVariableValue(type, registered);\r\n    }\r\n    return null;\r\n}\r\nfunction registerColor(type, parsed, value) {\r\n    const hex = rgbToHexString(parsed);\r\n    let registered;\r\n    if (registeredColors.has(hex)) {\r\n        registered = registeredColors.get(hex);\r\n    } else {\r\n        const parsed = parseColorWithCache(hex);\r\n        registered = {parsed};\r\n        registeredColors.set(hex, registered);\r\n    }\r\n    const variable = `--darkreader-${type}-${hex.replace(\"#\", \"\")}`;\r\n    registered[type] = {variable, value};\r\n    if (variablesSheet?.cssRules[0]?.style) {\r\n        variablesSheet?.cssRules[0].style.setProperty(variable, value);\r\n    }\r\n    return getRegisteredVariableValue(type, registered);\r\n}\r\nfunction getColorPalette() {\r\n    const background = [];\r\n    const border = [];\r\n    const text = [];\r\n    registeredColors.forEach((registered) => {\r\n        if (registered.background) {\r\n            background.push(registered.parsed);\r\n        }\r\n        if (registered.border) {\r\n            border.push(registered.parsed);\r\n        }\r\n        if (registered.text) {\r\n            text.push(registered.parsed);\r\n        }\r\n    });\r\n    return {background, border, text};\r\n}\r\nfunction clearColorPalette() {\r\n    registeredColors.clear();\r\n}\r\n\r\nfunction getBgPole(theme) {\r\n    const isDarkScheme = theme.mode === 1;\r\n    const prop = isDarkScheme\r\n        ? \"darkSchemeBackgroundColor\"\r\n        : \"lightSchemeBackgroundColor\";\r\n    return theme[prop];\r\n}\r\nfunction getFgPole(theme) {\r\n    const isDarkScheme = theme.mode === 1;\r\n    const prop = isDarkScheme ? \"darkSchemeTextColor\" : \"lightSchemeTextColor\";\r\n    return theme[prop];\r\n}\r\nconst colorModificationCache = new Map();\r\nfunction clearColorModificationCache() {\r\n    colorModificationCache.clear();\r\n}\r\nconst rgbCacheKeys = [\"r\", \"g\", \"b\", \"a\"];\r\nconst themeCacheKeys = [\r\n    \"mode\",\r\n    \"brightness\",\r\n    \"contrast\",\r\n    \"grayscale\",\r\n    \"sepia\",\r\n    \"darkSchemeBackgroundColor\",\r\n    \"darkSchemeTextColor\",\r\n    \"lightSchemeBackgroundColor\",\r\n    \"lightSchemeTextColor\"\r\n];\r\nfunction getCacheId(rgb, theme) {\r\n    let resultId = \"\";\r\n    rgbCacheKeys.forEach((key) => {\r\n        resultId += `${rgb[key]};`;\r\n    });\r\n    themeCacheKeys.forEach((key) => {\r\n        resultId += `${theme[key]};`;\r\n    });\r\n    return resultId;\r\n}\r\nfunction modifyColorWithCache(\r\n    rgb,\r\n    theme,\r\n    modifyHSL,\r\n    poleColor,\r\n    anotherPoleColor\r\n) {\r\n    let fnCache;\r\n    if (colorModificationCache.has(modifyHSL)) {\r\n        fnCache = colorModificationCache.get(modifyHSL);\r\n    } else {\r\n        fnCache = new Map();\r\n        colorModificationCache.set(modifyHSL, fnCache);\r\n    }\r\n    const id = getCacheId(rgb, theme);\r\n    if (fnCache.has(id)) {\r\n        return fnCache.get(id);\r\n    }\r\n    const hsl = rgbToHSL(rgb);\r\n    const pole = poleColor == null ? null : parseToHSLWithCache(poleColor);\r\n    const anotherPole =\r\n        anotherPoleColor == null ? null : parseToHSLWithCache(anotherPoleColor);\r\n    const modified = modifyHSL(hsl, pole, anotherPole);\r\n    const {r, g, b, a} = hslToRGB(modified);\r\n    const matrix = createFilterMatrix({...theme, mode: 0});\r\n    const [rf, gf, bf] = applyColorMatrix([r, g, b], matrix);\r\n    const color =\r\n        a === 1\r\n            ? rgbToHexString({r: rf, g: gf, b: bf})\r\n            : rgbToString({r: rf, g: gf, b: bf, a});\r\n    fnCache.set(id, color);\r\n    return color;\r\n}\r\nfunction modifyAndRegisterColor(type, rgb, theme, modifier) {\r\n    const registered = getRegisteredColor(type, rgb);\r\n    if (registered) {\r\n        return registered;\r\n    }\r\n    const value = modifier(rgb, theme);\r\n    return registerColor(type, rgb, value);\r\n}\r\nfunction modifyLightSchemeColor(rgb, theme) {\r\n    const poleBg = getBgPole(theme);\r\n    const poleFg = getFgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyLightModeHSL, poleFg, poleBg);\r\n}\r\nfunction modifyLightModeHSL({h, s, l, a}, poleFg, poleBg) {\r\n    const isDark = l < 0.5;\r\n    let isNeutral;\r\n    if (isDark) {\r\n        isNeutral = l < 0.2 || s < 0.12;\r\n    } else {\r\n        const isBlue = h > 200 && h < 280;\r\n        isNeutral = s < 0.24 || (l > 0.8 && isBlue);\r\n    }\r\n    let hx = h;\r\n    let sx = s;\r\n    if (isNeutral) {\r\n        if (isDark) {\r\n            hx = poleFg.h;\r\n            sx = poleFg.s;\r\n        } else {\r\n            hx = poleBg.h;\r\n            sx = poleBg.s;\r\n        }\r\n    }\r\n    const lx = scale(l, 0, 1, poleFg.l, poleBg.l);\r\n    return {h: hx, s: sx, l: lx, a};\r\n}\r\nconst MAX_BG_LIGHTNESS = 0.4;\r\nfunction modifyBgHSL({h, s, l, a}, pole) {\r\n    const isDark = l < 0.5;\r\n    const isBlue = h > 200 && h < 280;\r\n    const isNeutral = s < 0.12 || (l > 0.8 && isBlue);\r\n    if (isDark) {\r\n        const lx = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);\r\n        if (isNeutral) {\r\n            const hx = pole.h;\r\n            const sx = pole.s;\r\n            return {h: hx, s: sx, l: lx, a};\r\n        }\r\n        return {h, s, l: lx, a};\r\n    }\r\n    let lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);\r\n    if (isNeutral) {\r\n        const hx = pole.h;\r\n        const sx = pole.s;\r\n        return {h: hx, s: sx, l: lx, a};\r\n    }\r\n    let hx = h;\r\n    const isYellow = h > 60 && h < 180;\r\n    if (isYellow) {\r\n        const isCloserToGreen = h > 120;\r\n        if (isCloserToGreen) {\r\n            hx = scale(h, 120, 180, 135, 180);\r\n        } else {\r\n            hx = scale(h, 60, 120, 60, 105);\r\n        }\r\n    }\r\n    if (hx > 40 && hx < 80) {\r\n        lx *= 0.75;\r\n    }\r\n    return {h: hx, s, l: lx, a};\r\n}\r\nfunction _modifyBackgroundColor(rgb, theme) {\r\n    if (theme.mode === 0) {\r\n        return modifyLightSchemeColor(rgb, theme);\r\n    }\r\n    const pole = getBgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyBgHSL, pole);\r\n}\r\nfunction modifyBackgroundColor(rgb, theme, shouldRegisterColorVariable = true) {\r\n    if (!shouldRegisterColorVariable) {\r\n        return _modifyBackgroundColor(rgb, theme);\r\n    }\r\n    return modifyAndRegisterColor(\r\n        \"background\",\r\n        rgb,\r\n        theme,\r\n        _modifyBackgroundColor\r\n    );\r\n}\r\nconst MIN_FG_LIGHTNESS = 0.55;\r\nfunction modifyBlueFgHue(hue) {\r\n    return scale(hue, 205, 245, 205, 220);\r\n}\r\nfunction modifyFgHSL({h, s, l, a}, pole) {\r\n    const isLight = l > 0.5;\r\n    const isNeutral = l < 0.2 || s < 0.24;\r\n    const isBlue = !isNeutral && h > 205 && h < 245;\r\n    if (isLight) {\r\n        const lx = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);\r\n        if (isNeutral) {\r\n            const hx = pole.h;\r\n            const sx = pole.s;\r\n            return {h: hx, s: sx, l: lx, a};\r\n        }\r\n        let hx = h;\r\n        if (isBlue) {\r\n            hx = modifyBlueFgHue(h);\r\n        }\r\n        return {h: hx, s, l: lx, a};\r\n    }\r\n    if (isNeutral) {\r\n        const hx = pole.h;\r\n        const sx = pole.s;\r\n        const lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n        return {h: hx, s: sx, l: lx, a};\r\n    }\r\n    let hx = h;\r\n    let lx;\r\n    if (isBlue) {\r\n        hx = modifyBlueFgHue(h);\r\n        lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));\r\n    } else {\r\n        lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n    }\r\n    return {h: hx, s, l: lx, a};\r\n}\r\nfunction _modifyForegroundColor(rgb, theme) {\r\n    if (theme.mode === 0) {\r\n        return modifyLightSchemeColor(rgb, theme);\r\n    }\r\n    const pole = getFgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyFgHSL, pole);\r\n}\r\nfunction modifyForegroundColor(rgb, theme, shouldRegisterColorVariable = true) {\r\n    if (!shouldRegisterColorVariable) {\r\n        return _modifyForegroundColor(rgb, theme);\r\n    }\r\n    return modifyAndRegisterColor(\"text\", rgb, theme, _modifyForegroundColor);\r\n}\r\nfunction modifyBorderHSL({h, s, l, a}, poleFg, poleBg) {\r\n    const isDark = l < 0.5;\r\n    const isNeutral = l < 0.2 || s < 0.24;\r\n    let hx = h;\r\n    let sx = s;\r\n    if (isNeutral) {\r\n        if (isDark) {\r\n            hx = poleFg.h;\r\n            sx = poleFg.s;\r\n        } else {\r\n            hx = poleBg.h;\r\n            sx = poleBg.s;\r\n        }\r\n    }\r\n    const lx = scale(l, 0, 1, 0.5, 0.2);\r\n    return {h: hx, s: sx, l: lx, a};\r\n}\r\nfunction _modifyBorderColor(rgb, theme) {\r\n    if (theme.mode === 0) {\r\n        return modifyLightSchemeColor(rgb, theme);\r\n    }\r\n    const poleFg = getFgPole(theme);\r\n    const poleBg = getBgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyBorderHSL, poleFg, poleBg);\r\n}\r\nfunction modifyBorderColor(rgb, theme, shouldRegisterColorVariable = true) {\r\n    if (!shouldRegisterColorVariable) {\r\n        return _modifyBorderColor(rgb, theme);\r\n    }\r\n    return modifyAndRegisterColor(\"border\", rgb, theme, _modifyBorderColor);\r\n}\r\nfunction modifyShadowColor(rgb, theme) {\r\n    return modifyBackgroundColor(rgb, theme);\r\n}\r\nfunction modifyGradientColor(rgb, theme) {\r\n    return modifyBackgroundColor(rgb, theme);\r\n}\r\n\r\nconst gradientLength = \"gradient\".length;\r\nconst conicGradient = \"conic-\";\r\nconst conicGradientLength = conicGradient.length;\r\nconst radialGradient = \"radial-\";\r\nconst linearGradient = \"linear-\";\r\nfunction parseGradient(value) {\r\n    const result = [];\r\n    let index = 0;\r\n    let startIndex = conicGradient.length;\r\n    while ((index = value.indexOf(\"gradient\", startIndex)) !== -1) {\r\n        let typeGradient;\r\n        [linearGradient, radialGradient, conicGradient].find((possibleType) => {\r\n            if (index - possibleType.length >= 0) {\r\n                const possibleGradient = value.substring(\r\n                    index - possibleType.length,\r\n                    index\r\n                );\r\n                if (possibleGradient === possibleType) {\r\n                    if (\r\n                        value.slice(\r\n                            index - possibleType.length - 10,\r\n                            index - possibleType.length - 1\r\n                        ) === \"repeating\"\r\n                    ) {\r\n                        typeGradient = `repeating-${possibleType}gradient`;\r\n                        return true;\r\n                    }\r\n                    if (\r\n                        value.slice(\r\n                            index - possibleType.length - 8,\r\n                            index - possibleType.length - 1\r\n                        ) === \"-webkit\"\r\n                    ) {\r\n                        typeGradient = `-webkit-${possibleType}gradient`;\r\n                        return true;\r\n                    }\r\n                    typeGradient = `${possibleType}gradient`;\r\n                    return true;\r\n                }\r\n            }\r\n        });\r\n        if (!typeGradient) {\r\n            break;\r\n        }\r\n        const {start, end} = getParenthesesRange(value, index + gradientLength);\r\n        const match = value.substring(start + 1, end - 1);\r\n        startIndex = end + 1 + conicGradientLength;\r\n        result.push({\r\n            typeGradient,\r\n            match,\r\n            offset: typeGradient.length + 2,\r\n            index: index - typeGradient.length + gradientLength,\r\n            hasComma: true\r\n        });\r\n    }\r\n    if (result.length) {\r\n        result[result.length - 1].hasComma = false;\r\n    }\r\n    return result;\r\n}\r\n\r\nconst STORAGE_KEY_IMAGE_DETAILS_LIST = \"__darkreader__imageDetails_v2_list\";\r\nconst STORAGE_KEY_IMAGE_DETAILS_PREFIX = \"__darkreader__imageDetails_v2_\";\r\nconst STORAGE_KEY_CSS_FETCH_PREFIX = \"__darkreader__cssFetch_\";\r\nlet imageCacheTimeout = 0;\r\nconst imageDetailsCacheQueue = new Map();\r\nconst cachedImageUrls = [];\r\nfunction writeImageDetailsQueue() {\r\n    imageDetailsCacheQueue.forEach((details, url) => {\r\n        if (url && url.startsWith(\"https://\")) {\r\n            try {\r\n                const json = JSON.stringify(details);\r\n                sessionStorage.setItem(\r\n                    `${STORAGE_KEY_IMAGE_DETAILS_PREFIX}${url}`,\r\n                    json\r\n                );\r\n                cachedImageUrls.push(url);\r\n            } catch (err) {}\r\n        }\r\n    });\r\n    imageDetailsCacheQueue.clear();\r\n    sessionStorage.setItem(\r\n        STORAGE_KEY_IMAGE_DETAILS_LIST,\r\n        JSON.stringify(cachedImageUrls)\r\n    );\r\n}\r\nfunction writeImageDetailsCache(url, imageDetails) {\r\n    if (!url || !url.startsWith(\"https://\")) {\r\n        return;\r\n    }\r\n    imageDetailsCacheQueue.set(url, imageDetails);\r\n    clearTimeout(imageCacheTimeout);\r\n    imageCacheTimeout = setTimeout(writeImageDetailsQueue, 1000);\r\n}\r\nfunction readImageDetailsCache(targetMap) {\r\n    try {\r\n        const jsonList = sessionStorage.getItem(STORAGE_KEY_IMAGE_DETAILS_LIST);\r\n        if (!jsonList) {\r\n            return;\r\n        }\r\n        const list = JSON.parse(jsonList);\r\n        list.forEach((url) => {\r\n            const json = sessionStorage.getItem(\r\n                `${STORAGE_KEY_IMAGE_DETAILS_PREFIX}${url}`\r\n            );\r\n            if (json) {\r\n                const details = JSON.parse(json);\r\n                targetMap.set(url, details);\r\n            }\r\n        });\r\n    } catch (err) {}\r\n}\r\nfunction writeCSSFetchCache(url, cssText) {\r\n    const key = `${STORAGE_KEY_CSS_FETCH_PREFIX}${url}`;\r\n    try {\r\n        sessionStorage.setItem(key, cssText);\r\n    } catch (err) {}\r\n}\r\nfunction readCSSFetchCache(url) {\r\n    const key = `${STORAGE_KEY_CSS_FETCH_PREFIX}${url}`;\r\n    try {\r\n        return sessionStorage.getItem(key) ?? null;\r\n    } catch (err) {}\r\n    return null;\r\n}\r\n\r\nfunction toSVGMatrix(matrix) {\r\n    return matrix\r\n        .slice(0, 4)\r\n        .map((m) => m.map((m) => m.toFixed(3)).join(\" \"))\r\n        .join(\" \");\r\n}\r\nfunction getSVGFilterMatrixValue(config) {\r\n    return toSVGMatrix(createFilterMatrix(config));\r\n}\r\n\r\nconst MAX_FRAME_DURATION = 1000 / 60;\r\nclass AsyncQueue {\r\n    constructor() {\r\n        this.queue = [];\r\n        this.timerId = null;\r\n    }\r\n    addTask(task) {\r\n        this.queue.push(task);\r\n        this.scheduleFrame();\r\n    }\r\n    stop() {\r\n        if (this.timerId !== null) {\r\n            cancelAnimationFrame(this.timerId);\r\n            this.timerId = null;\r\n        }\r\n        this.queue = [];\r\n    }\r\n    scheduleFrame() {\r\n        if (this.timerId) {\r\n            return;\r\n        }\r\n        this.timerId = requestAnimationFrame(() => {\r\n            this.timerId = null;\r\n            const start = Date.now();\r\n            let cb;\r\n            while ((cb = this.queue.shift())) {\r\n                cb();\r\n                if (Date.now() - start >= MAX_FRAME_DURATION) {\r\n                    this.scheduleFrame();\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nconst resolvers$1 = new Map();\r\nconst rejectors = new Map();\r\nasync function bgFetch(request) {\r\n    if (window.DarkReader?.Plugins?.fetch) {\r\n        return window.DarkReader.Plugins.fetch(request);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        const id = generateUID();\r\n        resolvers$1.set(id, resolve);\r\n        rejectors.set(id, reject);\r\n        chrome.runtime.sendMessage({\r\n            type: MessageTypeCStoBG.FETCH,\r\n            data: request,\r\n            id\r\n        });\r\n    });\r\n}\r\nchrome.runtime.onMessage.addListener(({type, data, error, id}) => {\r\n    if (type === MessageTypeBGtoCS.FETCH_RESPONSE) {\r\n        const resolve = resolvers$1.get(id);\r\n        const reject = rejectors.get(id);\r\n        resolvers$1.delete(id);\r\n        rejectors.delete(id);\r\n        if (error) {\r\n            reject &&\r\n                reject(typeof error === \"string\" ? new Error(error) : error);\r\n        } else {\r\n            resolve && resolve(data);\r\n        }\r\n    }\r\n});\r\n\r\nconst imageManager = new AsyncQueue();\r\nasync function getImageDetails(url) {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const dataURL = url.startsWith(\"data:\")\r\n                ? url\r\n                : await getDataURL(url);\r\n            const blob =\r\n                tryConvertDataURLToBlobSync(dataURL) ?? (await loadAsBlob(url));\r\n            let image;\r\n            if (dataURL.startsWith(\"data:image/svg+xml\")) {\r\n                image = await loadImage(dataURL);\r\n            } else {\r\n                image =\r\n                    (await tryCreateImageBitmap(blob)) ??\r\n                    (await loadImage(dataURL));\r\n            }\r\n            imageManager.addTask(() => {\r\n                const analysis = analyzeImage(image);\r\n                resolve({\r\n                    src: url,\r\n                    dataURL: analysis.isLarge ? \"\" : dataURL,\r\n                    width: image.width,\r\n                    height: image.height,\r\n                    ...analysis\r\n                });\r\n            });\r\n        } catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\nasync function getDataURL(url) {\r\n    const parsedURL = new URL(url);\r\n    if (parsedURL.origin === location.origin) {\r\n        return await loadAsDataURL(url);\r\n    }\r\n    return await bgFetch({url, responseType: \"data-url\"});\r\n}\r\nasync function tryCreateImageBitmap(blob) {\r\n    try {\r\n        return await createImageBitmap(blob);\r\n    } catch (err) {\r\n        logWarn(\r\n            `Unable to create image bitmap for type ${blob.type}: ${String(err)}`\r\n        );\r\n        return null;\r\n    }\r\n}\r\nconst INCOMPLETE_DOC_LOADING_IMAGE_LIMIT = 256;\r\nlet loadingImagesCount = 0;\r\nasync function loadImage(url) {\r\n    return new Promise((resolve, reject) => {\r\n        const image = new Image();\r\n        image.onload = () => resolve(image);\r\n        image.onerror = () => reject(`Unable to load image ${url}`);\r\n        if (\r\n            ++loadingImagesCount <= INCOMPLETE_DOC_LOADING_IMAGE_LIMIT ||\r\n            isReadyStateComplete()\r\n        ) {\r\n            image.src = url;\r\n        } else {\r\n            addReadyStateCompleteListener(() => (image.src = url));\r\n        }\r\n    });\r\n}\r\nconst MAX_ANALYSIS_PIXELS_COUNT = 32 * 32;\r\nlet canvas;\r\nlet context;\r\nfunction createCanvas() {\r\n    const maxWidth = MAX_ANALYSIS_PIXELS_COUNT;\r\n    const maxHeight = MAX_ANALYSIS_PIXELS_COUNT;\r\n    canvas = document.createElement(\"canvas\");\r\n    canvas.width = maxWidth;\r\n    canvas.height = maxHeight;\r\n    context = canvas.getContext(\"2d\", {willReadFrequently: true});\r\n    context.imageSmoothingEnabled = false;\r\n}\r\nfunction removeCanvas() {\r\n    canvas = null;\r\n    context = null;\r\n}\r\nconst LARGE_IMAGE_PIXELS_COUNT = 512 * 512;\r\nfunction analyzeImage(image) {\r\n    if (!canvas) {\r\n        createCanvas();\r\n    }\r\n    let sw;\r\n    let sh;\r\n    if (image instanceof HTMLImageElement) {\r\n        sw = image.naturalWidth;\r\n        sh = image.naturalHeight;\r\n    } else {\r\n        sw = image.width;\r\n        sh = image.height;\r\n    }\r\n    if (sw === 0 || sh === 0) {\r\n        logWarn(\"Image is empty\");\r\n        return {\r\n            isDark: false,\r\n            isLight: false,\r\n            isTransparent: false,\r\n            isLarge: false\r\n        };\r\n    }\r\n    const isLarge = sw * sh > LARGE_IMAGE_PIXELS_COUNT;\r\n    const sourcePixelsCount = sw * sh;\r\n    const k = Math.min(\r\n        1,\r\n        Math.sqrt(MAX_ANALYSIS_PIXELS_COUNT / sourcePixelsCount)\r\n    );\r\n    const width = Math.ceil(sw * k);\r\n    const height = Math.ceil(sh * k);\r\n    context.clearRect(0, 0, width, height);\r\n    context.drawImage(image, 0, 0, sw, sh, 0, 0, width, height);\r\n    const imageData = context.getImageData(0, 0, width, height);\r\n    const d = imageData.data;\r\n    const TRANSPARENT_ALPHA_THRESHOLD = 0.05;\r\n    const DARK_LIGHTNESS_THRESHOLD = 0.4;\r\n    const LIGHT_LIGHTNESS_THRESHOLD = 0.7;\r\n    let transparentPixelsCount = 0;\r\n    let darkPixelsCount = 0;\r\n    let lightPixelsCount = 0;\r\n    let i, x, y;\r\n    let r, g, b, a;\r\n    let l;\r\n    for (y = 0; y < height; y++) {\r\n        for (x = 0; x < width; x++) {\r\n            i = 4 * (y * width + x);\r\n            r = d[i + 0];\r\n            g = d[i + 1];\r\n            b = d[i + 2];\r\n            a = d[i + 3];\r\n            if (a / 255 < TRANSPARENT_ALPHA_THRESHOLD) {\r\n                transparentPixelsCount++;\r\n            } else {\r\n                l = getSRGBLightness(r, g, b);\r\n                if (l < DARK_LIGHTNESS_THRESHOLD) {\r\n                    darkPixelsCount++;\r\n                }\r\n                if (l > LIGHT_LIGHTNESS_THRESHOLD) {\r\n                    lightPixelsCount++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const totalPixelsCount = width * height;\r\n    const opaquePixelsCount = totalPixelsCount - transparentPixelsCount;\r\n    const DARK_IMAGE_THRESHOLD = 0.7;\r\n    const LIGHT_IMAGE_THRESHOLD = 0.7;\r\n    const TRANSPARENT_IMAGE_THRESHOLD = 0.1;\r\n    return {\r\n        isDark: darkPixelsCount / opaquePixelsCount >= DARK_IMAGE_THRESHOLD,\r\n        isLight: lightPixelsCount / opaquePixelsCount >= LIGHT_IMAGE_THRESHOLD,\r\n        isTransparent:\r\n            transparentPixelsCount / totalPixelsCount >=\r\n            TRANSPARENT_IMAGE_THRESHOLD,\r\n        isLarge\r\n    };\r\n}\r\nlet isBlobURLSupported = null;\r\nlet canUseProxy = false;\r\nlet blobURLCheckRequested = false;\r\nconst blobURLCheckAwaiters = [];\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => (canUseProxy = true),\r\n    {once: true}\r\n);\r\nasync function requestBlobURLCheck() {\r\n    if (!canUseProxy) {\r\n        return;\r\n    }\r\n    if (blobURLCheckRequested) {\r\n        return await new Promise((resolve) =>\r\n            blobURLCheckAwaiters.push(resolve)\r\n        );\r\n    }\r\n    blobURLCheckRequested = true;\r\n    await new Promise((resolve) => {\r\n        document.addEventListener(\r\n            \"__darkreader__blobURLCheckResponse\",\r\n            (e) => {\r\n                isBlobURLSupported = e.detail.blobURLAllowed;\r\n                resolve();\r\n                blobURLCheckAwaiters.forEach((r) => r());\r\n                blobURLCheckAwaiters.splice(0);\r\n            },\r\n            {once: true}\r\n        );\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__blobURLCheckRequest\")\r\n        );\r\n    });\r\n}\r\nfunction isBlobURLCheckResultReady() {\r\n    return isBlobURLSupported != null || !canUseProxy;\r\n}\r\nfunction onCSPError(err) {\r\n    if (err.blockedURI === \"blob\") {\r\n        isBlobURLSupported = false;\r\n        document.removeEventListener(\"securitypolicyviolation\", onCSPError);\r\n    }\r\n}\r\ndocument.addEventListener(\"securitypolicyviolation\", onCSPError);\r\nconst objectURLs = new Set();\r\nfunction getFilteredImageURL({dataURL, width, height}, theme) {\r\n    if (dataURL.startsWith(\"data:image/svg+xml\")) {\r\n        dataURL = escapeXML(dataURL);\r\n    }\r\n    const matrix = getSVGFilterMatrixValue(theme);\r\n    const svg = [\r\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"${width}\" height=\"${height}\">`,\r\n        \"<defs>\",\r\n        '<filter id=\"darkreader-image-filter\">',\r\n        `<feColorMatrix type=\"matrix\" values=\"${matrix}\" />`,\r\n        \"</filter>\",\r\n        \"</defs>\",\r\n        `<image width=\"${width}\" height=\"${height}\" filter=\"url(#darkreader-image-filter)\" xlink:href=\"${dataURL}\" />`,\r\n        \"</svg>\"\r\n    ].join(\"\");\r\n    if (!isBlobURLSupported) {\r\n        return `data:image/svg+xml;base64,${btoa(svg)}`;\r\n    }\r\n    const bytes = new Uint8Array(svg.length);\r\n    for (let i = 0; i < svg.length; i++) {\r\n        bytes[i] = svg.charCodeAt(i);\r\n    }\r\n    const blob = new Blob([bytes], {type: \"image/svg+xml\"});\r\n    const objectURL = URL.createObjectURL(blob);\r\n    objectURLs.add(objectURL);\r\n    return objectURL;\r\n}\r\nconst xmlEscapeChars = {\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    \"&\": \"&amp;\",\r\n    \"'\": \"&apos;\",\r\n    '\"': \"&quot;\"\r\n};\r\nfunction escapeXML(str) {\r\n    return str.replace(/[<>&'\"]/g, (c) => xmlEscapeChars[c] ?? c);\r\n}\r\nconst dataURLBlobURLs = new Map();\r\nfunction tryConvertDataURLToBlobSync(dataURL) {\r\n    const colonIndex = dataURL.indexOf(\":\");\r\n    const semicolonIndex = dataURL.indexOf(\";\", colonIndex + 1);\r\n    const commaIndex = dataURL.indexOf(\",\", semicolonIndex + 1);\r\n    const encoding = dataURL\r\n        .substring(semicolonIndex + 1, commaIndex)\r\n        .toLocaleLowerCase();\r\n    const mediaType = dataURL.substring(colonIndex + 1, semicolonIndex);\r\n    if (encoding !== \"base64\" || !mediaType) {\r\n        return null;\r\n    }\r\n    const characters = atob(dataURL.substring(commaIndex + 1));\r\n    const bytes = new Uint8Array(characters.length);\r\n    for (let i = 0; i < characters.length; i++) {\r\n        bytes[i] = characters.charCodeAt(i);\r\n    }\r\n    return new Blob([bytes], {type: mediaType});\r\n}\r\nasync function tryConvertDataURLToBlobURL(dataURL) {\r\n    if (!isBlobURLSupported) {\r\n        return null;\r\n    }\r\n    const hash = getHashCode(dataURL);\r\n    let blobURL = dataURLBlobURLs.get(hash);\r\n    if (blobURL) {\r\n        return blobURL;\r\n    }\r\n    let blob = tryConvertDataURLToBlobSync(dataURL);\r\n    if (!blob) {\r\n        const response = await fetch(dataURL);\r\n        blob = await response.blob();\r\n    }\r\n    blobURL = URL.createObjectURL(blob);\r\n    dataURLBlobURLs.set(hash, blobURL);\r\n    return blobURL;\r\n}\r\nfunction cleanImageProcessingCache() {\r\n    imageManager && imageManager.stop();\r\n    removeCanvas();\r\n    objectURLs.forEach((u) => URL.revokeObjectURL(u));\r\n    objectURLs.clear();\r\n    dataURLBlobURLs.forEach((u) => URL.revokeObjectURL(u));\r\n    dataURLBlobURLs.clear();\r\n}\r\n\r\nfunction getPriority(ruleStyle, property) {\r\n    return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));\r\n}\r\nfunction getModifiableCSSDeclaration(\r\n    property,\r\n    value,\r\n    rule,\r\n    variablesStore,\r\n    ignoreImageSelectors,\r\n    isCancelled\r\n) {\r\n    let modifier = null;\r\n    if (property.startsWith(\"--\")) {\r\n        modifier = getVariableModifier(\r\n            variablesStore,\r\n            property,\r\n            value,\r\n            rule,\r\n            ignoreImageSelectors,\r\n            isCancelled\r\n        );\r\n    } else if (value.includes(\"var(\")) {\r\n        modifier = getVariableDependantModifier(\r\n            variablesStore,\r\n            property,\r\n            value\r\n        );\r\n    } else if (property === \"color-scheme\") {\r\n        modifier = getColorSchemeModifier();\r\n    } else if (property === \"scrollbar-color\") {\r\n        modifier = getScrollbarColorModifier(value);\r\n    } else if (\r\n        (property.includes(\"color\") &&\r\n            property !== \"-webkit-print-color-adjust\") ||\r\n        property === \"fill\" ||\r\n        property === \"stroke\" ||\r\n        property === \"stop-color\"\r\n    ) {\r\n        if (\r\n            property.startsWith(\"border\") &&\r\n            property !== \"border-color\" &&\r\n            value === \"initial\"\r\n        ) {\r\n            const borderSideProp = property.substring(0, property.length - 6);\r\n            const borderSideVal = rule.style.getPropertyValue(borderSideProp);\r\n            if (borderSideVal.startsWith(\"0px\") || borderSideVal === \"none\") {\r\n                property = borderSideProp;\r\n                modifier = borderSideVal;\r\n            } else {\r\n                modifier = value;\r\n            }\r\n        } else {\r\n            modifier = getColorModifier(property, value, rule);\r\n        }\r\n    } else if (\r\n        property === \"background-image\" ||\r\n        property === \"list-style-image\"\r\n    ) {\r\n        modifier = getBgImageModifier(\r\n            value,\r\n            rule,\r\n            ignoreImageSelectors,\r\n            isCancelled\r\n        );\r\n    } else if (property.includes(\"shadow\")) {\r\n        modifier = getShadowModifier(value);\r\n    }\r\n    if (!modifier) {\r\n        return null;\r\n    }\r\n    return {\r\n        property,\r\n        value: modifier,\r\n        important: getPriority(rule.style, property),\r\n        sourceValue: value\r\n    };\r\n}\r\nfunction joinSelectors(...selectors) {\r\n    return selectors.filter(Boolean).join(\", \");\r\n}\r\nconst hostsWithOddScrollbars = [\"calendar.google.com\"];\r\nfunction getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {\r\n    const lines = [];\r\n    if (!isIFrame) {\r\n        lines.push(\"html {\");\r\n        lines.push(\r\n            `    background-color: ${modifyBackgroundColor({r: 255, g: 255, b: 255}, theme)} !important;`\r\n        );\r\n        lines.push(\"}\");\r\n    }\r\n    if (isCSSColorSchemePropSupported && theme.mode === 1) {\r\n        lines.push(\"html {\");\r\n        lines.push(`    color-scheme: dark !important;`);\r\n        lines.push(\"}\");\r\n        lines.push(\"iframe {\");\r\n        lines.push(`    color-scheme: dark !important;`);\r\n        lines.push(\"}\");\r\n    }\r\n    const bgSelectors = joinSelectors(\r\n        isIFrame ? \"\" : \"html, body\",\r\n        styleSystemControls ? \"input, textarea, select, button, dialog\" : \"\"\r\n    );\r\n    if (bgSelectors) {\r\n        lines.push(`${bgSelectors} {`);\r\n        lines.push(\r\n            `    background-color: ${modifyBackgroundColor({r: 255, g: 255, b: 255}, theme)};`\r\n        );\r\n        lines.push(\"}\");\r\n    }\r\n    lines.push(\r\n        `${joinSelectors(\"html, body\", styleSystemControls ? \"input, textarea, select, button\" : \"\")} {`\r\n    );\r\n    lines.push(\r\n        `    border-color: ${modifyBorderColor({r: 76, g: 76, b: 76}, theme)};`\r\n    );\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"a {\");\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 64, b: 255}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"table {\");\r\n    lines.push(\r\n        `    border-color: ${modifyBorderColor({r: 128, g: 128, b: 128}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"mark {\");\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"::placeholder {\");\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 169, g: 169, b: 169}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"input:-webkit-autofill,\");\r\n    lines.push(\"textarea:-webkit-autofill,\");\r\n    lines.push(\"select:-webkit-autofill {\");\r\n    lines.push(\r\n        `    background-color: ${modifyBackgroundColor({r: 250, g: 255, b: 189}, theme)} !important;`\r\n    );\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)} !important;`\r\n    );\r\n    lines.push(\"}\");\r\n    if (\r\n        theme.scrollbarColor &&\r\n        !hostsWithOddScrollbars.includes(location.hostname)\r\n    ) {\r\n        lines.push(getModifiedScrollbarStyle(theme));\r\n    }\r\n    if (theme.selectionColor) {\r\n        lines.push(getModifiedSelectionStyle(theme));\r\n    }\r\n    if (isLayerRuleSupported) {\r\n        lines.unshift(\"@layer {\");\r\n        lines.push(\"}\");\r\n    }\r\n    return lines.join(\"\\n\");\r\n}\r\nfunction getSelectionColor(theme) {\r\n    let backgroundColorSelection;\r\n    let foregroundColorSelection;\r\n    if (theme.selectionColor === \"auto\") {\r\n        backgroundColorSelection = modifyBackgroundColor(\r\n            {r: 0, g: 96, b: 212},\r\n            {...theme, grayscale: 0}\r\n        );\r\n        foregroundColorSelection = modifyForegroundColor(\r\n            {r: 255, g: 255, b: 255},\r\n            {...theme, grayscale: 0}\r\n        );\r\n    } else {\r\n        const rgb = parseColorWithCache(theme.selectionColor);\r\n        const hsl = rgbToHSL(rgb);\r\n        backgroundColorSelection = theme.selectionColor;\r\n        if (hsl.l < 0.5) {\r\n            foregroundColorSelection = \"#FFF\";\r\n        } else {\r\n            foregroundColorSelection = \"#000\";\r\n        }\r\n    }\r\n    return {backgroundColorSelection, foregroundColorSelection};\r\n}\r\nfunction getModifiedSelectionStyle(theme) {\r\n    const lines = [];\r\n    const modifiedSelectionColor = getSelectionColor(theme);\r\n    const backgroundColorSelection =\r\n        modifiedSelectionColor.backgroundColorSelection;\r\n    const foregroundColorSelection =\r\n        modifiedSelectionColor.foregroundColorSelection;\r\n    [\"::selection\", \"::-moz-selection\"].forEach((selection) => {\r\n        lines.push(`${selection} {`);\r\n        lines.push(\r\n            `    background-color: ${backgroundColorSelection} !important;`\r\n        );\r\n        lines.push(`    color: ${foregroundColorSelection} !important;`);\r\n        lines.push(\"}\");\r\n    });\r\n    return lines.join(\"\\n\");\r\n}\r\nfunction getModifiedScrollbarStyle(theme) {\r\n    let colorTrack;\r\n    let colorThumb;\r\n    if (theme.scrollbarColor === \"auto\") {\r\n        colorTrack = modifyBackgroundColor({r: 241, g: 241, b: 241}, theme);\r\n        colorThumb = modifyBackgroundColor({r: 176, g: 176, b: 176}, theme);\r\n    } else {\r\n        const rgb = parseColorWithCache(theme.scrollbarColor);\r\n        const hsl = rgbToHSL(rgb);\r\n        const darken = (darker) => ({...hsl, l: clamp(hsl.l - darker, 0, 1)});\r\n        colorTrack = hslToString(darken(0.4));\r\n        colorThumb = hslToString(hsl);\r\n    }\r\n    return [\r\n        `* {`,\r\n        `    scrollbar-color: ${colorThumb} ${colorTrack};`,\r\n        `}`\r\n    ].join(\"\\n\");\r\n}\r\nfunction getModifiedFallbackStyle(theme, {strict}) {\r\n    const factory = defaultFallbackFactory;\r\n    return factory(theme, {strict});\r\n}\r\nfunction defaultFallbackFactory(theme, {strict}) {\r\n    const lines = [];\r\n    lines.push(\r\n        `html, body, ${strict ? \"body :not(iframe)\" : \"body > :not(iframe)\"} {`\r\n    );\r\n    lines.push(\r\n        `    background-color: ${modifyBackgroundColor({r: 255, g: 255, b: 255}, theme)} !important;`\r\n    );\r\n    lines.push(\r\n        `    border-color: ${modifyBorderColor({r: 64, g: 64, b: 64}, theme)} !important;`\r\n    );\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)} !important;`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(`div[style*=\"background-color: rgb(135, 135, 135)\"] {`);\r\n    lines.push(`    background-color: #878787 !important;`);\r\n    lines.push(\"}\");\r\n    return lines.join(\"\\n\");\r\n}\r\nconst unparsableColors = new Set([\r\n    \"inherit\",\r\n    \"transparent\",\r\n    \"initial\",\r\n    \"currentcolor\",\r\n    \"none\",\r\n    \"unset\",\r\n    \"auto\"\r\n]);\r\nfunction getColorModifier(prop, value, rule) {\r\n    if (\r\n        unparsableColors.has(value.toLowerCase()) &&\r\n        !(prop === \"color\" && value === \"initial\")\r\n    ) {\r\n        return value;\r\n    }\r\n    let rgb = null;\r\n    if (prop === \"color\" && value === \"initial\") {\r\n        rgb = {r: 0, g: 0, b: 0, a: 1};\r\n    } else {\r\n        rgb = parseColorWithCache(value);\r\n    }\r\n    if (!rgb) {\r\n        logWarn(\"Couldn't parse color\", value);\r\n        return null;\r\n    }\r\n    if (prop.includes(\"background\")) {\r\n        if (\r\n            (rule.style.webkitMaskImage &&\r\n                rule.style.webkitMaskImage !== \"none\") ||\r\n            (rule.style.webkitMask &&\r\n                !rule.style.webkitMask.startsWith(\"none\")) ||\r\n            (rule.style.mask && rule.style.mask !== \"none\") ||\r\n            (rule.style.getPropertyValue(\"mask-image\") &&\r\n                rule.style.getPropertyValue(\"mask-image\") !== \"none\")\r\n        ) {\r\n            return (theme) => modifyForegroundColor(rgb, theme);\r\n        }\r\n        return (theme) => modifyBackgroundColor(rgb, theme);\r\n    }\r\n    if (prop.includes(\"border\") || prop.includes(\"outline\")) {\r\n        return (theme) => modifyBorderColor(rgb, theme);\r\n    }\r\n    return (theme) => modifyForegroundColor(rgb, theme);\r\n}\r\nconst imageDetailsCache = new Map();\r\nconst awaitingForImageLoading = new Map();\r\nlet didTryLoadCache = false;\r\nfunction shouldIgnoreImage(selectorText, selectors) {\r\n    if (!selectorText || selectors.length === 0) {\r\n        return false;\r\n    }\r\n    if (selectors.some((s) => s === \"*\")) {\r\n        return true;\r\n    }\r\n    const ruleSelectors = selectorText.split(/,\\s*/g);\r\n    for (let i = 0; i < selectors.length; i++) {\r\n        const ignoredSelector = selectors[i];\r\n        if (ignoredSelector.startsWith(\"^\")) {\r\n            const beginning = ignoredSelector.slice(1);\r\n            if (ruleSelectors.some((s) => s.startsWith(beginning))) {\r\n                return true;\r\n            }\r\n        } else if (ignoredSelector.endsWith(\"$\")) {\r\n            const ending = ignoredSelector.slice(0, ignoredSelector.length - 1);\r\n            if (ruleSelectors.some((s) => s.endsWith(ending))) {\r\n                return true;\r\n            }\r\n        } else if (ruleSelectors.some((s) => s === ignoredSelector)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nconst imageSelectorQueue = new Map();\r\nconst imageSelectorValues = new Map();\r\nconst imageSelectorNodeQueue = new Set();\r\nlet imageSelectorQueueFrameId = null;\r\nlet classObserver = null;\r\nfunction checkImageSelectors(node) {\r\n    for (const [selector, callbacks] of imageSelectorQueue) {\r\n        if (\r\n            node.querySelector(selector) ||\r\n            (node instanceof Element && node.matches(selector))\r\n        ) {\r\n            imageSelectorQueue.delete(selector);\r\n            callbacks.forEach((cb) => cb());\r\n        }\r\n    }\r\n    if (!classObserver) {\r\n        classObserver = new MutationObserver((mutations) => {\r\n            mutations.forEach((mutation) => {\r\n                imageSelectorNodeQueue.add(mutation.target);\r\n                if (!imageSelectorQueueFrameId) {\r\n                    imageSelectorQueueFrameId = requestAnimationFrame(() => {\r\n                        imageSelectorNodeQueue.forEach((element) => {\r\n                            checkImageSelectors(element);\r\n                        });\r\n                        imageSelectorNodeQueue.clear();\r\n                        imageSelectorQueueFrameId = null;\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        classObserver.observe(document.documentElement, {\r\n            attributes: true,\r\n            attributeFilter: [\"class\"],\r\n            subtree: true\r\n        });\r\n    }\r\n}\r\nfunction getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled) {\r\n    try {\r\n        if (shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)) {\r\n            return value;\r\n        }\r\n        const gradients = parseGradient(value);\r\n        const urls = getMatches(cssURLRegex, value);\r\n        if (urls.length === 0 && gradients.length === 0) {\r\n            return value;\r\n        }\r\n        const getIndices = (matches) => {\r\n            let index = 0;\r\n            return matches.map((match) => {\r\n                const valueIndex = value.indexOf(match, index);\r\n                index = valueIndex + match.length;\r\n                return {match, index: valueIndex};\r\n            });\r\n        };\r\n        const matches = gradients\r\n            .map((i) => ({type: \"gradient\", ...i}))\r\n            .concat(\r\n                getIndices(urls).map((i) => ({type: \"url\", offset: 0, ...i}))\r\n            )\r\n            .sort((a, b) => (a.index > b.index ? 1 : -1));\r\n        const getGradientModifier = (gradient) => {\r\n            const {typeGradient, match, hasComma} = gradient;\r\n            const partsRegex =\r\n                /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?([^\\(\\), ]|( (?!calc)))*),?/g;\r\n            const colorStopRegex =\r\n                /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;\r\n            const parts = getMatches(partsRegex, match, 1).map((part) => {\r\n                part = part.trim();\r\n                let rgb = parseColorWithCache(part);\r\n                if (rgb) {\r\n                    return (theme) => modifyGradientColor(rgb, theme);\r\n                }\r\n                const space = part.lastIndexOf(\" \");\r\n                rgb = parseColorWithCache(part.substring(0, space));\r\n                if (rgb) {\r\n                    return (theme) =>\r\n                        `${modifyGradientColor(rgb, theme)} ${part.substring(space + 1)}`;\r\n                }\r\n                const colorStopMatch = part.match(colorStopRegex);\r\n                if (colorStopMatch) {\r\n                    rgb = parseColorWithCache(colorStopMatch[3]);\r\n                    if (rgb) {\r\n                        return (theme) =>\r\n                            `${colorStopMatch[1]}(${colorStopMatch[2] ? `${colorStopMatch[2]}, ` : \"\"}${modifyGradientColor(rgb, theme)})`;\r\n                    }\r\n                }\r\n                return () => part;\r\n            });\r\n            return (theme) => {\r\n                return `${typeGradient}(${parts.map((modify) => modify(theme)).join(\", \")})${hasComma ? \", \" : \"\"}`;\r\n            };\r\n        };\r\n        const getURLModifier = (urlValue) => {\r\n            if (!didTryLoadCache) {\r\n                didTryLoadCache = true;\r\n                readImageDetailsCache(imageDetailsCache);\r\n            }\r\n            let url = getCSSURLValue(urlValue);\r\n            const isURLEmpty = url.length === 0;\r\n            const {parentStyleSheet} = rule;\r\n            const ownerNode = parentStyleSheet?.ownerNode;\r\n            const scope =\r\n                (parentStyleSheet && getSheetScope(parentStyleSheet)) ??\r\n                document;\r\n            const baseURL =\r\n                parentStyleSheet && parentStyleSheet.href\r\n                    ? getCSSBaseBath(parentStyleSheet.href)\r\n                    : ownerNode?.baseURI || location.origin;\r\n            url = getAbsoluteURL(baseURL, url);\r\n            return async (theme) => {\r\n                if (isURLEmpty) {\r\n                    return \"url('')\";\r\n                }\r\n                let selector = rule.selectorText;\r\n                if (selector) {\r\n                    if (selector.includes(\"::before\")) {\r\n                        selector = selector.replaceAll(\"::before\", \"\");\r\n                    }\r\n                    if (selector.includes(\"::after\")) {\r\n                        selector = selector.replaceAll(\"::after\", \"\");\r\n                    }\r\n                    if (!scope.querySelector(selector)) {\r\n                        await new Promise((resolve) => {\r\n                            if (imageSelectorQueue.has(selector)) {\r\n                                imageSelectorQueue.get(selector).push(resolve);\r\n                            } else {\r\n                                imageSelectorQueue.set(selector, [resolve]);\r\n                                imageSelectorValues.set(selector, urlValue);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                let imageDetails = null;\r\n                if (imageDetailsCache.has(url)) {\r\n                    imageDetails = imageDetailsCache.get(url);\r\n                } else {\r\n                    try {\r\n                        if (!isBlobURLCheckResultReady()) {\r\n                            await requestBlobURLCheck();\r\n                        }\r\n                        if (awaitingForImageLoading.has(url)) {\r\n                            const awaiters = awaitingForImageLoading.get(url);\r\n                            imageDetails = await new Promise((resolve) =>\r\n                                awaiters.push(resolve)\r\n                            );\r\n                            if (!imageDetails) {\r\n                                return null;\r\n                            }\r\n                        } else {\r\n                            awaitingForImageLoading.set(url, []);\r\n                            imageDetails = await getImageDetails(url);\r\n                            imageDetailsCache.set(url, imageDetails);\r\n                            writeImageDetailsCache(url, imageDetails);\r\n                            awaitingForImageLoading\r\n                                .get(url)\r\n                                .forEach((resolve) => resolve(imageDetails));\r\n                            awaitingForImageLoading.delete(url);\r\n                        }\r\n                        if (isCancelled()) {\r\n                            return null;\r\n                        }\r\n                    } catch (err) {\r\n                        logWarn(err);\r\n                        if (awaitingForImageLoading.has(url)) {\r\n                            awaitingForImageLoading\r\n                                .get(url)\r\n                                .forEach((resolve) => resolve(null));\r\n                            awaitingForImageLoading.delete(url);\r\n                        }\r\n                    }\r\n                }\r\n                if (imageDetails) {\r\n                    const bgImageValue = getBgImageValue(imageDetails, theme);\r\n                    if (bgImageValue) {\r\n                        return bgImageValue;\r\n                    }\r\n                }\r\n                if (url.startsWith(\"data:\")) {\r\n                    const blobURL = await tryConvertDataURLToBlobURL(url);\r\n                    if (blobURL) {\r\n                        return `url(\"${blobURL}\")`;\r\n                    }\r\n                }\r\n                return `url(\"${url}\")`;\r\n            };\r\n        };\r\n        const getBgImageValue = (imageDetails, theme) => {\r\n            const {isDark, isLight, isTransparent, isLarge, width} =\r\n                imageDetails;\r\n            let result;\r\n            const logSrc = imageDetails.src.startsWith(\"data:\")\r\n                ? \"data:\"\r\n                : imageDetails.src;\r\n            if (isLarge && isLight && !isTransparent && theme.mode === 1) {\r\n                logInfo(`Hiding large light image ${logSrc}`);\r\n                result = \"none\";\r\n            } else if (\r\n                isDark &&\r\n                isTransparent &&\r\n                theme.mode === 1 &&\r\n                width > 2\r\n            ) {\r\n                logInfo(`Inverting dark image ${logSrc}`);\r\n                const inverted = getFilteredImageURL(imageDetails, {\r\n                    ...theme,\r\n                    sepia: clamp(theme.sepia + 10, 0, 100)\r\n                });\r\n                result = `url(\"${inverted}\")`;\r\n            } else if (isLight && !isTransparent && theme.mode === 1) {\r\n                logInfo(`Dimming light image ${logSrc}`);\r\n                const dimmed = getFilteredImageURL(imageDetails, theme);\r\n                result = `url(\"${dimmed}\")`;\r\n            } else if (theme.mode === 0 && isLight) {\r\n                logInfo(`Applying filter to image ${logSrc}`);\r\n                const filtered = getFilteredImageURL(imageDetails, {\r\n                    ...theme,\r\n                    brightness: clamp(theme.brightness - 10, 5, 200),\r\n                    sepia: clamp(theme.sepia + 10, 0, 100)\r\n                });\r\n                result = `url(\"${filtered}\")`;\r\n            } else {\r\n                logInfo(`Not modifying the image ${logSrc}`);\r\n                result = null;\r\n            }\r\n            return result;\r\n        };\r\n        const modifiers = [];\r\n        let matchIndex = 0;\r\n        let prevHasComma = false;\r\n        matches.forEach(\r\n            ({type, match, index, typeGradient, hasComma, offset}, i) => {\r\n                const matchStart = index;\r\n                const prefixStart = matchIndex;\r\n                const matchEnd = matchStart + match.length + offset;\r\n                matchIndex = matchEnd;\r\n                if (prefixStart !== matchStart) {\r\n                    if (prevHasComma) {\r\n                        modifiers.push(() => {\r\n                            let betweenValue = value.substring(\r\n                                prefixStart,\r\n                                matchStart\r\n                            );\r\n                            if (betweenValue[0] === \",\") {\r\n                                betweenValue = betweenValue.substring(1);\r\n                            }\r\n                            return betweenValue;\r\n                        });\r\n                    } else {\r\n                        modifiers.push(() =>\r\n                            value.substring(prefixStart, matchStart)\r\n                        );\r\n                    }\r\n                }\r\n                prevHasComma = hasComma || false;\r\n                if (type === \"url\") {\r\n                    modifiers.push(getURLModifier(match));\r\n                } else if (type === \"gradient\") {\r\n                    modifiers.push(\r\n                        getGradientModifier({\r\n                            match,\r\n                            index,\r\n                            typeGradient: typeGradient,\r\n                            hasComma: hasComma || false,\r\n                            offset\r\n                        })\r\n                    );\r\n                }\r\n                if (i === matches.length - 1) {\r\n                    modifiers.push(() => value.substring(matchEnd));\r\n                }\r\n            }\r\n        );\r\n        return (theme) => {\r\n            const results = modifiers\r\n                .filter(Boolean)\r\n                .map((modify) => modify(theme));\r\n            if (results.some((r) => r instanceof Promise)) {\r\n                return Promise.all(results).then((asyncResults) => {\r\n                    return asyncResults.filter(Boolean).join(\"\");\r\n                });\r\n            }\r\n            const combinedResult = results.join(\"\");\r\n            if (combinedResult.endsWith(\", initial\")) {\r\n                return combinedResult.slice(0, -9);\r\n            }\r\n            return combinedResult;\r\n        };\r\n    } catch (err) {\r\n        logWarn(`Unable to parse gradient ${value}`, err);\r\n        return null;\r\n    }\r\n}\r\nfunction getShadowModifierWithInfo(value) {\r\n    try {\r\n        let index = 0;\r\n        const colorMatches = getMatches(\r\n            /(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,\r\n            value,\r\n            2\r\n        );\r\n        let notParsed = 0;\r\n        const modifiers = colorMatches.map((match, i) => {\r\n            const prefixIndex = index;\r\n            const matchIndex = value.indexOf(match, index);\r\n            const matchEnd = matchIndex + match.length;\r\n            index = matchEnd;\r\n            const rgb = parseColorWithCache(match);\r\n            if (!rgb) {\r\n                notParsed++;\r\n                return () => value.substring(prefixIndex, matchEnd);\r\n            }\r\n            return (theme) =>\r\n                `${value.substring(prefixIndex, matchIndex)}${modifyShadowColor(rgb, theme)}${i === colorMatches.length - 1 ? value.substring(matchEnd) : \"\"}`;\r\n        });\r\n        return (theme) => {\r\n            const modified = modifiers.map((modify) => modify(theme)).join(\"\");\r\n            return {\r\n                matchesLength: colorMatches.length,\r\n                unparsableMatchesLength: notParsed,\r\n                result: modified\r\n            };\r\n        };\r\n    } catch (err) {\r\n        logWarn(`Unable to parse shadow ${value}`, err);\r\n        return null;\r\n    }\r\n}\r\nfunction getShadowModifier(value) {\r\n    const shadowModifier = getShadowModifierWithInfo(value);\r\n    if (!shadowModifier) {\r\n        return null;\r\n    }\r\n    return (theme) => shadowModifier(theme).result;\r\n}\r\nfunction getScrollbarColorModifier(value) {\r\n    const colorsMatch = value.match(\r\n        /^\\s*([a-z]+(\\(.*\\))?)\\s+([a-z]+(\\(.*\\))?)\\s*$/\r\n    );\r\n    if (!colorsMatch) {\r\n        return value;\r\n    }\r\n    const thumb = parseColorWithCache(colorsMatch[1]);\r\n    const track = parseColorWithCache(colorsMatch[3]);\r\n    if (!thumb || !track) {\r\n        logWarn(\"Couldn't parse color\", ...[thumb, track].filter((c) => !c));\r\n        return null;\r\n    }\r\n    return (theme) =>\r\n        `${modifyForegroundColor(thumb, theme)} ${modifyBackgroundColor(track, theme)}`;\r\n}\r\nfunction getColorSchemeModifier() {\r\n    return (theme) => (theme.mode === 0 ? \"dark light\" : \"dark\");\r\n}\r\nfunction getVariableModifier(\r\n    variablesStore,\r\n    prop,\r\n    value,\r\n    rule,\r\n    ignoredImgSelectors,\r\n    isCancelled\r\n) {\r\n    return variablesStore.getModifierForVariable({\r\n        varName: prop,\r\n        sourceValue: value,\r\n        rule,\r\n        ignoredImgSelectors,\r\n        isCancelled\r\n    });\r\n}\r\nfunction getVariableDependantModifier(variablesStore, prop, value) {\r\n    return variablesStore.getModifierForVarDependant(prop, value);\r\n}\r\nfunction cleanModificationCache() {\r\n    clearColorModificationCache();\r\n    imageDetailsCache.clear();\r\n    cleanImageProcessingCache();\r\n    awaitingForImageLoading.clear();\r\n    imageSelectorQueue.clear();\r\n    classObserver?.disconnect();\r\n    classObserver = null;\r\n}\r\n\r\nconst VAR_TYPE_BG_COLOR = 1 << 0;\r\nconst VAR_TYPE_TEXT_COLOR = 1 << 1;\r\nconst VAR_TYPE_BORDER_COLOR = 1 << 2;\r\nconst VAR_TYPE_BG_IMG = 1 << 3;\r\nclass VariablesStore {\r\n    constructor() {\r\n        this.varTypes = new Map();\r\n        this.rulesQueue = new Set();\r\n        this.inlineStyleQueue = [];\r\n        this.definedVars = new Set();\r\n        this.varRefs = new Map();\r\n        this.unknownColorVars = new Set();\r\n        this.unknownBgVars = new Set();\r\n        this.undefinedVars = new Set();\r\n        this.initialVarTypes = new Map();\r\n        this.changedTypeVars = new Set();\r\n        this.typeChangeSubscriptions = new Map();\r\n        this.unstableVarValues = new Map();\r\n    }\r\n    clear() {\r\n        this.varTypes.clear();\r\n        this.rulesQueue.clear();\r\n        this.inlineStyleQueue.splice(0);\r\n        this.definedVars.clear();\r\n        this.varRefs.clear();\r\n        this.unknownColorVars.clear();\r\n        this.unknownBgVars.clear();\r\n        this.undefinedVars.clear();\r\n        this.initialVarTypes.clear();\r\n        this.changedTypeVars.clear();\r\n        this.typeChangeSubscriptions.clear();\r\n        this.unstableVarValues.clear();\r\n    }\r\n    isVarType(varName, typeNum) {\r\n        return (\r\n            this.varTypes.has(varName) &&\r\n            (this.varTypes.get(varName) & typeNum) > 0\r\n        );\r\n    }\r\n    addRulesForMatching(rules) {\r\n        this.rulesQueue.add(rules);\r\n    }\r\n    addInlineStyleForMatching(style) {\r\n        this.inlineStyleQueue.push(style);\r\n    }\r\n    matchVariablesAndDependents() {\r\n        if (this.rulesQueue.size === 0 && this.inlineStyleQueue.length === 0) {\r\n            return;\r\n        }\r\n        this.changedTypeVars.clear();\r\n        this.initialVarTypes = new Map(this.varTypes);\r\n        this.collectRootVariables();\r\n        this.collectVariablesAndVarDep();\r\n        this.collectRootVarDependents();\r\n        this.varRefs.forEach((refs, v) => {\r\n            refs.forEach((r) => {\r\n                if (this.varTypes.has(v)) {\r\n                    this.resolveVariableType(r, this.varTypes.get(v));\r\n                }\r\n            });\r\n        });\r\n        this.unknownColorVars.forEach((v) => {\r\n            if (this.unknownBgVars.has(v)) {\r\n                this.unknownColorVars.delete(v);\r\n                this.unknownBgVars.delete(v);\r\n                this.resolveVariableType(v, VAR_TYPE_BG_COLOR);\r\n            } else if (\r\n                this.isVarType(\r\n                    v,\r\n                    VAR_TYPE_BG_COLOR |\r\n                        VAR_TYPE_TEXT_COLOR |\r\n                        VAR_TYPE_BORDER_COLOR\r\n                )\r\n            ) {\r\n                this.unknownColorVars.delete(v);\r\n            } else {\r\n                this.undefinedVars.add(v);\r\n            }\r\n        });\r\n        this.unknownBgVars.forEach((v) => {\r\n            const hasColor =\r\n                this.findVarRef(v, (ref) => {\r\n                    return (\r\n                        this.unknownColorVars.has(ref) ||\r\n                        this.isVarType(\r\n                            ref,\r\n                            VAR_TYPE_BG_COLOR |\r\n                                VAR_TYPE_TEXT_COLOR |\r\n                                VAR_TYPE_BORDER_COLOR\r\n                        )\r\n                    );\r\n                }) != null;\r\n            if (hasColor) {\r\n                this.iterateVarRefs(v, (ref) => {\r\n                    this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\r\n                });\r\n            } else if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\r\n                this.unknownBgVars.delete(v);\r\n            } else {\r\n                this.undefinedVars.add(v);\r\n            }\r\n        });\r\n        this.changedTypeVars.forEach((varName) => {\r\n            if (this.typeChangeSubscriptions.has(varName)) {\r\n                this.typeChangeSubscriptions\r\n                    .get(varName)\r\n                    .forEach((callback) => {\r\n                        callback();\r\n                    });\r\n            }\r\n        });\r\n        this.changedTypeVars.clear();\r\n    }\r\n    getModifierForVariable(options) {\r\n        return (theme) => {\r\n            const {\r\n                varName,\r\n                sourceValue,\r\n                rule,\r\n                ignoredImgSelectors,\r\n                isCancelled\r\n            } = options;\r\n            const getDeclarations = () => {\r\n                const declarations = [];\r\n                const addModifiedValue = (\r\n                    typeNum,\r\n                    varNameWrapper,\r\n                    colorModifier\r\n                ) => {\r\n                    if (!this.isVarType(varName, typeNum)) {\r\n                        return;\r\n                    }\r\n                    const property = varNameWrapper(varName);\r\n                    let modifiedValue;\r\n                    if (isVarDependant(sourceValue)) {\r\n                        if (isConstructedColorVar(sourceValue)) {\r\n                            let value = insertVarValues(\r\n                                sourceValue,\r\n                                this.unstableVarValues\r\n                            );\r\n                            if (!value) {\r\n                                value =\r\n                                    typeNum === VAR_TYPE_BG_COLOR\r\n                                        ? \"#ffffff\"\r\n                                        : \"#000000\";\r\n                            }\r\n                            modifiedValue = colorModifier(value, theme);\r\n                        } else {\r\n                            modifiedValue = replaceCSSVariablesNames(\r\n                                sourceValue,\r\n                                (v) => varNameWrapper(v),\r\n                                (fallback) => colorModifier(fallback, theme)\r\n                            );\r\n                        }\r\n                    } else {\r\n                        modifiedValue = colorModifier(sourceValue, theme);\r\n                    }\r\n                    declarations.push({\r\n                        property,\r\n                        value: modifiedValue\r\n                    });\r\n                };\r\n                addModifiedValue(\r\n                    VAR_TYPE_BG_COLOR,\r\n                    wrapBgColorVariableName,\r\n                    tryModifyBgColor\r\n                );\r\n                addModifiedValue(\r\n                    VAR_TYPE_TEXT_COLOR,\r\n                    wrapTextColorVariableName,\r\n                    tryModifyTextColor\r\n                );\r\n                addModifiedValue(\r\n                    VAR_TYPE_BORDER_COLOR,\r\n                    wrapBorderColorVariableName,\r\n                    tryModifyBorderColor\r\n                );\r\n                if (this.isVarType(varName, VAR_TYPE_BG_IMG)) {\r\n                    const property = wrapBgImgVariableName(varName);\r\n                    let modifiedValue = sourceValue;\r\n                    if (isVarDependant(sourceValue)) {\r\n                        modifiedValue = replaceCSSVariablesNames(\r\n                            sourceValue,\r\n                            (v) => wrapBgColorVariableName(v),\r\n                            (fallback) => tryModifyBgColor(fallback, theme)\r\n                        );\r\n                    }\r\n                    const bgModifier = getBgImageModifier(\r\n                        modifiedValue,\r\n                        rule,\r\n                        ignoredImgSelectors,\r\n                        isCancelled\r\n                    );\r\n                    modifiedValue =\r\n                        typeof bgModifier === \"function\"\r\n                            ? bgModifier(theme)\r\n                            : bgModifier;\r\n                    declarations.push({\r\n                        property,\r\n                        value: modifiedValue\r\n                    });\r\n                }\r\n                return declarations;\r\n            };\r\n            const callbacks = new Set();\r\n            const addListener = (onTypeChange) => {\r\n                const callback = () => {\r\n                    const decs = getDeclarations();\r\n                    onTypeChange(decs);\r\n                };\r\n                callbacks.add(callback);\r\n                this.subscribeForVarTypeChange(varName, callback);\r\n            };\r\n            const removeListeners = () => {\r\n                callbacks.forEach((callback) => {\r\n                    this.unsubscribeFromVariableTypeChanges(varName, callback);\r\n                });\r\n            };\r\n            return {\r\n                declarations: getDeclarations(),\r\n                onTypeChange: {addListener, removeListeners}\r\n            };\r\n        };\r\n    }\r\n    getModifierForVarDependant(property, sourceValue) {\r\n        const isConstructedColor = sourceValue.match(/^\\s*(rgb|hsl)a?\\(/);\r\n        const isSimpleConstructedColor = sourceValue.match(\r\n            /^rgba?\\(var\\(--[\\-_A-Za-z0-9]+\\)(\\s*,?\\/?\\s*0?\\.\\d+)?\\)$/\r\n        );\r\n        if (isConstructedColor && !isSimpleConstructedColor) {\r\n            const isBg = property.startsWith(\"background\");\r\n            const isText = isTextColorProperty(property);\r\n            return (theme) => {\r\n                let value = insertVarValues(\r\n                    sourceValue,\r\n                    this.unstableVarValues\r\n                );\r\n                if (!value) {\r\n                    value = isBg ? \"#ffffff\" : \"#000000\";\r\n                }\r\n                const modifier = isBg\r\n                    ? tryModifyBgColor\r\n                    : isText\r\n                      ? tryModifyTextColor\r\n                      : tryModifyBorderColor;\r\n                return modifier(value, theme);\r\n            };\r\n        }\r\n        if (\r\n            property === \"background-color\" ||\r\n            (isSimpleConstructedColor && property === \"background\")\r\n        ) {\r\n            return (theme) => {\r\n                const defaultFallback = tryModifyBgColor(\r\n                    isConstructedColor ? \"255, 255, 255\" : \"#ffffff\",\r\n                    theme\r\n                );\r\n                return replaceCSSVariablesNames(\r\n                    sourceValue,\r\n                    (v) => wrapBgColorVariableName(v),\r\n                    (fallback) => tryModifyBgColor(fallback, theme),\r\n                    defaultFallback\r\n                );\r\n            };\r\n        }\r\n        if (isTextColorProperty(property)) {\r\n            return (theme) => {\r\n                const defaultFallback = tryModifyTextColor(\r\n                    isConstructedColor ? \"0, 0, 0\" : \"#000000\",\r\n                    theme\r\n                );\r\n                return replaceCSSVariablesNames(\r\n                    sourceValue,\r\n                    (v) => wrapTextColorVariableName(v),\r\n                    (fallback) => tryModifyTextColor(fallback, theme),\r\n                    defaultFallback\r\n                );\r\n            };\r\n        }\r\n        if (\r\n            property === \"background\" ||\r\n            property === \"background-image\" ||\r\n            property === \"box-shadow\"\r\n        ) {\r\n            return (theme) => {\r\n                const unknownVars = new Set();\r\n                const modify = () => {\r\n                    const variableReplaced = replaceCSSVariablesNames(\r\n                        sourceValue,\r\n                        (v) => {\r\n                            if (this.isVarType(v, VAR_TYPE_BG_COLOR)) {\r\n                                return wrapBgColorVariableName(v);\r\n                            }\r\n                            if (this.isVarType(v, VAR_TYPE_BG_IMG)) {\r\n                                return wrapBgImgVariableName(v);\r\n                            }\r\n                            unknownVars.add(v);\r\n                            return v;\r\n                        },\r\n                        (fallback) => tryModifyBgColor(fallback, theme)\r\n                    );\r\n                    if (property === \"box-shadow\") {\r\n                        const shadowModifier =\r\n                            getShadowModifierWithInfo(variableReplaced);\r\n                        const modifiedShadow = shadowModifier(theme);\r\n                        if (\r\n                            modifiedShadow.unparsableMatchesLength !==\r\n                            modifiedShadow.matchesLength\r\n                        ) {\r\n                            return modifiedShadow.result;\r\n                        }\r\n                    }\r\n                    return variableReplaced;\r\n                };\r\n                const modified = modify();\r\n                if (unknownVars.size > 0) {\r\n                    const isFallbackResolved = modified.match(\r\n                        /^var\\(.*?, ((var\\(--darkreader-bg--.*\\))|(#[0-9A-Fa-f]+)|([a-z]+)|(rgba?\\(.+\\))|(hsla?\\(.+\\)))\\)$/\r\n                    );\r\n                    if (isFallbackResolved) {\r\n                        return modified;\r\n                    }\r\n                    return new Promise((resolve) => {\r\n                        for (const unknownVar of unknownVars.values()) {\r\n                            const callback = () => {\r\n                                this.unsubscribeFromVariableTypeChanges(\r\n                                    unknownVar,\r\n                                    callback\r\n                                );\r\n                                const newValue = modify();\r\n                                resolve(newValue);\r\n                            };\r\n                            this.subscribeForVarTypeChange(\r\n                                unknownVar,\r\n                                callback\r\n                            );\r\n                        }\r\n                    });\r\n                }\r\n                return modified;\r\n            };\r\n        }\r\n        if (property.startsWith(\"border\") || property.startsWith(\"outline\")) {\r\n            return (theme) => {\r\n                return replaceCSSVariablesNames(\r\n                    sourceValue,\r\n                    (v) => wrapBorderColorVariableName(v),\r\n                    (fallback) => tryModifyBorderColor(fallback, theme)\r\n                );\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    subscribeForVarTypeChange(varName, callback) {\r\n        if (!this.typeChangeSubscriptions.has(varName)) {\r\n            this.typeChangeSubscriptions.set(varName, new Set());\r\n        }\r\n        const rootStore = this.typeChangeSubscriptions.get(varName);\r\n        if (!rootStore.has(callback)) {\r\n            rootStore.add(callback);\r\n        }\r\n    }\r\n    unsubscribeFromVariableTypeChanges(varName, callback) {\r\n        if (this.typeChangeSubscriptions.has(varName)) {\r\n            this.typeChangeSubscriptions.get(varName).delete(callback);\r\n        }\r\n    }\r\n    collectVariablesAndVarDep() {\r\n        this.rulesQueue.forEach((rules) => {\r\n            iterateCSSRules(rules, (rule) => {\r\n                if (rule.style) {\r\n                    this.collectVarsFromCSSDeclarations(rule.style);\r\n                }\r\n            });\r\n        });\r\n        this.inlineStyleQueue.forEach((style) => {\r\n            this.collectVarsFromCSSDeclarations(style);\r\n        });\r\n        this.rulesQueue.clear();\r\n        this.inlineStyleQueue.splice(0);\r\n    }\r\n    collectVarsFromCSSDeclarations(style) {\r\n        iterateCSSDeclarations(style, (property, value) => {\r\n            if (isVariable(property)) {\r\n                this.inspectVariable(property, value);\r\n            }\r\n            if (isVarDependant(value)) {\r\n                this.inspectVarDependant(property, value);\r\n            }\r\n        });\r\n    }\r\n    shouldProcessRootVariables() {\r\n        return (\r\n            this.rulesQueue.size > 0 &&\r\n            document.documentElement.getAttribute(\"style\")?.includes(\"--\")\r\n        );\r\n    }\r\n    collectRootVariables() {\r\n        if (!this.shouldProcessRootVariables()) {\r\n            return;\r\n        }\r\n        iterateCSSDeclarations(\r\n            document.documentElement.style,\r\n            (property, value) => {\r\n                if (isVariable(property)) {\r\n                    this.inspectVariable(property, value);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    inspectVariable(varName, value) {\r\n        this.unstableVarValues.set(varName, value);\r\n        if (isVarDependant(value) && isConstructedColorVar(value)) {\r\n            this.unknownColorVars.add(varName);\r\n            this.definedVars.add(varName);\r\n        }\r\n        if (this.definedVars.has(varName)) {\r\n            return;\r\n        }\r\n        this.definedVars.add(varName);\r\n        const isColor = Boolean(\r\n            value.match(rawRGBSpaceRegex) ||\r\n                value.match(rawRGBCommaRegex) ||\r\n                parseColorWithCache(value)\r\n        );\r\n        if (isColor) {\r\n            this.unknownColorVars.add(varName);\r\n        } else if (\r\n            value.includes(\"url(\") ||\r\n            value.includes(\"linear-gradient(\") ||\r\n            value.includes(\"radial-gradient(\")\r\n        ) {\r\n            this.resolveVariableType(varName, VAR_TYPE_BG_IMG);\r\n        }\r\n    }\r\n    resolveVariableType(varName, typeNum) {\r\n        const initialType = this.initialVarTypes.get(varName) || 0;\r\n        const currentType = this.varTypes.get(varName) || 0;\r\n        const newType = currentType | typeNum;\r\n        this.varTypes.set(varName, newType);\r\n        if (newType !== initialType || this.undefinedVars.has(varName)) {\r\n            this.changedTypeVars.add(varName);\r\n            this.undefinedVars.delete(varName);\r\n        }\r\n        this.unknownColorVars.delete(varName);\r\n        this.unknownBgVars.delete(varName);\r\n    }\r\n    collectRootVarDependents() {\r\n        if (!this.shouldProcessRootVariables()) {\r\n            return;\r\n        }\r\n        iterateCSSDeclarations(\r\n            document.documentElement.style,\r\n            (property, value) => {\r\n                if (isVarDependant(value)) {\r\n                    this.inspectVarDependant(property, value);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    inspectVarDependant(property, value) {\r\n        if (isVariable(property)) {\r\n            this.iterateVarDeps(value, (ref) => {\r\n                if (!this.varRefs.has(property)) {\r\n                    this.varRefs.set(property, new Set());\r\n                }\r\n                this.varRefs.get(property).add(ref);\r\n            });\r\n        } else if (\r\n            property === \"background-color\" ||\r\n            property === \"box-shadow\"\r\n        ) {\r\n            this.iterateVarDeps(value, (v) =>\r\n                this.resolveVariableType(v, VAR_TYPE_BG_COLOR)\r\n            );\r\n        } else if (isTextColorProperty(property)) {\r\n            this.iterateVarDeps(value, (v) =>\r\n                this.resolveVariableType(v, VAR_TYPE_TEXT_COLOR)\r\n            );\r\n        } else if (\r\n            property.startsWith(\"border\") ||\r\n            property.startsWith(\"outline\")\r\n        ) {\r\n            this.iterateVarDeps(value, (v) =>\r\n                this.resolveVariableType(v, VAR_TYPE_BORDER_COLOR)\r\n            );\r\n        } else if (\r\n            property === \"background\" ||\r\n            property === \"background-image\"\r\n        ) {\r\n            this.iterateVarDeps(value, (v) => {\r\n                if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\r\n                    return;\r\n                }\r\n                const isBgColor =\r\n                    this.findVarRef(v, (ref) => {\r\n                        return (\r\n                            this.unknownColorVars.has(ref) ||\r\n                            this.isVarType(\r\n                                ref,\r\n                                VAR_TYPE_BG_COLOR |\r\n                                    VAR_TYPE_TEXT_COLOR |\r\n                                    VAR_TYPE_BORDER_COLOR\r\n                            )\r\n                        );\r\n                    }) != null;\r\n                this.iterateVarRefs(v, (ref) => {\r\n                    if (isBgColor) {\r\n                        this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\r\n                    } else {\r\n                        this.unknownBgVars.add(ref);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    iterateVarDeps(value, iterator) {\r\n        const varDeps = new Set();\r\n        iterateVarDependencies(value, (v) => varDeps.add(v));\r\n        varDeps.forEach((v) => iterator(v));\r\n    }\r\n    findVarRef(varName, iterator, stack = new Set()) {\r\n        if (stack.has(varName)) {\r\n            return null;\r\n        }\r\n        stack.add(varName);\r\n        const result = iterator(varName);\r\n        if (result) {\r\n            return varName;\r\n        }\r\n        const refs = this.varRefs.get(varName);\r\n        if (!refs || refs.size === 0) {\r\n            return null;\r\n        }\r\n        for (const ref of refs) {\r\n            const found = this.findVarRef(ref, iterator, stack);\r\n            if (found) {\r\n                return found;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    iterateVarRefs(varName, iterator) {\r\n        this.findVarRef(varName, (ref) => {\r\n            iterator(ref);\r\n            return false;\r\n        });\r\n    }\r\n    setOnRootVariableChange(callback) {\r\n        this.onRootVariableDefined = callback;\r\n    }\r\n    putRootVars(styleElement, theme) {\r\n        const sheet = styleElement.sheet;\r\n        if (sheet.cssRules.length > 0) {\r\n            sheet.deleteRule(0);\r\n        }\r\n        const declarations = new Map();\r\n        iterateCSSDeclarations(\r\n            document.documentElement.style,\r\n            (property, value) => {\r\n                if (isVariable(property)) {\r\n                    if (this.isVarType(property, VAR_TYPE_BG_COLOR)) {\r\n                        declarations.set(\r\n                            wrapBgColorVariableName(property),\r\n                            tryModifyBgColor(value, theme)\r\n                        );\r\n                    }\r\n                    if (this.isVarType(property, VAR_TYPE_TEXT_COLOR)) {\r\n                        declarations.set(\r\n                            wrapTextColorVariableName(property),\r\n                            tryModifyTextColor(value, theme)\r\n                        );\r\n                    }\r\n                    if (this.isVarType(property, VAR_TYPE_BORDER_COLOR)) {\r\n                        declarations.set(\r\n                            wrapBorderColorVariableName(property),\r\n                            tryModifyBorderColor(value, theme)\r\n                        );\r\n                    }\r\n                    this.subscribeForVarTypeChange(\r\n                        property,\r\n                        this.onRootVariableDefined\r\n                    );\r\n                }\r\n            }\r\n        );\r\n        const cssLines = [];\r\n        cssLines.push(\":root {\");\r\n        for (const [property, value] of declarations) {\r\n            cssLines.push(`    ${property}: ${value};`);\r\n        }\r\n        cssLines.push(\"}\");\r\n        const cssText = cssLines.join(\"\\n\");\r\n        sheet.insertRule(cssText);\r\n    }\r\n}\r\nconst variablesStore = new VariablesStore();\r\nfunction getVariableRange(input, searchStart = 0) {\r\n    const start = input.indexOf(\"var(\", searchStart);\r\n    if (start >= 0) {\r\n        const range = getParenthesesRange(input, start + 3);\r\n        if (range) {\r\n            return {start, end: range.end};\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getVariablesMatches(input) {\r\n    const ranges = [];\r\n    let i = 0;\r\n    let range;\r\n    while ((range = getVariableRange(input, i))) {\r\n        const {start, end} = range;\r\n        ranges.push({start, end, value: input.substring(start, end)});\r\n        i = range.end + 1;\r\n    }\r\n    return ranges;\r\n}\r\nfunction replaceVariablesMatches(input, replacer) {\r\n    const matches = getVariablesMatches(input);\r\n    const matchesCount = matches.length;\r\n    if (matchesCount === 0) {\r\n        return input;\r\n    }\r\n    const inputLength = input.length;\r\n    const replacements = matches.map((m) => replacer(m.value, matches.length));\r\n    const parts = [];\r\n    parts.push(input.substring(0, matches[0].start));\r\n    for (let i = 0; i < matchesCount; i++) {\r\n        parts.push(replacements[i]);\r\n        const start = matches[i].end;\r\n        const end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;\r\n        parts.push(input.substring(start, end));\r\n    }\r\n    return parts.join(\"\");\r\n}\r\nfunction getVariableNameAndFallback(match) {\r\n    const commaIndex = match.indexOf(\",\");\r\n    let name;\r\n    let fallback;\r\n    if (commaIndex >= 0) {\r\n        name = match.substring(4, commaIndex).trim();\r\n        fallback = match.substring(commaIndex + 1, match.length - 1).trim();\r\n    } else {\r\n        name = match.substring(4, match.length - 1).trim();\r\n        fallback = \"\";\r\n    }\r\n    return {name, fallback};\r\n}\r\nfunction replaceCSSVariablesNames(\r\n    value,\r\n    nameReplacer,\r\n    fallbackReplacer,\r\n    finalFallback\r\n) {\r\n    const matchReplacer = (match) => {\r\n        const {name, fallback} = getVariableNameAndFallback(match);\r\n        const newName = nameReplacer(name);\r\n        if (!fallback) {\r\n            if (finalFallback) {\r\n                return `var(${newName}, ${finalFallback})`;\r\n            }\r\n            return `var(${newName})`;\r\n        }\r\n        let newFallback;\r\n        if (isVarDependant(fallback)) {\r\n            newFallback = replaceCSSVariablesNames(\r\n                fallback,\r\n                nameReplacer,\r\n                fallbackReplacer\r\n            );\r\n        } else if (fallbackReplacer) {\r\n            newFallback = fallbackReplacer(fallback);\r\n        } else {\r\n            newFallback = fallback;\r\n        }\r\n        return `var(${newName}, ${newFallback})`;\r\n    };\r\n    return replaceVariablesMatches(value, matchReplacer);\r\n}\r\nfunction iterateVarDependencies(value, iterator) {\r\n    replaceCSSVariablesNames(value, (varName) => {\r\n        iterator(varName);\r\n        return varName;\r\n    });\r\n}\r\nfunction wrapBgColorVariableName(name) {\r\n    return `--darkreader-bg${name}`;\r\n}\r\nfunction wrapTextColorVariableName(name) {\r\n    return `--darkreader-text${name}`;\r\n}\r\nfunction wrapBorderColorVariableName(name) {\r\n    return `--darkreader-border${name}`;\r\n}\r\nfunction wrapBgImgVariableName(name) {\r\n    return `--darkreader-bgimg${name}`;\r\n}\r\nfunction isVariable(property) {\r\n    return property.startsWith(\"--\");\r\n}\r\nfunction isVarDependant(value) {\r\n    return value.includes(\"var(\");\r\n}\r\nfunction isConstructedColorVar(value) {\r\n    return (\r\n        value.match(/^\\s*(rgb|hsl)a?\\(/) ||\r\n        value.match(/^(((\\d{1,3})|(var\\([\\-_A-Za-z0-9]+\\))),?\\s*?){3}$/)\r\n    );\r\n}\r\nconst textColorProps = [\r\n    \"color\",\r\n    \"caret-color\",\r\n    \"-webkit-text-fill-color\",\r\n    \"fill\",\r\n    \"stroke\"\r\n];\r\nfunction isTextColorProperty(property) {\r\n    return textColorProps.includes(property);\r\n}\r\nconst rawRGBSpaceRegex = /^(\\d{1,3})\\s+(\\d{1,3})\\s+(\\d{1,3})$/;\r\nconst rawRGBCommaRegex = /^(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})$/;\r\nfunction parseRawColorValue(input) {\r\n    const match =\r\n        input.match(rawRGBSpaceRegex) ?? input.match(rawRGBCommaRegex);\r\n    if (match) {\r\n        const color = `rgb(${match[1]}, ${match[2]}, ${match[3]})`;\r\n        return {isRaw: true, color};\r\n    }\r\n    return {isRaw: false, color: input};\r\n}\r\nfunction handleRawColorValue(input, theme, modifyFunction) {\r\n    const {isRaw, color} = parseRawColorValue(input);\r\n    const rgb = parseColorWithCache(color);\r\n    if (rgb) {\r\n        const outputColor = modifyFunction(rgb, theme, !isRaw);\r\n        if (isRaw) {\r\n            const outputInRGB = parseColorWithCache(outputColor);\r\n            return outputInRGB\r\n                ? `${outputInRGB.r}, ${outputInRGB.g}, ${outputInRGB.b}`\r\n                : outputColor;\r\n        }\r\n        return outputColor;\r\n    }\r\n    return color;\r\n}\r\nfunction tryModifyBgColor(color, theme) {\r\n    return handleRawColorValue(color, theme, modifyBackgroundColor);\r\n}\r\nfunction tryModifyTextColor(color, theme) {\r\n    return handleRawColorValue(color, theme, modifyForegroundColor);\r\n}\r\nfunction tryModifyBorderColor(color, theme) {\r\n    return handleRawColorValue(color, theme, modifyBorderColor);\r\n}\r\nfunction insertVarValues(source, varValues, fullStack = new Set()) {\r\n    let containsUnresolvedVar = false;\r\n    const matchReplacer = (match, count) => {\r\n        const {name, fallback} = getVariableNameAndFallback(match);\r\n        const stack = count > 1 ? new Set(fullStack) : fullStack;\r\n        if (stack.has(name)) {\r\n            containsUnresolvedVar = true;\r\n            return null;\r\n        }\r\n        stack.add(name);\r\n        const varValue = varValues.get(name) || fallback;\r\n        let inserted = null;\r\n        if (varValue) {\r\n            if (isVarDependant(varValue)) {\r\n                inserted = insertVarValues(varValue, varValues, stack);\r\n            } else {\r\n                inserted = varValue;\r\n            }\r\n        }\r\n        if (!inserted) {\r\n            containsUnresolvedVar = true;\r\n            return null;\r\n        }\r\n        return inserted;\r\n    };\r\n    const replaced = replaceVariablesMatches(source, matchReplacer);\r\n    if (containsUnresolvedVar) {\r\n        return null;\r\n    }\r\n    return replaced;\r\n}\r\n\r\nfunction getThemeKey(theme) {\r\n    let resultKey = \"\";\r\n    themeCacheKeys.forEach((key) => {\r\n        resultKey += `${key}:${theme[key]};`;\r\n    });\r\n    return resultKey;\r\n}\r\nconst asyncQueue = createAsyncTasksQueue();\r\nfunction createStyleSheetModifier() {\r\n    let renderId = 0;\r\n    function getStyleRuleHash(rule) {\r\n        let cssText = rule.cssText;\r\n        if (isMediaRule(rule.parentRule)) {\r\n            cssText = `${rule.parentRule.media.mediaText} { ${cssText} }`;\r\n        }\r\n        return getHashCode(cssText);\r\n    }\r\n    const rulesTextCache = new Set();\r\n    const rulesModCache = new Map();\r\n    const varTypeChangeCleaners = new Set();\r\n    let prevFilterKey = null;\r\n    let hasNonLoadedLink = false;\r\n    let wasRebuilt = false;\r\n    function shouldRebuildStyle() {\r\n        return hasNonLoadedLink && !wasRebuilt;\r\n    }\r\n    function modifySheet(options) {\r\n        const rules = options.sourceCSSRules;\r\n        const {\r\n            theme,\r\n            ignoreImageAnalysis,\r\n            force,\r\n            prepareSheet,\r\n            isAsyncCancelled\r\n        } = options;\r\n        let rulesChanged = rulesModCache.size === 0;\r\n        const notFoundCacheKeys = new Set(rulesModCache.keys());\r\n        const themeKey = getThemeKey(theme);\r\n        const themeChanged = themeKey !== prevFilterKey;\r\n        if (hasNonLoadedLink) {\r\n            wasRebuilt = true;\r\n        }\r\n        const modRules = [];\r\n        iterateCSSRules(\r\n            rules,\r\n            (rule) => {\r\n                const hash = getStyleRuleHash(rule);\r\n                let textDiffersFromPrev = false;\r\n                notFoundCacheKeys.delete(hash);\r\n                if (!rulesTextCache.has(hash)) {\r\n                    rulesTextCache.add(hash);\r\n                    textDiffersFromPrev = true;\r\n                }\r\n                if (textDiffersFromPrev) {\r\n                    rulesChanged = true;\r\n                } else {\r\n                    modRules.push(rulesModCache.get(hash));\r\n                    return;\r\n                }\r\n                if (rule.style.all === \"revert\") {\r\n                    return;\r\n                }\r\n                const modDecs = [];\r\n                rule.style &&\r\n                    iterateCSSDeclarations(rule.style, (property, value) => {\r\n                        const mod = getModifiableCSSDeclaration(\r\n                            property,\r\n                            value,\r\n                            rule,\r\n                            variablesStore,\r\n                            ignoreImageAnalysis,\r\n                            isAsyncCancelled\r\n                        );\r\n                        if (mod) {\r\n                            modDecs.push(mod);\r\n                        }\r\n                    });\r\n                let modRule = null;\r\n                if (modDecs.length > 0) {\r\n                    const parentRule = rule.parentRule;\r\n                    modRule = {\r\n                        selector: rule.selectorText,\r\n                        declarations: modDecs,\r\n                        parentRule\r\n                    };\r\n                    modRules.push(modRule);\r\n                }\r\n                rulesModCache.set(hash, modRule);\r\n            },\r\n            () => {\r\n                hasNonLoadedLink = true;\r\n            }\r\n        );\r\n        notFoundCacheKeys.forEach((key) => {\r\n            rulesTextCache.delete(key);\r\n            rulesModCache.delete(key);\r\n        });\r\n        prevFilterKey = themeKey;\r\n        if (!force && !rulesChanged && !themeChanged) {\r\n            return;\r\n        }\r\n        renderId++;\r\n        function setRule(target, index, rule) {\r\n            const {selector, declarations} = rule;\r\n            let selectorText = selector;\r\n            const emptyIsWhereSelector =\r\n                isChromium &&\r\n                selector.startsWith(\":is(\") &&\r\n                (selector.includes(\":is()\") ||\r\n                    selector.includes(\":where()\") ||\r\n                    (selector.includes(\":where(\") &&\r\n                        selector.includes(\":-moz\")));\r\n            const viewTransitionSelector =\r\n                selector.includes(\"::view-transition-\");\r\n            if (emptyIsWhereSelector || viewTransitionSelector) {\r\n                selectorText = \".darkreader-unsupported-selector\";\r\n            }\r\n            let ruleText = `${selectorText} {`;\r\n            for (const dec of declarations) {\r\n                const {property, value, important} = dec;\r\n                if (value) {\r\n                    ruleText += ` ${property}: ${value}${important ? \" !important\" : \"\"};`;\r\n                }\r\n            }\r\n            ruleText += \" }\";\r\n            target.insertRule(ruleText, index);\r\n        }\r\n        const asyncDeclarations = new Map();\r\n        const varDeclarations = new Map();\r\n        let asyncDeclarationCounter = 0;\r\n        let varDeclarationCounter = 0;\r\n        const rootReadyGroup = {rule: null, rules: [], isGroup: true};\r\n        const groupRefs = new WeakMap();\r\n        function getGroup(rule) {\r\n            if (rule == null) {\r\n                return rootReadyGroup;\r\n            }\r\n            if (groupRefs.has(rule)) {\r\n                return groupRefs.get(rule);\r\n            }\r\n            const group = {rule, rules: [], isGroup: true};\r\n            groupRefs.set(rule, group);\r\n            const parentGroup = getGroup(rule.parentRule);\r\n            parentGroup.rules.push(group);\r\n            return group;\r\n        }\r\n        varTypeChangeCleaners.forEach((clear) => clear());\r\n        varTypeChangeCleaners.clear();\r\n        modRules\r\n            .filter((r) => r)\r\n            .forEach(({selector, declarations, parentRule}) => {\r\n                const group = getGroup(parentRule);\r\n                const readyStyleRule = {\r\n                    selector,\r\n                    declarations: [],\r\n                    isGroup: false\r\n                };\r\n                const readyDeclarations = readyStyleRule.declarations;\r\n                group.rules.push(readyStyleRule);\r\n                function handleAsyncDeclaration(\r\n                    property,\r\n                    modified,\r\n                    important,\r\n                    sourceValue\r\n                ) {\r\n                    const asyncKey = ++asyncDeclarationCounter;\r\n                    const asyncDeclaration = {\r\n                        property,\r\n                        value: null,\r\n                        important,\r\n                        asyncKey,\r\n                        sourceValue\r\n                    };\r\n                    readyDeclarations.push(asyncDeclaration);\r\n                    const currentRenderId = renderId;\r\n                    modified.then((asyncValue) => {\r\n                        if (\r\n                            !asyncValue ||\r\n                            isAsyncCancelled() ||\r\n                            currentRenderId !== renderId\r\n                        ) {\r\n                            return;\r\n                        }\r\n                        asyncDeclaration.value = asyncValue;\r\n                        asyncQueue.add(() => {\r\n                            if (\r\n                                isAsyncCancelled() ||\r\n                                currentRenderId !== renderId\r\n                            ) {\r\n                                return;\r\n                            }\r\n                            rebuildAsyncRule(asyncKey);\r\n                        });\r\n                    });\r\n                }\r\n                function handleVarDeclarations(\r\n                    property,\r\n                    modified,\r\n                    important,\r\n                    sourceValue\r\n                ) {\r\n                    const {declarations: varDecs, onTypeChange} = modified;\r\n                    const varKey = ++varDeclarationCounter;\r\n                    const currentRenderId = renderId;\r\n                    const initialIndex = readyDeclarations.length;\r\n                    let oldDecs = [];\r\n                    if (varDecs.length === 0) {\r\n                        const tempDec = {\r\n                            property,\r\n                            value: sourceValue,\r\n                            important,\r\n                            sourceValue,\r\n                            varKey\r\n                        };\r\n                        readyDeclarations.push(tempDec);\r\n                        oldDecs = [tempDec];\r\n                    }\r\n                    varDecs.forEach((mod) => {\r\n                        if (mod.value instanceof Promise) {\r\n                            handleAsyncDeclaration(\r\n                                mod.property,\r\n                                mod.value,\r\n                                important,\r\n                                sourceValue\r\n                            );\r\n                        } else {\r\n                            const readyDec = {\r\n                                property: mod.property,\r\n                                value: mod.value,\r\n                                important,\r\n                                sourceValue,\r\n                                varKey\r\n                            };\r\n                            readyDeclarations.push(readyDec);\r\n                            oldDecs.push(readyDec);\r\n                        }\r\n                    });\r\n                    onTypeChange.addListener((newDecs) => {\r\n                        if (\r\n                            isAsyncCancelled() ||\r\n                            currentRenderId !== renderId\r\n                        ) {\r\n                            return;\r\n                        }\r\n                        const readyVarDecs = newDecs.map((mod) => {\r\n                            return {\r\n                                property: mod.property,\r\n                                value: mod.value,\r\n                                important,\r\n                                sourceValue,\r\n                                varKey\r\n                            };\r\n                        });\r\n                        const index = readyDeclarations.indexOf(\r\n                            oldDecs[0],\r\n                            initialIndex\r\n                        );\r\n                        readyDeclarations.splice(\r\n                            index,\r\n                            oldDecs.length,\r\n                            ...readyVarDecs\r\n                        );\r\n                        oldDecs = readyVarDecs;\r\n                        rebuildVarRule(varKey);\r\n                    });\r\n                    varTypeChangeCleaners.add(() =>\r\n                        onTypeChange.removeListeners()\r\n                    );\r\n                }\r\n                declarations.forEach(\r\n                    ({property, value, important, sourceValue}) => {\r\n                        if (typeof value === \"function\") {\r\n                            const modified = value(theme);\r\n                            if (modified instanceof Promise) {\r\n                                handleAsyncDeclaration(\r\n                                    property,\r\n                                    modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else if (property.startsWith(\"--\")) {\r\n                                handleVarDeclarations(\r\n                                    property,\r\n                                    modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else {\r\n                                readyDeclarations.push({\r\n                                    property,\r\n                                    value: modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                });\r\n                            }\r\n                        } else {\r\n                            readyDeclarations.push({\r\n                                property,\r\n                                value,\r\n                                important,\r\n                                sourceValue\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n            });\r\n        const sheet = prepareSheet();\r\n        function buildStyleSheet() {\r\n            function createTarget(group, parent) {\r\n                const {rule} = group;\r\n                if (isStyleRule(rule)) {\r\n                    const {selectorText} = rule;\r\n                    const index = parent.cssRules.length;\r\n                    parent.insertRule(`${selectorText} {}`, index);\r\n                    return parent.cssRules[index];\r\n                }\r\n                if (isMediaRule(rule)) {\r\n                    const {media} = rule;\r\n                    const index = parent.cssRules.length;\r\n                    parent.insertRule(`@media ${media.mediaText} {}`, index);\r\n                    return parent.cssRules[index];\r\n                }\r\n                if (isLayerRule(rule)) {\r\n                    const {name} = rule;\r\n                    const index = parent.cssRules.length;\r\n                    parent.insertRule(`@layer ${name} {}`, index);\r\n                    return parent.cssRules[index];\r\n                }\r\n                return parent;\r\n            }\r\n            function iterateReadyRules(group, target, styleIterator) {\r\n                group.rules.forEach((r) => {\r\n                    if (r.isGroup) {\r\n                        const t = createTarget(r, target);\r\n                        iterateReadyRules(r, t, styleIterator);\r\n                    } else {\r\n                        styleIterator(r, target);\r\n                    }\r\n                });\r\n            }\r\n            iterateReadyRules(rootReadyGroup, sheet, (rule, target) => {\r\n                const index = target.cssRules.length;\r\n                rule.declarations.forEach(({asyncKey, varKey}) => {\r\n                    if (asyncKey != null) {\r\n                        asyncDeclarations.set(asyncKey, {rule, target, index});\r\n                    }\r\n                    if (varKey != null) {\r\n                        varDeclarations.set(varKey, {rule, target, index});\r\n                    }\r\n                });\r\n                setRule(target, index, rule);\r\n            });\r\n        }\r\n        function rebuildAsyncRule(key) {\r\n            const {rule, target, index} = asyncDeclarations.get(key);\r\n            target.deleteRule(index);\r\n            setRule(target, index, rule);\r\n            asyncDeclarations.delete(key);\r\n        }\r\n        function rebuildVarRule(key) {\r\n            const {rule, target, index} = varDeclarations.get(key);\r\n            target.deleteRule(index);\r\n            setRule(target, index, rule);\r\n        }\r\n        buildStyleSheet();\r\n    }\r\n    return {modifySheet, shouldRebuildStyle};\r\n}\r\n\r\nlet canUseSheetProxy$1 = false;\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => (canUseSheetProxy$1 = true),\r\n    {once: true}\r\n);\r\nconst overrides$1 = new WeakSet();\r\nconst overridesBySource = new WeakMap();\r\nfunction canHaveAdoptedStyleSheets(node) {\r\n    return Array.isArray(node.adoptedStyleSheets);\r\n}\r\nfunction createAdoptedStyleSheetOverride(node) {\r\n    let cancelAsyncOperations = false;\r\n    function iterateSourceSheets(iterator) {\r\n        node.adoptedStyleSheets.forEach((sheet) => {\r\n            if (!overrides$1.has(sheet)) {\r\n                iterator(sheet);\r\n            }\r\n            defineSheetScope(sheet, node);\r\n        });\r\n    }\r\n    function injectSheet(sheet, override) {\r\n        const newSheets = [...node.adoptedStyleSheets];\r\n        const sheetIndex = newSheets.indexOf(sheet);\r\n        const overrideIndex = newSheets.indexOf(override);\r\n        if (overrideIndex >= 0) {\r\n            newSheets.splice(overrideIndex, 1);\r\n        }\r\n        newSheets.splice(sheetIndex + 1, 0, override);\r\n        node.adoptedStyleSheets = newSheets;\r\n    }\r\n    function clear() {\r\n        const newSheets = [...node.adoptedStyleSheets];\r\n        for (let i = newSheets.length - 1; i >= 0; i--) {\r\n            const sheet = newSheets[i];\r\n            if (overrides$1.has(sheet)) {\r\n                newSheets.splice(i, 1);\r\n            }\r\n        }\r\n        if (node.adoptedStyleSheets.length !== newSheets.length) {\r\n            node.adoptedStyleSheets = newSheets;\r\n        }\r\n        sourceSheets = new WeakSet();\r\n        sourceDeclarations = new WeakSet();\r\n    }\r\n    const cleaners = [];\r\n    function destroy() {\r\n        cleaners.forEach((c) => c());\r\n        cleaners.splice(0);\r\n        cancelAsyncOperations = true;\r\n        clear();\r\n        if (frameId) {\r\n            cancelAnimationFrame(frameId);\r\n            frameId = null;\r\n        }\r\n    }\r\n    let rulesChangeKey = 0;\r\n    function getRulesChangeKey() {\r\n        let count = 0;\r\n        iterateSourceSheets((sheet) => {\r\n            count += sheet.cssRules.length;\r\n        });\r\n        if (count === 1) {\r\n            const rule = node.adoptedStyleSheets[0].cssRules[0];\r\n            return rule instanceof CSSStyleRule ? rule.style.length : count;\r\n        }\r\n        return count;\r\n    }\r\n    let sourceSheets = new WeakSet();\r\n    let sourceDeclarations = new WeakSet();\r\n    function render(theme, ignoreImageAnalysis) {\r\n        clear();\r\n        for (let i = node.adoptedStyleSheets.length - 1; i >= 0; i--) {\r\n            const sheet = node.adoptedStyleSheets[i];\r\n            if (overrides$1.has(sheet)) {\r\n                continue;\r\n            }\r\n            sourceSheets.add(sheet);\r\n            const readyOverride = overridesBySource.get(sheet);\r\n            if (readyOverride) {\r\n                rulesChangeKey = getRulesChangeKey();\r\n                injectSheet(sheet, readyOverride);\r\n                continue;\r\n            }\r\n            const rules = sheet.cssRules;\r\n            const override = new CSSStyleSheet();\r\n            overridesBySource.set(sheet, override);\r\n            iterateCSSRules(rules, (rule) =>\r\n                sourceDeclarations.add(rule.style)\r\n            );\r\n            const prepareSheet = () => {\r\n                for (let i = override.cssRules.length - 1; i >= 0; i--) {\r\n                    override.deleteRule(i);\r\n                }\r\n                override.insertRule(\"#__darkreader__adoptedOverride {}\");\r\n                injectSheet(sheet, override);\r\n                overrides$1.add(override);\r\n                return override;\r\n            };\r\n            const sheetModifier = createStyleSheetModifier();\r\n            sheetModifier.modifySheet({\r\n                prepareSheet,\r\n                sourceCSSRules: rules,\r\n                theme,\r\n                ignoreImageAnalysis,\r\n                force: false,\r\n                isAsyncCancelled: () => cancelAsyncOperations\r\n            });\r\n        }\r\n        rulesChangeKey = getRulesChangeKey();\r\n    }\r\n    let callbackRequested = false;\r\n    function handleArrayChange(callback) {\r\n        if (callbackRequested) {\r\n            return;\r\n        }\r\n        callbackRequested = true;\r\n        queueMicrotask(() => {\r\n            callbackRequested = false;\r\n            const sheets = node.adoptedStyleSheets.filter(\r\n                (s) => !overrides$1.has(s)\r\n            );\r\n            sheets.forEach((sheet) => overridesBySource.delete(sheet));\r\n            callback(sheets);\r\n        });\r\n    }\r\n    function checkForUpdates() {\r\n        return getRulesChangeKey() !== rulesChangeKey;\r\n    }\r\n    let frameId = null;\r\n    function watchUsingRAF(callback) {\r\n        frameId = requestAnimationFrame(() => {\r\n            if (canUseSheetProxy$1) {\r\n                return;\r\n            }\r\n            if (checkForUpdates()) {\r\n                handleArrayChange(callback);\r\n            }\r\n            watchUsingRAF(callback);\r\n        });\r\n    }\r\n    function addSheetChangeEventListener(type, listener) {\r\n        node.addEventListener(type, listener);\r\n        cleaners.push(() => node.removeEventListener(type, listener));\r\n    }\r\n    function watch(callback) {\r\n        const onAdoptedSheetsChange = () => {\r\n            canUseSheetProxy$1 = true;\r\n            handleArrayChange(callback);\r\n        };\r\n        addSheetChangeEventListener(\r\n            \"__darkreader__adoptedStyleSheetsChange\",\r\n            onAdoptedSheetsChange\r\n        );\r\n        addSheetChangeEventListener(\r\n            \"__darkreader__adoptedStyleSheetChange\",\r\n            onAdoptedSheetsChange\r\n        );\r\n        addSheetChangeEventListener(\r\n            \"__darkreader__adoptedStyleDeclarationChange\",\r\n            onAdoptedSheetsChange\r\n        );\r\n        if (canUseSheetProxy$1) {\r\n            return;\r\n        }\r\n        watchUsingRAF(callback);\r\n    }\r\n    return {\r\n        render,\r\n        destroy,\r\n        watch\r\n    };\r\n}\r\nclass StyleSheetCommandBuilder {\r\n    constructor() {\r\n        this.cssRules = [];\r\n        this.commands = [];\r\n    }\r\n    insertRule(cssText, index = 0) {\r\n        this.commands.push({type: \"insert\", index, cssText});\r\n        this.cssRules.splice(index, 0, new StyleSheetCommandBuilder());\r\n        return index;\r\n    }\r\n    deleteRule(index) {\r\n        this.commands.push({type: \"delete\", index});\r\n        this.cssRules.splice(index, 1);\r\n    }\r\n    replaceSync(cssText) {\r\n        this.commands.splice(0);\r\n        this.commands.push({type: \"replace\", cssText});\r\n        if (cssText === \"\") {\r\n            this.cssRules.splice(0);\r\n        } else {\r\n            throw new Error(\r\n                \"StyleSheetCommandBuilder.replaceSync() is not fully supported\"\r\n            );\r\n        }\r\n    }\r\n    getDeepCSSCommands() {\r\n        const deep = [];\r\n        this.commands.forEach((command) => {\r\n            deep.push({\r\n                type: command.type,\r\n                cssText: command.type !== \"delete\" ? command.cssText : \"\",\r\n                path: command.type === \"replace\" ? [] : [command.index]\r\n            });\r\n        });\r\n        this.cssRules.forEach((rule, i) => {\r\n            const childCommands = rule.getDeepCSSCommands();\r\n            childCommands.forEach((c) => c.path.unshift(i));\r\n        });\r\n        return deep;\r\n    }\r\n    clearDeepCSSCommands() {\r\n        this.commands.splice(0);\r\n        this.cssRules.forEach((rule) => rule.clearDeepCSSCommands());\r\n    }\r\n}\r\nfunction createAdoptedStyleSheetFallback() {\r\n    let cancelAsyncOperations = false;\r\n    const builder = new StyleSheetCommandBuilder();\r\n    function render(options) {\r\n        const prepareSheet = () => {\r\n            builder.replaceSync(\"\");\r\n            return builder;\r\n        };\r\n        const sheetModifier = createStyleSheetModifier();\r\n        sheetModifier.modifySheet({\r\n            prepareSheet,\r\n            sourceCSSRules: options.cssRules,\r\n            theme: options.theme,\r\n            ignoreImageAnalysis: options.ignoreImageAnalysis,\r\n            force: false,\r\n            isAsyncCancelled: () => cancelAsyncOperations\r\n        });\r\n    }\r\n    function commands() {\r\n        const commands = builder.getDeepCSSCommands();\r\n        builder.clearDeepCSSCommands();\r\n        return commands;\r\n    }\r\n    function destroy() {\r\n        cancelAsyncOperations = true;\r\n    }\r\n    return {render, destroy, commands};\r\n}\r\n\r\nconst hostsBreakingOnStylePosition = [\"www.diffusioneshop.com\", \"zhale.me\"];\r\nconst mode = hostsBreakingOnStylePosition.includes(location.hostname)\r\n    ? \"away\"\r\n    : \"next\";\r\nfunction getStyleInjectionMode() {\r\n    return mode;\r\n}\r\nfunction injectStyleAway(styleElement) {\r\n    let container = document.body.querySelector(\".darkreader-style-container\");\r\n    if (!container) {\r\n        container = document.createElement(\"div\");\r\n        container.classList.add(\"darkreader\");\r\n        container.classList.add(\"darkreader-style-container\");\r\n        container.style.display = \"none\";\r\n        document.body.append(container);\r\n    }\r\n    container.append(styleElement);\r\n}\r\n\r\nconst overrides = {\r\n    \"background-color\": {\r\n        customProp: \"--darkreader-inline-bgcolor\",\r\n        cssProp: \"background-color\",\r\n        dataAttr: \"data-darkreader-inline-bgcolor\"\r\n    },\r\n    \"background-image\": {\r\n        customProp: \"--darkreader-inline-bgimage\",\r\n        cssProp: \"background-image\",\r\n        dataAttr: \"data-darkreader-inline-bgimage\"\r\n    },\r\n    \"border-color\": {\r\n        customProp: \"--darkreader-inline-border\",\r\n        cssProp: \"border-color\",\r\n        dataAttr: \"data-darkreader-inline-border\"\r\n    },\r\n    \"border-bottom-color\": {\r\n        customProp: \"--darkreader-inline-border-bottom\",\r\n        cssProp: \"border-bottom-color\",\r\n        dataAttr: \"data-darkreader-inline-border-bottom\"\r\n    },\r\n    \"border-left-color\": {\r\n        customProp: \"--darkreader-inline-border-left\",\r\n        cssProp: \"border-left-color\",\r\n        dataAttr: \"data-darkreader-inline-border-left\"\r\n    },\r\n    \"border-right-color\": {\r\n        customProp: \"--darkreader-inline-border-right\",\r\n        cssProp: \"border-right-color\",\r\n        dataAttr: \"data-darkreader-inline-border-right\"\r\n    },\r\n    \"border-top-color\": {\r\n        customProp: \"--darkreader-inline-border-top\",\r\n        cssProp: \"border-top-color\",\r\n        dataAttr: \"data-darkreader-inline-border-top\"\r\n    },\r\n    \"box-shadow\": {\r\n        customProp: \"--darkreader-inline-boxshadow\",\r\n        cssProp: \"box-shadow\",\r\n        dataAttr: \"data-darkreader-inline-boxshadow\"\r\n    },\r\n    \"color\": {\r\n        customProp: \"--darkreader-inline-color\",\r\n        cssProp: \"color\",\r\n        dataAttr: \"data-darkreader-inline-color\"\r\n    },\r\n    \"fill\": {\r\n        customProp: \"--darkreader-inline-fill\",\r\n        cssProp: \"fill\",\r\n        dataAttr: \"data-darkreader-inline-fill\"\r\n    },\r\n    \"stroke\": {\r\n        customProp: \"--darkreader-inline-stroke\",\r\n        cssProp: \"stroke\",\r\n        dataAttr: \"data-darkreader-inline-stroke\"\r\n    },\r\n    \"outline-color\": {\r\n        customProp: \"--darkreader-inline-outline\",\r\n        cssProp: \"outline-color\",\r\n        dataAttr: \"data-darkreader-inline-outline\"\r\n    },\r\n    \"stop-color\": {\r\n        customProp: \"--darkreader-inline-stopcolor\",\r\n        cssProp: \"stop-color\",\r\n        dataAttr: \"data-darkreader-inline-stopcolor\"\r\n    }\r\n};\r\nconst shorthandOverrides = {\r\n    \"background\": {\r\n        customProp: \"--darkreader-inline-bg\",\r\n        cssProp: \"background\",\r\n        dataAttr: \"data-darkreader-inline-bg\"\r\n    },\r\n    \"border\": {\r\n        customProp: \"--darkreader-inline-border-short\",\r\n        cssProp: \"border\",\r\n        dataAttr: \"data-darkreader-inline-border-short\"\r\n    },\r\n    \"border-bottom\": {\r\n        customProp: \"--darkreader-inline-border-bottom-short\",\r\n        cssProp: \"border-bottom\",\r\n        dataAttr: \"data-darkreader-inline-border-bottom-short\"\r\n    },\r\n    \"border-left\": {\r\n        customProp: \"--darkreader-inline-border-left-short\",\r\n        cssProp: \"border-left\",\r\n        dataAttr: \"data-darkreader-inline-border-left-short\"\r\n    },\r\n    \"border-right\": {\r\n        customProp: \"--darkreader-inline-border-right-short\",\r\n        cssProp: \"border-right\",\r\n        dataAttr: \"data-darkreader-inline-border-right-short\"\r\n    },\r\n    \"border-top\": {\r\n        customProp: \"--darkreader-inline-border-top-short\",\r\n        cssProp: \"border-top\",\r\n        dataAttr: \"data-darkreader-inline-border-top-short\"\r\n    }\r\n};\r\nconst overridesList = Object.values(overrides);\r\nconst normalizedPropList = {};\r\noverridesList.forEach(\r\n    ({cssProp, customProp}) => (normalizedPropList[customProp] = cssProp)\r\n);\r\nconst INLINE_STYLE_ATTRS = [\r\n    \"style\",\r\n    \"fill\",\r\n    \"stop-color\",\r\n    \"stroke\",\r\n    \"bgcolor\",\r\n    \"color\",\r\n    \"background\"\r\n];\r\nconst INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(\r\n    (attr) => `[${attr}]`\r\n).join(\", \");\r\nfunction getInlineOverrideStyle() {\r\n    const allOverrides = overridesList.concat(\r\n        Object.values(shorthandOverrides)\r\n    );\r\n    return allOverrides\r\n        .map(({dataAttr, customProp, cssProp}) => {\r\n            return [\r\n                `[${dataAttr}] {`,\r\n                `  ${cssProp}: var(${customProp}) !important;`,\r\n                \"}\"\r\n            ].join(\"\\n\");\r\n        })\r\n        .concat([\r\n            \"[data-darkreader-inline-invert] {\",\r\n            \"    filter: invert(100%) hue-rotate(180deg);\",\r\n            \"}\"\r\n        ])\r\n        .join(\"\\n\");\r\n}\r\nfunction getInlineStyleElements(root) {\r\n    const results = [];\r\n    if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {\r\n        results.push(root);\r\n    }\r\n    if (\r\n        root instanceof Element ||\r\n        (isShadowDomSupported && root instanceof ShadowRoot) ||\r\n        root instanceof Document\r\n    ) {\r\n        push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));\r\n    }\r\n    return results;\r\n}\r\nconst treeObservers = new Map();\r\nconst attrObservers = new Map();\r\nfunction watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {\r\n    deepWatchForInlineStyles(\r\n        document,\r\n        elementStyleDidChange,\r\n        shadowRootDiscovered\r\n    );\r\n    iterateShadowHosts(document.documentElement, (host) => {\r\n        deepWatchForInlineStyles(\r\n            host.shadowRoot,\r\n            elementStyleDidChange,\r\n            shadowRootDiscovered\r\n        );\r\n    });\r\n}\r\nfunction deepWatchForInlineStyles(\r\n    root,\r\n    elementStyleDidChange,\r\n    shadowRootDiscovered\r\n) {\r\n    if (treeObservers.has(root)) {\r\n        treeObservers.get(root).disconnect();\r\n        attrObservers.get(root).disconnect();\r\n    }\r\n    const discoveredNodes = new WeakSet();\r\n    function discoverNodes(node) {\r\n        getInlineStyleElements(node).forEach((el) => {\r\n            if (discoveredNodes.has(el)) {\r\n                return;\r\n            }\r\n            discoveredNodes.add(el);\r\n            elementStyleDidChange(el);\r\n        });\r\n        iterateShadowHosts(node, (n) => {\r\n            if (discoveredNodes.has(node)) {\r\n                return;\r\n            }\r\n            discoveredNodes.add(node);\r\n            shadowRootDiscovered(n.shadowRoot);\r\n            deepWatchForInlineStyles(\r\n                n.shadowRoot,\r\n                elementStyleDidChange,\r\n                shadowRootDiscovered\r\n            );\r\n        });\r\n        variablesStore.matchVariablesAndDependents();\r\n    }\r\n    const treeObserver = createOptimizedTreeObserver(root, {\r\n        onMinorMutations: (_root, {additions}) => {\r\n            additions.forEach((added) => discoverNodes(added));\r\n        },\r\n        onHugeMutations: () => {\r\n            discoverNodes(root);\r\n        }\r\n    });\r\n    treeObservers.set(root, treeObserver);\r\n    let attemptCount = 0;\r\n    let start = null;\r\n    const ATTEMPTS_INTERVAL = getDuration({seconds: 10});\r\n    const RETRY_TIMEOUT = getDuration({seconds: 2});\r\n    const MAX_ATTEMPTS_COUNT = 50;\r\n    let cache = [];\r\n    let timeoutId = null;\r\n    const handleAttributeMutations = throttle((mutations) => {\r\n        const handledTargets = new Set();\r\n        mutations.forEach((m) => {\r\n            const target = m.target;\r\n            if (handledTargets.has(target)) {\r\n                return;\r\n            }\r\n            if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {\r\n                handledTargets.add(target);\r\n                elementStyleDidChange(target);\r\n            }\r\n        });\r\n        variablesStore.matchVariablesAndDependents();\r\n    });\r\n    const attrObserver = new MutationObserver((mutations) => {\r\n        if (timeoutId) {\r\n            cache.push(...mutations);\r\n            return;\r\n        }\r\n        attemptCount++;\r\n        const now = Date.now();\r\n        if (start == null) {\r\n            start = now;\r\n        } else if (attemptCount >= MAX_ATTEMPTS_COUNT) {\r\n            if (now - start < ATTEMPTS_INTERVAL) {\r\n                timeoutId = setTimeout(() => {\r\n                    start = null;\r\n                    attemptCount = 0;\r\n                    timeoutId = null;\r\n                    const attributeCache = cache;\r\n                    cache = [];\r\n                    handleAttributeMutations(attributeCache);\r\n                }, RETRY_TIMEOUT);\r\n                cache.push(...mutations);\r\n                return;\r\n            }\r\n            start = now;\r\n            attemptCount = 1;\r\n        }\r\n        handleAttributeMutations(mutations);\r\n    });\r\n    attrObserver.observe(root, {\r\n        attributes: true,\r\n        attributeFilter: INLINE_STYLE_ATTRS.concat(\r\n            overridesList.map(({dataAttr}) => dataAttr)\r\n        ),\r\n        subtree: true\r\n    });\r\n    attrObservers.set(root, attrObserver);\r\n}\r\nfunction stopWatchingForInlineStyles() {\r\n    treeObservers.forEach((o) => o.disconnect());\r\n    attrObservers.forEach((o) => o.disconnect());\r\n    treeObservers.clear();\r\n    attrObservers.clear();\r\n}\r\nconst inlineStyleCache = new WeakMap();\r\nconst svgInversionCache = new WeakSet();\r\nconst svgAnalysisConditionCache = new WeakMap();\r\nconst themeProps = [\"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"mode\"];\r\nfunction shouldAnalyzeSVGAsImage(svg) {\r\n    if (svgAnalysisConditionCache.has(svg)) {\r\n        return svgAnalysisConditionCache.get(svg);\r\n    }\r\n    const shouldAnalyze = Boolean(\r\n        svg &&\r\n            (svg.getAttribute(\"class\")?.includes(\"logo\") ||\r\n                svg.parentElement?.getAttribute(\"class\")?.includes(\"logo\"))\r\n    );\r\n    svgAnalysisConditionCache.set(svg, shouldAnalyze);\r\n    return shouldAnalyze;\r\n}\r\nfunction getInlineStyleCacheKey(el, theme) {\r\n    return INLINE_STYLE_ATTRS.map(\r\n        (attr) => `${attr}=\"${el.getAttribute(attr)}\"`\r\n    )\r\n        .concat(themeProps.map((prop) => `${prop}=\"${theme[prop]}\"`))\r\n        .join(\" \");\r\n}\r\nfunction shouldIgnoreInlineStyle(element, selectors) {\r\n    for (let i = 0, len = selectors.length; i < len; i++) {\r\n        const ingnoredSelector = selectors[i];\r\n        if (element.matches(ingnoredSelector)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction overrideInlineStyle(\r\n    element,\r\n    theme,\r\n    ignoreInlineSelectors,\r\n    ignoreImageSelectors\r\n) {\r\n    const cacheKey = getInlineStyleCacheKey(element, theme);\r\n    if (cacheKey === inlineStyleCache.get(element)) {\r\n        return;\r\n    }\r\n    const unsetProps = new Set(Object.keys(overrides));\r\n    function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {\r\n        const mod = getModifiableCSSDeclaration(\r\n            modifierCSSProp,\r\n            cssVal,\r\n            {style: element.style},\r\n            variablesStore,\r\n            ignoreImageSelectors,\r\n            null\r\n        );\r\n        if (!mod) {\r\n            return;\r\n        }\r\n        function setStaticValue(value) {\r\n            const {customProp, dataAttr} =\r\n                overrides[targetCSSProp] ?? shorthandOverrides[targetCSSProp];\r\n            element.style.setProperty(customProp, value);\r\n            if (!element.hasAttribute(dataAttr)) {\r\n                element.setAttribute(dataAttr, \"\");\r\n            }\r\n            unsetProps.delete(targetCSSProp);\r\n        }\r\n        function setVarDeclaration(mod) {\r\n            let prevDeclarations = [];\r\n            function setProps(declarations) {\r\n                prevDeclarations.forEach(({property}) => {\r\n                    element.style.removeProperty(property);\r\n                });\r\n                declarations.forEach(({property, value}) => {\r\n                    if (!(value instanceof Promise)) {\r\n                        element.style.setProperty(property, value);\r\n                    }\r\n                });\r\n                prevDeclarations = declarations;\r\n            }\r\n            setProps(mod.declarations);\r\n            mod.onTypeChange.addListener(setProps);\r\n        }\r\n        function setAsyncValue(promise, sourceValue) {\r\n            promise.then((value) => {\r\n                if (\r\n                    value &&\r\n                    targetCSSProp === \"background\" &&\r\n                    value.startsWith(\"var(--darkreader-bg--\")\r\n                ) {\r\n                    setStaticValue(value);\r\n                }\r\n                if (value && targetCSSProp === \"background-image\") {\r\n                    if (\r\n                        (element === document.documentElement ||\r\n                            element === document.body) &&\r\n                        value === sourceValue\r\n                    ) {\r\n                        value = \"none\";\r\n                    }\r\n                    setStaticValue(value);\r\n                }\r\n                inlineStyleCache.set(\r\n                    element,\r\n                    getInlineStyleCacheKey(element, theme)\r\n                );\r\n            });\r\n        }\r\n        const value =\r\n            typeof mod.value === \"function\" ? mod.value(theme) : mod.value;\r\n        if (typeof value === \"string\") {\r\n            setStaticValue(value);\r\n        } else if (value instanceof Promise) {\r\n            setAsyncValue(value, cssVal);\r\n        } else if (typeof value === \"object\") {\r\n            setVarDeclaration(value);\r\n        }\r\n    }\r\n    if (ignoreInlineSelectors.length > 0) {\r\n        if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {\r\n            unsetProps.forEach((cssProp) => {\r\n                element.removeAttribute(overrides[cssProp].dataAttr);\r\n            });\r\n            return;\r\n        }\r\n    }\r\n    const isSVGElement = element instanceof SVGElement;\r\n    const svg = isSVGElement\r\n        ? (element.ownerSVGElement ??\r\n          (element instanceof SVGSVGElement ? element : null))\r\n        : null;\r\n    if (isSVGElement && theme.mode === 1 && svg) {\r\n        if (svgInversionCache.has(svg)) {\r\n            return;\r\n        }\r\n        if (shouldAnalyzeSVGAsImage(svg)) {\r\n            svgInversionCache.add(svg);\r\n            const analyzeSVGAsImage = () => {\r\n                let svgString = svg.outerHTML;\r\n                svgString = svgString.replaceAll(\r\n                    '<style class=\"darkreader darkreader--sync\" media=\"screen\"></style>',\r\n                    \"\"\r\n                );\r\n                const dataURL = `data:image/svg+xml;base64,${btoa(svgString)}`;\r\n                getImageDetails(dataURL).then((details) => {\r\n                    if (\r\n                        (details.isDark && details.isTransparent) ||\r\n                        (details.isLarge &&\r\n                            details.isLight &&\r\n                            !details.isTransparent)\r\n                    ) {\r\n                        svg.setAttribute(\"data-darkreader-inline-invert\", \"\");\r\n                    } else {\r\n                        svg.removeAttribute(\"data-darkreader-inline-invert\");\r\n                    }\r\n                });\r\n            };\r\n            analyzeSVGAsImage();\r\n            if (!isDOMReady()) {\r\n                addDOMReadyListener(analyzeSVGAsImage);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    if (element.hasAttribute(\"bgcolor\")) {\r\n        let value = element.getAttribute(\"bgcolor\");\r\n        if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\r\n            value = `#${value}`;\r\n        }\r\n        setCustomProp(\"background-color\", \"background-color\", value);\r\n    }\r\n    if (\r\n        (element === document.documentElement || element === document.body) &&\r\n        element.hasAttribute(\"background\")\r\n    ) {\r\n        const url = getAbsoluteURL(\r\n            location.href,\r\n            element.getAttribute(\"background\") ?? \"\"\r\n        );\r\n        const value = `url(\"${url}\")`;\r\n        setCustomProp(\"background-image\", \"background-image\", value);\r\n    }\r\n    if (element.hasAttribute(\"color\") && element.rel !== \"mask-icon\") {\r\n        let value = element.getAttribute(\"color\");\r\n        if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\r\n            value = `#${value}`;\r\n        }\r\n        setCustomProp(\"color\", \"color\", value);\r\n    }\r\n    if (isSVGElement) {\r\n        if (element.hasAttribute(\"fill\")) {\r\n            const SMALL_SVG_LIMIT = 32;\r\n            const value = element.getAttribute(\"fill\");\r\n            if (value !== \"none\") {\r\n                if (!(element instanceof SVGTextElement)) {\r\n                    const handleSVGElement = () => {\r\n                        const {width, height} = element.getBoundingClientRect();\r\n                        const isBg =\r\n                            width > SMALL_SVG_LIMIT || height > SMALL_SVG_LIMIT;\r\n                        setCustomProp(\r\n                            \"fill\",\r\n                            isBg ? \"background-color\" : \"color\",\r\n                            value\r\n                        );\r\n                    };\r\n                    if (isReadyStateComplete()) {\r\n                        handleSVGElement();\r\n                    } else {\r\n                        addReadyStateCompleteListener(handleSVGElement);\r\n                    }\r\n                } else {\r\n                    setCustomProp(\"fill\", \"color\", value);\r\n                }\r\n            }\r\n        }\r\n        if (element.hasAttribute(\"stop-color\")) {\r\n            setCustomProp(\r\n                \"stop-color\",\r\n                \"background-color\",\r\n                element.getAttribute(\"stop-color\")\r\n            );\r\n        }\r\n    }\r\n    if (element.hasAttribute(\"stroke\")) {\r\n        const value = element.getAttribute(\"stroke\");\r\n        setCustomProp(\r\n            \"stroke\",\r\n            element instanceof SVGLineElement ||\r\n                element instanceof SVGTextElement\r\n                ? \"border-color\"\r\n                : \"color\",\r\n            value\r\n        );\r\n    }\r\n    element.style &&\r\n        iterateCSSDeclarations(element.style, (property, value) => {\r\n            if (property === \"background-image\" && value.includes(\"url\")) {\r\n                if (\r\n                    element === document.documentElement ||\r\n                    element === document.body\r\n                ) {\r\n                    setCustomProp(property, property, value);\r\n                }\r\n                return;\r\n            }\r\n            if (\r\n                overrides.hasOwnProperty(property) ||\r\n                (property.startsWith(\"--\") && !normalizedPropList[property])\r\n            ) {\r\n                setCustomProp(property, property, value);\r\n            } else if (shorthandOverrides[property] && value.includes(\"var(\")) {\r\n                setCustomProp(property, property, value);\r\n            } else {\r\n                const overriddenProp = normalizedPropList[property];\r\n                if (\r\n                    overriddenProp &&\r\n                    !element.style.getPropertyValue(overriddenProp) &&\r\n                    !element.hasAttribute(overriddenProp)\r\n                ) {\r\n                    if (\r\n                        overriddenProp === \"background-color\" &&\r\n                        element.hasAttribute(\"bgcolor\")\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    element.style.setProperty(property, \"\");\r\n                }\r\n            }\r\n        });\r\n    if (\r\n        element.style &&\r\n        element instanceof SVGTextElement &&\r\n        element.style.fill\r\n    ) {\r\n        setCustomProp(\"fill\", \"color\", element.style.getPropertyValue(\"fill\"));\r\n    }\r\n    if (element.getAttribute(\"style\")?.includes(\"--\")) {\r\n        variablesStore.addInlineStyleForMatching(element.style);\r\n    }\r\n    forEach(unsetProps, (cssProp) => {\r\n        element.removeAttribute(overrides[cssProp].dataAttr);\r\n    });\r\n    inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\r\n}\r\n\r\nconst metaThemeColorName = \"theme-color\";\r\nconst metaThemeColorSelector = `meta[name=\"${metaThemeColorName}\"]`;\r\nlet srcMetaThemeColor = null;\r\nlet observer = null;\r\nfunction changeMetaThemeColor(meta, theme) {\r\n    srcMetaThemeColor = srcMetaThemeColor || meta.content;\r\n    const color = parseColorWithCache(srcMetaThemeColor);\r\n    if (!color) {\r\n        logWarn(\"Invalid meta color\", color);\r\n        return;\r\n    }\r\n    meta.content = modifyBackgroundColor(color, theme, false);\r\n}\r\nfunction changeMetaThemeColorWhenAvailable(theme) {\r\n    const meta = document.querySelector(metaThemeColorSelector);\r\n    if (meta) {\r\n        changeMetaThemeColor(meta, theme);\r\n    } else {\r\n        if (observer) {\r\n            observer.disconnect();\r\n        }\r\n        observer = new MutationObserver((mutations) => {\r\n            loop: for (let i = 0; i < mutations.length; i++) {\r\n                const {addedNodes} = mutations[i];\r\n                for (let j = 0; j < addedNodes.length; j++) {\r\n                    const node = addedNodes[j];\r\n                    if (\r\n                        node instanceof HTMLMetaElement &&\r\n                        node.name === metaThemeColorName\r\n                    ) {\r\n                        observer.disconnect();\r\n                        observer = null;\r\n                        changeMetaThemeColor(node, theme);\r\n                        break loop;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        observer.observe(document.head, {childList: true});\r\n    }\r\n}\r\nfunction restoreMetaThemeColor() {\r\n    if (observer) {\r\n        observer.disconnect();\r\n        observer = null;\r\n    }\r\n    const meta = document.querySelector(metaThemeColorSelector);\r\n    if (meta && srcMetaThemeColor) {\r\n        meta.content = srcMetaThemeColor;\r\n    }\r\n}\r\n\r\nconst cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;\r\nfunction removeCSSComments(cssText) {\r\n    return cssText.replace(cssCommentsRegex, \"\");\r\n}\r\n\r\nlet canUseSheetProxy = false;\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => (canUseSheetProxy = true),\r\n    {once: true}\r\n);\r\nfunction createSheetWatcher(element, safeGetSheetRules, callback, isCancelled) {\r\n    let rafSheetWatcher = null;\r\n    function watchForSheetChanges() {\r\n        watchForSheetChangesUsingProxy();\r\n        if (!(canUseSheetProxy && element.sheet)) {\r\n            rafSheetWatcher = createRAFSheetWatcher(\r\n                element,\r\n                safeGetSheetRules,\r\n                callback,\r\n                isCancelled\r\n            );\r\n            rafSheetWatcher.start();\r\n        }\r\n    }\r\n    let areSheetChangesPending = false;\r\n    function onSheetChange() {\r\n        canUseSheetProxy = true;\r\n        rafSheetWatcher?.stop();\r\n        if (areSheetChangesPending) {\r\n            return;\r\n        }\r\n        function handleSheetChanges() {\r\n            areSheetChangesPending = false;\r\n            if (isCancelled()) {\r\n                return;\r\n            }\r\n            callback();\r\n        }\r\n        areSheetChangesPending = true;\r\n        queueMicrotask(handleSheetChanges);\r\n    }\r\n    function watchForSheetChangesUsingProxy() {\r\n        element.addEventListener(\"__darkreader__updateSheet\", onSheetChange);\r\n    }\r\n    function stopWatchingForSheetChangesUsingProxy() {\r\n        element.removeEventListener(\"__darkreader__updateSheet\", onSheetChange);\r\n    }\r\n    function stopWatchingForSheetChanges() {\r\n        stopWatchingForSheetChangesUsingProxy();\r\n        rafSheetWatcher?.stop();\r\n    }\r\n    return {\r\n        start: watchForSheetChanges,\r\n        stop: stopWatchingForSheetChanges\r\n    };\r\n}\r\nfunction createRAFSheetWatcher(\r\n    element,\r\n    safeGetSheetRules,\r\n    callback,\r\n    isCancelled\r\n) {\r\n    let rulesChangeKey = null;\r\n    let rulesCheckFrameId = null;\r\n    function getRulesChangeKey() {\r\n        const rules = safeGetSheetRules();\r\n        return rules ? rules.length : null;\r\n    }\r\n    function didRulesKeyChange() {\r\n        return getRulesChangeKey() !== rulesChangeKey;\r\n    }\r\n    function watchForSheetChangesUsingRAF() {\r\n        rulesChangeKey = getRulesChangeKey();\r\n        stopWatchingForSheetChangesUsingRAF();\r\n        const checkForUpdate = () => {\r\n            const cancelled = isCancelled();\r\n            if (!cancelled && didRulesKeyChange()) {\r\n                rulesChangeKey = getRulesChangeKey();\r\n                callback();\r\n            }\r\n            if (cancelled || (canUseSheetProxy && element.sheet)) {\r\n                stopWatchingForSheetChangesUsingRAF();\r\n                return;\r\n            }\r\n            rulesCheckFrameId = requestAnimationFrame(checkForUpdate);\r\n        };\r\n        checkForUpdate();\r\n    }\r\n    function stopWatchingForSheetChangesUsingRAF() {\r\n        rulesCheckFrameId && cancelAnimationFrame(rulesCheckFrameId);\r\n    }\r\n    return {\r\n        start: watchForSheetChangesUsingRAF,\r\n        stop: stopWatchingForSheetChangesUsingRAF\r\n    };\r\n}\r\n\r\nconst STYLE_SELECTOR = 'style, link[rel*=\"stylesheet\" i]:not([disabled])';\r\nfunction isFontsGoogleApiStyle(element) {\r\n    if (!element.href) {\r\n        return false;\r\n    }\r\n    try {\r\n        const elementURL = new URL(element.href);\r\n        return elementURL.hostname === \"fonts.googleapis.com\";\r\n    } catch (err) {\r\n        logInfo(`Couldn't construct ${element.href} as URL`);\r\n        return false;\r\n    }\r\n}\r\nconst hostsBreakingOnSVGStyleOverride = [\r\n    \"account.containerstore.com\",\r\n    \"containerstore.com\",\r\n    \"www.onet.pl\"\r\n];\r\nfunction shouldManageStyle(element) {\r\n    return (\r\n        (element instanceof HTMLStyleElement ||\r\n            (element instanceof SVGStyleElement &&\r\n                !hostsBreakingOnSVGStyleOverride.includes(location.hostname)) ||\r\n            (element instanceof HTMLLinkElement &&\r\n                Boolean(element.rel) &&\r\n                element.rel.toLowerCase().includes(\"stylesheet\") &&\r\n                Boolean(element.href) &&\r\n                !element.disabled &&\r\n                (isFirefox\r\n                    ? !element.href.startsWith(\"moz-extension://\")\r\n                    : true) &&\r\n                !isFontsGoogleApiStyle(element))) &&\r\n        !element.classList.contains(\"darkreader\") &&\r\n        element.media.toLowerCase() !== \"print\" &&\r\n        !element.classList.contains(\"stylus\")\r\n    );\r\n}\r\nfunction getManageableStyles(node, results = [], deep = true) {\r\n    if (shouldManageStyle(node)) {\r\n        results.push(node);\r\n    } else if (\r\n        node instanceof Element ||\r\n        (isShadowDomSupported && node instanceof ShadowRoot) ||\r\n        node === document\r\n    ) {\r\n        forEach(node.querySelectorAll(STYLE_SELECTOR), (style) =>\r\n            getManageableStyles(style, results, false)\r\n        );\r\n        if (deep) {\r\n            iterateShadowHosts(node, (host) =>\r\n                getManageableStyles(host.shadowRoot, results, false)\r\n            );\r\n        }\r\n    }\r\n    return results;\r\n}\r\nconst syncStyleSet = new WeakSet();\r\nconst corsStyleSet = new WeakSet();\r\nlet loadingLinkCounter = 0;\r\nconst rejectorsForLoadingLinks = new Map();\r\nfunction cleanLoadingLinks() {\r\n    rejectorsForLoadingLinks.clear();\r\n}\r\nfunction manageStyle(element, {update, loadingStart, loadingEnd}) {\r\n    const inMode = getStyleInjectionMode();\r\n    let corsCopy = null;\r\n    let syncStyle = null;\r\n    if (inMode === \"next\") {\r\n        const prevStyles = [];\r\n        let next = element;\r\n        while (\r\n            (next = next.nextElementSibling) &&\r\n            next.matches(\".darkreader\")\r\n        ) {\r\n            prevStyles.push(next);\r\n        }\r\n        corsCopy =\r\n            prevStyles.find(\r\n                (el) => el.matches(\".darkreader--cors\") && !corsStyleSet.has(el)\r\n            ) || null;\r\n        syncStyle =\r\n            prevStyles.find(\r\n                (el) => el.matches(\".darkreader--sync\") && !syncStyleSet.has(el)\r\n            ) || null;\r\n    }\r\n    let corsCopyPositionWatcher = null;\r\n    let syncStylePositionWatcher = null;\r\n    let cancelAsyncOperations = false;\r\n    let isOverrideEmpty = true;\r\n    const isAsyncCancelled = () => cancelAsyncOperations;\r\n    const sheetModifier = createStyleSheetModifier();\r\n    const observer = new MutationObserver((mutations) => {\r\n        if (\r\n            mutations.some((m) => m.type === \"characterData\") &&\r\n            containsCSSImport()\r\n        ) {\r\n            const cssText = (element.textContent ?? \"\").trim();\r\n            createOrUpdateCORSCopy(cssText, location.href).then(update);\r\n        } else {\r\n            update();\r\n        }\r\n    });\r\n    const observerOptions = {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: true,\r\n        characterData: true\r\n    };\r\n    function containsCSSImport() {\r\n        if (!(element instanceof HTMLStyleElement)) {\r\n            return false;\r\n        }\r\n        const cssText = removeCSSComments(element.textContent ?? \"\").trim();\r\n        return cssText.match(cssImportRegex);\r\n    }\r\n    function hasImports(cssRules, checkCrossOrigin) {\r\n        let result = false;\r\n        if (cssRules) {\r\n            let rule;\r\n            cssRulesLoop: for (let i = 0, len = cssRules.length; i < len; i++) {\r\n                rule = cssRules[i];\r\n                if (rule.href) {\r\n                    if (checkCrossOrigin) {\r\n                        if (\r\n                            !rule.href.startsWith(\r\n                                \"https://fonts.googleapis.com/\"\r\n                            ) &&\r\n                            rule.href.startsWith(\"http\") &&\r\n                            !rule.href.startsWith(location.origin)\r\n                        ) {\r\n                            result = true;\r\n                            break cssRulesLoop;\r\n                        }\r\n                    } else {\r\n                        result = true;\r\n                        break cssRulesLoop;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function getRulesSync() {\r\n        if (corsCopy) {\r\n            return corsCopy.sheet.cssRules;\r\n        }\r\n        if (containsCSSImport()) {\r\n            return null;\r\n        }\r\n        const cssRules = safeGetSheetRules();\r\n        if (\r\n            element instanceof HTMLLinkElement &&\r\n            !isRelativeHrefOnAbsolutePath(element.href) &&\r\n            hasImports(cssRules, false)\r\n        ) {\r\n            return null;\r\n        }\r\n        if (hasImports(cssRules, true)) {\r\n            return null;\r\n        }\r\n        !cssRules && logWarn(\"[getRulesSync] cssRules is null, trying again.\");\r\n        return cssRules;\r\n    }\r\n    function insertStyle() {\r\n        if (inMode === \"next\") {\r\n            if (corsCopy) {\r\n                if (element.nextSibling !== corsCopy) {\r\n                    element.parentNode.insertBefore(\r\n                        corsCopy,\r\n                        element.nextSibling\r\n                    );\r\n                }\r\n                if (corsCopy.nextSibling !== syncStyle) {\r\n                    element.parentNode.insertBefore(\r\n                        syncStyle,\r\n                        corsCopy.nextSibling\r\n                    );\r\n                }\r\n            } else if (element.nextSibling !== syncStyle) {\r\n                element.parentNode.insertBefore(syncStyle, element.nextSibling);\r\n            }\r\n        } else if (inMode === \"away\") {\r\n            if (corsCopy && !corsCopy.parentNode) {\r\n                injectStyleAway(corsCopy);\r\n            }\r\n            injectStyleAway(syncStyle);\r\n        }\r\n    }\r\n    function createSyncStyle() {\r\n        syncStyle =\r\n            element instanceof SVGStyleElement\r\n                ? document.createElementNS(\r\n                      \"http://www.w3.org/2000/svg\",\r\n                      \"style\"\r\n                  )\r\n                : document.createElement(\"style\");\r\n        syncStyle.classList.add(\"darkreader\");\r\n        syncStyle.classList.add(\"darkreader--sync\");\r\n        syncStyle.media = \"screen\";\r\n        if (element.title) {\r\n            syncStyle.title = element.title;\r\n        }\r\n        syncStyleSet.add(syncStyle);\r\n    }\r\n    let isLoadingRules = false;\r\n    let wasLoadingError = false;\r\n    const loadingLinkId = ++loadingLinkCounter;\r\n    async function getRulesAsync() {\r\n        let cssText;\r\n        let cssBasePath;\r\n        if (element instanceof HTMLLinkElement) {\r\n            let [cssRules, accessError] = getRulesOrError();\r\n            if (accessError) {\r\n                logWarn(accessError);\r\n            }\r\n            if (\r\n                (isSafari && !element.sheet) ||\r\n                (!isSafari && !cssRules && !accessError) ||\r\n                isStillLoadingError(accessError)\r\n            ) {\r\n                try {\r\n                    logInfo(\r\n                        `Linkelement ${loadingLinkId} is not loaded yet and thus will be await for`,\r\n                        element\r\n                    );\r\n                    await linkLoading(element, loadingLinkId);\r\n                } catch (err) {\r\n                    logWarn(err);\r\n                    wasLoadingError = true;\r\n                }\r\n                if (cancelAsyncOperations) {\r\n                    return null;\r\n                }\r\n                [cssRules, accessError] = getRulesOrError();\r\n                if (accessError) {\r\n                    logWarn(accessError);\r\n                }\r\n            }\r\n            if (cssRules) {\r\n                if (!hasImports(cssRules, false)) {\r\n                    return cssRules;\r\n                }\r\n            }\r\n            try {\r\n                cssText = await loadText(element.href);\r\n            } catch (err) {\r\n                logWarn(err);\r\n                cssText = \"\";\r\n            }\r\n            cssBasePath = getCSSBaseBath(element.href);\r\n            if (cancelAsyncOperations) {\r\n                return null;\r\n            }\r\n        } else if (containsCSSImport()) {\r\n            cssText = element.textContent.trim();\r\n            cssBasePath = getCSSBaseBath(location.href);\r\n        } else {\r\n            return null;\r\n        }\r\n        await createOrUpdateCORSCopy(cssText, cssBasePath);\r\n        if (corsCopy) {\r\n            return corsCopy.sheet.cssRules;\r\n        }\r\n        return null;\r\n    }\r\n    async function createOrUpdateCORSCopy(cssText, cssBasePath) {\r\n        if (cssText) {\r\n            try {\r\n                const fullCSSText = await replaceCSSImports(\r\n                    cssText,\r\n                    cssBasePath\r\n                );\r\n                if (corsCopy) {\r\n                    if (\r\n                        (corsCopy.textContent?.length ?? 0) < fullCSSText.length\r\n                    ) {\r\n                        corsCopy.textContent = fullCSSText;\r\n                    }\r\n                } else {\r\n                    corsCopy = createCORSCopy(\r\n                        fullCSSText,\r\n                        inMode === \"next\"\r\n                            ? (cc) =>\r\n                                  element.parentNode.insertBefore(\r\n                                      cc,\r\n                                      element.nextSibling\r\n                                  )\r\n                            : injectStyleAway\r\n                    );\r\n                    if (corsCopy) {\r\n                        if (inMode === \"next\") {\r\n                            element.parentNode.insertBefore(\r\n                                corsCopy,\r\n                                element.nextSibling\r\n                            );\r\n                        } else if (inMode === \"away\") {\r\n                            injectStyleAway(corsCopy);\r\n                        }\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                logWarn(err);\r\n            }\r\n            if (corsCopy && inMode === \"next\") {\r\n                corsCopyPositionWatcher = watchForNodePosition(\r\n                    corsCopy,\r\n                    \"prev-sibling\"\r\n                );\r\n            }\r\n        }\r\n    }\r\n    function details(options) {\r\n        const rules = getRulesSync();\r\n        if (!rules) {\r\n            if (options.secondRound) {\r\n                logWarn(\r\n                    \"Detected dead-lock at details(), returning early to prevent it.\"\r\n                );\r\n                return null;\r\n            }\r\n            if (isLoadingRules || wasLoadingError) {\r\n                return null;\r\n            }\r\n            isLoadingRules = true;\r\n            loadingStart();\r\n            getRulesAsync()\r\n                .then((results) => {\r\n                    isLoadingRules = false;\r\n                    loadingEnd();\r\n                    if (results) {\r\n                        update();\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    logWarn(err);\r\n                    isLoadingRules = false;\r\n                    loadingEnd();\r\n                });\r\n            return null;\r\n        }\r\n        return {rules};\r\n    }\r\n    let forceRenderStyle = false;\r\n    function render(theme, ignoreImageAnalysis) {\r\n        const rules = getRulesSync();\r\n        if (!rules) {\r\n            return;\r\n        }\r\n        cancelAsyncOperations = false;\r\n        function removeCSSRulesFromSheet(sheet) {\r\n            if (!sheet) {\r\n                return;\r\n            }\r\n            for (let i = sheet.cssRules.length - 1; i >= 0; i--) {\r\n                sheet.deleteRule(i);\r\n            }\r\n        }\r\n        function prepareOverridesSheet() {\r\n            if (!syncStyle) {\r\n                createSyncStyle();\r\n            }\r\n            syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n            insertStyle();\r\n            if (syncStyle.sheet == null) {\r\n                syncStyle.textContent = \"\";\r\n            }\r\n            const sheet = syncStyle.sheet;\r\n            removeCSSRulesFromSheet(sheet);\r\n            if (syncStylePositionWatcher) {\r\n                syncStylePositionWatcher.run();\r\n            } else if (inMode === \"next\") {\r\n                syncStylePositionWatcher = watchForNodePosition(\r\n                    syncStyle,\r\n                    \"prev-sibling\",\r\n                    () => {\r\n                        forceRenderStyle = true;\r\n                        buildOverrides();\r\n                    }\r\n                );\r\n            }\r\n            return syncStyle.sheet;\r\n        }\r\n        function buildOverrides() {\r\n            const force = forceRenderStyle;\r\n            forceRenderStyle = false;\r\n            sheetModifier.modifySheet({\r\n                prepareSheet: prepareOverridesSheet,\r\n                sourceCSSRules: rules,\r\n                theme,\r\n                ignoreImageAnalysis,\r\n                force,\r\n                isAsyncCancelled\r\n            });\r\n            isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;\r\n            if (sheetModifier.shouldRebuildStyle()) {\r\n                addReadyStateCompleteListener(() => update());\r\n            }\r\n        }\r\n        buildOverrides();\r\n    }\r\n    function getRulesOrError() {\r\n        try {\r\n            if (element.sheet == null) {\r\n                return [null, null];\r\n            }\r\n            return [element.sheet.cssRules, null];\r\n        } catch (err) {\r\n            return [null, err];\r\n        }\r\n    }\r\n    function isStillLoadingError(error) {\r\n        return error && error.message && error.message.includes(\"loading\");\r\n    }\r\n    function safeGetSheetRules() {\r\n        const [cssRules, err] = getRulesOrError();\r\n        if (err) {\r\n            logWarn(err);\r\n            return null;\r\n        }\r\n        return cssRules;\r\n    }\r\n    const sheetChangeWatcher = createSheetWatcher(\r\n        element,\r\n        safeGetSheetRules,\r\n        update,\r\n        isAsyncCancelled\r\n    );\r\n    function pause() {\r\n        observer.disconnect();\r\n        cancelAsyncOperations = true;\r\n        corsCopyPositionWatcher && corsCopyPositionWatcher.stop();\r\n        syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n        sheetChangeWatcher.stop();\r\n    }\r\n    function destroy() {\r\n        pause();\r\n        removeNode(corsCopy);\r\n        removeNode(syncStyle);\r\n        loadingEnd();\r\n        if (rejectorsForLoadingLinks.has(loadingLinkId)) {\r\n            const reject = rejectorsForLoadingLinks.get(loadingLinkId);\r\n            rejectorsForLoadingLinks.delete(loadingLinkId);\r\n            reject && reject();\r\n        }\r\n    }\r\n    function watch() {\r\n        observer.observe(element, observerOptions);\r\n        if (element instanceof HTMLStyleElement) {\r\n            sheetChangeWatcher.start();\r\n        }\r\n    }\r\n    const maxMoveCount = 10;\r\n    let moveCount = 0;\r\n    function restore() {\r\n        if (!syncStyle) {\r\n            return;\r\n        }\r\n        moveCount++;\r\n        if (moveCount > maxMoveCount) {\r\n            logWarn(\"Style sheet was moved multiple times\", element);\r\n            return;\r\n        }\r\n        logWarn(\"Restore style\", syncStyle, element);\r\n        insertStyle();\r\n        corsCopyPositionWatcher && corsCopyPositionWatcher.skip();\r\n        syncStylePositionWatcher && syncStylePositionWatcher.skip();\r\n        if (!isOverrideEmpty) {\r\n            forceRenderStyle = true;\r\n            update();\r\n        }\r\n    }\r\n    return {\r\n        details,\r\n        render,\r\n        pause,\r\n        destroy,\r\n        watch,\r\n        restore\r\n    };\r\n}\r\nasync function linkLoading(link, loadingId) {\r\n    return new Promise((resolve, reject) => {\r\n        const cleanUp = () => {\r\n            link.removeEventListener(\"load\", onLoad);\r\n            link.removeEventListener(\"error\", onError);\r\n            rejectorsForLoadingLinks.delete(loadingId);\r\n        };\r\n        const onLoad = () => {\r\n            cleanUp();\r\n            resolve();\r\n        };\r\n        const onError = () => {\r\n            cleanUp();\r\n            reject(`Linkelement ${loadingId} couldn't be loaded. ${link.href}`);\r\n        };\r\n        rejectorsForLoadingLinks.set(loadingId, () => {\r\n            cleanUp();\r\n            reject();\r\n        });\r\n        link.addEventListener(\"load\", onLoad, {passive: true});\r\n        link.addEventListener(\"error\", onError, {passive: true});\r\n        if (!link.href) {\r\n            onError();\r\n        }\r\n    });\r\n}\r\nfunction getCSSImportURL(importDeclaration) {\r\n    return getCSSURLValue(\r\n        importDeclaration\r\n            .substring(7)\r\n            .trim()\r\n            .replace(/;$/, \"\")\r\n            .replace(/screen$/, \"\")\r\n    );\r\n}\r\nasync function loadText(url) {\r\n    if (url.startsWith(\"data:\")) {\r\n        return await (await fetch(url)).text();\r\n    }\r\n    const cache = readCSSFetchCache(url);\r\n    if (cache) {\r\n        return cache;\r\n    }\r\n    const parsedURL = new URL(url);\r\n    let text;\r\n    if (parsedURL.origin === location.origin) {\r\n        text = await loadAsText(url, \"text/css\", location.origin);\r\n    } else {\r\n        text = await bgFetch({\r\n            url,\r\n            responseType: \"text\",\r\n            mimeType: \"text/css\",\r\n            origin: location.origin\r\n        });\r\n    }\r\n    writeCSSFetchCache(url, text);\r\n    return text;\r\n}\r\nasync function replaceCSSImports(cssText, basePath, cache = new Map()) {\r\n    cssText = removeCSSComments(cssText);\r\n    cssText = replaceCSSFontFace(cssText);\r\n    cssText = replaceCSSRelativeURLsWithAbsolute(cssText, basePath);\r\n    const importMatches = getMatchesWithOffsets(cssImportRegex, cssText);\r\n    let prev = null;\r\n    let shouldIgnoreImportsInBetween = false;\r\n    let diff = 0;\r\n    for (const match of importMatches) {\r\n        let importedCSS;\r\n        const prevImportEnd = prev ? prev.offset + prev.text.length : 0;\r\n        const nextImportStart = match.offset;\r\n        const openBraceIndex = cssText.indexOf(\"{\", prevImportEnd);\r\n        const closeBraceIndex = cssText.indexOf(\"}\", prevImportEnd);\r\n        if (\r\n            shouldIgnoreImportsInBetween ||\r\n            (openBraceIndex >= 0 &&\r\n                openBraceIndex < nextImportStart &&\r\n                closeBraceIndex >= 0 &&\r\n                closeBraceIndex < nextImportStart)\r\n        ) {\r\n            shouldIgnoreImportsInBetween = true;\r\n            importedCSS = \"\";\r\n        } else {\r\n            const importURL = getCSSImportURL(match.text);\r\n            const absoluteURL = getAbsoluteURL(basePath, importURL);\r\n            if (cache.has(absoluteURL)) {\r\n                importedCSS = cache.get(absoluteURL);\r\n            } else {\r\n                try {\r\n                    importedCSS = await loadText(absoluteURL);\r\n                    cache.set(absoluteURL, importedCSS);\r\n                    importedCSS = await replaceCSSImports(\r\n                        importedCSS,\r\n                        getCSSBaseBath(absoluteURL),\r\n                        cache\r\n                    );\r\n                } catch (err) {\r\n                    logWarn(err);\r\n                    importedCSS = \"\";\r\n                }\r\n            }\r\n        }\r\n        cssText =\r\n            cssText.substring(0, match.offset + diff) +\r\n            importedCSS +\r\n            cssText.substring(match.offset + match.text.length + diff);\r\n        diff += importedCSS.length - match.text.length;\r\n        prev = match;\r\n    }\r\n    cssText = cssText.trim();\r\n    return cssText;\r\n}\r\nfunction createCORSCopy(cssText, inject) {\r\n    if (!cssText) {\r\n        return null;\r\n    }\r\n    const cors = document.createElement(\"style\");\r\n    cors.classList.add(\"darkreader\");\r\n    cors.classList.add(\"darkreader--cors\");\r\n    cors.media = \"screen\";\r\n    cors.textContent = cssText;\r\n    inject(cors);\r\n    cors.sheet.disabled = true;\r\n    corsStyleSet.add(cors);\r\n    return cors;\r\n}\r\n\r\nfunction injectProxy(enableStyleSheetsProxy, enableCustomElementRegistryProxy) {\r\n    document.dispatchEvent(\r\n        new CustomEvent(\"__darkreader__inlineScriptsAllowed\")\r\n    );\r\n    const cleaners = [];\r\n    function cleanUp() {\r\n        cleaners.forEach((clean) => clean());\r\n        cleaners.splice(0);\r\n    }\r\n    function documentEventListener(type, listener, options) {\r\n        document.addEventListener(type, listener, options);\r\n        cleaners.push(() => document.removeEventListener(type, listener));\r\n    }\r\n    function disableConflictingPlugins() {\r\n        const disableWPDarkMode = () => {\r\n            if (window?.WPDarkMode?.deactivate) {\r\n                window.WPDarkMode.deactivate();\r\n            }\r\n        };\r\n        disableWPDarkMode();\r\n    }\r\n    documentEventListener(\"__darkreader__cleanUp\", cleanUp);\r\n    documentEventListener(\r\n        \"__darkreader__disableConflictingPlugins\",\r\n        disableConflictingPlugins\r\n    );\r\n    function overrideProperty(cls, prop, overrides) {\r\n        const proto = cls.prototype;\r\n        const oldDescriptor = Object.getOwnPropertyDescriptor(proto, prop);\r\n        if (!oldDescriptor) {\r\n            return;\r\n        }\r\n        const newDescriptor = {...oldDescriptor};\r\n        Object.keys(overrides).forEach((key) => {\r\n            const factory = overrides[key];\r\n            newDescriptor[key] = factory(oldDescriptor[key]);\r\n        });\r\n        Object.defineProperty(proto, prop, newDescriptor);\r\n        cleaners.push(() => Object.defineProperty(proto, prop, oldDescriptor));\r\n    }\r\n    function override(cls, prop, factory) {\r\n        overrideProperty(cls, prop, {value: factory});\r\n    }\r\n    function isDRElement(element) {\r\n        return element?.classList?.contains(\"darkreader\");\r\n    }\r\n    function isDRSheet(sheet) {\r\n        return isDRElement(sheet.ownerNode);\r\n    }\r\n    const updateSheetEvent = new CustomEvent(\"__darkreader__updateSheet\");\r\n    const adoptedSheetChangeEvent = new CustomEvent(\r\n        \"__darkreader__adoptedStyleSheetChange\"\r\n    );\r\n    const shadowDomAttachingEvent = new CustomEvent(\r\n        \"__darkreader__shadowDomAttaching\",\r\n        {bubbles: true}\r\n    );\r\n    const adoptedSheetOwners = new WeakMap();\r\n    const adoptedDeclarationSheets = new WeakMap();\r\n    function onAdoptedSheetChange(sheet) {\r\n        const owners = adoptedSheetOwners.get(sheet);\r\n        owners?.forEach((node) => {\r\n            if (node.isConnected) {\r\n                node.dispatchEvent(adoptedSheetChangeEvent);\r\n            } else {\r\n                owners.delete(node);\r\n            }\r\n        });\r\n    }\r\n    function reportSheetChange(sheet) {\r\n        if (sheet.ownerNode && !isDRSheet(sheet)) {\r\n            sheet.ownerNode.dispatchEvent(updateSheetEvent);\r\n        }\r\n        if (adoptedSheetOwners.has(sheet)) {\r\n            onAdoptedSheetChange(sheet);\r\n        }\r\n    }\r\n    function reportSheetChangeAsync(sheet, promise) {\r\n        const {ownerNode} = sheet;\r\n        if (\r\n            ownerNode &&\r\n            !isDRSheet(sheet) &&\r\n            promise &&\r\n            promise instanceof Promise\r\n        ) {\r\n            promise.then(() => ownerNode.dispatchEvent(updateSheetEvent));\r\n        }\r\n        if (adoptedSheetOwners.has(sheet)) {\r\n            if (promise && promise instanceof Promise) {\r\n                promise.then(() => onAdoptedSheetChange(sheet));\r\n            }\r\n        }\r\n    }\r\n    override(\r\n        CSSStyleSheet,\r\n        \"addRule\",\r\n        (native) =>\r\n            function (selector, style, index) {\r\n                native.call(this, selector, style, index);\r\n                reportSheetChange(this);\r\n                return -1;\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"insertRule\",\r\n        (native) =>\r\n            function (rule, index) {\r\n                const returnValue = native.call(this, rule, index);\r\n                reportSheetChange(this);\r\n                return returnValue;\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"deleteRule\",\r\n        (native) =>\r\n            function (index) {\r\n                native.call(this, index);\r\n                reportSheetChange(this);\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"removeRule\",\r\n        (native) =>\r\n            function (index) {\r\n                native.call(this, index);\r\n                reportSheetChange(this);\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"replace\",\r\n        (native) =>\r\n            function (cssText) {\r\n                const returnValue = native.call(this, cssText);\r\n                reportSheetChangeAsync(this, returnValue);\r\n                return returnValue;\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"replaceSync\",\r\n        (native) =>\r\n            function (cssText) {\r\n                native.call(this, cssText);\r\n                reportSheetChange(this);\r\n            }\r\n    );\r\n    override(\r\n        Element,\r\n        \"attachShadow\",\r\n        (native) =>\r\n            function (options) {\r\n                this.dispatchEvent(shadowDomAttachingEvent);\r\n                return native.call(this, options);\r\n            }\r\n    );\r\n    const shouldWrapHTMLElement =\r\n        location.hostname === \"baidu.com\" ||\r\n        location.hostname.endsWith(\".baidu.com\");\r\n    if (shouldWrapHTMLElement) {\r\n        override(\r\n            Element,\r\n            \"getElementsByTagName\",\r\n            (native) =>\r\n                function (tagName) {\r\n                    if (tagName !== \"style\") {\r\n                        return native.call(this, tagName);\r\n                    }\r\n                    const getCurrentElementValue = () => {\r\n                        const elements = native.call(this, tagName);\r\n                        return Object.setPrototypeOf(\r\n                            [...elements].filter(\r\n                                (element) => element && !isDRElement(element)\r\n                            ),\r\n                            NodeList.prototype\r\n                        );\r\n                    };\r\n                    let elements = getCurrentElementValue();\r\n                    const nodeListBehavior = {\r\n                        get: function (_, property) {\r\n                            return getCurrentElementValue()[\r\n                                Number(property) || property\r\n                            ];\r\n                        }\r\n                    };\r\n                    elements = new Proxy(elements, nodeListBehavior);\r\n                    return elements;\r\n                }\r\n        );\r\n    }\r\n    const shouldProxyChildNodes = [\"brilliant.org\", \"www.vy.no\"].includes(\r\n        location.hostname\r\n    );\r\n    if (shouldProxyChildNodes) {\r\n        overrideProperty(Node, \"childNodes\", {\r\n            get: (native) =>\r\n                function () {\r\n                    const childNodes = native.call(this);\r\n                    return Object.setPrototypeOf(\r\n                        [...childNodes].filter((element) => {\r\n                            return !isDRElement(element);\r\n                        }),\r\n                        NodeList.prototype\r\n                    );\r\n                }\r\n        });\r\n    }\r\n    function resolveCustomElement(tag) {\r\n        customElements.whenDefined(tag).then(() => {\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__isDefined\", {detail: {tag}})\r\n            );\r\n        });\r\n    }\r\n    documentEventListener(\"__darkreader__addUndefinedResolver\", (e) =>\r\n        resolveCustomElement(e.detail.tag)\r\n    );\r\n    if (enableCustomElementRegistryProxy) {\r\n        override(\r\n            CustomElementRegistry,\r\n            \"define\",\r\n            (native) =>\r\n                function (name, constructor, options) {\r\n                    resolveCustomElement(name);\r\n                    native.call(this, name, constructor, options);\r\n                }\r\n        );\r\n    }\r\n    let blobURLAllowed = null;\r\n    function checkBlobURLSupport() {\r\n        if (blobURLAllowed != null) {\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\r\n                    detail: {blobURLAllowed}\r\n                })\r\n            );\r\n            return;\r\n        }\r\n        const svg =\r\n            '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1\" height=\"1\"><rect width=\"1\" height=\"1\" fill=\"transparent\"/></svg>';\r\n        const bytes = new Uint8Array(svg.length);\r\n        for (let i = 0; i < svg.length; i++) {\r\n            bytes[i] = svg.charCodeAt(i);\r\n        }\r\n        const blob = new Blob([bytes], {type: \"image/svg+xml\"});\r\n        const objectURL = URL.createObjectURL(blob);\r\n        const image = new Image();\r\n        image.onload = () => {\r\n            blobURLAllowed = true;\r\n            sendBlobURLCheckResponse();\r\n        };\r\n        image.onerror = () => {\r\n            blobURLAllowed = false;\r\n            sendBlobURLCheckResponse();\r\n        };\r\n        image.src = objectURL;\r\n    }\r\n    function sendBlobURLCheckResponse() {\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\r\n                detail: {blobURLAllowed}\r\n            })\r\n        );\r\n    }\r\n    documentEventListener(\r\n        \"__darkreader__blobURLCheckRequest\",\r\n        checkBlobURLSupport\r\n    );\r\n    if (enableStyleSheetsProxy) {\r\n        overrideProperty(Document, \"styleSheets\", {\r\n            get: (native) =>\r\n                function () {\r\n                    const getCurrentValue = () => {\r\n                        const docSheets = native.call(this);\r\n                        const filteredSheets = [...docSheets].filter(\r\n                            (styleSheet) =>\r\n                                styleSheet.ownerNode && !isDRSheet(styleSheet)\r\n                        );\r\n                        filteredSheets.item = (item) => filteredSheets[item];\r\n                        return Object.setPrototypeOf(\r\n                            filteredSheets,\r\n                            StyleSheetList.prototype\r\n                        );\r\n                    };\r\n                    let elements = getCurrentValue();\r\n                    const styleSheetListBehavior = {\r\n                        get: function (_, property) {\r\n                            return getCurrentValue()[property];\r\n                        }\r\n                    };\r\n                    elements = new Proxy(elements, styleSheetListBehavior);\r\n                    return elements;\r\n                }\r\n        });\r\n    }\r\n    {\r\n        const adoptedSheetsSourceProxies = new WeakMap();\r\n        const adoptedSheetsProxySources = new WeakMap();\r\n        const adoptedSheetsChangeEvent = new CustomEvent(\r\n            \"__darkreader__adoptedStyleSheetsChange\"\r\n        );\r\n        const adoptedSheetOverrideCache = new WeakSet();\r\n        const adoptedSheetsSnapshots = new WeakMap();\r\n        const isDRAdoptedSheetOverride = (sheet) => {\r\n            if (!sheet || !sheet.cssRules) {\r\n                return false;\r\n            }\r\n            if (adoptedSheetOverrideCache.has(sheet)) {\r\n                return true;\r\n            }\r\n            if (\r\n                sheet.cssRules.length > 0 &&\r\n                sheet.cssRules[0].cssText.startsWith(\r\n                    \"#__darkreader__adoptedOverride\"\r\n                )\r\n            ) {\r\n                adoptedSheetOverrideCache.add(sheet);\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        const areArraysEqual = (a, b) => {\r\n            return a.length === b.length && a.every((x, i) => x === b[i]);\r\n        };\r\n        const onAdoptedSheetsChange = (node) => {\r\n            const prev = adoptedSheetsSnapshots.get(node);\r\n            const curr = (node.adoptedStyleSheets || []).filter(\r\n                (s) => !isDRAdoptedSheetOverride(s)\r\n            );\r\n            adoptedSheetsSnapshots.set(node, curr);\r\n            if (!prev || !areArraysEqual(prev, curr)) {\r\n                curr.forEach((sheet) => {\r\n                    if (!adoptedSheetOwners.has(sheet)) {\r\n                        adoptedSheetOwners.set(sheet, new Set());\r\n                    }\r\n                    adoptedSheetOwners.get(sheet).add(node);\r\n                    for (const rule of sheet.cssRules) {\r\n                        const declaration = rule.style;\r\n                        if (declaration) {\r\n                            adoptedDeclarationSheets.set(declaration, sheet);\r\n                        }\r\n                    }\r\n                });\r\n                node.dispatchEvent(adoptedSheetsChangeEvent);\r\n            }\r\n        };\r\n        const proxyAdoptedSheetsArray = (node, source) => {\r\n            if (adoptedSheetsProxySources.has(source)) {\r\n                return source;\r\n            }\r\n            if (adoptedSheetsSourceProxies.has(source)) {\r\n                return adoptedSheetsSourceProxies.get(source);\r\n            }\r\n            const proxy = new Proxy(source, {\r\n                deleteProperty(target, property) {\r\n                    delete target[property];\r\n                    return true;\r\n                },\r\n                set(target, property, value) {\r\n                    target[property] = value;\r\n                    if (property === \"length\") {\r\n                        onAdoptedSheetsChange(node);\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n            adoptedSheetsSourceProxies.set(source, proxy);\r\n            adoptedSheetsProxySources.set(proxy, source);\r\n            return proxy;\r\n        };\r\n        [Document, ShadowRoot].forEach((ctor) => {\r\n            overrideProperty(ctor, \"adoptedStyleSheets\", {\r\n                get: (native) =>\r\n                    function () {\r\n                        const source = native.call(this);\r\n                        return proxyAdoptedSheetsArray(this, source);\r\n                    },\r\n                set: (native) =>\r\n                    function (source) {\r\n                        if (adoptedSheetsProxySources.has(source)) {\r\n                            source = adoptedSheetsProxySources.get(source);\r\n                        }\r\n                        native.call(this, source);\r\n                        onAdoptedSheetsChange(this);\r\n                    }\r\n            });\r\n        });\r\n        const adoptedDeclarationChangeEvent = new CustomEvent(\r\n            \"__darkreader__adoptedStyleDeclarationChange\"\r\n        );\r\n        [\"setProperty\", \"removeProperty\"].forEach((key) => {\r\n            override(CSSStyleDeclaration, key, (native) => {\r\n                return function (...args) {\r\n                    const returnValue = native.apply(this, args);\r\n                    const sheet = adoptedDeclarationSheets.get(this);\r\n                    if (sheet) {\r\n                        const owners = adoptedSheetOwners.get(sheet);\r\n                        if (owners) {\r\n                            owners.forEach((node) => {\r\n                                node.dispatchEvent(\r\n                                    adoptedDeclarationChangeEvent\r\n                                );\r\n                            });\r\n                        }\r\n                    }\r\n                    return returnValue;\r\n                };\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nconst definedCustomElements = new Set();\r\nconst undefinedGroups = new Map();\r\nlet elementsDefinitionCallback;\r\nfunction isCustomElement(element) {\r\n    if (element.tagName.includes(\"-\") || element.getAttribute(\"is\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction recordUndefinedElement(element) {\r\n    let tag = element.tagName.toLowerCase();\r\n    if (!tag.includes(\"-\")) {\r\n        const extendedTag = element.getAttribute(\"is\");\r\n        if (extendedTag) {\r\n            tag = extendedTag;\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n    if (!undefinedGroups.has(tag)) {\r\n        undefinedGroups.set(tag, new Set());\r\n        customElementsWhenDefined(tag).then(() => {\r\n            if (elementsDefinitionCallback) {\r\n                const elements = undefinedGroups.get(tag);\r\n                ASSERT(\r\n                    \"recordUndefinedElement() undefined groups should not be empty\",\r\n                    elements\r\n                );\r\n                undefinedGroups.delete(tag);\r\n                elementsDefinitionCallback(Array.from(elements));\r\n            }\r\n        });\r\n    }\r\n    undefinedGroups.get(tag).add(element);\r\n}\r\nfunction collectUndefinedElements(root) {\r\n    if (!isDefinedSelectorSupported) {\r\n        return;\r\n    }\r\n    forEach(root.querySelectorAll(\":not(:defined)\"), recordUndefinedElement);\r\n}\r\nlet canOptimizeUsingProxy = false;\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => {\r\n        canOptimizeUsingProxy = true;\r\n    },\r\n    {once: true, passive: true}\r\n);\r\nconst unhandledShadowHosts = new Set();\r\ndocument.addEventListener(\"__darkreader__shadowDomAttaching\", (e) => {\r\n    const host = e.target;\r\n    if (unhandledShadowHosts.size === 0) {\r\n        queueMicrotask(() => {\r\n            const hosts = [...unhandledShadowHosts].filter(\r\n                (el) => el.shadowRoot\r\n            );\r\n            elementsDefinitionCallback?.(hosts);\r\n            unhandledShadowHosts.clear();\r\n        });\r\n    }\r\n    unhandledShadowHosts.add(host);\r\n});\r\nconst resolvers = new Map();\r\nfunction handleIsDefined(e) {\r\n    canOptimizeUsingProxy = true;\r\n    const tag = e.detail.tag;\r\n    ASSERT(\r\n        \"handleIsDefined() expects lower-case node names\",\r\n        () => tag.toLowerCase() === tag\r\n    );\r\n    definedCustomElements.add(tag);\r\n    if (resolvers.has(tag)) {\r\n        const r = resolvers.get(tag);\r\n        resolvers.delete(tag);\r\n        r.forEach((r) => r());\r\n    }\r\n}\r\nasync function customElementsWhenDefined(tag) {\r\n    ASSERT(\r\n        \"customElementsWhenDefined() expects lower-case node names\",\r\n        () => tag.toLowerCase() === tag\r\n    );\r\n    if (definedCustomElements.has(tag)) {\r\n        return;\r\n    }\r\n    return new Promise((resolve) => {\r\n        if (\r\n            window.customElements &&\r\n            typeof customElements.whenDefined === \"function\"\r\n        ) {\r\n            customElements.whenDefined(tag).then(() => resolve());\r\n        } else if (canOptimizeUsingProxy) {\r\n            if (resolvers.has(tag)) {\r\n                resolvers.get(tag).push(resolve);\r\n            } else {\r\n                resolvers.set(tag, [resolve]);\r\n            }\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__addUndefinedResolver\", {\r\n                    detail: {tag}\r\n                })\r\n            );\r\n        } else {\r\n            const checkIfDefined = () => {\r\n                const elements = undefinedGroups.get(tag);\r\n                if (elements && elements.size > 0) {\r\n                    if (elements.values().next().value.matches(\":defined\")) {\r\n                        resolve();\r\n                    } else {\r\n                        requestAnimationFrame(checkIfDefined);\r\n                    }\r\n                }\r\n            };\r\n            requestAnimationFrame(checkIfDefined);\r\n        }\r\n    });\r\n}\r\nfunction watchWhenCustomElementsDefined(callback) {\r\n    elementsDefinitionCallback = callback;\r\n}\r\nfunction unsubscribeFromDefineCustomElements() {\r\n    elementsDefinitionCallback = null;\r\n    undefinedGroups.clear();\r\n    document.removeEventListener(\"__darkreader__isDefined\", handleIsDefined);\r\n}\r\n\r\nconst observers = [];\r\nlet observedRoots;\r\nlet handledShadowHosts;\r\nfunction watchForStylePositions(currentStyles, update, shadowRootDiscovered) {\r\n    stopWatchingForStylePositions();\r\n    const prevStylesByRoot = new WeakMap();\r\n    const getPrevStyles = (root) => {\r\n        if (!prevStylesByRoot.has(root)) {\r\n            prevStylesByRoot.set(root, new Set());\r\n        }\r\n        return prevStylesByRoot.get(root);\r\n    };\r\n    currentStyles.forEach((node) => {\r\n        let root = node;\r\n        while ((root = root.parentNode)) {\r\n            if (\r\n                root === document ||\r\n                root.nodeType === Node.DOCUMENT_FRAGMENT_NODE\r\n            ) {\r\n                const prevStyles = getPrevStyles(root);\r\n                prevStyles.add(node);\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    const prevStyleSiblings = new WeakMap();\r\n    const nextStyleSiblings = new WeakMap();\r\n    function saveStylePosition(style) {\r\n        prevStyleSiblings.set(style, style.previousElementSibling);\r\n        nextStyleSiblings.set(style, style.nextElementSibling);\r\n    }\r\n    function forgetStylePosition(style) {\r\n        prevStyleSiblings.delete(style);\r\n        nextStyleSiblings.delete(style);\r\n    }\r\n    function didStylePositionChange(style) {\r\n        return (\r\n            style.previousElementSibling !== prevStyleSiblings.get(style) ||\r\n            style.nextElementSibling !== nextStyleSiblings.get(style)\r\n        );\r\n    }\r\n    currentStyles.forEach(saveStylePosition);\r\n    function handleStyleOperations(root, operations) {\r\n        const {createdStyles, removedStyles, movedStyles} = operations;\r\n        createdStyles.forEach((s) => saveStylePosition(s));\r\n        movedStyles.forEach((s) => saveStylePosition(s));\r\n        removedStyles.forEach((s) => forgetStylePosition(s));\r\n        const prevStyles = getPrevStyles(root);\r\n        createdStyles.forEach((s) => prevStyles.add(s));\r\n        removedStyles.forEach((s) => prevStyles.delete(s));\r\n        if (createdStyles.size + removedStyles.size + movedStyles.size > 0) {\r\n            update({\r\n                created: Array.from(createdStyles),\r\n                removed: Array.from(removedStyles),\r\n                moved: Array.from(movedStyles),\r\n                updated: []\r\n            });\r\n        }\r\n    }\r\n    function handleMinorTreeMutations(root, {additions, moves, deletions}) {\r\n        const createdStyles = new Set();\r\n        const removedStyles = new Set();\r\n        const movedStyles = new Set();\r\n        additions.forEach((node) =>\r\n            getManageableStyles(node).forEach((style) =>\r\n                createdStyles.add(style)\r\n            )\r\n        );\r\n        deletions.forEach((node) =>\r\n            getManageableStyles(node).forEach((style) =>\r\n                removedStyles.add(style)\r\n            )\r\n        );\r\n        moves.forEach((node) =>\r\n            getManageableStyles(node).forEach((style) => movedStyles.add(style))\r\n        );\r\n        handleStyleOperations(root, {\r\n            createdStyles,\r\n            removedStyles,\r\n            movedStyles\r\n        });\r\n        additions.forEach((n) => {\r\n            deepObserve(n);\r\n            collectUndefinedElements(n);\r\n        });\r\n        additions.forEach(\r\n            (node) => isCustomElement(node) && recordUndefinedElement(node)\r\n        );\r\n        additions.forEach((node) => checkImageSelectors(node));\r\n    }\r\n    function handleHugeTreeMutations(root) {\r\n        const styles = new Set(getManageableStyles(root));\r\n        const createdStyles = new Set();\r\n        const removedStyles = new Set();\r\n        const movedStyles = new Set();\r\n        const prevStyles = getPrevStyles(root);\r\n        styles.forEach((s) => {\r\n            if (!prevStyles.has(s)) {\r\n                createdStyles.add(s);\r\n            }\r\n        });\r\n        prevStyles.forEach((s) => {\r\n            if (!styles.has(s)) {\r\n                removedStyles.add(s);\r\n            }\r\n        });\r\n        styles.forEach((s) => {\r\n            if (\r\n                !createdStyles.has(s) &&\r\n                !removedStyles.has(s) &&\r\n                didStylePositionChange(s)\r\n            ) {\r\n                movedStyles.add(s);\r\n            }\r\n        });\r\n        handleStyleOperations(root, {\r\n            createdStyles,\r\n            removedStyles,\r\n            movedStyles\r\n        });\r\n        deepObserve(root);\r\n        collectUndefinedElements(root);\r\n        checkImageSelectors(root);\r\n    }\r\n    function handleAttributeMutations(mutations) {\r\n        const updatedStyles = new Set();\r\n        const removedStyles = new Set();\r\n        mutations.forEach((m) => {\r\n            const {target} = m;\r\n            if (target.isConnected) {\r\n                if (shouldManageStyle(target)) {\r\n                    updatedStyles.add(target);\r\n                } else if (\r\n                    target instanceof HTMLLinkElement &&\r\n                    target.disabled\r\n                ) {\r\n                    removedStyles.add(target);\r\n                }\r\n            }\r\n        });\r\n        if (updatedStyles.size + removedStyles.size > 0) {\r\n            update({\r\n                updated: Array.from(updatedStyles),\r\n                created: [],\r\n                removed: Array.from(removedStyles),\r\n                moved: []\r\n            });\r\n        }\r\n    }\r\n    function observe(root) {\r\n        if (observedRoots.has(root)) {\r\n            return;\r\n        }\r\n        const treeObserver = createOptimizedTreeObserver(root, {\r\n            onMinorMutations: handleMinorTreeMutations,\r\n            onHugeMutations: handleHugeTreeMutations\r\n        });\r\n        const attrObserver = new MutationObserver(handleAttributeMutations);\r\n        attrObserver.observe(root, {\r\n            attributeFilter: [\"rel\", \"disabled\", \"media\", \"href\"],\r\n            subtree: true\r\n        });\r\n        observers.push(treeObserver, attrObserver);\r\n        observedRoots.add(root);\r\n    }\r\n    function subscribeForShadowRootChanges(node) {\r\n        const {shadowRoot} = node;\r\n        if (shadowRoot == null || observedRoots.has(shadowRoot)) {\r\n            return;\r\n        }\r\n        observe(shadowRoot);\r\n        shadowRootDiscovered(shadowRoot);\r\n    }\r\n    function deepObserve(node) {\r\n        iterateShadowHosts(node, subscribeForShadowRootChanges);\r\n    }\r\n    observe(document);\r\n    deepObserve(document.documentElement);\r\n    watchWhenCustomElementsDefined((hosts) => {\r\n        hosts = hosts.filter((node) => !handledShadowHosts.has(node));\r\n        const newStyles = [];\r\n        hosts.forEach((host) =>\r\n            push(newStyles, getManageableStyles(host.shadowRoot))\r\n        );\r\n        update({created: newStyles, updated: [], removed: [], moved: []});\r\n        hosts.forEach((host) => {\r\n            const {shadowRoot} = host;\r\n            if (shadowRoot == null) {\r\n                return;\r\n            }\r\n            subscribeForShadowRootChanges(host);\r\n            deepObserve(shadowRoot);\r\n            collectUndefinedElements(shadowRoot);\r\n        });\r\n        hosts.forEach((node) => handledShadowHosts.add(node));\r\n    });\r\n    document.addEventListener(\"__darkreader__isDefined\", handleIsDefined);\r\n    collectUndefinedElements(document);\r\n}\r\nfunction resetObservers() {\r\n    observers.forEach((o) => o.disconnect());\r\n    observers.splice(0, observers.length);\r\n    observedRoots = new WeakSet();\r\n    handledShadowHosts = new WeakSet();\r\n}\r\nfunction stopWatchingForStylePositions() {\r\n    resetObservers();\r\n    unsubscribeFromDefineCustomElements();\r\n}\r\n\r\nfunction watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {\r\n    watchForStylePositions(currentStyles, update, shadowRootDiscovered);\r\n}\r\nfunction stopWatchingForStyleChanges() {\r\n    stopWatchingForStylePositions();\r\n}\r\n\r\nconst INSTANCE_ID = generateUID();\r\nconst styleManagers = new Map();\r\nconst adoptedStyleManagers = [];\r\nconst adoptedStyleFallbacks = new Map();\r\nconst adoptedStyleChangeTokens = new WeakMap();\r\nlet theme = null;\r\nlet fixes = null;\r\nlet isIFrame$1 = null;\r\nlet ignoredImageAnalysisSelectors = [];\r\nlet ignoredInlineSelectors = [];\r\nlet staticStyleMap = new WeakMap();\r\nfunction createOrUpdateStyle(className, root = document.head || document) {\r\n    let element = root.querySelector(`.${className}`);\r\n    if (!staticStyleMap.has(root)) {\r\n        staticStyleMap.set(root, new Map());\r\n    }\r\n    const classMap = staticStyleMap.get(root);\r\n    if (element) {\r\n        classMap.set(className, element);\r\n    } else if (classMap.has(className)) {\r\n        element = classMap.get(className);\r\n    } else {\r\n        element = document.createElement(\"style\");\r\n        element.classList.add(\"darkreader\");\r\n        element.classList.add(className);\r\n        element.media = \"screen\";\r\n        element.textContent = \"\";\r\n        classMap.set(className, element);\r\n    }\r\n    return element;\r\n}\r\nfunction createOrUpdateScript(className, root = document.head || document) {\r\n    let element = root.querySelector(`.${className}`);\r\n    if (!element) {\r\n        element = document.createElement(\"script\");\r\n        element.classList.add(\"darkreader\");\r\n        element.classList.add(className);\r\n    }\r\n    return element;\r\n}\r\nconst nodePositionWatchers = new Map();\r\nfunction setupNodePositionWatcher(node, alias, callback) {\r\n    nodePositionWatchers.has(alias) && nodePositionWatchers.get(alias).stop();\r\n    nodePositionWatchers.set(\r\n        alias,\r\n        watchForNodePosition(node, \"head\", callback)\r\n    );\r\n}\r\nfunction stopStylePositionWatchers() {\r\n    forEach(nodePositionWatchers.values(), (watcher) => watcher.stop());\r\n    nodePositionWatchers.clear();\r\n}\r\nfunction injectStaticStyle(style, prevNode, watchAlias, callback) {\r\n    const mode = getStyleInjectionMode();\r\n    if (mode === \"next\") {\r\n        document.head.insertBefore(\r\n            style,\r\n            prevNode ? prevNode.nextSibling : document.head.firstChild\r\n        );\r\n        setupNodePositionWatcher(style, watchAlias, callback);\r\n    } else if (mode === \"away\") {\r\n        injectStyleAway(style);\r\n    }\r\n}\r\nfunction createStaticStyleOverrides() {\r\n    const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\", document);\r\n    fallbackStyle.textContent = getModifiedFallbackStyle(theme, {strict: true});\r\n    injectStaticStyle(fallbackStyle, null, \"fallback\");\r\n    const userAgentStyle = createOrUpdateStyle(\"darkreader--user-agent\");\r\n    userAgentStyle.textContent = getModifiedUserAgentStyle(\r\n        theme,\r\n        isIFrame$1,\r\n        theme.styleSystemControls\r\n    );\r\n    injectStaticStyle(userAgentStyle, fallbackStyle, \"user-agent\");\r\n    const textStyle = createOrUpdateStyle(\"darkreader--text\");\r\n    if (theme.useFont || theme.textStroke > 0) {\r\n        textStyle.textContent = createTextStyle(theme);\r\n    } else {\r\n        textStyle.textContent = \"\";\r\n    }\r\n    injectStaticStyle(textStyle, userAgentStyle, \"text\");\r\n    const invertStyle = createOrUpdateStyle(\"darkreader--invert\");\r\n    if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n        invertStyle.textContent = [\r\n            `${fixes.invert.join(\", \")} {`,\r\n            `    filter: ${getCSSFilterValue({\r\n                ...theme,\r\n                contrast:\r\n                    theme.mode === 0\r\n                        ? theme.contrast\r\n                        : clamp(theme.contrast - 10, 0, 100)\r\n            })} !important;`,\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n    } else {\r\n        invertStyle.textContent = \"\";\r\n    }\r\n    injectStaticStyle(invertStyle, textStyle, \"invert\");\r\n    const inlineStyle = createOrUpdateStyle(\"darkreader--inline\");\r\n    inlineStyle.textContent = getInlineOverrideStyle();\r\n    injectStaticStyle(inlineStyle, invertStyle, \"inline\");\r\n    const variableStyle = createOrUpdateStyle(\"darkreader--variables\");\r\n    const selectionColors = theme?.selectionColor\r\n        ? getSelectionColor(theme)\r\n        : null;\r\n    const neutralBackgroundColor = modifyBackgroundColor(\r\n        parseColorWithCache(\"#ffffff\"),\r\n        theme\r\n    );\r\n    const neutralTextColor = modifyForegroundColor(\r\n        parseColorWithCache(\"#000000\"),\r\n        theme\r\n    );\r\n    variableStyle.textContent = [\r\n        `:root {`,\r\n        `   --darkreader-neutral-background: ${neutralBackgroundColor};`,\r\n        `   --darkreader-neutral-text: ${neutralTextColor};`,\r\n        `   --darkreader-selection-background: ${selectionColors?.backgroundColorSelection ?? \"initial\"};`,\r\n        `   --darkreader-selection-text: ${selectionColors?.foregroundColorSelection ?? \"initial\"};`,\r\n        `}`\r\n    ].join(\"\\n\");\r\n    injectStaticStyle(variableStyle, inlineStyle, \"variables\", () =>\r\n        registerVariablesSheet(variableStyle.sheet)\r\n    );\r\n    registerVariablesSheet(variableStyle.sheet);\r\n    const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n    injectStaticStyle(rootVarsStyle, variableStyle, \"root-vars\");\r\n    const enableStyleSheetsProxy = !(fixes && fixes.disableStyleSheetsProxy);\r\n    const enableCustomElementRegistryProxy = !(\r\n        fixes && fixes.disableCustomElementRegistryProxy\r\n    );\r\n    document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\r\n    {\r\n        const proxyScript = createOrUpdateScript(\"darkreader--proxy\");\r\n        proxyScript.append(\r\n            `(${injectProxy})(${enableStyleSheetsProxy}, ${enableCustomElementRegistryProxy})`\r\n        );\r\n        document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);\r\n        proxyScript.remove();\r\n    }\r\n    const overrideStyle = createOrUpdateStyle(\"darkreader--override\");\r\n    overrideStyle.textContent =\r\n        fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\r\n    injectStaticStyle(overrideStyle, document.head.lastChild, \"override\");\r\n}\r\nconst shadowRootsWithOverrides = new Set();\r\nfunction createShadowStaticStyleOverridesInner(root) {\r\n    const inlineStyle = createOrUpdateStyle(\"darkreader--inline\", root);\r\n    inlineStyle.textContent = getInlineOverrideStyle();\r\n    root.insertBefore(inlineStyle, root.firstChild);\r\n    const overrideStyle = createOrUpdateStyle(\"darkreader--override\", root);\r\n    overrideStyle.textContent =\r\n        fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\r\n    root.insertBefore(overrideStyle, inlineStyle.nextSibling);\r\n    const invertStyle = createOrUpdateStyle(\"darkreader--invert\", root);\r\n    if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n        invertStyle.textContent = [\r\n            `${fixes.invert.join(\", \")} {`,\r\n            `    filter: ${getCSSFilterValue({\r\n                ...theme,\r\n                contrast:\r\n                    theme.mode === 0\r\n                        ? theme.contrast\r\n                        : clamp(theme.contrast - 10, 0, 100)\r\n            })} !important;`,\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n    } else {\r\n        invertStyle.textContent = \"\";\r\n    }\r\n    root.insertBefore(invertStyle, overrideStyle.nextSibling);\r\n    shadowRootsWithOverrides.add(root);\r\n}\r\nfunction delayedCreateShadowStaticStyleOverrides(root) {\r\n    const observer = new MutationObserver((mutations, observer) => {\r\n        observer.disconnect();\r\n        for (const {type, removedNodes} of mutations) {\r\n            if (type === \"childList\") {\r\n                for (const {nodeName, className} of removedNodes) {\r\n                    if (\r\n                        nodeName === \"STYLE\" &&\r\n                        [\r\n                            \"darkreader darkreader--inline\",\r\n                            \"darkreader darkreader--override\",\r\n                            \"darkreader darkreader--invert\"\r\n                        ].includes(className)\r\n                    ) {\r\n                        createShadowStaticStyleOverridesInner(root);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    observer.observe(root, {childList: true});\r\n}\r\nfunction createShadowStaticStyleOverrides(root) {\r\n    const delayed = root.firstChild === null;\r\n    createShadowStaticStyleOverridesInner(root);\r\n    if (delayed) {\r\n        delayedCreateShadowStaticStyleOverrides(root);\r\n    }\r\n}\r\nfunction replaceCSSTemplates($cssText) {\r\n    return $cssText.replace(/\\${(.+?)}/g, (_, $color) => {\r\n        const color = parseColorWithCache($color);\r\n        if (color) {\r\n            const lightness = getSRGBLightness(color.r, color.g, color.b);\r\n            if (lightness > 0.5) {\r\n                return modifyBackgroundColor(color, theme);\r\n            }\r\n            return modifyForegroundColor(color, theme);\r\n        }\r\n        logWarn(\"Couldn't parse CSSTemplate's color.\");\r\n        return $color;\r\n    });\r\n}\r\nfunction cleanFallbackStyle() {\r\n    const fallback =\r\n        staticStyleMap.get(document.head)?.get(\"darkreader--fallback\") ||\r\n        staticStyleMap.get(document)?.get(\"darkreader--fallback\") ||\r\n        document.querySelector(\".darkreader--fallback\");\r\n    if (fallback) {\r\n        fallback.textContent = \"\";\r\n    }\r\n}\r\nfunction createDynamicStyleOverrides() {\r\n    cancelRendering();\r\n    const allStyles = getManageableStyles(document);\r\n    const newManagers = allStyles\r\n        .filter((style) => !styleManagers.has(style))\r\n        .map((style) => createManager(style));\r\n    newManagers\r\n        .map((manager) => manager.details({secondRound: false}))\r\n        .filter((detail) => detail && detail.rules.length > 0)\r\n        .forEach((detail) => {\r\n            variablesStore.addRulesForMatching(detail.rules);\r\n        });\r\n    variablesStore.matchVariablesAndDependents();\r\n    variablesStore.setOnRootVariableChange(() => {\r\n        const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n        variablesStore.putRootVars(rootVarsStyle, theme);\r\n    });\r\n    const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n    variablesStore.putRootVars(rootVarsStyle, theme);\r\n    styleManagers.forEach((manager) =>\r\n        manager.render(theme, ignoredImageAnalysisSelectors)\r\n    );\r\n    if (loadingStyles.size === 0) {\r\n        cleanFallbackStyle();\r\n    }\r\n    newManagers.forEach((manager) => manager.watch());\r\n    const inlineStyleElements = toArray(\r\n        document.querySelectorAll(INLINE_STYLE_SELECTOR)\r\n    );\r\n    iterateShadowHosts(document.documentElement, (host) => {\r\n        createShadowStaticStyleOverrides(host.shadowRoot);\r\n        const elements = host.shadowRoot.querySelectorAll(\r\n            INLINE_STYLE_SELECTOR\r\n        );\r\n        if (elements.length > 0) {\r\n            push(inlineStyleElements, elements);\r\n        }\r\n    });\r\n    inlineStyleElements.forEach((el) =>\r\n        overrideInlineStyle(\r\n            el,\r\n            theme,\r\n            ignoredInlineSelectors,\r\n            ignoredImageAnalysisSelectors\r\n        )\r\n    );\r\n    handleAdoptedStyleSheets(document);\r\n    variablesStore.matchVariablesAndDependents();\r\n    if (isFirefox) {\r\n        const onAdoptedCssChange = (e) => {\r\n            const {sheets} = e.detail;\r\n            if (!Array.isArray(sheets) || sheets.length === 0) {\r\n                return;\r\n            }\r\n            sheets.forEach(({sheet}) => {\r\n                const {cssRules} = sheet;\r\n                variablesStore.addRulesForMatching(cssRules);\r\n            });\r\n            variablesStore.matchVariablesAndDependents();\r\n            const response = [];\r\n            sheets.forEach(({sheetId, sheet}) => {\r\n                const fallback = getAdoptedStyleSheetFallback(sheet);\r\n                const cssRules = sheet.cssRules;\r\n                fallback.render({\r\n                    theme: theme,\r\n                    ignoreImageAnalysis: ignoredImageAnalysisSelectors,\r\n                    cssRules\r\n                });\r\n                const commands = fallback.commands();\r\n                response.push({sheetId, commands});\r\n            });\r\n            requestAnimationFrameOnce(\r\n                getAdoptedStyleChangeToken(sheets[0].sheet),\r\n                () => {\r\n                    document.dispatchEvent(\r\n                        new CustomEvent(\r\n                            \"__darkreader__adoptedStyleSheetCommands\",\r\n                            {detail: JSON.stringify(response)}\r\n                        )\r\n                    );\r\n                }\r\n            );\r\n        };\r\n        document.addEventListener(\r\n            \"__darkreader__adoptedStyleSheetsChange\",\r\n            onAdoptedCssChange\r\n        );\r\n        cleaners.push(() =>\r\n            document.removeEventListener(\r\n                \"__darkreader__adoptedStyleSheetsChange\",\r\n                onAdoptedCssChange\r\n            )\r\n        );\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__startAdoptedStyleSheetsWatcher\")\r\n        );\r\n    }\r\n}\r\nlet loadingStylesCounter = 0;\r\nconst loadingStyles = new Set();\r\nfunction createManager(element) {\r\n    const loadingStyleId = ++loadingStylesCounter;\r\n    function loadingStart() {\r\n        if (!isDOMReady() || !documentIsVisible()) {\r\n            loadingStyles.add(loadingStyleId);\r\n            logInfo(`Current amount of styles loading: ${loadingStyles.size}`);\r\n            const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\r\n            if (!fallbackStyle.textContent) {\r\n                fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\r\n                    strict: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n    function loadingEnd() {\r\n        loadingStyles.delete(loadingStyleId);\r\n        logInfo(\r\n            `Removed loadingStyle ${loadingStyleId}, now awaiting: ${loadingStyles.size}`\r\n        );\r\n        if (loadingStyles.size === 0 && isDOMReady()) {\r\n            cleanFallbackStyle();\r\n        }\r\n    }\r\n    function update() {\r\n        const details = manager.details({secondRound: true});\r\n        if (!details) {\r\n            return;\r\n        }\r\n        variablesStore.addRulesForMatching(details.rules);\r\n        variablesStore.matchVariablesAndDependents();\r\n        manager.render(theme, ignoredImageAnalysisSelectors);\r\n    }\r\n    const manager = manageStyle(element, {update, loadingStart, loadingEnd});\r\n    styleManagers.set(element, manager);\r\n    return manager;\r\n}\r\nfunction removeManager(element) {\r\n    const manager = styleManagers.get(element);\r\n    if (manager) {\r\n        manager.destroy();\r\n        styleManagers.delete(element);\r\n    }\r\n}\r\nconst throttledRenderAllStyles = throttle((callback) => {\r\n    styleManagers.forEach((manager) =>\r\n        manager.render(theme, ignoredImageAnalysisSelectors)\r\n    );\r\n    adoptedStyleManagers.forEach((manager) =>\r\n        manager.render(theme, ignoredImageAnalysisSelectors)\r\n    );\r\n    callback && callback();\r\n});\r\nconst cancelRendering = function () {\r\n    throttledRenderAllStyles.cancel();\r\n};\r\nfunction onDOMReady() {\r\n    if (loadingStyles.size === 0) {\r\n        cleanFallbackStyle();\r\n        return;\r\n    }\r\n    logWarn(`DOM is ready, but still have styles being loaded.`, loadingStyles);\r\n}\r\nfunction runDynamicStyle() {\r\n    createDynamicStyleOverrides();\r\n    watchForUpdates();\r\n}\r\nfunction createThemeAndWatchForUpdates() {\r\n    createStaticStyleOverrides();\r\n    if (!documentIsVisible() && !theme.immediateModify) {\r\n        setDocumentVisibilityListener(runDynamicStyle);\r\n    } else {\r\n        runDynamicStyle();\r\n    }\r\n    changeMetaThemeColorWhenAvailable(theme);\r\n}\r\nfunction handleAdoptedStyleSheets(node) {\r\n    if (isFirefox) {\r\n        return;\r\n    }\r\n    if (canHaveAdoptedStyleSheets(node)) {\r\n        node.adoptedStyleSheets.forEach((s) => {\r\n            variablesStore.addRulesForMatching(s.cssRules);\r\n        });\r\n        const newManger = createAdoptedStyleSheetOverride(node);\r\n        adoptedStyleManagers.push(newManger);\r\n        newManger.render(theme, ignoredImageAnalysisSelectors);\r\n        newManger.watch((sheets) => {\r\n            sheets.forEach((s) => {\r\n                variablesStore.addRulesForMatching(s.cssRules);\r\n            });\r\n            variablesStore.matchVariablesAndDependents();\r\n            newManger.render(theme, ignoredImageAnalysisSelectors);\r\n        });\r\n    }\r\n}\r\nfunction getAdoptedStyleChangeToken(sheet) {\r\n    if (adoptedStyleChangeTokens.has(sheet)) {\r\n        return adoptedStyleChangeTokens.get(sheet);\r\n    }\r\n    const token = Symbol();\r\n    adoptedStyleChangeTokens.set(sheet, token);\r\n    return token;\r\n}\r\nfunction getAdoptedStyleSheetFallback(sheet) {\r\n    let fallback = adoptedStyleFallbacks.get(sheet);\r\n    if (!fallback) {\r\n        fallback = createAdoptedStyleSheetFallback();\r\n        adoptedStyleFallbacks.set(sheet, fallback);\r\n    }\r\n    return fallback;\r\n}\r\nfunction watchForUpdates() {\r\n    const managedStyles = Array.from(styleManagers.keys());\r\n    watchForStyleChanges(\r\n        managedStyles,\r\n        ({created, updated, removed, moved}) => {\r\n            const stylesToRemove = removed;\r\n            const stylesToManage = created\r\n                .concat(updated)\r\n                .concat(moved)\r\n                .filter((style) => !styleManagers.has(style));\r\n            const stylesToRestore = moved.filter((style) =>\r\n                styleManagers.has(style)\r\n            );\r\n            stylesToRemove.forEach((style) => removeManager(style));\r\n            const newManagers = stylesToManage.map((style) =>\r\n                createManager(style)\r\n            );\r\n            newManagers\r\n                .map((manager) => manager.details({secondRound: false}))\r\n                .filter((detail) => detail && detail.rules.length > 0)\r\n                .forEach((detail) => {\r\n                    variablesStore.addRulesForMatching(detail.rules);\r\n                });\r\n            variablesStore.matchVariablesAndDependents();\r\n            newManagers.forEach((manager) =>\r\n                manager.render(theme, ignoredImageAnalysisSelectors)\r\n            );\r\n            newManagers.forEach((manager) => manager.watch());\r\n            stylesToRestore.forEach((style) =>\r\n                styleManagers.get(style).restore()\r\n            );\r\n        },\r\n        (shadowRoot) => {\r\n            createShadowStaticStyleOverrides(shadowRoot);\r\n            handleAdoptedStyleSheets(shadowRoot);\r\n        }\r\n    );\r\n    watchForInlineStyles(\r\n        (element) => {\r\n            overrideInlineStyle(\r\n                element,\r\n                theme,\r\n                ignoredInlineSelectors,\r\n                ignoredImageAnalysisSelectors\r\n            );\r\n            if (element === document.documentElement) {\r\n                const styleAttr = element.getAttribute(\"style\") || \"\";\r\n                if (styleAttr.includes(\"--\")) {\r\n                    variablesStore.matchVariablesAndDependents();\r\n                    const rootVarsStyle = createOrUpdateStyle(\r\n                        \"darkreader--root-vars\"\r\n                    );\r\n                    variablesStore.putRootVars(rootVarsStyle, theme);\r\n                }\r\n            }\r\n        },\r\n        (root) => {\r\n            createShadowStaticStyleOverrides(root);\r\n            const inlineStyleElements = root.querySelectorAll(\r\n                INLINE_STYLE_SELECTOR\r\n            );\r\n            if (inlineStyleElements.length > 0) {\r\n                forEach(inlineStyleElements, (el) =>\r\n                    overrideInlineStyle(\r\n                        el,\r\n                        theme,\r\n                        ignoredInlineSelectors,\r\n                        ignoredImageAnalysisSelectors\r\n                    )\r\n                );\r\n            }\r\n        }\r\n    );\r\n    addDOMReadyListener(onDOMReady);\r\n}\r\nfunction stopWatchingForUpdates() {\r\n    styleManagers.forEach((manager) => manager.pause());\r\n    stopStylePositionWatchers();\r\n    stopWatchingForStyleChanges();\r\n    stopWatchingForInlineStyles();\r\n    removeDOMReadyListener(onDOMReady);\r\n    cleanReadyStateCompleteListeners();\r\n}\r\nlet metaObserver;\r\nlet headObserver = null;\r\nfunction addMetaListener() {\r\n    metaObserver = new MutationObserver(() => {\r\n        if (document.querySelector('meta[name=\"darkreader-lock\"]')) {\r\n            metaObserver.disconnect();\r\n            removeDynamicTheme();\r\n        }\r\n    });\r\n    metaObserver.observe(document.head, {childList: true, subtree: true});\r\n}\r\nfunction createDarkReaderInstanceMarker() {\r\n    const metaElement = document.createElement(\"meta\");\r\n    metaElement.name = \"darkreader\";\r\n    metaElement.content = INSTANCE_ID;\r\n    document.head.appendChild(metaElement);\r\n}\r\nfunction isDRLocked() {\r\n    return document.querySelector('meta[name=\"darkreader-lock\"]') != null;\r\n}\r\nfunction isAnotherDarkReaderInstanceActive() {\r\n    const meta = document.querySelector('meta[name=\"darkreader\"]');\r\n    if (meta) {\r\n        if (meta.content !== INSTANCE_ID) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    createDarkReaderInstanceMarker();\r\n    addMetaListener();\r\n    return false;\r\n}\r\nlet interceptorAttempts = 2;\r\nfunction interceptOldScript({success, failure}) {\r\n    if (--interceptorAttempts <= 0) {\r\n        failure();\r\n        return;\r\n    }\r\n    const oldMeta = document.head.querySelector('meta[name=\"darkreader\"]');\r\n    if (!oldMeta || oldMeta.content === INSTANCE_ID) {\r\n        return;\r\n    }\r\n    const lock = document.createElement(\"meta\");\r\n    lock.name = \"darkreader-lock\";\r\n    document.head.append(lock);\r\n    queueMicrotask(() => {\r\n        lock.remove();\r\n        success();\r\n    });\r\n}\r\nfunction disableConflictingPlugins() {\r\n    if (document.documentElement.hasAttribute(\"data-wp-dark-mode-preset\")) {\r\n        const disableWPDarkMode = () => {\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__disableConflictingPlugins\")\r\n            );\r\n            document.documentElement.classList.remove(\"wp-dark-mode-active\");\r\n            document.documentElement.removeAttribute(\r\n                \"data-wp-dark-mode-active\"\r\n            );\r\n        };\r\n        disableWPDarkMode();\r\n        const observer = new MutationObserver(() => {\r\n            if (\r\n                document.documentElement.classList.contains(\r\n                    \"wp-dark-mode-active\"\r\n                ) ||\r\n                document.documentElement.hasAttribute(\r\n                    \"data-wp-dark-mode-active\"\r\n                )\r\n            ) {\r\n                disableWPDarkMode();\r\n            }\r\n        });\r\n        observer.observe(document.documentElement, {\r\n            attributes: true,\r\n            attributeFilter: [\"class\", \"data-wp-dark-mode-active\"]\r\n        });\r\n    }\r\n}\r\nlet prevTheme = null;\r\nlet prevFixes = null;\r\nfunction createOrUpdateDynamicThemeInternal(\r\n    themeConfig,\r\n    dynamicThemeFixes,\r\n    iframe\r\n) {\r\n    theme = themeConfig;\r\n    fixes = dynamicThemeFixes;\r\n    const colorAffectingKeys = [\r\n        \"brightness\",\r\n        \"contrast\",\r\n        \"darkSchemeBackgroundColor\",\r\n        \"darkSchemeTextColor\",\r\n        \"grayscale\",\r\n        \"lightSchemeBackgroundColor\",\r\n        \"lightSchemeTextColor\",\r\n        \"sepia\"\r\n    ];\r\n    if (prevTheme && prevFixes) {\r\n        const themeKeys = new Set([\r\n            ...Object.keys(theme),\r\n            ...Object.keys(prevTheme)\r\n        ]);\r\n        let onlyColorsChanged = true;\r\n        for (const key of themeKeys) {\r\n            if (\r\n                theme[key] !== prevTheme[key] &&\r\n                !colorAffectingKeys.includes(key)\r\n            ) {\r\n                onlyColorsChanged = false;\r\n                break;\r\n            }\r\n        }\r\n        if (\r\n            onlyColorsChanged &&\r\n            JSON.stringify(fixes) !== JSON.stringify(prevFixes)\r\n        ) {\r\n            onlyColorsChanged = false;\r\n        }\r\n        if (onlyColorsChanged) {\r\n            const palette = getColorPalette();\r\n            clearColorPalette();\r\n            palette.background.forEach((color) =>\r\n                modifyBackgroundColor(color, theme)\r\n            );\r\n            palette.text.forEach((color) =>\r\n                modifyForegroundColor(color, theme)\r\n            );\r\n            palette.border.forEach((color) => modifyBorderColor(color, theme));\r\n            return;\r\n        }\r\n        clearColorPalette();\r\n    }\r\n    if (fixes) {\r\n        ignoredImageAnalysisSelectors = Array.isArray(fixes.ignoreImageAnalysis)\r\n            ? fixes.ignoreImageAnalysis\r\n            : [];\r\n        ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle)\r\n            ? fixes.ignoreInlineStyle\r\n            : [];\r\n    } else {\r\n        ignoredImageAnalysisSelectors = [];\r\n        ignoredInlineSelectors = [];\r\n    }\r\n    if (theme.immediateModify) {\r\n        setIsDOMReady(() => {\r\n            return true;\r\n        });\r\n    }\r\n    isIFrame$1 = iframe;\r\n    const ready = () => {\r\n        const success = () => {\r\n            disableConflictingPlugins();\r\n            document.documentElement.setAttribute(\r\n                \"data-darkreader-mode\",\r\n                \"dynamic\"\r\n            );\r\n            document.documentElement.setAttribute(\r\n                \"data-darkreader-scheme\",\r\n                theme.mode ? \"dark\" : \"dimmed\"\r\n            );\r\n            createThemeAndWatchForUpdates();\r\n        };\r\n        const failure = () => {\r\n            removeDynamicTheme();\r\n        };\r\n        if (isDRLocked()) {\r\n            removeNode(document.querySelector(\".darkreader--fallback\"));\r\n        } else if (isAnotherDarkReaderInstanceActive()) {\r\n            interceptOldScript({\r\n                success,\r\n                failure\r\n            });\r\n        } else {\r\n            success();\r\n        }\r\n    };\r\n    if (document.head) {\r\n        ready();\r\n    } else {\r\n        if (!isFirefox) {\r\n            const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\r\n            document.documentElement.appendChild(fallbackStyle);\r\n            fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\r\n                strict: true\r\n            });\r\n        }\r\n        headObserver?.disconnect();\r\n        headObserver = new MutationObserver(() => {\r\n            if (document.head) {\r\n                headObserver?.disconnect();\r\n                ready();\r\n            }\r\n        });\r\n        cleaners.push(() => {\r\n            headObserver?.disconnect();\r\n            headObserver = null;\r\n        });\r\n        headObserver.observe(document, {childList: true, subtree: true});\r\n    }\r\n    prevTheme = theme;\r\n    prevFixes = fixes;\r\n}\r\nfunction removeProxy() {\r\n    document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\r\n    removeNode(document.head.querySelector(\".darkreader--proxy\"));\r\n}\r\nconst cleaners = [];\r\nfunction removeDynamicTheme() {\r\n    document.documentElement.removeAttribute(`data-darkreader-mode`);\r\n    document.documentElement.removeAttribute(`data-darkreader-scheme`);\r\n    cleanDynamicThemeCache();\r\n    removeNode(document.querySelector(\".darkreader--fallback\"));\r\n    if (document.head) {\r\n        const selectors = [\r\n            \".darkreader--user-agent\",\r\n            \".darkreader--text\",\r\n            \".darkreader--invert\",\r\n            \".darkreader--inline\",\r\n            \".darkreader--override\",\r\n            \".darkreader--variables\",\r\n            \".darkreader--root-vars\",\r\n            'meta[name=\"darkreader\"]'\r\n        ];\r\n        restoreMetaThemeColor();\r\n        selectors.forEach((selector) =>\r\n            removeNode(document.head.querySelector(selector))\r\n        );\r\n        staticStyleMap = new WeakMap();\r\n        removeProxy();\r\n    }\r\n    shadowRootsWithOverrides.forEach((root) => {\r\n        removeNode(root.querySelector(\".darkreader--inline\"));\r\n        removeNode(root.querySelector(\".darkreader--override\"));\r\n    });\r\n    shadowRootsWithOverrides.clear();\r\n    forEach(styleManagers.keys(), (el) => removeManager(el));\r\n    loadingStyles.clear();\r\n    cleanLoadingLinks();\r\n    forEach(document.querySelectorAll(\".darkreader\"), removeNode);\r\n    adoptedStyleManagers.forEach((manager) => manager.destroy());\r\n    adoptedStyleManagers.splice(0);\r\n    adoptedStyleFallbacks.forEach((fallback) => fallback.destroy());\r\n    adoptedStyleFallbacks.clear();\r\n    metaObserver && metaObserver.disconnect();\r\n    cleaners.forEach((clean) => clean());\r\n    cleaners.splice(0);\r\n}\r\nfunction cleanDynamicThemeCache() {\r\n    variablesStore.clear();\r\n    parsedURLCache.clear();\r\n    removeDocumentVisibilityListener();\r\n    cancelRendering();\r\n    stopWatchingForUpdates();\r\n    cleanModificationCache();\r\n    clearColorCache();\r\n    releaseVariablesSheet();\r\n    prevTheme = null;\r\n    prevFixes = null;\r\n}\r\n\r\nfunction parseCSS(cssText) {\r\n    cssText = removeCSSComments(cssText);\r\n    cssText = cssText.trim();\r\n    if (!cssText) {\r\n        return [];\r\n    }\r\n    const rules = [];\r\n    const excludeRanges = getTokenExclusionRanges(cssText);\r\n    const bracketRanges = getAllOpenCloseRanges(\r\n        cssText,\r\n        \"{\",\r\n        \"}\",\r\n        excludeRanges\r\n    );\r\n    let ruleStart = 0;\r\n    bracketRanges.forEach((brackets) => {\r\n        const key = cssText.substring(ruleStart, brackets.start).trim();\r\n        const content = cssText.substring(brackets.start + 1, brackets.end - 1);\r\n        if (key.startsWith(\"@\")) {\r\n            const typeEndIndex = key.search(/[\\s\\(]/);\r\n            const rule = {\r\n                type: typeEndIndex < 0 ? key : key.substring(0, typeEndIndex),\r\n                query:\r\n                    typeEndIndex < 0 ? \"\" : key.substring(typeEndIndex).trim(),\r\n                rules: parseCSS(content)\r\n            };\r\n            rules.push(rule);\r\n        } else {\r\n            const rule = {\r\n                selectors: parseSelectors(key),\r\n                declarations: parseDeclarations(content)\r\n            };\r\n            rules.push(rule);\r\n        }\r\n        ruleStart = brackets.end;\r\n    });\r\n    return rules;\r\n}\r\nfunction getAllOpenCloseRanges(\r\n    input,\r\n    openToken,\r\n    closeToken,\r\n    excludeRanges = []\r\n) {\r\n    const ranges = [];\r\n    let i = 0;\r\n    let range;\r\n    while (\r\n        (range = getOpenCloseRange(\r\n            input,\r\n            i,\r\n            openToken,\r\n            closeToken,\r\n            excludeRanges\r\n        ))\r\n    ) {\r\n        ranges.push(range);\r\n        i = range.end;\r\n    }\r\n    return ranges;\r\n}\r\nfunction getTokenExclusionRanges(cssText) {\r\n    const singleQuoteGoesFirst = cssText.indexOf(\"'\") < cssText.indexOf('\"');\r\n    const firstQuote = singleQuoteGoesFirst ? \"'\" : '\"';\r\n    const secondQuote = singleQuoteGoesFirst ? '\"' : \"'\";\r\n    const excludeRanges = getAllOpenCloseRanges(\r\n        cssText,\r\n        firstQuote,\r\n        firstQuote\r\n    );\r\n    excludeRanges.push(\r\n        ...getAllOpenCloseRanges(\r\n            cssText,\r\n            secondQuote,\r\n            secondQuote,\r\n            excludeRanges\r\n        )\r\n    );\r\n    excludeRanges.push(\r\n        ...getAllOpenCloseRanges(cssText, \"[\", \"]\", excludeRanges)\r\n    );\r\n    excludeRanges.push(\r\n        ...getAllOpenCloseRanges(cssText, \"(\", \")\", excludeRanges)\r\n    );\r\n    return excludeRanges;\r\n}\r\nfunction parseSelectors(selectorText) {\r\n    const excludeRanges = getTokenExclusionRanges(selectorText);\r\n    return splitExcluding(selectorText, \",\", excludeRanges);\r\n}\r\nfunction parseDeclarations(cssDeclarationsText) {\r\n    const declarations = [];\r\n    const excludeRanges = getTokenExclusionRanges(cssDeclarationsText);\r\n    splitExcluding(cssDeclarationsText, \";\", excludeRanges).forEach((part) => {\r\n        const colonIndex = part.indexOf(\":\");\r\n        if (colonIndex > 0) {\r\n            const importantIndex = part.indexOf(\"!important\");\r\n            declarations.push({\r\n                property: part.substring(0, colonIndex).trim(),\r\n                value: part\r\n                    .substring(\r\n                        colonIndex + 1,\r\n                        importantIndex > 0 ? importantIndex : part.length\r\n                    )\r\n                    .trim(),\r\n                important: importantIndex > 0\r\n            });\r\n        }\r\n    });\r\n    return declarations;\r\n}\r\nfunction isParsedStyleRule(rule) {\r\n    return \"selectors\" in rule;\r\n}\r\n\r\nfunction formatCSS(cssText) {\r\n    const parsed = parseCSS(cssText);\r\n    return formatParsedCSS(parsed);\r\n}\r\nfunction formatParsedCSS(parsed) {\r\n    const lines = [];\r\n    const tab = \"    \";\r\n    function formatRule(rule, indent) {\r\n        if (isParsedStyleRule(rule)) {\r\n            formatStyleRule(rule, indent);\r\n        } else {\r\n            formatAtRule(rule, indent);\r\n        }\r\n    }\r\n    function formatAtRule({type, query, rules}, indent) {\r\n        lines.push(`${indent}${type} ${query} {`);\r\n        rules.forEach((child) => formatRule(child, `${indent}${tab}`));\r\n        lines.push(`${indent}}`);\r\n    }\r\n    function formatStyleRule({selectors, declarations}, indent) {\r\n        const lastSelectorIndex = selectors.length - 1;\r\n        selectors.forEach((selector, i) => {\r\n            lines.push(\r\n                `${indent}${selector}${i < lastSelectorIndex ? \",\" : \" {\"}`\r\n            );\r\n        });\r\n        const sorted = sortDeclarations(declarations);\r\n        sorted.forEach(({property, value, important}) => {\r\n            lines.push(\r\n                `${indent}${tab}${property}: ${value}${important ? \" !important\" : \"\"};`\r\n            );\r\n        });\r\n        lines.push(`${indent}}`);\r\n    }\r\n    clearEmptyRules(parsed);\r\n    parsed.forEach((rule) => formatRule(rule, \"\"));\r\n    return lines.join(\"\\n\");\r\n}\r\nfunction sortDeclarations(declarations) {\r\n    const prefixRegex = /^-[a-z]-/;\r\n    return [...declarations].sort((a, b) => {\r\n        const aProp = a.property;\r\n        const bProp = b.property;\r\n        const aPrefix = aProp.match(prefixRegex)?.[0] ?? \"\";\r\n        const bPrefix = bProp.match(prefixRegex)?.[0] ?? \"\";\r\n        const aNorm = aPrefix ? aProp.replace(prefixRegex, \"\") : aProp;\r\n        const bNorm = bPrefix ? bProp.replace(prefixRegex, \"\") : bProp;\r\n        if (aNorm === bNorm) {\r\n            return aPrefix.localeCompare(bPrefix);\r\n        }\r\n        return aNorm.localeCompare(bNorm);\r\n    });\r\n}\r\nfunction clearEmptyRules(rules) {\r\n    for (let i = rules.length - 1; i >= 0; i--) {\r\n        const rule = rules[i];\r\n        if (isParsedStyleRule(rule)) {\r\n            if (rule.declarations.length === 0) {\r\n                rules.splice(i, 1);\r\n            }\r\n        } else {\r\n            clearEmptyRules(rule.rules);\r\n            if (rule.rules.length === 0) {\r\n                rules.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst blobRegex = /url\\(\\\"(blob\\:.*?)\\\"\\)/g;\r\nasync function replaceBlobs(text) {\r\n    const promises = [];\r\n    getMatches(blobRegex, text, 1).forEach((url) => {\r\n        const promise = loadAsDataURL(url);\r\n        promises.push(promise);\r\n    });\r\n    const data = await Promise.all(promises);\r\n    return text.replace(blobRegex, () => `url(\"${data.shift()}\")`);\r\n}\r\nconst banner = `/*\r\n                        _______\r\n                       /       \\\\\r\n                      .==.    .==.\r\n                     ((  ))==((  ))\r\n                    / \"==\"    \"==\"\\\\\r\n                   /____|| || ||___\\\\\r\n       ________     ____    ________  ___    ___\r\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\r\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\r\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\r\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\r\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\r\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\r\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\r\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\r\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\r\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\r\n                https://darkreader.org\r\n*/\r\n\r\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */\r\n`;\r\nasync function collectCSS() {\r\n    const css = [banner];\r\n    function addStaticCSS(selector, comment) {\r\n        const staticStyle = document.querySelector(selector);\r\n        if (staticStyle && staticStyle.textContent) {\r\n            css.push(`/* ${comment} */`);\r\n            css.push(staticStyle.textContent);\r\n            css.push(\"\");\r\n        }\r\n    }\r\n    addStaticCSS(\".darkreader--fallback\", \"Fallback Style\");\r\n    addStaticCSS(\".darkreader--user-agent\", \"User-Agent Style\");\r\n    addStaticCSS(\".darkreader--text\", \"Text Style\");\r\n    addStaticCSS(\".darkreader--invert\", \"Invert Style\");\r\n    addStaticCSS(\".darkreader--variables\", \"Variables Style\");\r\n    const modifiedCSS = [];\r\n    document.querySelectorAll(\".darkreader--sync\").forEach((element) => {\r\n        forEach(element.sheet.cssRules, (rule) => {\r\n            rule && rule.cssText && modifiedCSS.push(rule.cssText);\r\n        });\r\n    });\r\n    if (modifiedCSS.length) {\r\n        const formattedCSS = formatCSS(modifiedCSS.join(\"\\n\"));\r\n        css.push(\"/* Modified CSS */\");\r\n        css.push(await replaceBlobs(formattedCSS));\r\n        css.push(\"\");\r\n    }\r\n    addStaticCSS(\".darkreader--override\", \"Override Style\");\r\n    return css.join(\"\\n\");\r\n}\r\n\r\nlet isDarkReaderEnabled = false;\r\nconst isIFrame = (() => {\r\n    try {\r\n        return window.self !== window.top;\r\n    } catch (err) {\r\n        console.warn(err);\r\n        return true;\r\n    }\r\n})();\r\nfunction enable(themeOptions = {}, fixes = null) {\r\n    const theme = {...DEFAULT_THEME, ...themeOptions};\r\n    if (theme.engine !== ThemeEngine.dynamicTheme) {\r\n        throw new Error(\"Theme engine is not supported.\");\r\n    }\r\n    createOrUpdateDynamicThemeInternal(theme, fixes, isIFrame);\r\n    isDarkReaderEnabled = true;\r\n}\r\nfunction isEnabled() {\r\n    return isDarkReaderEnabled;\r\n}\r\nfunction disable() {\r\n    removeDynamicTheme();\r\n    isDarkReaderEnabled = false;\r\n}\r\nconst darkScheme =\r\n    typeof matchMedia === \"function\"\r\n        ? matchMedia(\"(prefers-color-scheme: dark)\")\r\n        : undefined;\r\nlet store = {\r\n    themeOptions: null,\r\n    fixes: null\r\n};\r\nfunction handleColorScheme() {\r\n    if (darkScheme?.matches) {\r\n        enable(store.themeOptions, store.fixes);\r\n    } else {\r\n        disable();\r\n    }\r\n}\r\nfunction auto(themeOptions = {}, fixes = null) {\r\n    if (themeOptions) {\r\n        store = {themeOptions, fixes};\r\n        handleColorScheme();\r\n        if (isMatchMediaChangeEventListenerSupported) {\r\n            darkScheme?.addEventListener(\"change\", handleColorScheme);\r\n        } else {\r\n            darkScheme?.addListener(handleColorScheme);\r\n        }\r\n    } else {\r\n        if (isMatchMediaChangeEventListenerSupported) {\r\n            darkScheme?.removeEventListener(\"change\", handleColorScheme);\r\n        } else {\r\n            darkScheme?.removeListener(handleColorScheme);\r\n        }\r\n        disable();\r\n    }\r\n}\r\nasync function exportGeneratedCSS() {\r\n    return await collectCSS();\r\n}\r\nconst setFetchMethod = setFetchMethod$1;\r\n\r\nexport {auto, disable, enable, exportGeneratedCSS, isEnabled, setFetchMethod};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}