{"ast":null,"code":"import _objectSpread from \"/Users/stanislaudasilva/Downloads/portfolio/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n/**\r\n * Dark Reader v4.9.109\r\n * https://darkreader.org/\r\n */\n\nvar MessageTypeUItoBG;\n(function (MessageTypeUItoBG) {\n  MessageTypeUItoBG[\"GET_DATA\"] = \"ui-bg-get-data\";\n  MessageTypeUItoBG[\"GET_DEVTOOLS_DATA\"] = \"ui-bg-get-devtools-data\";\n  MessageTypeUItoBG[\"SUBSCRIBE_TO_CHANGES\"] = \"ui-bg-subscribe-to-changes\";\n  MessageTypeUItoBG[\"UNSUBSCRIBE_FROM_CHANGES\"] = \"ui-bg-unsubscribe-from-changes\";\n  MessageTypeUItoBG[\"CHANGE_SETTINGS\"] = \"ui-bg-change-settings\";\n  MessageTypeUItoBG[\"SET_THEME\"] = \"ui-bg-set-theme\";\n  MessageTypeUItoBG[\"TOGGLE_ACTIVE_TAB\"] = \"ui-bg-toggle-active-tab\";\n  MessageTypeUItoBG[\"MARK_NEWS_AS_READ\"] = \"ui-bg-mark-news-as-read\";\n  MessageTypeUItoBG[\"MARK_NEWS_AS_DISPLAYED\"] = \"ui-bg-mark-news-as-displayed\";\n  MessageTypeUItoBG[\"LOAD_CONFIG\"] = \"ui-bg-load-config\";\n  MessageTypeUItoBG[\"APPLY_DEV_DYNAMIC_THEME_FIXES\"] = \"ui-bg-apply-dev-dynamic-theme-fixes\";\n  MessageTypeUItoBG[\"RESET_DEV_DYNAMIC_THEME_FIXES\"] = \"ui-bg-reset-dev-dynamic-theme-fixes\";\n  MessageTypeUItoBG[\"APPLY_DEV_INVERSION_FIXES\"] = \"ui-bg-apply-dev-inversion-fixes\";\n  MessageTypeUItoBG[\"RESET_DEV_INVERSION_FIXES\"] = \"ui-bg-reset-dev-inversion-fixes\";\n  MessageTypeUItoBG[\"APPLY_DEV_STATIC_THEMES\"] = \"ui-bg-apply-dev-static-themes\";\n  MessageTypeUItoBG[\"RESET_DEV_STATIC_THEMES\"] = \"ui-bg-reset-dev-static-themes\";\n  MessageTypeUItoBG[\"START_ACTIVATION\"] = \"ui-bg-start-activation\";\n  MessageTypeUItoBG[\"RESET_ACTIVATION\"] = \"ui-bg-reset-activation\";\n  MessageTypeUItoBG[\"COLOR_SCHEME_CHANGE\"] = \"ui-bg-color-scheme-change\";\n  MessageTypeUItoBG[\"HIDE_HIGHLIGHTS\"] = \"ui-bg-hide-highlights\";\n})(MessageTypeUItoBG || (MessageTypeUItoBG = {}));\nvar MessageTypeBGtoUI;\n(function (MessageTypeBGtoUI) {\n  MessageTypeBGtoUI[\"CHANGES\"] = \"bg-ui-changes\";\n})(MessageTypeBGtoUI || (MessageTypeBGtoUI = {}));\nvar DebugMessageTypeBGtoUI;\n(function (DebugMessageTypeBGtoUI) {\n  DebugMessageTypeBGtoUI[\"CSS_UPDATE\"] = \"debug-bg-ui-css-update\";\n  DebugMessageTypeBGtoUI[\"UPDATE\"] = \"debug-bg-ui-update\";\n})(DebugMessageTypeBGtoUI || (DebugMessageTypeBGtoUI = {}));\nvar MessageTypeBGtoCS;\n(function (MessageTypeBGtoCS) {\n  MessageTypeBGtoCS[\"ADD_CSS_FILTER\"] = \"bg-cs-add-css-filter\";\n  MessageTypeBGtoCS[\"ADD_DYNAMIC_THEME\"] = \"bg-cs-add-dynamic-theme\";\n  MessageTypeBGtoCS[\"ADD_STATIC_THEME\"] = \"bg-cs-add-static-theme\";\n  MessageTypeBGtoCS[\"ADD_SVG_FILTER\"] = \"bg-cs-add-svg-filter\";\n  MessageTypeBGtoCS[\"CLEAN_UP\"] = \"bg-cs-clean-up\";\n  MessageTypeBGtoCS[\"FETCH_RESPONSE\"] = \"bg-cs-fetch-response\";\n  MessageTypeBGtoCS[\"UNSUPPORTED_SENDER\"] = \"bg-cs-unsupported-sender\";\n})(MessageTypeBGtoCS || (MessageTypeBGtoCS = {}));\nvar DebugMessageTypeBGtoCS;\n(function (DebugMessageTypeBGtoCS) {\n  DebugMessageTypeBGtoCS[\"RELOAD\"] = \"debug-bg-cs-reload\";\n})(DebugMessageTypeBGtoCS || (DebugMessageTypeBGtoCS = {}));\nvar MessageTypeCStoBG;\n(function (MessageTypeCStoBG) {\n  MessageTypeCStoBG[\"COLOR_SCHEME_CHANGE\"] = \"cs-bg-color-scheme-change\";\n  MessageTypeCStoBG[\"DARK_THEME_DETECTED\"] = \"cs-bg-dark-theme-detected\";\n  MessageTypeCStoBG[\"DARK_THEME_NOT_DETECTED\"] = \"cs-bg-dark-theme-not-detected\";\n  MessageTypeCStoBG[\"FETCH\"] = \"cs-bg-fetch\";\n  MessageTypeCStoBG[\"DOCUMENT_CONNECT\"] = \"cs-bg-document-connect\";\n  MessageTypeCStoBG[\"DOCUMENT_FORGET\"] = \"cs-bg-document-forget\";\n  MessageTypeCStoBG[\"DOCUMENT_FREEZE\"] = \"cs-bg-document-freeze\";\n  MessageTypeCStoBG[\"DOCUMENT_RESUME\"] = \"cs-bg-document-resume\";\n})(MessageTypeCStoBG || (MessageTypeCStoBG = {}));\nvar DebugMessageTypeCStoBG;\n(function (DebugMessageTypeCStoBG) {\n  DebugMessageTypeCStoBG[\"LOG\"] = \"debug-cs-bg-log\";\n})(DebugMessageTypeCStoBG || (DebugMessageTypeCStoBG = {}));\nvar MessageTypeCStoUI;\n(function (MessageTypeCStoUI) {\n  MessageTypeCStoUI[\"EXPORT_CSS_RESPONSE\"] = \"cs-ui-export-css-response\";\n})(MessageTypeCStoUI || (MessageTypeCStoUI = {}));\nvar MessageTypeUItoCS;\n(function (MessageTypeUItoCS) {\n  MessageTypeUItoCS[\"EXPORT_CSS\"] = \"ui-cs-export-css\";\n})(MessageTypeUItoCS || (MessageTypeUItoCS = {}));\nconst isNavigatorDefined = typeof navigator !== \"undefined\";\nconst userAgent = isNavigatorDefined ? navigator.userAgentData && Array.isArray(navigator.userAgentData.brands) ? navigator.userAgentData.brands.map(brand => \"\".concat(brand.brand.toLowerCase(), \" \").concat(brand.version)).join(\" \") : navigator.userAgent.toLowerCase() : \"some useragent\";\nconst platform = isNavigatorDefined ? navigator.userAgentData && typeof navigator.userAgentData.platform === \"string\" ? navigator.userAgentData.platform.toLowerCase() : navigator.platform.toLowerCase() : \"some platform\";\nconst isChromium = userAgent.includes(\"chrome\") || userAgent.includes(\"chromium\");\nconst isFirefox = userAgent.includes(\"firefox\") || userAgent.includes(\"thunderbird\") || userAgent.includes(\"librewolf\");\nconst isSafari = userAgent.includes(\"safari\") && !isChromium;\nconst isWindows = platform.startsWith(\"win\");\nconst isMacOS = platform.startsWith(\"mac\");\nisNavigatorDefined && navigator.userAgentData ? navigator.userAgentData.mobile : userAgent.includes(\"mobile\");\nconst isShadowDomSupported = typeof ShadowRoot === \"function\";\nconst isMatchMediaChangeEventListenerSupported = typeof MediaQueryList === \"function\" && typeof MediaQueryList.prototype.addEventListener === \"function\";\nconst isLayerRuleSupported = typeof CSSLayerBlockRule === \"function\";\n(() => {\n  const m = userAgent.match(/chrom(?:e|ium)(?:\\/| )([^ ]+)/);\n  if (m && m[1]) {\n    return m[1];\n  }\n  return \"\";\n})();\n(() => {\n  const m = userAgent.match(/(?:firefox|librewolf)(?:\\/| )([^ ]+)/);\n  if (m && m[1]) {\n    return m[1];\n  }\n  return \"\";\n})();\nconst isDefinedSelectorSupported = (() => {\n  try {\n    document.querySelector(\":defined\");\n    return true;\n  } catch (err) {\n    return false;\n  }\n})();\nconst isCSSColorSchemePropSupported = (() => {\n  try {\n    if (typeof document === \"undefined\") {\n      return false;\n    }\n    const el = document.createElement(\"div\");\n    if (!el || typeof el.style !== \"object\") {\n      return false;\n    }\n    if (typeof el.style.colorScheme === \"string\") {\n      return true;\n    }\n    el.setAttribute(\"style\", \"color-scheme: dark\");\n    return el.style.colorScheme === \"dark\";\n  } catch (e) {\n    return false;\n  }\n})();\nasync function getOKResponse(url, mimeType, origin) {\n  const credentials = origin && url.startsWith(\"\".concat(origin, \"/\")) ? undefined : \"omit\";\n  const response = await fetch(url, {\n    cache: \"force-cache\",\n    credentials,\n    referrer: origin\n  });\n  if (isFirefox && mimeType === \"text/css\" && url.startsWith(\"moz-extension://\") && url.endsWith(\".css\")) {\n    return response;\n  }\n  if (mimeType && !response.headers.get(\"Content-Type\").startsWith(mimeType)) {\n    throw new Error(\"Mime type mismatch when loading \".concat(url));\n  }\n  if (!response.ok) {\n    throw new Error(\"Unable to load \".concat(url, \" \").concat(response.status, \" \").concat(response.statusText));\n  }\n  return response;\n}\nasync function loadAsDataURL(url, mimeType) {\n  const response = await getOKResponse(url, mimeType);\n  return await readResponseAsDataURL(response);\n}\nasync function loadAsBlob(url, mimeType) {\n  const response = await getOKResponse(url, mimeType);\n  return await response.blob();\n}\nasync function readResponseAsDataURL(response) {\n  const blob = await response.blob();\n  const dataURL = await new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result);\n    reader.readAsDataURL(blob);\n  });\n  return dataURL;\n}\nasync function loadAsText(url, mimeType, origin) {\n  const response = await getOKResponse(url, mimeType, origin);\n  return await response.text();\n}\nconst throwCORSError = async url => {\n  return Promise.reject(new Error([\"Embedded Dark Reader cannot access a cross-origin resource\", url, \"Overview your URLs and CORS policies or use\", \"`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.\", \"See if using `DarkReader.setFetchMethod(window.fetch)`\", \"before `DarkReader.enable()` works.\"].join(\" \")));\n};\nlet fetcher = throwCORSError;\nfunction setFetchMethod$1(fetch) {\n  if (fetch) {\n    fetcher = fetch;\n  } else {\n    fetcher = throwCORSError;\n  }\n}\nasync function callFetchMethod(url) {\n  return await fetcher(url);\n}\nif (!window.chrome) {\n  window.chrome = {};\n}\nif (!chrome.runtime) {\n  chrome.runtime = {};\n}\nconst messageListeners = new Set();\nasync function sendMessage() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (args[0] && args[0].type === MessageTypeCStoBG.FETCH) {\n    const {\n      id\n    } = args[0];\n    try {\n      const {\n        url,\n        responseType\n      } = args[0].data;\n      const response = await callFetchMethod(url);\n      let text;\n      if (responseType === \"data-url\") {\n        text = await readResponseAsDataURL(response);\n      } else {\n        text = await response.text();\n      }\n      messageListeners.forEach(cb => cb({\n        type: MessageTypeBGtoCS.FETCH_RESPONSE,\n        data: text,\n        error: null,\n        id\n      }));\n    } catch (error) {\n      console.error(error);\n      messageListeners.forEach(cb => cb({\n        type: MessageTypeBGtoCS.FETCH_RESPONSE,\n        data: null,\n        error,\n        id\n      }));\n    }\n  }\n}\nfunction addMessageListener(callback) {\n  messageListeners.add(callback);\n}\nif (typeof chrome.runtime.sendMessage === \"function\") {\n  const nativeSendMessage = chrome.runtime.sendMessage;\n  chrome.runtime.sendMessage = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    sendMessage(...args);\n    nativeSendMessage.apply(chrome.runtime, args);\n  };\n} else {\n  chrome.runtime.sendMessage = sendMessage;\n}\nif (!chrome.runtime.onMessage) {\n  chrome.runtime.onMessage = {};\n}\nif (typeof chrome.runtime.onMessage.addListener === \"function\") {\n  const nativeAddListener = chrome.runtime.onMessage.addListener;\n  chrome.runtime.onMessage.addListener = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    addMessageListener(args[0]);\n    nativeAddListener.apply(chrome.runtime.onMessage, args);\n  };\n} else {\n  chrome.runtime.onMessage.addListener = function () {\n    return addMessageListener(arguments.length <= 0 ? undefined : arguments[0]);\n  };\n}\nvar ThemeEngine;\n(function (ThemeEngine) {\n  ThemeEngine[\"cssFilter\"] = \"cssFilter\";\n  ThemeEngine[\"svgFilter\"] = \"svgFilter\";\n  ThemeEngine[\"staticTheme\"] = \"staticTheme\";\n  ThemeEngine[\"dynamicTheme\"] = \"dynamicTheme\";\n})(ThemeEngine || (ThemeEngine = {}));\nvar AutomationMode;\n(function (AutomationMode) {\n  AutomationMode[\"NONE\"] = \"\";\n  AutomationMode[\"TIME\"] = \"time\";\n  AutomationMode[\"SYSTEM\"] = \"system\";\n  AutomationMode[\"LOCATION\"] = \"location\";\n})(AutomationMode || (AutomationMode = {}));\nconst DEFAULT_COLORS = {\n  darkScheme: {\n    background: \"#181a1b\",\n    text: \"#e8e6e3\"\n  },\n  lightScheme: {\n    background: \"#dcdad7\",\n    text: \"#181a1b\"\n  }\n};\nconst DEFAULT_THEME = {\n  mode: 1,\n  brightness: 100,\n  contrast: 100,\n  grayscale: 0,\n  sepia: 0,\n  useFont: false,\n  fontFamily: isMacOS ? \"Helvetica Neue\" : isWindows ? \"Segoe UI\" : \"Open Sans\",\n  textStroke: 0,\n  engine: ThemeEngine.dynamicTheme,\n  stylesheet: \"\",\n  darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,\n  darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,\n  lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,\n  lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,\n  scrollbarColor: \"\",\n  selectionColor: \"auto\",\n  styleSystemControls: !isCSSColorSchemePropSupported,\n  lightColorScheme: \"Default\",\n  darkColorScheme: \"Default\",\n  immediateModify: false\n};\nconst filterModeSites = [\"*.officeapps.live.com\", \"*.sharepoint.com\", \"docs.google.com\", \"onedrive.live.com\"];\n({\n  customThemes: filterModeSites.map(url => {\n    const engine = ThemeEngine.cssFilter;\n    return {\n      url: [url],\n      theme: _objectSpread(_objectSpread({}, DEFAULT_THEME), {}, {\n        engine\n      }),\n      builtIn: true\n    };\n  }),\n  automation: {\n    mode: AutomationMode.NONE\n  }\n});\nfunction getMatches(regex, input) {\n  let group = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const matches = [];\n  let m;\n  while (m = regex.exec(input)) {\n    matches.push(m[group]);\n  }\n  return matches;\n}\nfunction getMatchesWithOffsets(regex, input) {\n  let group = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const matches = [];\n  let m;\n  while (m = regex.exec(input)) {\n    matches.push({\n      text: m[group],\n      offset: m.index\n    });\n  }\n  return matches;\n}\nfunction getHashCode(text) {\n  const len = text.length;\n  let hash = 0;\n  for (let i = 0; i < len; i++) {\n    const c = text.charCodeAt(i);\n    hash = (hash << 5) - hash + c & 4294967295;\n  }\n  return hash;\n}\nfunction escapeRegExpSpecialChars(input) {\n  return input.replaceAll(/[\\^$.*+?\\(\\)\\[\\]{}|\\-\\\\]/g, \"\\\\$&\");\n}\nfunction getParenthesesRange(input) {\n  let searchStartIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return getOpenCloseRange(input, searchStartIndex, \"(\", \")\", []);\n}\nfunction getOpenCloseRange(input, searchStartIndex, openToken, closeToken, excludeRanges) {\n  let indexOf;\n  if (excludeRanges.length === 0) {\n    indexOf = (token, pos) => input.indexOf(token, pos);\n  } else {\n    indexOf = (token, pos) => indexOfExcluding(input, token, pos, excludeRanges);\n  }\n  const {\n    length\n  } = input;\n  let depth = 0;\n  let firstOpenIndex = -1;\n  for (let i = searchStartIndex; i < length; i++) {\n    if (depth === 0) {\n      const openIndex = indexOf(openToken, i);\n      if (openIndex < 0) {\n        break;\n      }\n      firstOpenIndex = openIndex;\n      depth++;\n      i = openIndex;\n    } else {\n      const closeIndex = indexOf(closeToken, i);\n      if (closeIndex < 0) {\n        break;\n      }\n      const openIndex = indexOf(openToken, i);\n      if (openIndex < 0 || closeIndex <= openIndex) {\n        depth--;\n        if (depth === 0) {\n          return {\n            start: firstOpenIndex,\n            end: closeIndex + 1\n          };\n        }\n        i = closeIndex;\n      } else {\n        depth++;\n        i = openIndex;\n      }\n    }\n  }\n  return null;\n}\nfunction indexOfExcluding(input, search, position, excludeRanges) {\n  const i = input.indexOf(search, position);\n  const exclusion = excludeRanges.find(r => i >= r.start && i < r.end);\n  if (exclusion) {\n    return indexOfExcluding(input, search, exclusion.end, excludeRanges);\n  }\n  return i;\n}\nfunction splitExcluding(input, separator, excludeRanges) {\n  const parts = [];\n  let commaIndex = -1;\n  let currIndex = 0;\n  while ((commaIndex = indexOfExcluding(input, separator, currIndex, excludeRanges)) >= 0) {\n    parts.push(input.substring(currIndex, commaIndex).trim());\n    currIndex = commaIndex + 1;\n  }\n  parts.push(input.substring(currIndex).trim());\n  return parts;\n}\nlet anchor;\nconst parsedURLCache = new Map();\nfunction fixBaseURL($url) {\n  if (!anchor) {\n    anchor = document.createElement(\"a\");\n  }\n  anchor.href = $url;\n  return anchor.href;\n}\nfunction parseURL($url) {\n  let $base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  const key = \"\".concat($url).concat($base ? \";\".concat($base) : \"\");\n  if (parsedURLCache.has(key)) {\n    return parsedURLCache.get(key);\n  }\n  if ($base) {\n    const parsedURL = new URL($url, fixBaseURL($base));\n    parsedURLCache.set(key, parsedURL);\n    return parsedURL;\n  }\n  const parsedURL = new URL(fixBaseURL($url));\n  parsedURLCache.set($url, parsedURL);\n  return parsedURL;\n}\nfunction getAbsoluteURL($base, $relative) {\n  if ($relative.match(/^data\\\\?\\:/)) {\n    return $relative;\n  }\n  if (/^\\/\\//.test($relative)) {\n    return \"\".concat(location.protocol).concat($relative);\n  }\n  const b = parseURL($base);\n  const a = parseURL($relative, b.href);\n  return a.href;\n}\nfunction isRelativeHrefOnAbsolutePath(href) {\n  if (href.startsWith(\"data:\")) {\n    return true;\n  }\n  const url = parseURL(href);\n  if (url.protocol !== location.protocol) {\n    return false;\n  }\n  if (url.hostname !== location.hostname) {\n    return false;\n  }\n  if (url.port !== location.port) {\n    return false;\n  }\n  return url.pathname === location.pathname;\n}\nconst excludedSelectors = [\"pre\", \"pre *\", \"code\", '[aria-hidden=\"true\"]', '[class*=\"fa-\"]', \".fa\", \".fab\", \".fad\", \".fal\", \".far\", \".fas\", \".fass\", \".fasr\", \".fat\", \".icofont\", '[style*=\"font-\"]', '[class*=\"icon\"]', '[class*=\"Icon\"]', '[class*=\"symbol\"]', '[class*=\"Symbol\"]', \".glyphicon\", '[class*=\"material-symbol\"]', '[class*=\"material-icon\"]', \"mu\", '[class*=\"mu-\"]', \".typcn\", '[class*=\"vjs-\"]'];\nfunction createTextStyle(config) {\n  const lines = [];\n  lines.push(\"*:not(\".concat(excludedSelectors.join(\", \"), \") {\"));\n  if (config.useFont && config.fontFamily) {\n    lines.push(\"  font-family: \".concat(config.fontFamily, \" !important;\"));\n  }\n  if (config.textStroke > 0) {\n    lines.push(\"  -webkit-text-stroke: \".concat(config.textStroke, \"px !important;\"));\n    lines.push(\"  text-stroke: \".concat(config.textStroke, \"px !important;\"));\n  }\n  lines.push(\"}\");\n  return lines.join(\"\\n\");\n}\nfunction isArrayLike(items) {\n  return items.length != null;\n}\nfunction forEach(items, iterator) {\n  if (isArrayLike(items)) {\n    for (let i = 0, len = items.length; i < len; i++) {\n      iterator(items[i]);\n    }\n  } else {\n    for (const item of items) {\n      iterator(item);\n    }\n  }\n}\nfunction push(array, addition) {\n  forEach(addition, a => array.push(a));\n}\nfunction toArray(items) {\n  const results = [];\n  for (let i = 0, len = items.length; i < len; i++) {\n    results.push(items[i]);\n  }\n  return results;\n}\nfunction scale(x, inLow, inHigh, outLow, outHigh) {\n  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;\n}\nfunction clamp(x, min, max) {\n  return Math.min(max, Math.max(min, x));\n}\nfunction multiplyMatrices(m1, m2) {\n  const result = [];\n  for (let i = 0, len = m1.length; i < len; i++) {\n    result[i] = [];\n    for (let j = 0, len2 = m2[0].length; j < len2; j++) {\n      let sum = 0;\n      for (let k = 0, len3 = m1[0].length; k < len3; k++) {\n        sum += m1[i][k] * m2[k][j];\n      }\n      result[i][j] = sum;\n    }\n  }\n  return result;\n}\nfunction createFilterMatrix(config) {\n  let m = Matrix.identity();\n  if (config.sepia !== 0) {\n    m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));\n  }\n  if (config.grayscale !== 0) {\n    m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));\n  }\n  if (config.contrast !== 100) {\n    m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));\n  }\n  if (config.brightness !== 100) {\n    m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));\n  }\n  if (config.mode === 1) {\n    m = multiplyMatrices(m, Matrix.invertNHue());\n  }\n  return m;\n}\nfunction applyColorMatrix(_ref, matrix) {\n  let [r, g, b] = _ref;\n  const rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];\n  const result = multiplyMatrices(matrix, rgb);\n  return [0, 1, 2].map(i => clamp(Math.round(result[i][0] * 255), 0, 255));\n}\nconst Matrix = {\n  identity() {\n    return [[1, 0, 0, 0, 0], [0, 1, 0, 0, 0], [0, 0, 1, 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  invertNHue() {\n    return [[0.333, -0.667, -0.667, 0, 1], [-0.667, 0.333, -0.667, 0, 1], [-0.667, -0.667, 0.333, 0, 1], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  brightness(v) {\n    return [[v, 0, 0, 0, 0], [0, v, 0, 0, 0], [0, 0, v, 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  contrast(v) {\n    const t = (1 - v) / 2;\n    return [[v, 0, 0, 0, t], [0, v, 0, 0, t], [0, 0, v, 0, t], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  sepia(v) {\n    return [[0.393 + 0.607 * (1 - v), 0.769 - 0.769 * (1 - v), 0.189 - 0.189 * (1 - v), 0, 0], [0.349 - 0.349 * (1 - v), 0.686 + 0.314 * (1 - v), 0.168 - 0.168 * (1 - v), 0, 0], [0.272 - 0.272 * (1 - v), 0.534 - 0.534 * (1 - v), 0.131 + 0.869 * (1 - v), 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  },\n  grayscale(v) {\n    return [[0.2126 + 0.7874 * (1 - v), 0.7152 - 0.7152 * (1 - v), 0.0722 - 0.0722 * (1 - v), 0, 0], [0.2126 - 0.2126 * (1 - v), 0.7152 + 0.2848 * (1 - v), 0.0722 - 0.0722 * (1 - v), 0, 0], [0.2126 - 0.2126 * (1 - v), 0.7152 - 0.7152 * (1 - v), 0.0722 + 0.9278 * (1 - v), 0, 0], [0, 0, 0, 1, 0], [0, 0, 0, 0, 1]];\n  }\n};\nvar FilterMode;\n(function (FilterMode) {\n  FilterMode[FilterMode[\"light\"] = 0] = \"light\";\n  FilterMode[FilterMode[\"dark\"] = 1] = \"dark\";\n})(FilterMode || (FilterMode = {}));\nfunction getCSSFilterValue(config) {\n  const filters = [];\n  if (config.mode === FilterMode.dark) {\n    filters.push(\"invert(100%) hue-rotate(180deg)\");\n  }\n  if (config.brightness !== 100) {\n    filters.push(\"brightness(\".concat(config.brightness, \"%)\"));\n  }\n  if (config.contrast !== 100) {\n    filters.push(\"contrast(\".concat(config.contrast, \"%)\"));\n  }\n  if (config.grayscale !== 0) {\n    filters.push(\"grayscale(\".concat(config.grayscale, \"%)\"));\n  }\n  if (config.sepia !== 0) {\n    filters.push(\"sepia(\".concat(config.sepia, \"%)\"));\n  }\n  if (filters.length === 0) {\n    return null;\n  }\n  return filters.join(\" \");\n}\nfunction evalMath(expression) {\n  const rpnStack = [];\n  const workingStack = [];\n  let lastToken;\n  for (let i = 0, len = expression.length; i < len; i++) {\n    const token = expression[i];\n    if (!token || token === \" \") {\n      continue;\n    }\n    if (operators.has(token)) {\n      const op = operators.get(token);\n      while (workingStack.length) {\n        const currentOp = operators.get(workingStack[0]);\n        if (!currentOp) {\n          break;\n        }\n        if (op.lessOrEqualThan(currentOp)) {\n          rpnStack.push(workingStack.shift());\n        } else {\n          break;\n        }\n      }\n      workingStack.unshift(token);\n    } else if (!lastToken || operators.has(lastToken)) {\n      rpnStack.push(token);\n    } else {\n      rpnStack[rpnStack.length - 1] += token;\n    }\n    lastToken = token;\n  }\n  rpnStack.push(...workingStack);\n  const stack = [];\n  for (let i = 0, len = rpnStack.length; i < len; i++) {\n    const op = operators.get(rpnStack[i]);\n    if (op) {\n      const args = stack.splice(0, 2);\n      stack.push(op.exec(args[1], args[0]));\n    } else {\n      stack.unshift(parseFloat(rpnStack[i]));\n    }\n  }\n  return stack[0];\n}\nclass Operator {\n  constructor(precedence, method) {\n    this.precendce = precedence;\n    this.execMethod = method;\n  }\n  exec(left, right) {\n    return this.execMethod(left, right);\n  }\n  lessOrEqualThan(op) {\n    return this.precendce <= op.precendce;\n  }\n}\nconst operators = new Map([[\"+\", new Operator(1, (left, right) => left + right)], [\"-\", new Operator(1, (left, right) => left - right)], [\"*\", new Operator(2, (left, right) => left * right)], [\"/\", new Operator(2, (left, right) => left / right)]]);\nconst isSystemDarkModeEnabled = () => matchMedia(\"(prefers-color-scheme: dark)\").matches;\nconst hslaParseCache = new Map();\nconst rgbaParseCache = new Map();\nfunction parseColorWithCache($color) {\n  $color = $color.trim();\n  if (rgbaParseCache.has($color)) {\n    return rgbaParseCache.get($color);\n  }\n  if ($color.includes(\"calc(\")) {\n    $color = lowerCalcExpression($color);\n  }\n  const color = parse($color);\n  if (color) {\n    rgbaParseCache.set($color, color);\n    return color;\n  }\n  return null;\n}\nfunction parseToHSLWithCache(color) {\n  if (hslaParseCache.has(color)) {\n    return hslaParseCache.get(color);\n  }\n  const rgb = parseColorWithCache(color);\n  if (!rgb) {\n    return null;\n  }\n  const hsl = rgbToHSL(rgb);\n  hslaParseCache.set(color, hsl);\n  return hsl;\n}\nfunction clearColorCache() {\n  hslaParseCache.clear();\n  rgbaParseCache.clear();\n}\nfunction hslToRGB(_ref2) {\n  let {\n    h,\n    s,\n    l,\n    a = 1\n  } = _ref2;\n  if (s === 0) {\n    const [r, b, g] = [l, l, l].map(x => Math.round(x * 255));\n    return {\n      r,\n      g,\n      b,\n      a\n    };\n  }\n  const c = (1 - Math.abs(2 * l - 1)) * s;\n  const x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  const m = l - c / 2;\n  const [r, g, b] = (h < 60 ? [c, x, 0] : h < 120 ? [x, c, 0] : h < 180 ? [0, c, x] : h < 240 ? [0, x, c] : h < 300 ? [x, 0, c] : [c, 0, x]).map(n => Math.round((n + m) * 255));\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\nfunction rgbToHSL(_ref3) {\n  let {\n    r: r255,\n    g: g255,\n    b: b255,\n    a = 1\n  } = _ref3;\n  const r = r255 / 255;\n  const g = g255 / 255;\n  const b = b255 / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const c = max - min;\n  const l = (max + min) / 2;\n  if (c === 0) {\n    return {\n      h: 0,\n      s: 0,\n      l,\n      a\n    };\n  }\n  let h = (max === r ? (g - b) / c % 6 : max === g ? (b - r) / c + 2 : (r - g) / c + 4) * 60;\n  if (h < 0) {\n    h += 360;\n  }\n  const s = c / (1 - Math.abs(2 * l - 1));\n  return {\n    h,\n    s,\n    l,\n    a\n  };\n}\nfunction toFixed(n) {\n  let digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const fixed = n.toFixed(digits);\n  if (digits === 0) {\n    return fixed;\n  }\n  const dot = fixed.indexOf(\".\");\n  if (dot >= 0) {\n    const zerosMatch = fixed.match(/0+$/);\n    if (zerosMatch) {\n      if (zerosMatch.index === dot + 1) {\n        return fixed.substring(0, dot);\n      }\n      return fixed.substring(0, zerosMatch.index);\n    }\n  }\n  return fixed;\n}\nfunction rgbToString(rgb) {\n  const {\n    r,\n    g,\n    b,\n    a\n  } = rgb;\n  if (a != null && a < 1) {\n    return \"rgba(\".concat(toFixed(r), \", \").concat(toFixed(g), \", \").concat(toFixed(b), \", \").concat(toFixed(a, 2), \")\");\n  }\n  return \"rgb(\".concat(toFixed(r), \", \").concat(toFixed(g), \", \").concat(toFixed(b), \")\");\n}\nfunction rgbToHexString(_ref4) {\n  let {\n    r,\n    g,\n    b,\n    a\n  } = _ref4;\n  return \"#\".concat((a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b]).map(x => {\n    return \"\".concat(x < 16 ? \"0\" : \"\").concat(x.toString(16));\n  }).join(\"\"));\n}\nfunction hslToString(hsl) {\n  const {\n    h,\n    s,\n    l,\n    a\n  } = hsl;\n  if (a != null && a < 1) {\n    return \"hsla(\".concat(toFixed(h), \", \").concat(toFixed(s * 100), \"%, \").concat(toFixed(l * 100), \"%, \").concat(toFixed(a, 2), \")\");\n  }\n  return \"hsl(\".concat(toFixed(h), \", \").concat(toFixed(s * 100), \"%, \").concat(toFixed(l * 100), \"%)\");\n}\nconst rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;\nconst hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;\nconst hexMatch = /^#[0-9a-f]+$/i;\nconst supportedColorFuncs = [\"color\", \"color-mix\", \"hwb\", \"lab\", \"lch\", \"oklab\", \"oklch\"];\nfunction parse($color) {\n  const c = $color.trim().toLowerCase();\n  if (c.includes(\"(from \")) {\n    if (c.indexOf(\"(from\") !== c.lastIndexOf(\"(from\")) {\n      return null;\n    }\n    return domParseColor(c);\n  }\n  if (c.match(rgbMatch)) {\n    if (c.startsWith(\"rgb(#\") || c.startsWith(\"rgba(#\")) {\n      if (c.lastIndexOf(\"rgb\") > 0) {\n        return null;\n      }\n      return domParseColor(c);\n    }\n    return parseRGB(c);\n  }\n  if (c.match(hslMatch)) {\n    return parseHSL(c);\n  }\n  if (c.match(hexMatch)) {\n    return parseHex(c);\n  }\n  if (knownColors.has(c)) {\n    return getColorByName(c);\n  }\n  if (systemColors.has(c)) {\n    return getSystemColor(c);\n  }\n  if (c === \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0\n    };\n  }\n  if (c.endsWith(\")\") && supportedColorFuncs.some(fn => c.startsWith(fn) && c[fn.length] === \"(\" && c.lastIndexOf(fn) === 0)) {\n    return domParseColor(c);\n  }\n  if (c.startsWith(\"light-dark(\") && c.endsWith(\")\")) {\n    const match = c.match(/^light-dark\\(\\s*([a-z]+(\\(.*\\))?),\\s*([a-z]+(\\(.*\\))?)\\s*\\)$/);\n    if (match) {\n      const schemeColor = isSystemDarkModeEnabled() ? match[3] : match[1];\n      return parse(schemeColor);\n    }\n  }\n  return null;\n}\nfunction getNumbers($color) {\n  const numbers = [];\n  let prevPos = 0;\n  let isMining = false;\n  const startIndex = $color.indexOf(\"(\");\n  $color = $color.substring(startIndex + 1, $color.length - 1);\n  for (let i = 0; i < $color.length; i++) {\n    const c = $color[i];\n    if (c >= \"0\" && c <= \"9\" || c === \".\" || c === \"+\" || c === \"-\") {\n      isMining = true;\n    } else if (isMining && (c === \" \" || c === \",\" || c === \"/\")) {\n      numbers.push($color.substring(prevPos, i));\n      isMining = false;\n      prevPos = i + 1;\n    } else if (!isMining) {\n      prevPos = i + 1;\n    }\n  }\n  if (isMining) {\n    numbers.push($color.substring(prevPos, $color.length));\n  }\n  return numbers;\n}\nfunction getNumbersFromString(str, range, units) {\n  const raw = getNumbers(str);\n  const unitsList = Object.entries(units);\n  const numbers = raw.map(r => r.trim()).map((r, i) => {\n    let n;\n    const unit = unitsList.find(_ref5 => {\n      let [u] = _ref5;\n      return r.endsWith(u);\n    });\n    if (unit) {\n      n = parseFloat(r.substring(0, r.length - unit[0].length)) / unit[1] * range[i];\n    } else {\n      n = parseFloat(r);\n    }\n    if (range[i] > 1) {\n      return Math.round(n);\n    }\n    return n;\n  });\n  return numbers;\n}\nconst rgbRange = [255, 255, 255, 1];\nconst rgbUnits = {\n  \"%\": 100\n};\nfunction parseRGB($rgb) {\n  const [r, g, b, a = 1] = getNumbersFromString($rgb, rgbRange, rgbUnits);\n  if (r == null || g == null || b == null || a == null) {\n    return null;\n  }\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\nconst hslRange = [360, 1, 1, 1];\nconst hslUnits = {\n  \"%\": 100,\n  \"deg\": 360,\n  \"rad\": 2 * Math.PI,\n  \"turn\": 1\n};\nfunction parseHSL($hsl) {\n  const [h, s, l, a = 1] = getNumbersFromString($hsl, hslRange, hslUnits);\n  if (h == null || s == null || l == null || a == null) {\n    return null;\n  }\n  return hslToRGB({\n    h,\n    s,\n    l,\n    a\n  });\n}\nfunction parseHex($hex) {\n  const h = $hex.substring(1);\n  switch (h.length) {\n    case 3:\n    case 4:\n      {\n        const [r, g, b] = [0, 1, 2].map(i => parseInt(\"\".concat(h[i]).concat(h[i]), 16));\n        const a = h.length === 3 ? 1 : parseInt(\"\".concat(h[3]).concat(h[3]), 16) / 255;\n        return {\n          r,\n          g,\n          b,\n          a\n        };\n      }\n    case 6:\n    case 8:\n      {\n        const [r, g, b] = [0, 2, 4].map(i => parseInt(h.substring(i, i + 2), 16));\n        const a = h.length === 6 ? 1 : parseInt(h.substring(6, 8), 16) / 255;\n        return {\n          r,\n          g,\n          b,\n          a\n        };\n      }\n  }\n  return null;\n}\nfunction getColorByName($color) {\n  const n = knownColors.get($color);\n  return {\n    r: n >> 16 & 255,\n    g: n >> 8 & 255,\n    b: n >> 0 & 255,\n    a: 1\n  };\n}\nfunction getSystemColor($color) {\n  const n = systemColors.get($color);\n  return {\n    r: n >> 16 & 255,\n    g: n >> 8 & 255,\n    b: n >> 0 & 255,\n    a: 1\n  };\n}\nfunction lowerCalcExpression(color) {\n  let searchIndex = 0;\n  const replaceBetweenIndices = (start, end, replacement) => {\n    color = color.substring(0, start) + replacement + color.substring(end);\n  };\n  while ((searchIndex = color.indexOf(\"calc(\")) !== -1) {\n    const range = getParenthesesRange(color, searchIndex);\n    if (!range) {\n      break;\n    }\n    let slice = color.slice(range.start + 1, range.end - 1);\n    const includesPercentage = slice.includes(\"%\");\n    slice = slice.split(\"%\").join(\"\");\n    const output = Math.round(evalMath(slice));\n    replaceBetweenIndices(range.start - 4, range.end, output + (includesPercentage ? \"%\" : \"\"));\n  }\n  return color;\n}\nconst knownColors = new Map(Object.entries({\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgrey: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  grey: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgrey: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n}));\nconst systemColors = new Map(Object.entries({\n  \"ActiveBorder\": 0x3b99fc,\n  \"ActiveCaption\": 0x000000,\n  \"AppWorkspace\": 0xaaaaaa,\n  \"Background\": 0x6363ce,\n  \"ButtonFace\": 0xffffff,\n  \"ButtonHighlight\": 0xe9e9e9,\n  \"ButtonShadow\": 0x9fa09f,\n  \"ButtonText\": 0x000000,\n  \"CaptionText\": 0x000000,\n  \"GrayText\": 0x7f7f7f,\n  \"Highlight\": 0xb2d7ff,\n  \"HighlightText\": 0x000000,\n  \"InactiveBorder\": 0xffffff,\n  \"InactiveCaption\": 0xffffff,\n  \"InactiveCaptionText\": 0x000000,\n  \"InfoBackground\": 0xfbfcc5,\n  \"InfoText\": 0x000000,\n  \"Menu\": 0xf6f6f6,\n  \"MenuText\": 0xffffff,\n  \"Scrollbar\": 0xaaaaaa,\n  \"ThreeDDarkShadow\": 0x000000,\n  \"ThreeDFace\": 0xc0c0c0,\n  \"ThreeDHighlight\": 0xffffff,\n  \"ThreeDLightShadow\": 0xffffff,\n  \"ThreeDShadow\": 0x000000,\n  \"Window\": 0xececec,\n  \"WindowFrame\": 0xaaaaaa,\n  \"WindowText\": 0x000000,\n  \"-webkit-focus-ring-color\": 0xe59700\n}).map(_ref6 => {\n  let [key, value] = _ref6;\n  return [key.toLowerCase(), value];\n}));\nfunction getSRGBLightness(r, g, b) {\n  return (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\n}\nlet canvas$1;\nlet context$1;\nfunction domParseColor($color) {\n  if (!context$1) {\n    canvas$1 = document.createElement(\"canvas\");\n    canvas$1.width = 1;\n    canvas$1.height = 1;\n    context$1 = canvas$1.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n  }\n  context$1.fillStyle = $color;\n  context$1.fillRect(0, 0, 1, 1);\n  const d = context$1.getImageData(0, 0, 1, 1).data;\n  const color = \"rgba(\".concat(d[0], \", \").concat(d[1], \", \").concat(d[2], \", \").concat((d[3] / 255).toFixed(2), \")\");\n  return parseRGB(color);\n}\nfunction throttle(callback) {\n  let pending = false;\n  let frameId = null;\n  let lastArgs;\n  const throttled = function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    lastArgs = args;\n    if (frameId) {\n      pending = true;\n    } else {\n      callback(...lastArgs);\n      frameId = requestAnimationFrame(() => {\n        frameId = null;\n        if (pending) {\n          callback(...lastArgs);\n          pending = false;\n        }\n      });\n    }\n  };\n  const cancel = () => {\n    cancelAnimationFrame(frameId);\n    pending = false;\n    frameId = null;\n  };\n  return Object.assign(throttled, {\n    cancel\n  });\n}\nfunction createAsyncTasksQueue() {\n  const tasks = [];\n  let frameId = null;\n  function runTasks() {\n    let task;\n    while (task = tasks.shift()) {\n      task();\n    }\n    frameId = null;\n  }\n  function add(task) {\n    tasks.push(task);\n    if (!frameId) {\n      frameId = requestAnimationFrame(runTasks);\n    }\n  }\n  function cancel() {\n    tasks.splice(0);\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  }\n  return {\n    add,\n    cancel\n  };\n}\nconst delayTokens = new Set();\nfunction requestAnimationFrameOnce(token, callback) {\n  if (delayTokens.has(token)) {\n    return;\n  }\n  delayTokens.add(token);\n  requestAnimationFrame(() => {\n    delayTokens.delete(token);\n    callback();\n  });\n}\nfunction hexify(number) {\n  return (number < 16 ? \"0\" : \"\") + number.toString(16);\n}\nfunction generateUID() {\n  if (\"randomUUID\" in crypto) {\n    const uuid = crypto.randomUUID();\n    return uuid.substring(0, 8) + uuid.substring(9, 13) + uuid.substring(14, 18) + uuid.substring(19, 23) + uuid.substring(24);\n  }\n  if (\"getRandomValues\" in crypto) {\n    return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(x => hexify(x)).join(\"\");\n  }\n  return Math.floor(Math.random() * 2 ** 55).toString(36);\n}\nlet documentVisibilityListener = null;\nlet documentIsVisible_ = !document.hidden;\nconst listenerOptions = {\n  capture: true,\n  passive: true\n};\nfunction watchForDocumentVisibility() {\n  document.addEventListener(\"visibilitychange\", documentVisibilityListener, listenerOptions);\n  window.addEventListener(\"pageshow\", documentVisibilityListener, listenerOptions);\n  window.addEventListener(\"focus\", documentVisibilityListener, listenerOptions);\n}\nfunction stopWatchingForDocumentVisibility() {\n  document.removeEventListener(\"visibilitychange\", documentVisibilityListener, listenerOptions);\n  window.removeEventListener(\"pageshow\", documentVisibilityListener, listenerOptions);\n  window.removeEventListener(\"focus\", documentVisibilityListener, listenerOptions);\n}\nfunction setDocumentVisibilityListener(callback) {\n  const alreadyWatching = Boolean(documentVisibilityListener);\n  documentVisibilityListener = () => {\n    if (!document.hidden) {\n      removeDocumentVisibilityListener();\n      callback();\n      documentIsVisible_ = true;\n    }\n  };\n  if (!alreadyWatching) {\n    watchForDocumentVisibility();\n  }\n}\nfunction removeDocumentVisibilityListener() {\n  stopWatchingForDocumentVisibility();\n  documentVisibilityListener = null;\n}\nfunction documentIsVisible() {\n  return documentIsVisible_;\n}\nfunction getDuration(time) {\n  let duration = 0;\n  if (time.seconds) {\n    duration += time.seconds * 1000;\n  }\n  if (time.minutes) {\n    duration += time.minutes * 60 * 1000;\n  }\n  if (time.hours) {\n    duration += time.hours * 60 * 60 * 1000;\n  }\n  if (time.days) {\n    duration += time.days * 24 * 60 * 60 * 1000;\n  }\n  return duration;\n}\nfunction logInfo() {}\nfunction logWarn() {}\nfunction logAssert() {}\nfunction ASSERT(description, condition) {\n  if (!condition) {\n    logAssert(description);\n  }\n}\nfunction removeNode(node) {\n  node && node.parentNode && node.parentNode.removeChild(node);\n}\nfunction watchForNodePosition(node, mode) {\n  let onRestore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Function.prototype;\n  const MAX_ATTEMPTS_COUNT = 10;\n  const RETRY_TIMEOUT = getDuration({\n    seconds: 2\n  });\n  const ATTEMPTS_INTERVAL = getDuration({\n    seconds: 10\n  });\n  let prevSibling = node.previousSibling;\n  let parent = node.parentNode;\n  if (!parent) {\n    throw new Error(\"Unable to watch for node position: parent element not found\");\n  }\n  if (mode === \"prev-sibling\" && !prevSibling) {\n    throw new Error(\"Unable to watch for node position: there is no previous sibling\");\n  }\n  let attempts = 0;\n  let start = null;\n  let timeoutId = null;\n  const restore = throttle(() => {\n    if (timeoutId) {\n      return;\n    }\n    attempts++;\n    const now = Date.now();\n    if (start == null) {\n      start = now;\n    } else if (attempts >= MAX_ATTEMPTS_COUNT) {\n      if (now - start < ATTEMPTS_INTERVAL) {\n        logWarn(\"Node position watcher paused: retry in \".concat(RETRY_TIMEOUT, \"ms\"), node, prevSibling);\n        timeoutId = setTimeout(() => {\n          start = null;\n          attempts = 0;\n          timeoutId = null;\n          restore();\n        }, RETRY_TIMEOUT);\n        return;\n      }\n      start = now;\n      attempts = 1;\n    }\n    if (mode === \"head\") {\n      if (prevSibling && prevSibling.parentNode !== parent) {\n        logWarn(\"Sibling moved, moving node to the head end\", node, prevSibling, parent);\n        prevSibling = document.head.lastChild;\n      }\n    }\n    if (mode === \"prev-sibling\") {\n      if (prevSibling.parentNode == null) {\n        logWarn(\"Unable to restore node position: sibling was removed\", node, prevSibling, parent);\n        stop();\n        return;\n      }\n      if (prevSibling.parentNode !== parent) {\n        logWarn(\"Style was moved to another parent\", node, prevSibling, parent);\n        updateParent(prevSibling.parentNode);\n      }\n    }\n    if (mode === \"head\" && !parent.isConnected) {\n      parent = document.head;\n    }\n    logWarn(\"Restoring node position\", node, prevSibling, parent);\n    parent.insertBefore(node, prevSibling && prevSibling.isConnected ? prevSibling.nextSibling : parent.firstChild);\n    observer.takeRecords();\n    onRestore && onRestore();\n  });\n  const observer = new MutationObserver(() => {\n    if (mode === \"head\" && (node.parentNode !== parent || !node.parentNode.isConnected) || mode === \"prev-sibling\" && node.previousSibling !== prevSibling) {\n      restore();\n    }\n  });\n  const run = () => {\n    observer.observe(parent, {\n      childList: true\n    });\n  };\n  const stop = () => {\n    clearTimeout(timeoutId);\n    observer.disconnect();\n    restore.cancel();\n  };\n  const skip = () => {\n    observer.takeRecords();\n  };\n  const updateParent = parentNode => {\n    parent = parentNode;\n    stop();\n    run();\n  };\n  run();\n  return {\n    run,\n    stop,\n    skip\n  };\n}\nfunction iterateShadowHosts(root, iterator) {\n  if (root == null) {\n    return;\n  }\n  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      return node.shadowRoot == null ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;\n    }\n  });\n  for (let node = root.shadowRoot ? walker.currentNode : walker.nextNode(); node != null; node = walker.nextNode()) {\n    if (node.classList.contains(\"surfingkeys_hints_host\")) {\n      continue;\n    }\n    iterator(node);\n    iterateShadowHosts(node.shadowRoot, iterator);\n  }\n}\nlet isDOMReady = () => {\n  return document.readyState === \"complete\" || document.readyState === \"interactive\";\n};\nfunction setIsDOMReady(newFunc) {\n  isDOMReady = newFunc;\n}\nconst readyStateListeners = new Set();\nfunction addDOMReadyListener(listener) {\n  isDOMReady() ? listener() : readyStateListeners.add(listener);\n}\nfunction removeDOMReadyListener(listener) {\n  readyStateListeners.delete(listener);\n}\nfunction isReadyStateComplete() {\n  return document.readyState === \"complete\";\n}\nconst readyStateCompleteListeners = new Set();\nfunction addReadyStateCompleteListener(listener) {\n  isReadyStateComplete() ? listener() : readyStateCompleteListeners.add(listener);\n}\nfunction cleanReadyStateCompleteListeners() {\n  readyStateCompleteListeners.clear();\n}\nif (!isDOMReady()) {\n  const onReadyStateChange = () => {\n    if (isDOMReady()) {\n      readyStateListeners.forEach(listener => listener());\n      readyStateListeners.clear();\n      if (isReadyStateComplete()) {\n        document.removeEventListener(\"readystatechange\", onReadyStateChange);\n        readyStateCompleteListeners.forEach(listener => listener());\n        readyStateCompleteListeners.clear();\n      }\n    }\n  };\n  document.addEventListener(\"readystatechange\", onReadyStateChange);\n}\nconst HUGE_MUTATIONS_COUNT = 1000;\nfunction isHugeMutation(mutations) {\n  if (mutations.length > HUGE_MUTATIONS_COUNT) {\n    return true;\n  }\n  let addedNodesCount = 0;\n  for (let i = 0; i < mutations.length; i++) {\n    addedNodesCount += mutations[i].addedNodes.length;\n    if (addedNodesCount > HUGE_MUTATIONS_COUNT) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getElementsTreeOperations(mutations) {\n  const additions = new Set();\n  const deletions = new Set();\n  const moves = new Set();\n  mutations.forEach(m => {\n    forEach(m.addedNodes, n => {\n      if (n instanceof Element && n.isConnected) {\n        additions.add(n);\n      }\n    });\n    forEach(m.removedNodes, n => {\n      if (n instanceof Element) {\n        if (n.isConnected) {\n          moves.add(n);\n          additions.delete(n);\n        } else {\n          deletions.add(n);\n        }\n      }\n    });\n  });\n  const duplicateAdditions = [];\n  const duplicateDeletions = [];\n  additions.forEach(node => {\n    if (additions.has(node.parentElement)) {\n      duplicateAdditions.push(node);\n    }\n  });\n  deletions.forEach(node => {\n    if (deletions.has(node.parentElement)) {\n      duplicateDeletions.push(node);\n    }\n  });\n  duplicateAdditions.forEach(node => additions.delete(node));\n  duplicateDeletions.forEach(node => deletions.delete(node));\n  return {\n    additions,\n    moves,\n    deletions\n  };\n}\nconst optimizedTreeObservers = new Map();\nconst optimizedTreeCallbacks = new WeakMap();\nfunction createOptimizedTreeObserver(root, callbacks) {\n  let observer;\n  let observerCallbacks;\n  let domReadyListener;\n  if (optimizedTreeObservers.has(root)) {\n    observer = optimizedTreeObservers.get(root);\n    observerCallbacks = optimizedTreeCallbacks.get(observer);\n  } else {\n    let hadHugeMutationsBefore = false;\n    let subscribedForReadyState = false;\n    observer = new MutationObserver(mutations => {\n      if (isHugeMutation(mutations)) {\n        if (!hadHugeMutationsBefore || isDOMReady()) {\n          observerCallbacks.forEach(_ref7 => {\n            let {\n              onHugeMutations\n            } = _ref7;\n            return onHugeMutations(root);\n          });\n        } else if (!subscribedForReadyState) {\n          domReadyListener = () => observerCallbacks.forEach(_ref8 => {\n            let {\n              onHugeMutations\n            } = _ref8;\n            return onHugeMutations(root);\n          });\n          addDOMReadyListener(domReadyListener);\n          subscribedForReadyState = true;\n        }\n        hadHugeMutationsBefore = true;\n      } else {\n        const elementsOperations = getElementsTreeOperations(mutations);\n        observerCallbacks.forEach(_ref9 => {\n          let {\n            onMinorMutations\n          } = _ref9;\n          return onMinorMutations(root, elementsOperations);\n        });\n      }\n    });\n    observer.observe(root, {\n      childList: true,\n      subtree: true\n    });\n    optimizedTreeObservers.set(root, observer);\n    observerCallbacks = new Set();\n    optimizedTreeCallbacks.set(observer, observerCallbacks);\n  }\n  observerCallbacks.add(callbacks);\n  return {\n    disconnect() {\n      observerCallbacks.delete(callbacks);\n      if (domReadyListener) {\n        removeDOMReadyListener(domReadyListener);\n      }\n      if (observerCallbacks.size === 0) {\n        observer.disconnect();\n        optimizedTreeCallbacks.delete(observer);\n        optimizedTreeObservers.delete(root);\n      }\n    }\n  };\n}\nfunction iterateCSSRules(rules, iterate, onImportError) {\n  forEach(rules, rule => {\n    if (isStyleRule(rule)) {\n      var _rule$cssRules;\n      iterate(rule);\n      if (((_rule$cssRules = rule.cssRules) === null || _rule$cssRules === void 0 ? void 0 : _rule$cssRules.length) > 0) {\n        iterateCSSRules(rule.cssRules, iterate);\n      }\n    } else if (isImportRule(rule)) {\n      try {\n        iterateCSSRules(rule.styleSheet.cssRules, iterate, onImportError);\n      } catch (err) {\n        onImportError === null || onImportError === void 0 || onImportError();\n      }\n    } else if (isMediaRule(rule)) {\n      const media = Array.from(rule.media);\n      const isScreenOrAllOrQuery = media.some(m => m.startsWith(\"screen\") || m.startsWith(\"all\") || m.startsWith(\"(\"));\n      const isPrintOrSpeech = media.some(m => m.startsWith(\"print\") || m.startsWith(\"speech\"));\n      if (isScreenOrAllOrQuery || !isPrintOrSpeech) {\n        iterateCSSRules(rule.cssRules, iterate, onImportError);\n      }\n    } else if (isSupportsRule(rule)) {\n      if (CSS.supports(rule.conditionText)) {\n        iterateCSSRules(rule.cssRules, iterate, onImportError);\n      }\n    } else if (isLayerRule(rule)) {\n      iterateCSSRules(rule.cssRules, iterate, onImportError);\n    } else {\n      logWarn(\"CSSRule type not supported\", rule);\n    }\n  });\n}\nconst shorthandVarDependantProperties = [\"background\", \"border\", \"border-color\", \"border-bottom\", \"border-left\", \"border-right\", \"border-top\", \"outline\", \"outline-color\"];\nconst shorthandVarDepPropRegexps = isSafari ? shorthandVarDependantProperties.map(prop => {\n  const regexp = new RegExp(\"\".concat(prop, \":\\\\s*(.*?)\\\\s*;\"));\n  return [prop, regexp];\n}) : null;\nfunction iterateCSSDeclarations(style, iterate) {\n  forEach(style, property => {\n    const value = style.getPropertyValue(property).trim();\n    if (!value) {\n      return;\n    }\n    iterate(property, value);\n  });\n  const cssText = style.cssText;\n  if (cssText.includes(\"var(\")) {\n    if (isSafari) {\n      shorthandVarDepPropRegexps.forEach(_ref0 => {\n        let [prop, regexp] = _ref0;\n        const match = cssText.match(regexp);\n        if (match && match[1]) {\n          const val = match[1].trim();\n          iterate(prop, val);\n        }\n      });\n    } else {\n      shorthandVarDependantProperties.forEach(prop => {\n        const val = style.getPropertyValue(prop);\n        if (val && val.includes(\"var(\")) {\n          iterate(prop, val);\n        }\n      });\n    }\n  }\n  if (cssText.includes(\"background-color: ;\") && !style.getPropertyValue(\"background\")) {\n    handleEmptyShorthand(\"background\", style, iterate);\n  }\n  if (cssText.includes(\"border-\") && cssText.includes(\"-color: ;\") && !style.getPropertyValue(\"border\")) {\n    handleEmptyShorthand(\"border\", style, iterate);\n  }\n}\nfunction handleEmptyShorthand(shorthand, style, iterate) {\n  const parentRule = style.parentRule;\n  if (isStyleRule(parentRule)) {\n    var _parentRule$parentSty;\n    const sourceCSSText = (_parentRule$parentSty = parentRule.parentStyleSheet) === null || _parentRule$parentSty === void 0 || (_parentRule$parentSty = _parentRule$parentSty.ownerNode) === null || _parentRule$parentSty === void 0 ? void 0 : _parentRule$parentSty.textContent;\n    if (sourceCSSText) {\n      let escapedSelector = escapeRegExpSpecialChars(parentRule.selectorText);\n      escapedSelector = escapedSelector.replaceAll(/\\s+/g, \"\\\\s*\");\n      escapedSelector = escapedSelector.replaceAll(/::/g, \"::?\");\n      const regexp = new RegExp(\"\".concat(escapedSelector, \"\\\\s*{[^}]*\").concat(shorthand, \":\\\\s*([^;}]+)\"));\n      const match = sourceCSSText.match(regexp);\n      if (match) {\n        iterate(shorthand, match[1]);\n      }\n    } else if (shorthand === \"background\") {\n      iterate(\"background-color\", \"#ffffff\");\n    }\n  }\n}\nconst cssURLRegex = /url\\((('.*?')|(\".*?\")|([^\\)]*?))\\)/g;\nconst cssImportRegex = /@import\\s*(url\\()?(('.+?')|(\".+?\")|([^\\)]*?))\\)? ?(screen)?;?/gi;\nfunction getCSSURLValue(cssURL) {\n  return cssURL.trim().replace(/[\\n\\r\\\\]+/g, \"\").replace(/^url\\((.*)\\)$/, \"$1\").trim().replace(/^\"(.*)\"$/, \"$1\").replace(/^'(.*)'$/, \"$1\").replace(/(?:\\\\(.))/g, \"$1\");\n}\nfunction getCSSBaseBath(url) {\n  const cssURL = parseURL(url);\n  return \"\".concat(cssURL.origin).concat(cssURL.pathname.replace(/\\?.*$/, \"\").replace(/(\\/)([^\\/]+)$/i, \"$1\"));\n}\nfunction replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {\n  return $css.replace(cssURLRegex, match => {\n    try {\n      const url = getCSSURLValue(match);\n      const absoluteURL = getAbsoluteURL(cssBasePath, url);\n      const escapedURL = absoluteURL.replaceAll(\"'\", \"\\\\'\");\n      return \"url('\".concat(escapedURL, \"')\");\n    } catch (err) {\n      logWarn(\"Not able to replace relative URL with Absolute URL, skipping\");\n      return match;\n    }\n  });\n}\nconst fontFaceRegex = /@font-face\\s*{[^}]*}/g;\nfunction replaceCSSFontFace($css) {\n  return $css.replace(fontFaceRegex, \"\");\n}\nconst styleRules = new WeakSet();\nconst importRules = new WeakSet();\nconst mediaRules = new WeakSet();\nconst supportsRules = new WeakSet();\nconst layerRules = new WeakSet();\nfunction isStyleRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return true;\n  }\n  if (rule.selectorText) {\n    styleRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isImportRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (importRules.has(rule)) {\n    return true;\n  }\n  if (rule.href) {\n    importRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isMediaRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (mediaRules.has(rule)) {\n    return true;\n  }\n  if (rule.media) {\n    mediaRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isSupportsRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (supportsRules.has(rule)) {\n    return true;\n  }\n  if (rule instanceof CSSSupportsRule) {\n    supportsRules.add(rule);\n    return true;\n  }\n  return false;\n}\nfunction isLayerRule(rule) {\n  if (!rule) {\n    return false;\n  }\n  if (styleRules.has(rule)) {\n    return false;\n  }\n  if (layerRules.has(rule)) {\n    return true;\n  }\n  if (isLayerRuleSupported && rule instanceof CSSLayerBlockRule) {\n    layerRules.add(rule);\n    return true;\n  }\n  return false;\n}\nconst sheetsScopes = new WeakMap();\nfunction defineSheetScope(sheet, node) {\n  sheetsScopes.set(sheet, node);\n}\nfunction getSheetScope(sheet) {\n  if (!sheet.ownerNode) {\n    return null;\n  }\n  if (sheetsScopes.has(sheet)) {\n    return sheetsScopes.get(sheet);\n  }\n  let node = sheet.ownerNode;\n  while (node) {\n    if (node instanceof ShadowRoot || node instanceof Document) {\n      defineSheetScope(sheet, node);\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return null;\n}\nlet variablesSheet;\nconst registeredColors = new Map();\nfunction registerVariablesSheet(sheet) {\n  variablesSheet = sheet;\n  const types = [\"background\", \"text\", \"border\"];\n  registeredColors.forEach(registered => {\n    types.forEach(type => {\n      if (registered[type]) {\n        var _variablesSheet;\n        const {\n          variable,\n          value\n        } = registered[type];\n        (_variablesSheet = variablesSheet) === null || _variablesSheet === void 0 || _variablesSheet.cssRules[0].style.setProperty(variable, value);\n      }\n    });\n  });\n}\nfunction releaseVariablesSheet() {\n  variablesSheet = null;\n  clearColorPalette();\n}\nfunction getRegisteredVariableValue(type, registered) {\n  return \"var(\".concat(registered[type].variable, \", \").concat(registered[type].value, \")\");\n}\nfunction getRegisteredColor(type, parsed) {\n  const hex = rgbToHexString(parsed);\n  const registered = registeredColors.get(hex);\n  if (registered !== null && registered !== void 0 && registered[type]) {\n    return getRegisteredVariableValue(type, registered);\n  }\n  return null;\n}\nfunction registerColor(type, parsed, value) {\n  var _variablesSheet2;\n  const hex = rgbToHexString(parsed);\n  let registered;\n  if (registeredColors.has(hex)) {\n    registered = registeredColors.get(hex);\n  } else {\n    const parsed = parseColorWithCache(hex);\n    registered = {\n      parsed\n    };\n    registeredColors.set(hex, registered);\n  }\n  const variable = \"--darkreader-\".concat(type, \"-\").concat(hex.replace(\"#\", \"\"));\n  registered[type] = {\n    variable,\n    value\n  };\n  if ((_variablesSheet2 = variablesSheet) !== null && _variablesSheet2 !== void 0 && (_variablesSheet2 = _variablesSheet2.cssRules[0]) !== null && _variablesSheet2 !== void 0 && _variablesSheet2.style) {\n    var _variablesSheet3;\n    (_variablesSheet3 = variablesSheet) === null || _variablesSheet3 === void 0 || _variablesSheet3.cssRules[0].style.setProperty(variable, value);\n  }\n  return getRegisteredVariableValue(type, registered);\n}\nfunction getColorPalette() {\n  const background = [];\n  const border = [];\n  const text = [];\n  registeredColors.forEach(registered => {\n    if (registered.background) {\n      background.push(registered.parsed);\n    }\n    if (registered.border) {\n      border.push(registered.parsed);\n    }\n    if (registered.text) {\n      text.push(registered.parsed);\n    }\n  });\n  return {\n    background,\n    border,\n    text\n  };\n}\nfunction clearColorPalette() {\n  registeredColors.clear();\n}\nfunction getBgPole(theme) {\n  const isDarkScheme = theme.mode === 1;\n  const prop = isDarkScheme ? \"darkSchemeBackgroundColor\" : \"lightSchemeBackgroundColor\";\n  return theme[prop];\n}\nfunction getFgPole(theme) {\n  const isDarkScheme = theme.mode === 1;\n  const prop = isDarkScheme ? \"darkSchemeTextColor\" : \"lightSchemeTextColor\";\n  return theme[prop];\n}\nconst colorModificationCache = new Map();\nfunction clearColorModificationCache() {\n  colorModificationCache.clear();\n}\nconst rgbCacheKeys = [\"r\", \"g\", \"b\", \"a\"];\nconst themeCacheKeys = [\"mode\", \"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"darkSchemeBackgroundColor\", \"darkSchemeTextColor\", \"lightSchemeBackgroundColor\", \"lightSchemeTextColor\"];\nfunction getCacheId(rgb, theme) {\n  let resultId = \"\";\n  rgbCacheKeys.forEach(key => {\n    resultId += \"\".concat(rgb[key], \";\");\n  });\n  themeCacheKeys.forEach(key => {\n    resultId += \"\".concat(theme[key], \";\");\n  });\n  return resultId;\n}\nfunction modifyColorWithCache(rgb, theme, modifyHSL, poleColor, anotherPoleColor) {\n  let fnCache;\n  if (colorModificationCache.has(modifyHSL)) {\n    fnCache = colorModificationCache.get(modifyHSL);\n  } else {\n    fnCache = new Map();\n    colorModificationCache.set(modifyHSL, fnCache);\n  }\n  const id = getCacheId(rgb, theme);\n  if (fnCache.has(id)) {\n    return fnCache.get(id);\n  }\n  const hsl = rgbToHSL(rgb);\n  const pole = poleColor == null ? null : parseToHSLWithCache(poleColor);\n  const anotherPole = anotherPoleColor == null ? null : parseToHSLWithCache(anotherPoleColor);\n  const modified = modifyHSL(hsl, pole, anotherPole);\n  const {\n    r,\n    g,\n    b,\n    a\n  } = hslToRGB(modified);\n  const matrix = createFilterMatrix(_objectSpread(_objectSpread({}, theme), {}, {\n    mode: 0\n  }));\n  const [rf, gf, bf] = applyColorMatrix([r, g, b], matrix);\n  const color = a === 1 ? rgbToHexString({\n    r: rf,\n    g: gf,\n    b: bf\n  }) : rgbToString({\n    r: rf,\n    g: gf,\n    b: bf,\n    a\n  });\n  fnCache.set(id, color);\n  return color;\n}\nfunction modifyAndRegisterColor(type, rgb, theme, modifier) {\n  const registered = getRegisteredColor(type, rgb);\n  if (registered) {\n    return registered;\n  }\n  const value = modifier(rgb, theme);\n  return registerColor(type, rgb, value);\n}\nfunction modifyLightSchemeColor(rgb, theme) {\n  const poleBg = getBgPole(theme);\n  const poleFg = getFgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyLightModeHSL, poleFg, poleBg);\n}\nfunction modifyLightModeHSL(_ref1, poleFg, poleBg) {\n  let {\n    h,\n    s,\n    l,\n    a\n  } = _ref1;\n  const isDark = l < 0.5;\n  let isNeutral;\n  if (isDark) {\n    isNeutral = l < 0.2 || s < 0.12;\n  } else {\n    const isBlue = h > 200 && h < 280;\n    isNeutral = s < 0.24 || l > 0.8 && isBlue;\n  }\n  let hx = h;\n  let sx = s;\n  if (isNeutral) {\n    if (isDark) {\n      hx = poleFg.h;\n      sx = poleFg.s;\n    } else {\n      hx = poleBg.h;\n      sx = poleBg.s;\n    }\n  }\n  const lx = scale(l, 0, 1, poleFg.l, poleBg.l);\n  return {\n    h: hx,\n    s: sx,\n    l: lx,\n    a\n  };\n}\nconst MAX_BG_LIGHTNESS = 0.4;\nfunction modifyBgHSL(_ref10, pole) {\n  let {\n    h,\n    s,\n    l,\n    a\n  } = _ref10;\n  const isDark = l < 0.5;\n  const isBlue = h > 200 && h < 280;\n  const isNeutral = s < 0.12 || l > 0.8 && isBlue;\n  if (isDark) {\n    const lx = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);\n    if (isNeutral) {\n      const hx = pole.h;\n      const sx = pole.s;\n      return {\n        h: hx,\n        s: sx,\n        l: lx,\n        a\n      };\n    }\n    return {\n      h,\n      s,\n      l: lx,\n      a\n    };\n  }\n  let lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);\n  if (isNeutral) {\n    const hx = pole.h;\n    const sx = pole.s;\n    return {\n      h: hx,\n      s: sx,\n      l: lx,\n      a\n    };\n  }\n  let hx = h;\n  const isYellow = h > 60 && h < 180;\n  if (isYellow) {\n    const isCloserToGreen = h > 120;\n    if (isCloserToGreen) {\n      hx = scale(h, 120, 180, 135, 180);\n    } else {\n      hx = scale(h, 60, 120, 60, 105);\n    }\n  }\n  if (hx > 40 && hx < 80) {\n    lx *= 0.75;\n  }\n  return {\n    h: hx,\n    s,\n    l: lx,\n    a\n  };\n}\nfunction _modifyBackgroundColor(rgb, theme) {\n  if (theme.mode === 0) {\n    return modifyLightSchemeColor(rgb, theme);\n  }\n  const pole = getBgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyBgHSL, pole);\n}\nfunction modifyBackgroundColor(rgb, theme) {\n  let shouldRegisterColorVariable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (!shouldRegisterColorVariable) {\n    return _modifyBackgroundColor(rgb, theme);\n  }\n  return modifyAndRegisterColor(\"background\", rgb, theme, _modifyBackgroundColor);\n}\nconst MIN_FG_LIGHTNESS = 0.55;\nfunction modifyBlueFgHue(hue) {\n  return scale(hue, 205, 245, 205, 220);\n}\nfunction modifyFgHSL(_ref11, pole) {\n  let {\n    h,\n    s,\n    l,\n    a\n  } = _ref11;\n  const isLight = l > 0.5;\n  const isNeutral = l < 0.2 || s < 0.24;\n  const isBlue = !isNeutral && h > 205 && h < 245;\n  if (isLight) {\n    const lx = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);\n    if (isNeutral) {\n      const hx = pole.h;\n      const sx = pole.s;\n      return {\n        h: hx,\n        s: sx,\n        l: lx,\n        a\n      };\n    }\n    let hx = h;\n    if (isBlue) {\n      hx = modifyBlueFgHue(h);\n    }\n    return {\n      h: hx,\n      s,\n      l: lx,\n      a\n    };\n  }\n  if (isNeutral) {\n    const hx = pole.h;\n    const sx = pole.s;\n    const lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\n    return {\n      h: hx,\n      s: sx,\n      l: lx,\n      a\n    };\n  }\n  let hx = h;\n  let lx;\n  if (isBlue) {\n    hx = modifyBlueFgHue(h);\n    lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));\n  } else {\n    lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\n  }\n  return {\n    h: hx,\n    s,\n    l: lx,\n    a\n  };\n}\nfunction _modifyForegroundColor(rgb, theme) {\n  if (theme.mode === 0) {\n    return modifyLightSchemeColor(rgb, theme);\n  }\n  const pole = getFgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyFgHSL, pole);\n}\nfunction modifyForegroundColor(rgb, theme) {\n  let shouldRegisterColorVariable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (!shouldRegisterColorVariable) {\n    return _modifyForegroundColor(rgb, theme);\n  }\n  return modifyAndRegisterColor(\"text\", rgb, theme, _modifyForegroundColor);\n}\nfunction modifyBorderHSL(_ref12, poleFg, poleBg) {\n  let {\n    h,\n    s,\n    l,\n    a\n  } = _ref12;\n  const isDark = l < 0.5;\n  const isNeutral = l < 0.2 || s < 0.24;\n  let hx = h;\n  let sx = s;\n  if (isNeutral) {\n    if (isDark) {\n      hx = poleFg.h;\n      sx = poleFg.s;\n    } else {\n      hx = poleBg.h;\n      sx = poleBg.s;\n    }\n  }\n  const lx = scale(l, 0, 1, 0.5, 0.2);\n  return {\n    h: hx,\n    s: sx,\n    l: lx,\n    a\n  };\n}\nfunction _modifyBorderColor(rgb, theme) {\n  if (theme.mode === 0) {\n    return modifyLightSchemeColor(rgb, theme);\n  }\n  const poleFg = getFgPole(theme);\n  const poleBg = getBgPole(theme);\n  return modifyColorWithCache(rgb, theme, modifyBorderHSL, poleFg, poleBg);\n}\nfunction modifyBorderColor(rgb, theme) {\n  let shouldRegisterColorVariable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (!shouldRegisterColorVariable) {\n    return _modifyBorderColor(rgb, theme);\n  }\n  return modifyAndRegisterColor(\"border\", rgb, theme, _modifyBorderColor);\n}\nfunction modifyShadowColor(rgb, theme) {\n  return modifyBackgroundColor(rgb, theme);\n}\nfunction modifyGradientColor(rgb, theme) {\n  return modifyBackgroundColor(rgb, theme);\n}\nconst gradientLength = \"gradient\".length;\nconst conicGradient = \"conic-\";\nconst conicGradientLength = conicGradient.length;\nconst radialGradient = \"radial-\";\nconst linearGradient = \"linear-\";\nfunction parseGradient(value) {\n  const result = [];\n  let index = 0;\n  let startIndex = conicGradient.length;\n  while ((index = value.indexOf(\"gradient\", startIndex)) !== -1) {\n    let typeGradient;\n    [linearGradient, radialGradient, conicGradient].find(possibleType => {\n      if (index - possibleType.length >= 0) {\n        const possibleGradient = value.substring(index - possibleType.length, index);\n        if (possibleGradient === possibleType) {\n          if (value.slice(index - possibleType.length - 10, index - possibleType.length - 1) === \"repeating\") {\n            typeGradient = \"repeating-\".concat(possibleType, \"gradient\");\n            return true;\n          }\n          if (value.slice(index - possibleType.length - 8, index - possibleType.length - 1) === \"-webkit\") {\n            typeGradient = \"-webkit-\".concat(possibleType, \"gradient\");\n            return true;\n          }\n          typeGradient = \"\".concat(possibleType, \"gradient\");\n          return true;\n        }\n      }\n    });\n    if (!typeGradient) {\n      break;\n    }\n    const {\n      start,\n      end\n    } = getParenthesesRange(value, index + gradientLength);\n    const match = value.substring(start + 1, end - 1);\n    startIndex = end + 1 + conicGradientLength;\n    result.push({\n      typeGradient,\n      match,\n      offset: typeGradient.length + 2,\n      index: index - typeGradient.length + gradientLength,\n      hasComma: true\n    });\n  }\n  if (result.length) {\n    result[result.length - 1].hasComma = false;\n  }\n  return result;\n}\nconst STORAGE_KEY_IMAGE_DETAILS_LIST = \"__darkreader__imageDetails_v2_list\";\nconst STORAGE_KEY_IMAGE_DETAILS_PREFIX = \"__darkreader__imageDetails_v2_\";\nconst STORAGE_KEY_CSS_FETCH_PREFIX = \"__darkreader__cssFetch_\";\nlet imageCacheTimeout = 0;\nconst imageDetailsCacheQueue = new Map();\nconst cachedImageUrls = [];\nfunction writeImageDetailsQueue() {\n  imageDetailsCacheQueue.forEach((details, url) => {\n    if (url && url.startsWith(\"https://\")) {\n      try {\n        const json = JSON.stringify(details);\n        sessionStorage.setItem(\"\".concat(STORAGE_KEY_IMAGE_DETAILS_PREFIX).concat(url), json);\n        cachedImageUrls.push(url);\n      } catch (err) {}\n    }\n  });\n  imageDetailsCacheQueue.clear();\n  sessionStorage.setItem(STORAGE_KEY_IMAGE_DETAILS_LIST, JSON.stringify(cachedImageUrls));\n}\nfunction writeImageDetailsCache(url, imageDetails) {\n  if (!url || !url.startsWith(\"https://\")) {\n    return;\n  }\n  imageDetailsCacheQueue.set(url, imageDetails);\n  clearTimeout(imageCacheTimeout);\n  imageCacheTimeout = setTimeout(writeImageDetailsQueue, 1000);\n}\nfunction readImageDetailsCache(targetMap) {\n  try {\n    const jsonList = sessionStorage.getItem(STORAGE_KEY_IMAGE_DETAILS_LIST);\n    if (!jsonList) {\n      return;\n    }\n    const list = JSON.parse(jsonList);\n    list.forEach(url => {\n      const json = sessionStorage.getItem(\"\".concat(STORAGE_KEY_IMAGE_DETAILS_PREFIX).concat(url));\n      if (json) {\n        const details = JSON.parse(json);\n        targetMap.set(url, details);\n      }\n    });\n  } catch (err) {}\n}\nfunction writeCSSFetchCache(url, cssText) {\n  const key = \"\".concat(STORAGE_KEY_CSS_FETCH_PREFIX).concat(url);\n  try {\n    sessionStorage.setItem(key, cssText);\n  } catch (err) {}\n}\nfunction readCSSFetchCache(url) {\n  const key = \"\".concat(STORAGE_KEY_CSS_FETCH_PREFIX).concat(url);\n  try {\n    var _sessionStorage$getIt;\n    return (_sessionStorage$getIt = sessionStorage.getItem(key)) !== null && _sessionStorage$getIt !== void 0 ? _sessionStorage$getIt : null;\n  } catch (err) {}\n  return null;\n}\nfunction toSVGMatrix(matrix) {\n  return matrix.slice(0, 4).map(m => m.map(m => m.toFixed(3)).join(\" \")).join(\" \");\n}\nfunction getSVGFilterMatrixValue(config) {\n  return toSVGMatrix(createFilterMatrix(config));\n}\nconst MAX_FRAME_DURATION = 1000 / 60;\nclass AsyncQueue {\n  constructor() {\n    this.queue = [];\n    this.timerId = null;\n  }\n  addTask(task) {\n    this.queue.push(task);\n    this.scheduleFrame();\n  }\n  stop() {\n    if (this.timerId !== null) {\n      cancelAnimationFrame(this.timerId);\n      this.timerId = null;\n    }\n    this.queue = [];\n  }\n  scheduleFrame() {\n    if (this.timerId) {\n      return;\n    }\n    this.timerId = requestAnimationFrame(() => {\n      this.timerId = null;\n      const start = Date.now();\n      let cb;\n      while (cb = this.queue.shift()) {\n        cb();\n        if (Date.now() - start >= MAX_FRAME_DURATION) {\n          this.scheduleFrame();\n          break;\n        }\n      }\n    });\n  }\n}\nconst resolvers$1 = new Map();\nconst rejectors = new Map();\nasync function bgFetch(request) {\n  var _window$DarkReader;\n  if ((_window$DarkReader = window.DarkReader) !== null && _window$DarkReader !== void 0 && (_window$DarkReader = _window$DarkReader.Plugins) !== null && _window$DarkReader !== void 0 && _window$DarkReader.fetch) {\n    return window.DarkReader.Plugins.fetch(request);\n  }\n  return new Promise((resolve, reject) => {\n    const id = generateUID();\n    resolvers$1.set(id, resolve);\n    rejectors.set(id, reject);\n    chrome.runtime.sendMessage({\n      type: MessageTypeCStoBG.FETCH,\n      data: request,\n      id\n    });\n  });\n}\nchrome.runtime.onMessage.addListener(_ref13 => {\n  let {\n    type,\n    data,\n    error,\n    id\n  } = _ref13;\n  if (type === MessageTypeBGtoCS.FETCH_RESPONSE) {\n    const resolve = resolvers$1.get(id);\n    const reject = rejectors.get(id);\n    resolvers$1.delete(id);\n    rejectors.delete(id);\n    if (error) {\n      reject && reject(typeof error === \"string\" ? new Error(error) : error);\n    } else {\n      resolve && resolve(data);\n    }\n  }\n});\nconst imageManager = new AsyncQueue();\nasync function getImageDetails(url) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      var _tryConvertDataURLToB;\n      const dataURL = url.startsWith(\"data:\") ? url : await getDataURL(url);\n      const blob = (_tryConvertDataURLToB = tryConvertDataURLToBlobSync(dataURL)) !== null && _tryConvertDataURLToB !== void 0 ? _tryConvertDataURLToB : await loadAsBlob(url);\n      let image;\n      if (dataURL.startsWith(\"data:image/svg+xml\")) {\n        image = await loadImage(dataURL);\n      } else {\n        var _await$tryCreateImage;\n        image = (_await$tryCreateImage = await tryCreateImageBitmap(blob)) !== null && _await$tryCreateImage !== void 0 ? _await$tryCreateImage : await loadImage(dataURL);\n      }\n      imageManager.addTask(() => {\n        const analysis = analyzeImage(image);\n        resolve(_objectSpread({\n          src: url,\n          dataURL: analysis.isLarge ? \"\" : dataURL,\n          width: image.width,\n          height: image.height\n        }, analysis));\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\nasync function getDataURL(url) {\n  const parsedURL = new URL(url);\n  if (parsedURL.origin === location.origin) {\n    return await loadAsDataURL(url);\n  }\n  return await bgFetch({\n    url,\n    responseType: \"data-url\"\n  });\n}\nasync function tryCreateImageBitmap(blob) {\n  try {\n    return await createImageBitmap(blob);\n  } catch (err) {\n    logWarn(\"Unable to create image bitmap for type \".concat(blob.type, \": \").concat(String(err)));\n    return null;\n  }\n}\nconst INCOMPLETE_DOC_LOADING_IMAGE_LIMIT = 256;\nlet loadingImagesCount = 0;\nasync function loadImage(url) {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.onload = () => resolve(image);\n    image.onerror = () => reject(\"Unable to load image \".concat(url));\n    if (++loadingImagesCount <= INCOMPLETE_DOC_LOADING_IMAGE_LIMIT || isReadyStateComplete()) {\n      image.src = url;\n    } else {\n      addReadyStateCompleteListener(() => image.src = url);\n    }\n  });\n}\nconst MAX_ANALYSIS_PIXELS_COUNT = 32 * 32;\nlet canvas;\nlet context;\nfunction createCanvas() {\n  const maxWidth = MAX_ANALYSIS_PIXELS_COUNT;\n  const maxHeight = MAX_ANALYSIS_PIXELS_COUNT;\n  canvas = document.createElement(\"canvas\");\n  canvas.width = maxWidth;\n  canvas.height = maxHeight;\n  context = canvas.getContext(\"2d\", {\n    willReadFrequently: true\n  });\n  context.imageSmoothingEnabled = false;\n}\nfunction removeCanvas() {\n  canvas = null;\n  context = null;\n}\nconst LARGE_IMAGE_PIXELS_COUNT = 512 * 512;\nfunction analyzeImage(image) {\n  if (!canvas) {\n    createCanvas();\n  }\n  let sw;\n  let sh;\n  if (image instanceof HTMLImageElement) {\n    sw = image.naturalWidth;\n    sh = image.naturalHeight;\n  } else {\n    sw = image.width;\n    sh = image.height;\n  }\n  if (sw === 0 || sh === 0) {\n    logWarn(\"Image is empty\");\n    return {\n      isDark: false,\n      isLight: false,\n      isTransparent: false,\n      isLarge: false\n    };\n  }\n  const isLarge = sw * sh > LARGE_IMAGE_PIXELS_COUNT;\n  const sourcePixelsCount = sw * sh;\n  const k = Math.min(1, Math.sqrt(MAX_ANALYSIS_PIXELS_COUNT / sourcePixelsCount));\n  const width = Math.ceil(sw * k);\n  const height = Math.ceil(sh * k);\n  context.clearRect(0, 0, width, height);\n  context.drawImage(image, 0, 0, sw, sh, 0, 0, width, height);\n  const imageData = context.getImageData(0, 0, width, height);\n  const d = imageData.data;\n  const TRANSPARENT_ALPHA_THRESHOLD = 0.05;\n  const DARK_LIGHTNESS_THRESHOLD = 0.4;\n  const LIGHT_LIGHTNESS_THRESHOLD = 0.7;\n  let transparentPixelsCount = 0;\n  let darkPixelsCount = 0;\n  let lightPixelsCount = 0;\n  let i, x, y;\n  let r, g, b, a;\n  let l;\n  for (y = 0; y < height; y++) {\n    for (x = 0; x < width; x++) {\n      i = 4 * (y * width + x);\n      r = d[i + 0];\n      g = d[i + 1];\n      b = d[i + 2];\n      a = d[i + 3];\n      if (a / 255 < TRANSPARENT_ALPHA_THRESHOLD) {\n        transparentPixelsCount++;\n      } else {\n        l = getSRGBLightness(r, g, b);\n        if (l < DARK_LIGHTNESS_THRESHOLD) {\n          darkPixelsCount++;\n        }\n        if (l > LIGHT_LIGHTNESS_THRESHOLD) {\n          lightPixelsCount++;\n        }\n      }\n    }\n  }\n  const totalPixelsCount = width * height;\n  const opaquePixelsCount = totalPixelsCount - transparentPixelsCount;\n  const DARK_IMAGE_THRESHOLD = 0.7;\n  const LIGHT_IMAGE_THRESHOLD = 0.7;\n  const TRANSPARENT_IMAGE_THRESHOLD = 0.1;\n  return {\n    isDark: darkPixelsCount / opaquePixelsCount >= DARK_IMAGE_THRESHOLD,\n    isLight: lightPixelsCount / opaquePixelsCount >= LIGHT_IMAGE_THRESHOLD,\n    isTransparent: transparentPixelsCount / totalPixelsCount >= TRANSPARENT_IMAGE_THRESHOLD,\n    isLarge\n  };\n}\nlet isBlobURLSupported = null;\nlet canUseProxy = false;\nlet blobURLCheckRequested = false;\nconst blobURLCheckAwaiters = [];\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => canUseProxy = true, {\n  once: true\n});\nasync function requestBlobURLCheck() {\n  if (!canUseProxy) {\n    return;\n  }\n  if (blobURLCheckRequested) {\n    return await new Promise(resolve => blobURLCheckAwaiters.push(resolve));\n  }\n  blobURLCheckRequested = true;\n  await new Promise(resolve => {\n    document.addEventListener(\"__darkreader__blobURLCheckResponse\", e => {\n      isBlobURLSupported = e.detail.blobURLAllowed;\n      resolve();\n      blobURLCheckAwaiters.forEach(r => r());\n      blobURLCheckAwaiters.splice(0);\n    }, {\n      once: true\n    });\n    document.dispatchEvent(new CustomEvent(\"__darkreader__blobURLCheckRequest\"));\n  });\n}\nfunction isBlobURLCheckResultReady() {\n  return isBlobURLSupported != null || !canUseProxy;\n}\nfunction onCSPError(err) {\n  if (err.blockedURI === \"blob\") {\n    isBlobURLSupported = false;\n    document.removeEventListener(\"securitypolicyviolation\", onCSPError);\n  }\n}\ndocument.addEventListener(\"securitypolicyviolation\", onCSPError);\nconst objectURLs = new Set();\nfunction getFilteredImageURL(_ref14, theme) {\n  let {\n    dataURL,\n    width,\n    height\n  } = _ref14;\n  if (dataURL.startsWith(\"data:image/svg+xml\")) {\n    dataURL = escapeXML(dataURL);\n  }\n  const matrix = getSVGFilterMatrixValue(theme);\n  const svg = [\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"\".concat(width, \"\\\" height=\\\"\").concat(height, \"\\\">\"), \"<defs>\", '<filter id=\"darkreader-image-filter\">', \"<feColorMatrix type=\\\"matrix\\\" values=\\\"\".concat(matrix, \"\\\" />\"), \"</filter>\", \"</defs>\", \"<image width=\\\"\".concat(width, \"\\\" height=\\\"\").concat(height, \"\\\" filter=\\\"url(#darkreader-image-filter)\\\" xlink:href=\\\"\").concat(dataURL, \"\\\" />\"), \"</svg>\"].join(\"\");\n  if (!isBlobURLSupported) {\n    return \"data:image/svg+xml;base64,\".concat(btoa(svg));\n  }\n  const bytes = new Uint8Array(svg.length);\n  for (let i = 0; i < svg.length; i++) {\n    bytes[i] = svg.charCodeAt(i);\n  }\n  const blob = new Blob([bytes], {\n    type: \"image/svg+xml\"\n  });\n  const objectURL = URL.createObjectURL(blob);\n  objectURLs.add(objectURL);\n  return objectURL;\n}\nconst xmlEscapeChars = {\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  \"&\": \"&amp;\",\n  \"'\": \"&apos;\",\n  '\"': \"&quot;\"\n};\nfunction escapeXML(str) {\n  return str.replace(/[<>&'\"]/g, c => {\n    var _xmlEscapeChars$c;\n    return (_xmlEscapeChars$c = xmlEscapeChars[c]) !== null && _xmlEscapeChars$c !== void 0 ? _xmlEscapeChars$c : c;\n  });\n}\nconst dataURLBlobURLs = new Map();\nfunction tryConvertDataURLToBlobSync(dataURL) {\n  const colonIndex = dataURL.indexOf(\":\");\n  const semicolonIndex = dataURL.indexOf(\";\", colonIndex + 1);\n  const commaIndex = dataURL.indexOf(\",\", semicolonIndex + 1);\n  const encoding = dataURL.substring(semicolonIndex + 1, commaIndex).toLocaleLowerCase();\n  const mediaType = dataURL.substring(colonIndex + 1, semicolonIndex);\n  if (encoding !== \"base64\" || !mediaType) {\n    return null;\n  }\n  const characters = atob(dataURL.substring(commaIndex + 1));\n  const bytes = new Uint8Array(characters.length);\n  for (let i = 0; i < characters.length; i++) {\n    bytes[i] = characters.charCodeAt(i);\n  }\n  return new Blob([bytes], {\n    type: mediaType\n  });\n}\nasync function tryConvertDataURLToBlobURL(dataURL) {\n  if (!isBlobURLSupported) {\n    return null;\n  }\n  const hash = getHashCode(dataURL);\n  let blobURL = dataURLBlobURLs.get(hash);\n  if (blobURL) {\n    return blobURL;\n  }\n  let blob = tryConvertDataURLToBlobSync(dataURL);\n  if (!blob) {\n    const response = await fetch(dataURL);\n    blob = await response.blob();\n  }\n  blobURL = URL.createObjectURL(blob);\n  dataURLBlobURLs.set(hash, blobURL);\n  return blobURL;\n}\nfunction cleanImageProcessingCache() {\n  imageManager && imageManager.stop();\n  removeCanvas();\n  objectURLs.forEach(u => URL.revokeObjectURL(u));\n  objectURLs.clear();\n  dataURLBlobURLs.forEach(u => URL.revokeObjectURL(u));\n  dataURLBlobURLs.clear();\n}\nfunction getPriority(ruleStyle, property) {\n  return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));\n}\nfunction getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageSelectors, isCancelled) {\n  let modifier = null;\n  if (property.startsWith(\"--\")) {\n    modifier = getVariableModifier(variablesStore, property, value, rule, ignoreImageSelectors, isCancelled);\n  } else if (value.includes(\"var(\")) {\n    modifier = getVariableDependantModifier(variablesStore, property, value);\n  } else if (property === \"color-scheme\") {\n    modifier = getColorSchemeModifier();\n  } else if (property === \"scrollbar-color\") {\n    modifier = getScrollbarColorModifier(value);\n  } else if (property.includes(\"color\") && property !== \"-webkit-print-color-adjust\" || property === \"fill\" || property === \"stroke\" || property === \"stop-color\") {\n    if (property.startsWith(\"border\") && property !== \"border-color\" && value === \"initial\") {\n      const borderSideProp = property.substring(0, property.length - 6);\n      const borderSideVal = rule.style.getPropertyValue(borderSideProp);\n      if (borderSideVal.startsWith(\"0px\") || borderSideVal === \"none\") {\n        property = borderSideProp;\n        modifier = borderSideVal;\n      } else {\n        modifier = value;\n      }\n    } else {\n      modifier = getColorModifier(property, value, rule);\n    }\n  } else if (property === \"background-image\" || property === \"list-style-image\") {\n    modifier = getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled);\n  } else if (property.includes(\"shadow\")) {\n    modifier = getShadowModifier(value);\n  }\n  if (!modifier) {\n    return null;\n  }\n  return {\n    property,\n    value: modifier,\n    important: getPriority(rule.style, property),\n    sourceValue: value\n  };\n}\nfunction joinSelectors() {\n  for (var _len5 = arguments.length, selectors = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    selectors[_key5] = arguments[_key5];\n  }\n  return selectors.filter(Boolean).join(\", \");\n}\nconst hostsWithOddScrollbars = [\"calendar.google.com\"];\nfunction getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {\n  const lines = [];\n  if (!isIFrame) {\n    lines.push(\"html {\");\n    lines.push(\"    background-color: \".concat(modifyBackgroundColor({\n      r: 255,\n      g: 255,\n      b: 255\n    }, theme), \" !important;\"));\n    lines.push(\"}\");\n  }\n  if (isCSSColorSchemePropSupported && theme.mode === 1) {\n    lines.push(\"html {\");\n    lines.push(\"    color-scheme: dark !important;\");\n    lines.push(\"}\");\n    lines.push(\"iframe {\");\n    lines.push(\"    color-scheme: dark !important;\");\n    lines.push(\"}\");\n  }\n  const bgSelectors = joinSelectors(isIFrame ? \"\" : \"html, body\", styleSystemControls ? \"input, textarea, select, button, dialog\" : \"\");\n  if (bgSelectors) {\n    lines.push(\"\".concat(bgSelectors, \" {\"));\n    lines.push(\"    background-color: \".concat(modifyBackgroundColor({\n      r: 255,\n      g: 255,\n      b: 255\n    }, theme), \";\"));\n    lines.push(\"}\");\n  }\n  lines.push(\"\".concat(joinSelectors(\"html, body\", styleSystemControls ? \"input, textarea, select, button\" : \"\"), \" {\"));\n  lines.push(\"    border-color: \".concat(modifyBorderColor({\n    r: 76,\n    g: 76,\n    b: 76\n  }, theme), \";\"));\n  lines.push(\"    color: \".concat(modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme), \";\"));\n  lines.push(\"}\");\n  lines.push(\"a {\");\n  lines.push(\"    color: \".concat(modifyForegroundColor({\n    r: 0,\n    g: 64,\n    b: 255\n  }, theme), \";\"));\n  lines.push(\"}\");\n  lines.push(\"table {\");\n  lines.push(\"    border-color: \".concat(modifyBorderColor({\n    r: 128,\n    g: 128,\n    b: 128\n  }, theme), \";\"));\n  lines.push(\"}\");\n  lines.push(\"mark {\");\n  lines.push(\"    color: \".concat(modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme), \";\"));\n  lines.push(\"}\");\n  lines.push(\"::placeholder {\");\n  lines.push(\"    color: \".concat(modifyForegroundColor({\n    r: 169,\n    g: 169,\n    b: 169\n  }, theme), \";\"));\n  lines.push(\"}\");\n  lines.push(\"input:-webkit-autofill,\");\n  lines.push(\"textarea:-webkit-autofill,\");\n  lines.push(\"select:-webkit-autofill {\");\n  lines.push(\"    background-color: \".concat(modifyBackgroundColor({\n    r: 250,\n    g: 255,\n    b: 189\n  }, theme), \" !important;\"));\n  lines.push(\"    color: \".concat(modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme), \" !important;\"));\n  lines.push(\"}\");\n  if (theme.scrollbarColor && !hostsWithOddScrollbars.includes(location.hostname)) {\n    lines.push(getModifiedScrollbarStyle(theme));\n  }\n  if (theme.selectionColor) {\n    lines.push(getModifiedSelectionStyle(theme));\n  }\n  if (isLayerRuleSupported) {\n    lines.unshift(\"@layer {\");\n    lines.push(\"}\");\n  }\n  return lines.join(\"\\n\");\n}\nfunction getSelectionColor(theme) {\n  let backgroundColorSelection;\n  let foregroundColorSelection;\n  if (theme.selectionColor === \"auto\") {\n    backgroundColorSelection = modifyBackgroundColor({\n      r: 0,\n      g: 96,\n      b: 212\n    }, _objectSpread(_objectSpread({}, theme), {}, {\n      grayscale: 0\n    }));\n    foregroundColorSelection = modifyForegroundColor({\n      r: 255,\n      g: 255,\n      b: 255\n    }, _objectSpread(_objectSpread({}, theme), {}, {\n      grayscale: 0\n    }));\n  } else {\n    const rgb = parseColorWithCache(theme.selectionColor);\n    const hsl = rgbToHSL(rgb);\n    backgroundColorSelection = theme.selectionColor;\n    if (hsl.l < 0.5) {\n      foregroundColorSelection = \"#FFF\";\n    } else {\n      foregroundColorSelection = \"#000\";\n    }\n  }\n  return {\n    backgroundColorSelection,\n    foregroundColorSelection\n  };\n}\nfunction getModifiedSelectionStyle(theme) {\n  const lines = [];\n  const modifiedSelectionColor = getSelectionColor(theme);\n  const backgroundColorSelection = modifiedSelectionColor.backgroundColorSelection;\n  const foregroundColorSelection = modifiedSelectionColor.foregroundColorSelection;\n  [\"::selection\", \"::-moz-selection\"].forEach(selection => {\n    lines.push(\"\".concat(selection, \" {\"));\n    lines.push(\"    background-color: \".concat(backgroundColorSelection, \" !important;\"));\n    lines.push(\"    color: \".concat(foregroundColorSelection, \" !important;\"));\n    lines.push(\"}\");\n  });\n  return lines.join(\"\\n\");\n}\nfunction getModifiedScrollbarStyle(theme) {\n  let colorTrack;\n  let colorThumb;\n  if (theme.scrollbarColor === \"auto\") {\n    colorTrack = modifyBackgroundColor({\n      r: 241,\n      g: 241,\n      b: 241\n    }, theme);\n    colorThumb = modifyBackgroundColor({\n      r: 176,\n      g: 176,\n      b: 176\n    }, theme);\n  } else {\n    const rgb = parseColorWithCache(theme.scrollbarColor);\n    const hsl = rgbToHSL(rgb);\n    const darken = darker => _objectSpread(_objectSpread({}, hsl), {}, {\n      l: clamp(hsl.l - darker, 0, 1)\n    });\n    colorTrack = hslToString(darken(0.4));\n    colorThumb = hslToString(hsl);\n  }\n  return [\"* {\", \"    scrollbar-color: \".concat(colorThumb, \" \").concat(colorTrack, \";\"), \"}\"].join(\"\\n\");\n}\nfunction getModifiedFallbackStyle(theme, _ref15) {\n  let {\n    strict\n  } = _ref15;\n  const factory = defaultFallbackFactory;\n  return factory(theme, {\n    strict\n  });\n}\nfunction defaultFallbackFactory(theme, _ref16) {\n  let {\n    strict\n  } = _ref16;\n  const lines = [];\n  lines.push(\"html, body, \".concat(strict ? \"body :not(iframe)\" : \"body > :not(iframe)\", \" {\"));\n  lines.push(\"    background-color: \".concat(modifyBackgroundColor({\n    r: 255,\n    g: 255,\n    b: 255\n  }, theme), \" !important;\"));\n  lines.push(\"    border-color: \".concat(modifyBorderColor({\n    r: 64,\n    g: 64,\n    b: 64\n  }, theme), \" !important;\"));\n  lines.push(\"    color: \".concat(modifyForegroundColor({\n    r: 0,\n    g: 0,\n    b: 0\n  }, theme), \" !important;\"));\n  lines.push(\"}\");\n  lines.push(\"div[style*=\\\"background-color: rgb(135, 135, 135)\\\"] {\");\n  lines.push(\"    background-color: #878787 !important;\");\n  lines.push(\"}\");\n  return lines.join(\"\\n\");\n}\nconst unparsableColors = new Set([\"inherit\", \"transparent\", \"initial\", \"currentcolor\", \"none\", \"unset\", \"auto\"]);\nfunction getColorModifier(prop, value, rule) {\n  if (unparsableColors.has(value.toLowerCase()) && !(prop === \"color\" && value === \"initial\")) {\n    return value;\n  }\n  let rgb = null;\n  if (prop === \"color\" && value === \"initial\") {\n    rgb = {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 1\n    };\n  } else {\n    rgb = parseColorWithCache(value);\n  }\n  if (!rgb) {\n    logWarn(\"Couldn't parse color\", value);\n    return null;\n  }\n  if (prop.includes(\"background\")) {\n    if (rule.style.webkitMaskImage && rule.style.webkitMaskImage !== \"none\" || rule.style.webkitMask && !rule.style.webkitMask.startsWith(\"none\") || rule.style.mask && rule.style.mask !== \"none\" || rule.style.getPropertyValue(\"mask-image\") && rule.style.getPropertyValue(\"mask-image\") !== \"none\") {\n      return theme => modifyForegroundColor(rgb, theme);\n    }\n    return theme => modifyBackgroundColor(rgb, theme);\n  }\n  if (prop.includes(\"border\") || prop.includes(\"outline\")) {\n    return theme => modifyBorderColor(rgb, theme);\n  }\n  return theme => modifyForegroundColor(rgb, theme);\n}\nconst imageDetailsCache = new Map();\nconst awaitingForImageLoading = new Map();\nlet didTryLoadCache = false;\nfunction shouldIgnoreImage(selectorText, selectors) {\n  if (!selectorText || selectors.length === 0) {\n    return false;\n  }\n  if (selectors.some(s => s === \"*\")) {\n    return true;\n  }\n  const ruleSelectors = selectorText.split(/,\\s*/g);\n  for (let i = 0; i < selectors.length; i++) {\n    const ignoredSelector = selectors[i];\n    if (ignoredSelector.startsWith(\"^\")) {\n      const beginning = ignoredSelector.slice(1);\n      if (ruleSelectors.some(s => s.startsWith(beginning))) {\n        return true;\n      }\n    } else if (ignoredSelector.endsWith(\"$\")) {\n      const ending = ignoredSelector.slice(0, ignoredSelector.length - 1);\n      if (ruleSelectors.some(s => s.endsWith(ending))) {\n        return true;\n      }\n    } else if (ruleSelectors.some(s => s === ignoredSelector)) {\n      return true;\n    }\n  }\n  return false;\n}\nconst imageSelectorQueue = new Map();\nconst imageSelectorValues = new Map();\nconst imageSelectorNodeQueue = new Set();\nlet imageSelectorQueueFrameId = null;\nlet classObserver = null;\nfunction checkImageSelectors(node) {\n  for (const [selector, callbacks] of imageSelectorQueue) {\n    if (node.querySelector(selector) || node instanceof Element && node.matches(selector)) {\n      imageSelectorQueue.delete(selector);\n      callbacks.forEach(cb => cb());\n    }\n  }\n  if (!classObserver) {\n    classObserver = new MutationObserver(mutations => {\n      mutations.forEach(mutation => {\n        imageSelectorNodeQueue.add(mutation.target);\n        if (!imageSelectorQueueFrameId) {\n          imageSelectorQueueFrameId = requestAnimationFrame(() => {\n            imageSelectorNodeQueue.forEach(element => {\n              checkImageSelectors(element);\n            });\n            imageSelectorNodeQueue.clear();\n            imageSelectorQueueFrameId = null;\n          });\n        }\n      });\n    });\n    classObserver.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\"],\n      subtree: true\n    });\n  }\n}\nfunction getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled) {\n  try {\n    if (shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)) {\n      return value;\n    }\n    const gradients = parseGradient(value);\n    const urls = getMatches(cssURLRegex, value);\n    if (urls.length === 0 && gradients.length === 0) {\n      return value;\n    }\n    const getIndices = matches => {\n      let index = 0;\n      return matches.map(match => {\n        const valueIndex = value.indexOf(match, index);\n        index = valueIndex + match.length;\n        return {\n          match,\n          index: valueIndex\n        };\n      });\n    };\n    const matches = gradients.map(i => _objectSpread({\n      type: \"gradient\"\n    }, i)).concat(getIndices(urls).map(i => _objectSpread({\n      type: \"url\",\n      offset: 0\n    }, i))).sort((a, b) => a.index > b.index ? 1 : -1);\n    const getGradientModifier = gradient => {\n      const {\n        typeGradient,\n        match,\n        hasComma\n      } = gradient;\n      const partsRegex = /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?([^\\(\\), ]|( (?!calc)))*),?/g;\n      const colorStopRegex = /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;\n      const parts = getMatches(partsRegex, match, 1).map(part => {\n        part = part.trim();\n        let rgb = parseColorWithCache(part);\n        if (rgb) {\n          return theme => modifyGradientColor(rgb, theme);\n        }\n        const space = part.lastIndexOf(\" \");\n        rgb = parseColorWithCache(part.substring(0, space));\n        if (rgb) {\n          return theme => \"\".concat(modifyGradientColor(rgb, theme), \" \").concat(part.substring(space + 1));\n        }\n        const colorStopMatch = part.match(colorStopRegex);\n        if (colorStopMatch) {\n          rgb = parseColorWithCache(colorStopMatch[3]);\n          if (rgb) {\n            return theme => \"\".concat(colorStopMatch[1], \"(\").concat(colorStopMatch[2] ? \"\".concat(colorStopMatch[2], \", \") : \"\").concat(modifyGradientColor(rgb, theme), \")\");\n          }\n        }\n        return () => part;\n      });\n      return theme => {\n        return \"\".concat(typeGradient, \"(\").concat(parts.map(modify => modify(theme)).join(\", \"), \")\").concat(hasComma ? \", \" : \"\");\n      };\n    };\n    const getURLModifier = urlValue => {\n      var _ref17;\n      if (!didTryLoadCache) {\n        didTryLoadCache = true;\n        readImageDetailsCache(imageDetailsCache);\n      }\n      let url = getCSSURLValue(urlValue);\n      const isURLEmpty = url.length === 0;\n      const {\n        parentStyleSheet\n      } = rule;\n      const ownerNode = parentStyleSheet === null || parentStyleSheet === void 0 ? void 0 : parentStyleSheet.ownerNode;\n      const scope = (_ref17 = parentStyleSheet && getSheetScope(parentStyleSheet)) !== null && _ref17 !== void 0 ? _ref17 : document;\n      const baseURL = parentStyleSheet && parentStyleSheet.href ? getCSSBaseBath(parentStyleSheet.href) : (ownerNode === null || ownerNode === void 0 ? void 0 : ownerNode.baseURI) || location.origin;\n      url = getAbsoluteURL(baseURL, url);\n      return async theme => {\n        if (isURLEmpty) {\n          return \"url('')\";\n        }\n        let selector = rule.selectorText;\n        if (selector) {\n          if (selector.includes(\"::before\")) {\n            selector = selector.replaceAll(\"::before\", \"\");\n          }\n          if (selector.includes(\"::after\")) {\n            selector = selector.replaceAll(\"::after\", \"\");\n          }\n          if (!scope.querySelector(selector)) {\n            await new Promise(resolve => {\n              if (imageSelectorQueue.has(selector)) {\n                imageSelectorQueue.get(selector).push(resolve);\n              } else {\n                imageSelectorQueue.set(selector, [resolve]);\n                imageSelectorValues.set(selector, urlValue);\n              }\n            });\n          }\n        }\n        let imageDetails = null;\n        if (imageDetailsCache.has(url)) {\n          imageDetails = imageDetailsCache.get(url);\n        } else {\n          try {\n            if (!isBlobURLCheckResultReady()) {\n              await requestBlobURLCheck();\n            }\n            if (awaitingForImageLoading.has(url)) {\n              const awaiters = awaitingForImageLoading.get(url);\n              imageDetails = await new Promise(resolve => awaiters.push(resolve));\n              if (!imageDetails) {\n                return null;\n              }\n            } else {\n              awaitingForImageLoading.set(url, []);\n              imageDetails = await getImageDetails(url);\n              imageDetailsCache.set(url, imageDetails);\n              writeImageDetailsCache(url, imageDetails);\n              awaitingForImageLoading.get(url).forEach(resolve => resolve(imageDetails));\n              awaitingForImageLoading.delete(url);\n            }\n            if (isCancelled()) {\n              return null;\n            }\n          } catch (err) {\n            logWarn(err);\n            if (awaitingForImageLoading.has(url)) {\n              awaitingForImageLoading.get(url).forEach(resolve => resolve(null));\n              awaitingForImageLoading.delete(url);\n            }\n          }\n        }\n        if (imageDetails) {\n          const bgImageValue = getBgImageValue(imageDetails, theme);\n          if (bgImageValue) {\n            return bgImageValue;\n          }\n        }\n        if (url.startsWith(\"data:\")) {\n          const blobURL = await tryConvertDataURLToBlobURL(url);\n          if (blobURL) {\n            return \"url(\\\"\".concat(blobURL, \"\\\")\");\n          }\n        }\n        return \"url(\\\"\".concat(url, \"\\\")\");\n      };\n    };\n    const getBgImageValue = (imageDetails, theme) => {\n      const {\n        isDark,\n        isLight,\n        isTransparent,\n        isLarge,\n        width\n      } = imageDetails;\n      let result;\n      const logSrc = imageDetails.src.startsWith(\"data:\") ? \"data:\" : imageDetails.src;\n      if (isLarge && isLight && !isTransparent && theme.mode === 1) {\n        logInfo(\"Hiding large light image \".concat(logSrc));\n        result = \"none\";\n      } else if (isDark && isTransparent && theme.mode === 1 && width > 2) {\n        logInfo(\"Inverting dark image \".concat(logSrc));\n        const inverted = getFilteredImageURL(imageDetails, _objectSpread(_objectSpread({}, theme), {}, {\n          sepia: clamp(theme.sepia + 10, 0, 100)\n        }));\n        result = \"url(\\\"\".concat(inverted, \"\\\")\");\n      } else if (isLight && !isTransparent && theme.mode === 1) {\n        logInfo(\"Dimming light image \".concat(logSrc));\n        const dimmed = getFilteredImageURL(imageDetails, theme);\n        result = \"url(\\\"\".concat(dimmed, \"\\\")\");\n      } else if (theme.mode === 0 && isLight) {\n        logInfo(\"Applying filter to image \".concat(logSrc));\n        const filtered = getFilteredImageURL(imageDetails, _objectSpread(_objectSpread({}, theme), {}, {\n          brightness: clamp(theme.brightness - 10, 5, 200),\n          sepia: clamp(theme.sepia + 10, 0, 100)\n        }));\n        result = \"url(\\\"\".concat(filtered, \"\\\")\");\n      } else {\n        logInfo(\"Not modifying the image \".concat(logSrc));\n        result = null;\n      }\n      return result;\n    };\n    const modifiers = [];\n    let matchIndex = 0;\n    let prevHasComma = false;\n    matches.forEach((_ref18, i) => {\n      let {\n        type,\n        match,\n        index,\n        typeGradient,\n        hasComma,\n        offset\n      } = _ref18;\n      const matchStart = index;\n      const prefixStart = matchIndex;\n      const matchEnd = matchStart + match.length + offset;\n      matchIndex = matchEnd;\n      if (prefixStart !== matchStart) {\n        if (prevHasComma) {\n          modifiers.push(() => {\n            let betweenValue = value.substring(prefixStart, matchStart);\n            if (betweenValue[0] === \",\") {\n              betweenValue = betweenValue.substring(1);\n            }\n            return betweenValue;\n          });\n        } else {\n          modifiers.push(() => value.substring(prefixStart, matchStart));\n        }\n      }\n      prevHasComma = hasComma || false;\n      if (type === \"url\") {\n        modifiers.push(getURLModifier(match));\n      } else if (type === \"gradient\") {\n        modifiers.push(getGradientModifier({\n          match,\n          index,\n          typeGradient: typeGradient,\n          hasComma: hasComma || false,\n          offset\n        }));\n      }\n      if (i === matches.length - 1) {\n        modifiers.push(() => value.substring(matchEnd));\n      }\n    });\n    return theme => {\n      const results = modifiers.filter(Boolean).map(modify => modify(theme));\n      if (results.some(r => r instanceof Promise)) {\n        return Promise.all(results).then(asyncResults => {\n          return asyncResults.filter(Boolean).join(\"\");\n        });\n      }\n      const combinedResult = results.join(\"\");\n      if (combinedResult.endsWith(\", initial\")) {\n        return combinedResult.slice(0, -9);\n      }\n      return combinedResult;\n    };\n  } catch (err) {\n    logWarn(\"Unable to parse gradient \".concat(value), err);\n    return null;\n  }\n}\nfunction getShadowModifierWithInfo(value) {\n  try {\n    let index = 0;\n    const colorMatches = getMatches(/(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi, value, 2);\n    let notParsed = 0;\n    const modifiers = colorMatches.map((match, i) => {\n      const prefixIndex = index;\n      const matchIndex = value.indexOf(match, index);\n      const matchEnd = matchIndex + match.length;\n      index = matchEnd;\n      const rgb = parseColorWithCache(match);\n      if (!rgb) {\n        notParsed++;\n        return () => value.substring(prefixIndex, matchEnd);\n      }\n      return theme => \"\".concat(value.substring(prefixIndex, matchIndex)).concat(modifyShadowColor(rgb, theme)).concat(i === colorMatches.length - 1 ? value.substring(matchEnd) : \"\");\n    });\n    return theme => {\n      const modified = modifiers.map(modify => modify(theme)).join(\"\");\n      return {\n        matchesLength: colorMatches.length,\n        unparsableMatchesLength: notParsed,\n        result: modified\n      };\n    };\n  } catch (err) {\n    logWarn(\"Unable to parse shadow \".concat(value), err);\n    return null;\n  }\n}\nfunction getShadowModifier(value) {\n  const shadowModifier = getShadowModifierWithInfo(value);\n  if (!shadowModifier) {\n    return null;\n  }\n  return theme => shadowModifier(theme).result;\n}\nfunction getScrollbarColorModifier(value) {\n  const colorsMatch = value.match(/^\\s*([a-z]+(\\(.*\\))?)\\s+([a-z]+(\\(.*\\))?)\\s*$/);\n  if (!colorsMatch) {\n    return value;\n  }\n  const thumb = parseColorWithCache(colorsMatch[1]);\n  const track = parseColorWithCache(colorsMatch[3]);\n  if (!thumb || !track) {\n    logWarn(\"Couldn't parse color\", ...[thumb, track].filter(c => !c));\n    return null;\n  }\n  return theme => \"\".concat(modifyForegroundColor(thumb, theme), \" \").concat(modifyBackgroundColor(track, theme));\n}\nfunction getColorSchemeModifier() {\n  return theme => theme.mode === 0 ? \"dark light\" : \"dark\";\n}\nfunction getVariableModifier(variablesStore, prop, value, rule, ignoredImgSelectors, isCancelled) {\n  return variablesStore.getModifierForVariable({\n    varName: prop,\n    sourceValue: value,\n    rule,\n    ignoredImgSelectors,\n    isCancelled\n  });\n}\nfunction getVariableDependantModifier(variablesStore, prop, value) {\n  return variablesStore.getModifierForVarDependant(prop, value);\n}\nfunction cleanModificationCache() {\n  var _classObserver;\n  clearColorModificationCache();\n  imageDetailsCache.clear();\n  cleanImageProcessingCache();\n  awaitingForImageLoading.clear();\n  imageSelectorQueue.clear();\n  (_classObserver = classObserver) === null || _classObserver === void 0 || _classObserver.disconnect();\n  classObserver = null;\n}\nconst VAR_TYPE_BG_COLOR = 1 << 0;\nconst VAR_TYPE_TEXT_COLOR = 1 << 1;\nconst VAR_TYPE_BORDER_COLOR = 1 << 2;\nconst VAR_TYPE_BG_IMG = 1 << 3;\nclass VariablesStore {\n  constructor() {\n    this.varTypes = new Map();\n    this.rulesQueue = new Set();\n    this.inlineStyleQueue = [];\n    this.definedVars = new Set();\n    this.varRefs = new Map();\n    this.unknownColorVars = new Set();\n    this.unknownBgVars = new Set();\n    this.undefinedVars = new Set();\n    this.initialVarTypes = new Map();\n    this.changedTypeVars = new Set();\n    this.typeChangeSubscriptions = new Map();\n    this.unstableVarValues = new Map();\n  }\n  clear() {\n    this.varTypes.clear();\n    this.rulesQueue.clear();\n    this.inlineStyleQueue.splice(0);\n    this.definedVars.clear();\n    this.varRefs.clear();\n    this.unknownColorVars.clear();\n    this.unknownBgVars.clear();\n    this.undefinedVars.clear();\n    this.initialVarTypes.clear();\n    this.changedTypeVars.clear();\n    this.typeChangeSubscriptions.clear();\n    this.unstableVarValues.clear();\n  }\n  isVarType(varName, typeNum) {\n    return this.varTypes.has(varName) && (this.varTypes.get(varName) & typeNum) > 0;\n  }\n  addRulesForMatching(rules) {\n    this.rulesQueue.add(rules);\n  }\n  addInlineStyleForMatching(style) {\n    this.inlineStyleQueue.push(style);\n  }\n  matchVariablesAndDependents() {\n    if (this.rulesQueue.size === 0 && this.inlineStyleQueue.length === 0) {\n      return;\n    }\n    this.changedTypeVars.clear();\n    this.initialVarTypes = new Map(this.varTypes);\n    this.collectRootVariables();\n    this.collectVariablesAndVarDep();\n    this.collectRootVarDependents();\n    this.varRefs.forEach((refs, v) => {\n      refs.forEach(r => {\n        if (this.varTypes.has(v)) {\n          this.resolveVariableType(r, this.varTypes.get(v));\n        }\n      });\n    });\n    this.unknownColorVars.forEach(v => {\n      if (this.unknownBgVars.has(v)) {\n        this.unknownColorVars.delete(v);\n        this.unknownBgVars.delete(v);\n        this.resolveVariableType(v, VAR_TYPE_BG_COLOR);\n      } else if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_TEXT_COLOR | VAR_TYPE_BORDER_COLOR)) {\n        this.unknownColorVars.delete(v);\n      } else {\n        this.undefinedVars.add(v);\n      }\n    });\n    this.unknownBgVars.forEach(v => {\n      const hasColor = this.findVarRef(v, ref => {\n        return this.unknownColorVars.has(ref) || this.isVarType(ref, VAR_TYPE_BG_COLOR | VAR_TYPE_TEXT_COLOR | VAR_TYPE_BORDER_COLOR);\n      }) != null;\n      if (hasColor) {\n        this.iterateVarRefs(v, ref => {\n          this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\n        });\n      } else if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\n        this.unknownBgVars.delete(v);\n      } else {\n        this.undefinedVars.add(v);\n      }\n    });\n    this.changedTypeVars.forEach(varName => {\n      if (this.typeChangeSubscriptions.has(varName)) {\n        this.typeChangeSubscriptions.get(varName).forEach(callback => {\n          callback();\n        });\n      }\n    });\n    this.changedTypeVars.clear();\n  }\n  getModifierForVariable(options) {\n    return theme => {\n      const {\n        varName,\n        sourceValue,\n        rule,\n        ignoredImgSelectors,\n        isCancelled\n      } = options;\n      const getDeclarations = () => {\n        const declarations = [];\n        const addModifiedValue = (typeNum, varNameWrapper, colorModifier) => {\n          if (!this.isVarType(varName, typeNum)) {\n            return;\n          }\n          const property = varNameWrapper(varName);\n          let modifiedValue;\n          if (isVarDependant(sourceValue)) {\n            if (isConstructedColorVar(sourceValue)) {\n              let value = insertVarValues(sourceValue, this.unstableVarValues);\n              if (!value) {\n                value = typeNum === VAR_TYPE_BG_COLOR ? \"#ffffff\" : \"#000000\";\n              }\n              modifiedValue = colorModifier(value, theme);\n            } else {\n              modifiedValue = replaceCSSVariablesNames(sourceValue, v => varNameWrapper(v), fallback => colorModifier(fallback, theme));\n            }\n          } else {\n            modifiedValue = colorModifier(sourceValue, theme);\n          }\n          declarations.push({\n            property,\n            value: modifiedValue\n          });\n        };\n        addModifiedValue(VAR_TYPE_BG_COLOR, wrapBgColorVariableName, tryModifyBgColor);\n        addModifiedValue(VAR_TYPE_TEXT_COLOR, wrapTextColorVariableName, tryModifyTextColor);\n        addModifiedValue(VAR_TYPE_BORDER_COLOR, wrapBorderColorVariableName, tryModifyBorderColor);\n        if (this.isVarType(varName, VAR_TYPE_BG_IMG)) {\n          const property = wrapBgImgVariableName(varName);\n          let modifiedValue = sourceValue;\n          if (isVarDependant(sourceValue)) {\n            modifiedValue = replaceCSSVariablesNames(sourceValue, v => wrapBgColorVariableName(v), fallback => tryModifyBgColor(fallback, theme));\n          }\n          const bgModifier = getBgImageModifier(modifiedValue, rule, ignoredImgSelectors, isCancelled);\n          modifiedValue = typeof bgModifier === \"function\" ? bgModifier(theme) : bgModifier;\n          declarations.push({\n            property,\n            value: modifiedValue\n          });\n        }\n        return declarations;\n      };\n      const callbacks = new Set();\n      const addListener = onTypeChange => {\n        const callback = () => {\n          const decs = getDeclarations();\n          onTypeChange(decs);\n        };\n        callbacks.add(callback);\n        this.subscribeForVarTypeChange(varName, callback);\n      };\n      const removeListeners = () => {\n        callbacks.forEach(callback => {\n          this.unsubscribeFromVariableTypeChanges(varName, callback);\n        });\n      };\n      return {\n        declarations: getDeclarations(),\n        onTypeChange: {\n          addListener,\n          removeListeners\n        }\n      };\n    };\n  }\n  getModifierForVarDependant(property, sourceValue) {\n    const isConstructedColor = sourceValue.match(/^\\s*(rgb|hsl)a?\\(/);\n    const isSimpleConstructedColor = sourceValue.match(/^rgba?\\(var\\(--[\\-_A-Za-z0-9]+\\)(\\s*,?\\/?\\s*0?\\.\\d+)?\\)$/);\n    if (isConstructedColor && !isSimpleConstructedColor) {\n      const isBg = property.startsWith(\"background\");\n      const isText = isTextColorProperty(property);\n      return theme => {\n        let value = insertVarValues(sourceValue, this.unstableVarValues);\n        if (!value) {\n          value = isBg ? \"#ffffff\" : \"#000000\";\n        }\n        const modifier = isBg ? tryModifyBgColor : isText ? tryModifyTextColor : tryModifyBorderColor;\n        return modifier(value, theme);\n      };\n    }\n    if (property === \"background-color\" || isSimpleConstructedColor && property === \"background\") {\n      return theme => {\n        const defaultFallback = tryModifyBgColor(isConstructedColor ? \"255, 255, 255\" : \"#ffffff\", theme);\n        return replaceCSSVariablesNames(sourceValue, v => wrapBgColorVariableName(v), fallback => tryModifyBgColor(fallback, theme), defaultFallback);\n      };\n    }\n    if (isTextColorProperty(property)) {\n      return theme => {\n        const defaultFallback = tryModifyTextColor(isConstructedColor ? \"0, 0, 0\" : \"#000000\", theme);\n        return replaceCSSVariablesNames(sourceValue, v => wrapTextColorVariableName(v), fallback => tryModifyTextColor(fallback, theme), defaultFallback);\n      };\n    }\n    if (property === \"background\" || property === \"background-image\" || property === \"box-shadow\") {\n      return theme => {\n        const unknownVars = new Set();\n        const modify = () => {\n          const variableReplaced = replaceCSSVariablesNames(sourceValue, v => {\n            if (this.isVarType(v, VAR_TYPE_BG_COLOR)) {\n              return wrapBgColorVariableName(v);\n            }\n            if (this.isVarType(v, VAR_TYPE_BG_IMG)) {\n              return wrapBgImgVariableName(v);\n            }\n            unknownVars.add(v);\n            return v;\n          }, fallback => tryModifyBgColor(fallback, theme));\n          if (property === \"box-shadow\") {\n            const shadowModifier = getShadowModifierWithInfo(variableReplaced);\n            const modifiedShadow = shadowModifier(theme);\n            if (modifiedShadow.unparsableMatchesLength !== modifiedShadow.matchesLength) {\n              return modifiedShadow.result;\n            }\n          }\n          return variableReplaced;\n        };\n        const modified = modify();\n        if (unknownVars.size > 0) {\n          const isFallbackResolved = modified.match(/^var\\(.*?, ((var\\(--darkreader-bg--.*\\))|(#[0-9A-Fa-f]+)|([a-z]+)|(rgba?\\(.+\\))|(hsla?\\(.+\\)))\\)$/);\n          if (isFallbackResolved) {\n            return modified;\n          }\n          return new Promise(resolve => {\n            for (const unknownVar of unknownVars.values()) {\n              const callback = () => {\n                this.unsubscribeFromVariableTypeChanges(unknownVar, callback);\n                const newValue = modify();\n                resolve(newValue);\n              };\n              this.subscribeForVarTypeChange(unknownVar, callback);\n            }\n          });\n        }\n        return modified;\n      };\n    }\n    if (property.startsWith(\"border\") || property.startsWith(\"outline\")) {\n      return theme => {\n        return replaceCSSVariablesNames(sourceValue, v => wrapBorderColorVariableName(v), fallback => tryModifyBorderColor(fallback, theme));\n      };\n    }\n    return null;\n  }\n  subscribeForVarTypeChange(varName, callback) {\n    if (!this.typeChangeSubscriptions.has(varName)) {\n      this.typeChangeSubscriptions.set(varName, new Set());\n    }\n    const rootStore = this.typeChangeSubscriptions.get(varName);\n    if (!rootStore.has(callback)) {\n      rootStore.add(callback);\n    }\n  }\n  unsubscribeFromVariableTypeChanges(varName, callback) {\n    if (this.typeChangeSubscriptions.has(varName)) {\n      this.typeChangeSubscriptions.get(varName).delete(callback);\n    }\n  }\n  collectVariablesAndVarDep() {\n    this.rulesQueue.forEach(rules => {\n      iterateCSSRules(rules, rule => {\n        if (rule.style) {\n          this.collectVarsFromCSSDeclarations(rule.style);\n        }\n      });\n    });\n    this.inlineStyleQueue.forEach(style => {\n      this.collectVarsFromCSSDeclarations(style);\n    });\n    this.rulesQueue.clear();\n    this.inlineStyleQueue.splice(0);\n  }\n  collectVarsFromCSSDeclarations(style) {\n    iterateCSSDeclarations(style, (property, value) => {\n      if (isVariable(property)) {\n        this.inspectVariable(property, value);\n      }\n      if (isVarDependant(value)) {\n        this.inspectVarDependant(property, value);\n      }\n    });\n  }\n  shouldProcessRootVariables() {\n    var _document$documentEle;\n    return this.rulesQueue.size > 0 && ((_document$documentEle = document.documentElement.getAttribute(\"style\")) === null || _document$documentEle === void 0 ? void 0 : _document$documentEle.includes(\"--\"));\n  }\n  collectRootVariables() {\n    if (!this.shouldProcessRootVariables()) {\n      return;\n    }\n    iterateCSSDeclarations(document.documentElement.style, (property, value) => {\n      if (isVariable(property)) {\n        this.inspectVariable(property, value);\n      }\n    });\n  }\n  inspectVariable(varName, value) {\n    this.unstableVarValues.set(varName, value);\n    if (isVarDependant(value) && isConstructedColorVar(value)) {\n      this.unknownColorVars.add(varName);\n      this.definedVars.add(varName);\n    }\n    if (this.definedVars.has(varName)) {\n      return;\n    }\n    this.definedVars.add(varName);\n    const isColor = Boolean(value.match(rawRGBSpaceRegex) || value.match(rawRGBCommaRegex) || parseColorWithCache(value));\n    if (isColor) {\n      this.unknownColorVars.add(varName);\n    } else if (value.includes(\"url(\") || value.includes(\"linear-gradient(\") || value.includes(\"radial-gradient(\")) {\n      this.resolveVariableType(varName, VAR_TYPE_BG_IMG);\n    }\n  }\n  resolveVariableType(varName, typeNum) {\n    const initialType = this.initialVarTypes.get(varName) || 0;\n    const currentType = this.varTypes.get(varName) || 0;\n    const newType = currentType | typeNum;\n    this.varTypes.set(varName, newType);\n    if (newType !== initialType || this.undefinedVars.has(varName)) {\n      this.changedTypeVars.add(varName);\n      this.undefinedVars.delete(varName);\n    }\n    this.unknownColorVars.delete(varName);\n    this.unknownBgVars.delete(varName);\n  }\n  collectRootVarDependents() {\n    if (!this.shouldProcessRootVariables()) {\n      return;\n    }\n    iterateCSSDeclarations(document.documentElement.style, (property, value) => {\n      if (isVarDependant(value)) {\n        this.inspectVarDependant(property, value);\n      }\n    });\n  }\n  inspectVarDependant(property, value) {\n    if (isVariable(property)) {\n      this.iterateVarDeps(value, ref => {\n        if (!this.varRefs.has(property)) {\n          this.varRefs.set(property, new Set());\n        }\n        this.varRefs.get(property).add(ref);\n      });\n    } else if (property === \"background-color\" || property === \"box-shadow\") {\n      this.iterateVarDeps(value, v => this.resolveVariableType(v, VAR_TYPE_BG_COLOR));\n    } else if (isTextColorProperty(property)) {\n      this.iterateVarDeps(value, v => this.resolveVariableType(v, VAR_TYPE_TEXT_COLOR));\n    } else if (property.startsWith(\"border\") || property.startsWith(\"outline\")) {\n      this.iterateVarDeps(value, v => this.resolveVariableType(v, VAR_TYPE_BORDER_COLOR));\n    } else if (property === \"background\" || property === \"background-image\") {\n      this.iterateVarDeps(value, v => {\n        if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\n          return;\n        }\n        const isBgColor = this.findVarRef(v, ref => {\n          return this.unknownColorVars.has(ref) || this.isVarType(ref, VAR_TYPE_BG_COLOR | VAR_TYPE_TEXT_COLOR | VAR_TYPE_BORDER_COLOR);\n        }) != null;\n        this.iterateVarRefs(v, ref => {\n          if (isBgColor) {\n            this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\n          } else {\n            this.unknownBgVars.add(ref);\n          }\n        });\n      });\n    }\n  }\n  iterateVarDeps(value, iterator) {\n    const varDeps = new Set();\n    iterateVarDependencies(value, v => varDeps.add(v));\n    varDeps.forEach(v => iterator(v));\n  }\n  findVarRef(varName, iterator) {\n    let stack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Set();\n    if (stack.has(varName)) {\n      return null;\n    }\n    stack.add(varName);\n    const result = iterator(varName);\n    if (result) {\n      return varName;\n    }\n    const refs = this.varRefs.get(varName);\n    if (!refs || refs.size === 0) {\n      return null;\n    }\n    for (const ref of refs) {\n      const found = this.findVarRef(ref, iterator, stack);\n      if (found) {\n        return found;\n      }\n    }\n    return null;\n  }\n  iterateVarRefs(varName, iterator) {\n    this.findVarRef(varName, ref => {\n      iterator(ref);\n      return false;\n    });\n  }\n  setOnRootVariableChange(callback) {\n    this.onRootVariableDefined = callback;\n  }\n  putRootVars(styleElement, theme) {\n    const sheet = styleElement.sheet;\n    if (sheet.cssRules.length > 0) {\n      sheet.deleteRule(0);\n    }\n    const declarations = new Map();\n    iterateCSSDeclarations(document.documentElement.style, (property, value) => {\n      if (isVariable(property)) {\n        if (this.isVarType(property, VAR_TYPE_BG_COLOR)) {\n          declarations.set(wrapBgColorVariableName(property), tryModifyBgColor(value, theme));\n        }\n        if (this.isVarType(property, VAR_TYPE_TEXT_COLOR)) {\n          declarations.set(wrapTextColorVariableName(property), tryModifyTextColor(value, theme));\n        }\n        if (this.isVarType(property, VAR_TYPE_BORDER_COLOR)) {\n          declarations.set(wrapBorderColorVariableName(property), tryModifyBorderColor(value, theme));\n        }\n        this.subscribeForVarTypeChange(property, this.onRootVariableDefined);\n      }\n    });\n    const cssLines = [];\n    cssLines.push(\":root {\");\n    for (const [property, value] of declarations) {\n      cssLines.push(\"    \".concat(property, \": \").concat(value, \";\"));\n    }\n    cssLines.push(\"}\");\n    const cssText = cssLines.join(\"\\n\");\n    sheet.insertRule(cssText);\n  }\n}\nconst variablesStore = new VariablesStore();\nfunction getVariableRange(input) {\n  let searchStart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const start = input.indexOf(\"var(\", searchStart);\n  if (start >= 0) {\n    const range = getParenthesesRange(input, start + 3);\n    if (range) {\n      return {\n        start,\n        end: range.end\n      };\n    }\n  }\n  return null;\n}\nfunction getVariablesMatches(input) {\n  const ranges = [];\n  let i = 0;\n  let range;\n  while (range = getVariableRange(input, i)) {\n    const {\n      start,\n      end\n    } = range;\n    ranges.push({\n      start,\n      end,\n      value: input.substring(start, end)\n    });\n    i = range.end + 1;\n  }\n  return ranges;\n}\nfunction replaceVariablesMatches(input, replacer) {\n  const matches = getVariablesMatches(input);\n  const matchesCount = matches.length;\n  if (matchesCount === 0) {\n    return input;\n  }\n  const inputLength = input.length;\n  const replacements = matches.map(m => replacer(m.value, matches.length));\n  const parts = [];\n  parts.push(input.substring(0, matches[0].start));\n  for (let i = 0; i < matchesCount; i++) {\n    parts.push(replacements[i]);\n    const start = matches[i].end;\n    const end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;\n    parts.push(input.substring(start, end));\n  }\n  return parts.join(\"\");\n}\nfunction getVariableNameAndFallback(match) {\n  const commaIndex = match.indexOf(\",\");\n  let name;\n  let fallback;\n  if (commaIndex >= 0) {\n    name = match.substring(4, commaIndex).trim();\n    fallback = match.substring(commaIndex + 1, match.length - 1).trim();\n  } else {\n    name = match.substring(4, match.length - 1).trim();\n    fallback = \"\";\n  }\n  return {\n    name,\n    fallback\n  };\n}\nfunction replaceCSSVariablesNames(value, nameReplacer, fallbackReplacer, finalFallback) {\n  const matchReplacer = match => {\n    const {\n      name,\n      fallback\n    } = getVariableNameAndFallback(match);\n    const newName = nameReplacer(name);\n    if (!fallback) {\n      if (finalFallback) {\n        return \"var(\".concat(newName, \", \").concat(finalFallback, \")\");\n      }\n      return \"var(\".concat(newName, \")\");\n    }\n    let newFallback;\n    if (isVarDependant(fallback)) {\n      newFallback = replaceCSSVariablesNames(fallback, nameReplacer, fallbackReplacer);\n    } else if (fallbackReplacer) {\n      newFallback = fallbackReplacer(fallback);\n    } else {\n      newFallback = fallback;\n    }\n    return \"var(\".concat(newName, \", \").concat(newFallback, \")\");\n  };\n  return replaceVariablesMatches(value, matchReplacer);\n}\nfunction iterateVarDependencies(value, iterator) {\n  replaceCSSVariablesNames(value, varName => {\n    iterator(varName);\n    return varName;\n  });\n}\nfunction wrapBgColorVariableName(name) {\n  return \"--darkreader-bg\".concat(name);\n}\nfunction wrapTextColorVariableName(name) {\n  return \"--darkreader-text\".concat(name);\n}\nfunction wrapBorderColorVariableName(name) {\n  return \"--darkreader-border\".concat(name);\n}\nfunction wrapBgImgVariableName(name) {\n  return \"--darkreader-bgimg\".concat(name);\n}\nfunction isVariable(property) {\n  return property.startsWith(\"--\");\n}\nfunction isVarDependant(value) {\n  return value.includes(\"var(\");\n}\nfunction isConstructedColorVar(value) {\n  return value.match(/^\\s*(rgb|hsl)a?\\(/) || value.match(/^(((\\d{1,3})|(var\\([\\-_A-Za-z0-9]+\\))),?\\s*?){3}$/);\n}\nconst textColorProps = [\"color\", \"caret-color\", \"-webkit-text-fill-color\", \"fill\", \"stroke\"];\nfunction isTextColorProperty(property) {\n  return textColorProps.includes(property);\n}\nconst rawRGBSpaceRegex = /^(\\d{1,3})\\s+(\\d{1,3})\\s+(\\d{1,3})$/;\nconst rawRGBCommaRegex = /^(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})$/;\nfunction parseRawColorValue(input) {\n  var _input$match;\n  const match = (_input$match = input.match(rawRGBSpaceRegex)) !== null && _input$match !== void 0 ? _input$match : input.match(rawRGBCommaRegex);\n  if (match) {\n    const color = \"rgb(\".concat(match[1], \", \").concat(match[2], \", \").concat(match[3], \")\");\n    return {\n      isRaw: true,\n      color\n    };\n  }\n  return {\n    isRaw: false,\n    color: input\n  };\n}\nfunction handleRawColorValue(input, theme, modifyFunction) {\n  const {\n    isRaw,\n    color\n  } = parseRawColorValue(input);\n  const rgb = parseColorWithCache(color);\n  if (rgb) {\n    const outputColor = modifyFunction(rgb, theme, !isRaw);\n    if (isRaw) {\n      const outputInRGB = parseColorWithCache(outputColor);\n      return outputInRGB ? \"\".concat(outputInRGB.r, \", \").concat(outputInRGB.g, \", \").concat(outputInRGB.b) : outputColor;\n    }\n    return outputColor;\n  }\n  return color;\n}\nfunction tryModifyBgColor(color, theme) {\n  return handleRawColorValue(color, theme, modifyBackgroundColor);\n}\nfunction tryModifyTextColor(color, theme) {\n  return handleRawColorValue(color, theme, modifyForegroundColor);\n}\nfunction tryModifyBorderColor(color, theme) {\n  return handleRawColorValue(color, theme, modifyBorderColor);\n}\nfunction insertVarValues(source, varValues) {\n  let fullStack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Set();\n  let containsUnresolvedVar = false;\n  const matchReplacer = (match, count) => {\n    const {\n      name,\n      fallback\n    } = getVariableNameAndFallback(match);\n    const stack = count > 1 ? new Set(fullStack) : fullStack;\n    if (stack.has(name)) {\n      containsUnresolvedVar = true;\n      return null;\n    }\n    stack.add(name);\n    const varValue = varValues.get(name) || fallback;\n    let inserted = null;\n    if (varValue) {\n      if (isVarDependant(varValue)) {\n        inserted = insertVarValues(varValue, varValues, stack);\n      } else {\n        inserted = varValue;\n      }\n    }\n    if (!inserted) {\n      containsUnresolvedVar = true;\n      return null;\n    }\n    return inserted;\n  };\n  const replaced = replaceVariablesMatches(source, matchReplacer);\n  if (containsUnresolvedVar) {\n    return null;\n  }\n  return replaced;\n}\nfunction getThemeKey(theme) {\n  let resultKey = \"\";\n  themeCacheKeys.forEach(key => {\n    resultKey += \"\".concat(key, \":\").concat(theme[key], \";\");\n  });\n  return resultKey;\n}\nconst asyncQueue = createAsyncTasksQueue();\nfunction createStyleSheetModifier() {\n  let renderId = 0;\n  function getStyleRuleHash(rule) {\n    let cssText = rule.cssText;\n    if (isMediaRule(rule.parentRule)) {\n      cssText = \"\".concat(rule.parentRule.media.mediaText, \" { \").concat(cssText, \" }\");\n    }\n    return getHashCode(cssText);\n  }\n  const rulesTextCache = new Set();\n  const rulesModCache = new Map();\n  const varTypeChangeCleaners = new Set();\n  let prevFilterKey = null;\n  let hasNonLoadedLink = false;\n  let wasRebuilt = false;\n  function shouldRebuildStyle() {\n    return hasNonLoadedLink && !wasRebuilt;\n  }\n  function modifySheet(options) {\n    const rules = options.sourceCSSRules;\n    const {\n      theme,\n      ignoreImageAnalysis,\n      force,\n      prepareSheet,\n      isAsyncCancelled\n    } = options;\n    let rulesChanged = rulesModCache.size === 0;\n    const notFoundCacheKeys = new Set(rulesModCache.keys());\n    const themeKey = getThemeKey(theme);\n    const themeChanged = themeKey !== prevFilterKey;\n    if (hasNonLoadedLink) {\n      wasRebuilt = true;\n    }\n    const modRules = [];\n    iterateCSSRules(rules, rule => {\n      const hash = getStyleRuleHash(rule);\n      let textDiffersFromPrev = false;\n      notFoundCacheKeys.delete(hash);\n      if (!rulesTextCache.has(hash)) {\n        rulesTextCache.add(hash);\n        textDiffersFromPrev = true;\n      }\n      if (textDiffersFromPrev) {\n        rulesChanged = true;\n      } else {\n        modRules.push(rulesModCache.get(hash));\n        return;\n      }\n      if (rule.style.all === \"revert\") {\n        return;\n      }\n      const modDecs = [];\n      rule.style && iterateCSSDeclarations(rule.style, (property, value) => {\n        const mod = getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageAnalysis, isAsyncCancelled);\n        if (mod) {\n          modDecs.push(mod);\n        }\n      });\n      let modRule = null;\n      if (modDecs.length > 0) {\n        const parentRule = rule.parentRule;\n        modRule = {\n          selector: rule.selectorText,\n          declarations: modDecs,\n          parentRule\n        };\n        modRules.push(modRule);\n      }\n      rulesModCache.set(hash, modRule);\n    }, () => {\n      hasNonLoadedLink = true;\n    });\n    notFoundCacheKeys.forEach(key => {\n      rulesTextCache.delete(key);\n      rulesModCache.delete(key);\n    });\n    prevFilterKey = themeKey;\n    if (!force && !rulesChanged && !themeChanged) {\n      return;\n    }\n    renderId++;\n    function setRule(target, index, rule) {\n      const {\n        selector,\n        declarations\n      } = rule;\n      let selectorText = selector;\n      const emptyIsWhereSelector = isChromium && selector.startsWith(\":is(\") && (selector.includes(\":is()\") || selector.includes(\":where()\") || selector.includes(\":where(\") && selector.includes(\":-moz\"));\n      const viewTransitionSelector = selector.includes(\"::view-transition-\");\n      if (emptyIsWhereSelector || viewTransitionSelector) {\n        selectorText = \".darkreader-unsupported-selector\";\n      }\n      let ruleText = \"\".concat(selectorText, \" {\");\n      for (const dec of declarations) {\n        const {\n          property,\n          value,\n          important\n        } = dec;\n        if (value) {\n          ruleText += \" \".concat(property, \": \").concat(value).concat(important ? \" !important\" : \"\", \";\");\n        }\n      }\n      ruleText += \" }\";\n      target.insertRule(ruleText, index);\n    }\n    const asyncDeclarations = new Map();\n    const varDeclarations = new Map();\n    let asyncDeclarationCounter = 0;\n    let varDeclarationCounter = 0;\n    const rootReadyGroup = {\n      rule: null,\n      rules: [],\n      isGroup: true\n    };\n    const groupRefs = new WeakMap();\n    function getGroup(rule) {\n      if (rule == null) {\n        return rootReadyGroup;\n      }\n      if (groupRefs.has(rule)) {\n        return groupRefs.get(rule);\n      }\n      const group = {\n        rule,\n        rules: [],\n        isGroup: true\n      };\n      groupRefs.set(rule, group);\n      const parentGroup = getGroup(rule.parentRule);\n      parentGroup.rules.push(group);\n      return group;\n    }\n    varTypeChangeCleaners.forEach(clear => clear());\n    varTypeChangeCleaners.clear();\n    modRules.filter(r => r).forEach(_ref19 => {\n      let {\n        selector,\n        declarations,\n        parentRule\n      } = _ref19;\n      const group = getGroup(parentRule);\n      const readyStyleRule = {\n        selector,\n        declarations: [],\n        isGroup: false\n      };\n      const readyDeclarations = readyStyleRule.declarations;\n      group.rules.push(readyStyleRule);\n      function handleAsyncDeclaration(property, modified, important, sourceValue) {\n        const asyncKey = ++asyncDeclarationCounter;\n        const asyncDeclaration = {\n          property,\n          value: null,\n          important,\n          asyncKey,\n          sourceValue\n        };\n        readyDeclarations.push(asyncDeclaration);\n        const currentRenderId = renderId;\n        modified.then(asyncValue => {\n          if (!asyncValue || isAsyncCancelled() || currentRenderId !== renderId) {\n            return;\n          }\n          asyncDeclaration.value = asyncValue;\n          asyncQueue.add(() => {\n            if (isAsyncCancelled() || currentRenderId !== renderId) {\n              return;\n            }\n            rebuildAsyncRule(asyncKey);\n          });\n        });\n      }\n      function handleVarDeclarations(property, modified, important, sourceValue) {\n        const {\n          declarations: varDecs,\n          onTypeChange\n        } = modified;\n        const varKey = ++varDeclarationCounter;\n        const currentRenderId = renderId;\n        const initialIndex = readyDeclarations.length;\n        let oldDecs = [];\n        if (varDecs.length === 0) {\n          const tempDec = {\n            property,\n            value: sourceValue,\n            important,\n            sourceValue,\n            varKey\n          };\n          readyDeclarations.push(tempDec);\n          oldDecs = [tempDec];\n        }\n        varDecs.forEach(mod => {\n          if (mod.value instanceof Promise) {\n            handleAsyncDeclaration(mod.property, mod.value, important, sourceValue);\n          } else {\n            const readyDec = {\n              property: mod.property,\n              value: mod.value,\n              important,\n              sourceValue,\n              varKey\n            };\n            readyDeclarations.push(readyDec);\n            oldDecs.push(readyDec);\n          }\n        });\n        onTypeChange.addListener(newDecs => {\n          if (isAsyncCancelled() || currentRenderId !== renderId) {\n            return;\n          }\n          const readyVarDecs = newDecs.map(mod => {\n            return {\n              property: mod.property,\n              value: mod.value,\n              important,\n              sourceValue,\n              varKey\n            };\n          });\n          const index = readyDeclarations.indexOf(oldDecs[0], initialIndex);\n          readyDeclarations.splice(index, oldDecs.length, ...readyVarDecs);\n          oldDecs = readyVarDecs;\n          rebuildVarRule(varKey);\n        });\n        varTypeChangeCleaners.add(() => onTypeChange.removeListeners());\n      }\n      declarations.forEach(_ref20 => {\n        let {\n          property,\n          value,\n          important,\n          sourceValue\n        } = _ref20;\n        if (typeof value === \"function\") {\n          const modified = value(theme);\n          if (modified instanceof Promise) {\n            handleAsyncDeclaration(property, modified, important, sourceValue);\n          } else if (property.startsWith(\"--\")) {\n            handleVarDeclarations(property, modified, important, sourceValue);\n          } else {\n            readyDeclarations.push({\n              property,\n              value: modified,\n              important,\n              sourceValue\n            });\n          }\n        } else {\n          readyDeclarations.push({\n            property,\n            value,\n            important,\n            sourceValue\n          });\n        }\n      });\n    });\n    const sheet = prepareSheet();\n    function buildStyleSheet() {\n      function createTarget(group, parent) {\n        const {\n          rule\n        } = group;\n        if (isStyleRule(rule)) {\n          const {\n            selectorText\n          } = rule;\n          const index = parent.cssRules.length;\n          parent.insertRule(\"\".concat(selectorText, \" {}\"), index);\n          return parent.cssRules[index];\n        }\n        if (isMediaRule(rule)) {\n          const {\n            media\n          } = rule;\n          const index = parent.cssRules.length;\n          parent.insertRule(\"@media \".concat(media.mediaText, \" {}\"), index);\n          return parent.cssRules[index];\n        }\n        if (isLayerRule(rule)) {\n          const {\n            name\n          } = rule;\n          const index = parent.cssRules.length;\n          parent.insertRule(\"@layer \".concat(name, \" {}\"), index);\n          return parent.cssRules[index];\n        }\n        return parent;\n      }\n      function iterateReadyRules(group, target, styleIterator) {\n        group.rules.forEach(r => {\n          if (r.isGroup) {\n            const t = createTarget(r, target);\n            iterateReadyRules(r, t, styleIterator);\n          } else {\n            styleIterator(r, target);\n          }\n        });\n      }\n      iterateReadyRules(rootReadyGroup, sheet, (rule, target) => {\n        const index = target.cssRules.length;\n        rule.declarations.forEach(_ref21 => {\n          let {\n            asyncKey,\n            varKey\n          } = _ref21;\n          if (asyncKey != null) {\n            asyncDeclarations.set(asyncKey, {\n              rule,\n              target,\n              index\n            });\n          }\n          if (varKey != null) {\n            varDeclarations.set(varKey, {\n              rule,\n              target,\n              index\n            });\n          }\n        });\n        setRule(target, index, rule);\n      });\n    }\n    function rebuildAsyncRule(key) {\n      const {\n        rule,\n        target,\n        index\n      } = asyncDeclarations.get(key);\n      target.deleteRule(index);\n      setRule(target, index, rule);\n      asyncDeclarations.delete(key);\n    }\n    function rebuildVarRule(key) {\n      const {\n        rule,\n        target,\n        index\n      } = varDeclarations.get(key);\n      target.deleteRule(index);\n      setRule(target, index, rule);\n    }\n    buildStyleSheet();\n  }\n  return {\n    modifySheet,\n    shouldRebuildStyle\n  };\n}\nlet canUseSheetProxy$1 = false;\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => canUseSheetProxy$1 = true, {\n  once: true\n});\nconst overrides$1 = new WeakSet();\nconst overridesBySource = new WeakMap();\nfunction canHaveAdoptedStyleSheets(node) {\n  return Array.isArray(node.adoptedStyleSheets);\n}\nfunction createAdoptedStyleSheetOverride(node) {\n  let cancelAsyncOperations = false;\n  function iterateSourceSheets(iterator) {\n    node.adoptedStyleSheets.forEach(sheet => {\n      if (!overrides$1.has(sheet)) {\n        iterator(sheet);\n      }\n      defineSheetScope(sheet, node);\n    });\n  }\n  function injectSheet(sheet, override) {\n    const newSheets = [...node.adoptedStyleSheets];\n    const sheetIndex = newSheets.indexOf(sheet);\n    const overrideIndex = newSheets.indexOf(override);\n    if (overrideIndex >= 0) {\n      newSheets.splice(overrideIndex, 1);\n    }\n    newSheets.splice(sheetIndex + 1, 0, override);\n    node.adoptedStyleSheets = newSheets;\n  }\n  function clear() {\n    const newSheets = [...node.adoptedStyleSheets];\n    for (let i = newSheets.length - 1; i >= 0; i--) {\n      const sheet = newSheets[i];\n      if (overrides$1.has(sheet)) {\n        newSheets.splice(i, 1);\n      }\n    }\n    if (node.adoptedStyleSheets.length !== newSheets.length) {\n      node.adoptedStyleSheets = newSheets;\n    }\n    sourceSheets = new WeakSet();\n    sourceDeclarations = new WeakSet();\n  }\n  const cleaners = [];\n  function destroy() {\n    cleaners.forEach(c => c());\n    cleaners.splice(0);\n    cancelAsyncOperations = true;\n    clear();\n    if (frameId) {\n      cancelAnimationFrame(frameId);\n      frameId = null;\n    }\n  }\n  let rulesChangeKey = 0;\n  function getRulesChangeKey() {\n    let count = 0;\n    iterateSourceSheets(sheet => {\n      count += sheet.cssRules.length;\n    });\n    if (count === 1) {\n      const rule = node.adoptedStyleSheets[0].cssRules[0];\n      return rule instanceof CSSStyleRule ? rule.style.length : count;\n    }\n    return count;\n  }\n  let sourceSheets = new WeakSet();\n  let sourceDeclarations = new WeakSet();\n  function render(theme, ignoreImageAnalysis) {\n    clear();\n    for (let i = node.adoptedStyleSheets.length - 1; i >= 0; i--) {\n      const sheet = node.adoptedStyleSheets[i];\n      if (overrides$1.has(sheet)) {\n        continue;\n      }\n      sourceSheets.add(sheet);\n      const readyOverride = overridesBySource.get(sheet);\n      if (readyOverride) {\n        rulesChangeKey = getRulesChangeKey();\n        injectSheet(sheet, readyOverride);\n        continue;\n      }\n      const rules = sheet.cssRules;\n      const override = new CSSStyleSheet();\n      overridesBySource.set(sheet, override);\n      iterateCSSRules(rules, rule => sourceDeclarations.add(rule.style));\n      const prepareSheet = () => {\n        for (let i = override.cssRules.length - 1; i >= 0; i--) {\n          override.deleteRule(i);\n        }\n        override.insertRule(\"#__darkreader__adoptedOverride {}\");\n        injectSheet(sheet, override);\n        overrides$1.add(override);\n        return override;\n      };\n      const sheetModifier = createStyleSheetModifier();\n      sheetModifier.modifySheet({\n        prepareSheet,\n        sourceCSSRules: rules,\n        theme,\n        ignoreImageAnalysis,\n        force: false,\n        isAsyncCancelled: () => cancelAsyncOperations\n      });\n    }\n    rulesChangeKey = getRulesChangeKey();\n  }\n  let callbackRequested = false;\n  function handleArrayChange(callback) {\n    if (callbackRequested) {\n      return;\n    }\n    callbackRequested = true;\n    queueMicrotask(() => {\n      callbackRequested = false;\n      const sheets = node.adoptedStyleSheets.filter(s => !overrides$1.has(s));\n      sheets.forEach(sheet => overridesBySource.delete(sheet));\n      callback(sheets);\n    });\n  }\n  function checkForUpdates() {\n    return getRulesChangeKey() !== rulesChangeKey;\n  }\n  let frameId = null;\n  function watchUsingRAF(callback) {\n    frameId = requestAnimationFrame(() => {\n      if (canUseSheetProxy$1) {\n        return;\n      }\n      if (checkForUpdates()) {\n        handleArrayChange(callback);\n      }\n      watchUsingRAF(callback);\n    });\n  }\n  function addSheetChangeEventListener(type, listener) {\n    node.addEventListener(type, listener);\n    cleaners.push(() => node.removeEventListener(type, listener));\n  }\n  function watch(callback) {\n    const onAdoptedSheetsChange = () => {\n      canUseSheetProxy$1 = true;\n      handleArrayChange(callback);\n    };\n    addSheetChangeEventListener(\"__darkreader__adoptedStyleSheetsChange\", onAdoptedSheetsChange);\n    addSheetChangeEventListener(\"__darkreader__adoptedStyleSheetChange\", onAdoptedSheetsChange);\n    addSheetChangeEventListener(\"__darkreader__adoptedStyleDeclarationChange\", onAdoptedSheetsChange);\n    if (canUseSheetProxy$1) {\n      return;\n    }\n    watchUsingRAF(callback);\n  }\n  return {\n    render,\n    destroy,\n    watch\n  };\n}\nclass StyleSheetCommandBuilder {\n  constructor() {\n    this.cssRules = [];\n    this.commands = [];\n  }\n  insertRule(cssText) {\n    let index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.commands.push({\n      type: \"insert\",\n      index,\n      cssText\n    });\n    this.cssRules.splice(index, 0, new StyleSheetCommandBuilder());\n    return index;\n  }\n  deleteRule(index) {\n    this.commands.push({\n      type: \"delete\",\n      index\n    });\n    this.cssRules.splice(index, 1);\n  }\n  replaceSync(cssText) {\n    this.commands.splice(0);\n    this.commands.push({\n      type: \"replace\",\n      cssText\n    });\n    if (cssText === \"\") {\n      this.cssRules.splice(0);\n    } else {\n      throw new Error(\"StyleSheetCommandBuilder.replaceSync() is not fully supported\");\n    }\n  }\n  getDeepCSSCommands() {\n    const deep = [];\n    this.commands.forEach(command => {\n      deep.push({\n        type: command.type,\n        cssText: command.type !== \"delete\" ? command.cssText : \"\",\n        path: command.type === \"replace\" ? [] : [command.index]\n      });\n    });\n    this.cssRules.forEach((rule, i) => {\n      const childCommands = rule.getDeepCSSCommands();\n      childCommands.forEach(c => c.path.unshift(i));\n    });\n    return deep;\n  }\n  clearDeepCSSCommands() {\n    this.commands.splice(0);\n    this.cssRules.forEach(rule => rule.clearDeepCSSCommands());\n  }\n}\nfunction createAdoptedStyleSheetFallback() {\n  let cancelAsyncOperations = false;\n  const builder = new StyleSheetCommandBuilder();\n  function render(options) {\n    const prepareSheet = () => {\n      builder.replaceSync(\"\");\n      return builder;\n    };\n    const sheetModifier = createStyleSheetModifier();\n    sheetModifier.modifySheet({\n      prepareSheet,\n      sourceCSSRules: options.cssRules,\n      theme: options.theme,\n      ignoreImageAnalysis: options.ignoreImageAnalysis,\n      force: false,\n      isAsyncCancelled: () => cancelAsyncOperations\n    });\n  }\n  function commands() {\n    const commands = builder.getDeepCSSCommands();\n    builder.clearDeepCSSCommands();\n    return commands;\n  }\n  function destroy() {\n    cancelAsyncOperations = true;\n  }\n  return {\n    render,\n    destroy,\n    commands\n  };\n}\nconst hostsBreakingOnStylePosition = [\"www.diffusioneshop.com\", \"zhale.me\"];\nconst mode = hostsBreakingOnStylePosition.includes(location.hostname) ? \"away\" : \"next\";\nfunction getStyleInjectionMode() {\n  return mode;\n}\nfunction injectStyleAway(styleElement) {\n  let container = document.body.querySelector(\".darkreader-style-container\");\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.classList.add(\"darkreader\");\n    container.classList.add(\"darkreader-style-container\");\n    container.style.display = \"none\";\n    document.body.append(container);\n  }\n  container.append(styleElement);\n}\nconst overrides = {\n  \"background-color\": {\n    customProp: \"--darkreader-inline-bgcolor\",\n    cssProp: \"background-color\",\n    dataAttr: \"data-darkreader-inline-bgcolor\"\n  },\n  \"background-image\": {\n    customProp: \"--darkreader-inline-bgimage\",\n    cssProp: \"background-image\",\n    dataAttr: \"data-darkreader-inline-bgimage\"\n  },\n  \"border-color\": {\n    customProp: \"--darkreader-inline-border\",\n    cssProp: \"border-color\",\n    dataAttr: \"data-darkreader-inline-border\"\n  },\n  \"border-bottom-color\": {\n    customProp: \"--darkreader-inline-border-bottom\",\n    cssProp: \"border-bottom-color\",\n    dataAttr: \"data-darkreader-inline-border-bottom\"\n  },\n  \"border-left-color\": {\n    customProp: \"--darkreader-inline-border-left\",\n    cssProp: \"border-left-color\",\n    dataAttr: \"data-darkreader-inline-border-left\"\n  },\n  \"border-right-color\": {\n    customProp: \"--darkreader-inline-border-right\",\n    cssProp: \"border-right-color\",\n    dataAttr: \"data-darkreader-inline-border-right\"\n  },\n  \"border-top-color\": {\n    customProp: \"--darkreader-inline-border-top\",\n    cssProp: \"border-top-color\",\n    dataAttr: \"data-darkreader-inline-border-top\"\n  },\n  \"box-shadow\": {\n    customProp: \"--darkreader-inline-boxshadow\",\n    cssProp: \"box-shadow\",\n    dataAttr: \"data-darkreader-inline-boxshadow\"\n  },\n  \"color\": {\n    customProp: \"--darkreader-inline-color\",\n    cssProp: \"color\",\n    dataAttr: \"data-darkreader-inline-color\"\n  },\n  \"fill\": {\n    customProp: \"--darkreader-inline-fill\",\n    cssProp: \"fill\",\n    dataAttr: \"data-darkreader-inline-fill\"\n  },\n  \"stroke\": {\n    customProp: \"--darkreader-inline-stroke\",\n    cssProp: \"stroke\",\n    dataAttr: \"data-darkreader-inline-stroke\"\n  },\n  \"outline-color\": {\n    customProp: \"--darkreader-inline-outline\",\n    cssProp: \"outline-color\",\n    dataAttr: \"data-darkreader-inline-outline\"\n  },\n  \"stop-color\": {\n    customProp: \"--darkreader-inline-stopcolor\",\n    cssProp: \"stop-color\",\n    dataAttr: \"data-darkreader-inline-stopcolor\"\n  }\n};\nconst shorthandOverrides = {\n  \"background\": {\n    customProp: \"--darkreader-inline-bg\",\n    cssProp: \"background\",\n    dataAttr: \"data-darkreader-inline-bg\"\n  },\n  \"border\": {\n    customProp: \"--darkreader-inline-border-short\",\n    cssProp: \"border\",\n    dataAttr: \"data-darkreader-inline-border-short\"\n  },\n  \"border-bottom\": {\n    customProp: \"--darkreader-inline-border-bottom-short\",\n    cssProp: \"border-bottom\",\n    dataAttr: \"data-darkreader-inline-border-bottom-short\"\n  },\n  \"border-left\": {\n    customProp: \"--darkreader-inline-border-left-short\",\n    cssProp: \"border-left\",\n    dataAttr: \"data-darkreader-inline-border-left-short\"\n  },\n  \"border-right\": {\n    customProp: \"--darkreader-inline-border-right-short\",\n    cssProp: \"border-right\",\n    dataAttr: \"data-darkreader-inline-border-right-short\"\n  },\n  \"border-top\": {\n    customProp: \"--darkreader-inline-border-top-short\",\n    cssProp: \"border-top\",\n    dataAttr: \"data-darkreader-inline-border-top-short\"\n  }\n};\nconst overridesList = Object.values(overrides);\nconst normalizedPropList = {};\noverridesList.forEach(_ref22 => {\n  let {\n    cssProp,\n    customProp\n  } = _ref22;\n  return normalizedPropList[customProp] = cssProp;\n});\nconst INLINE_STYLE_ATTRS = [\"style\", \"fill\", \"stop-color\", \"stroke\", \"bgcolor\", \"color\", \"background\"];\nconst INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(attr => \"[\".concat(attr, \"]\")).join(\", \");\nfunction getInlineOverrideStyle() {\n  const allOverrides = overridesList.concat(Object.values(shorthandOverrides));\n  return allOverrides.map(_ref23 => {\n    let {\n      dataAttr,\n      customProp,\n      cssProp\n    } = _ref23;\n    return [\"[\".concat(dataAttr, \"] {\"), \"  \".concat(cssProp, \": var(\").concat(customProp, \") !important;\"), \"}\"].join(\"\\n\");\n  }).concat([\"[data-darkreader-inline-invert] {\", \"    filter: invert(100%) hue-rotate(180deg);\", \"}\"]).join(\"\\n\");\n}\nfunction getInlineStyleElements(root) {\n  const results = [];\n  if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {\n    results.push(root);\n  }\n  if (root instanceof Element || isShadowDomSupported && root instanceof ShadowRoot || root instanceof Document) {\n    push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));\n  }\n  return results;\n}\nconst treeObservers = new Map();\nconst attrObservers = new Map();\nfunction watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {\n  deepWatchForInlineStyles(document, elementStyleDidChange, shadowRootDiscovered);\n  iterateShadowHosts(document.documentElement, host => {\n    deepWatchForInlineStyles(host.shadowRoot, elementStyleDidChange, shadowRootDiscovered);\n  });\n}\nfunction deepWatchForInlineStyles(root, elementStyleDidChange, shadowRootDiscovered) {\n  if (treeObservers.has(root)) {\n    treeObservers.get(root).disconnect();\n    attrObservers.get(root).disconnect();\n  }\n  const discoveredNodes = new WeakSet();\n  function discoverNodes(node) {\n    getInlineStyleElements(node).forEach(el => {\n      if (discoveredNodes.has(el)) {\n        return;\n      }\n      discoveredNodes.add(el);\n      elementStyleDidChange(el);\n    });\n    iterateShadowHosts(node, n => {\n      if (discoveredNodes.has(node)) {\n        return;\n      }\n      discoveredNodes.add(node);\n      shadowRootDiscovered(n.shadowRoot);\n      deepWatchForInlineStyles(n.shadowRoot, elementStyleDidChange, shadowRootDiscovered);\n    });\n    variablesStore.matchVariablesAndDependents();\n  }\n  const treeObserver = createOptimizedTreeObserver(root, {\n    onMinorMutations: (_root, _ref24) => {\n      let {\n        additions\n      } = _ref24;\n      additions.forEach(added => discoverNodes(added));\n    },\n    onHugeMutations: () => {\n      discoverNodes(root);\n    }\n  });\n  treeObservers.set(root, treeObserver);\n  let attemptCount = 0;\n  let start = null;\n  const ATTEMPTS_INTERVAL = getDuration({\n    seconds: 10\n  });\n  const RETRY_TIMEOUT = getDuration({\n    seconds: 2\n  });\n  const MAX_ATTEMPTS_COUNT = 50;\n  let cache = [];\n  let timeoutId = null;\n  const handleAttributeMutations = throttle(mutations => {\n    const handledTargets = new Set();\n    mutations.forEach(m => {\n      const target = m.target;\n      if (handledTargets.has(target)) {\n        return;\n      }\n      if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {\n        handledTargets.add(target);\n        elementStyleDidChange(target);\n      }\n    });\n    variablesStore.matchVariablesAndDependents();\n  });\n  const attrObserver = new MutationObserver(mutations => {\n    if (timeoutId) {\n      cache.push(...mutations);\n      return;\n    }\n    attemptCount++;\n    const now = Date.now();\n    if (start == null) {\n      start = now;\n    } else if (attemptCount >= MAX_ATTEMPTS_COUNT) {\n      if (now - start < ATTEMPTS_INTERVAL) {\n        timeoutId = setTimeout(() => {\n          start = null;\n          attemptCount = 0;\n          timeoutId = null;\n          const attributeCache = cache;\n          cache = [];\n          handleAttributeMutations(attributeCache);\n        }, RETRY_TIMEOUT);\n        cache.push(...mutations);\n        return;\n      }\n      start = now;\n      attemptCount = 1;\n    }\n    handleAttributeMutations(mutations);\n  });\n  attrObserver.observe(root, {\n    attributes: true,\n    attributeFilter: INLINE_STYLE_ATTRS.concat(overridesList.map(_ref25 => {\n      let {\n        dataAttr\n      } = _ref25;\n      return dataAttr;\n    })),\n    subtree: true\n  });\n  attrObservers.set(root, attrObserver);\n}\nfunction stopWatchingForInlineStyles() {\n  treeObservers.forEach(o => o.disconnect());\n  attrObservers.forEach(o => o.disconnect());\n  treeObservers.clear();\n  attrObservers.clear();\n}\nconst inlineStyleCache = new WeakMap();\nconst svgInversionCache = new WeakSet();\nconst svgAnalysisConditionCache = new WeakMap();\nconst themeProps = [\"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"mode\"];\nfunction shouldAnalyzeSVGAsImage(svg) {\n  var _svg$getAttribute, _svg$parentElement;\n  if (svgAnalysisConditionCache.has(svg)) {\n    return svgAnalysisConditionCache.get(svg);\n  }\n  const shouldAnalyze = Boolean(svg && (((_svg$getAttribute = svg.getAttribute(\"class\")) === null || _svg$getAttribute === void 0 ? void 0 : _svg$getAttribute.includes(\"logo\")) || ((_svg$parentElement = svg.parentElement) === null || _svg$parentElement === void 0 || (_svg$parentElement = _svg$parentElement.getAttribute(\"class\")) === null || _svg$parentElement === void 0 ? void 0 : _svg$parentElement.includes(\"logo\"))));\n  svgAnalysisConditionCache.set(svg, shouldAnalyze);\n  return shouldAnalyze;\n}\nfunction getInlineStyleCacheKey(el, theme) {\n  return INLINE_STYLE_ATTRS.map(attr => \"\".concat(attr, \"=\\\"\").concat(el.getAttribute(attr), \"\\\"\")).concat(themeProps.map(prop => \"\".concat(prop, \"=\\\"\").concat(theme[prop], \"\\\"\"))).join(\" \");\n}\nfunction shouldIgnoreInlineStyle(element, selectors) {\n  for (let i = 0, len = selectors.length; i < len; i++) {\n    const ingnoredSelector = selectors[i];\n    if (element.matches(ingnoredSelector)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction overrideInlineStyle(element, theme, ignoreInlineSelectors, ignoreImageSelectors) {\n  var _element$ownerSVGElem, _element$getAttribute2;\n  const cacheKey = getInlineStyleCacheKey(element, theme);\n  if (cacheKey === inlineStyleCache.get(element)) {\n    return;\n  }\n  const unsetProps = new Set(Object.keys(overrides));\n  function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {\n    const mod = getModifiableCSSDeclaration(modifierCSSProp, cssVal, {\n      style: element.style\n    }, variablesStore, ignoreImageSelectors, null);\n    if (!mod) {\n      return;\n    }\n    function setStaticValue(value) {\n      var _overrides$targetCSSP;\n      const {\n        customProp,\n        dataAttr\n      } = (_overrides$targetCSSP = overrides[targetCSSProp]) !== null && _overrides$targetCSSP !== void 0 ? _overrides$targetCSSP : shorthandOverrides[targetCSSProp];\n      element.style.setProperty(customProp, value);\n      if (!element.hasAttribute(dataAttr)) {\n        element.setAttribute(dataAttr, \"\");\n      }\n      unsetProps.delete(targetCSSProp);\n    }\n    function setVarDeclaration(mod) {\n      let prevDeclarations = [];\n      function setProps(declarations) {\n        prevDeclarations.forEach(_ref26 => {\n          let {\n            property\n          } = _ref26;\n          element.style.removeProperty(property);\n        });\n        declarations.forEach(_ref27 => {\n          let {\n            property,\n            value\n          } = _ref27;\n          if (!(value instanceof Promise)) {\n            element.style.setProperty(property, value);\n          }\n        });\n        prevDeclarations = declarations;\n      }\n      setProps(mod.declarations);\n      mod.onTypeChange.addListener(setProps);\n    }\n    function setAsyncValue(promise, sourceValue) {\n      promise.then(value => {\n        if (value && targetCSSProp === \"background\" && value.startsWith(\"var(--darkreader-bg--\")) {\n          setStaticValue(value);\n        }\n        if (value && targetCSSProp === \"background-image\") {\n          if ((element === document.documentElement || element === document.body) && value === sourceValue) {\n            value = \"none\";\n          }\n          setStaticValue(value);\n        }\n        inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\n      });\n    }\n    const value = typeof mod.value === \"function\" ? mod.value(theme) : mod.value;\n    if (typeof value === \"string\") {\n      setStaticValue(value);\n    } else if (value instanceof Promise) {\n      setAsyncValue(value, cssVal);\n    } else if (typeof value === \"object\") {\n      setVarDeclaration(value);\n    }\n  }\n  if (ignoreInlineSelectors.length > 0) {\n    if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {\n      unsetProps.forEach(cssProp => {\n        element.removeAttribute(overrides[cssProp].dataAttr);\n      });\n      return;\n    }\n  }\n  const isSVGElement = element instanceof SVGElement;\n  const svg = isSVGElement ? (_element$ownerSVGElem = element.ownerSVGElement) !== null && _element$ownerSVGElem !== void 0 ? _element$ownerSVGElem : element instanceof SVGSVGElement ? element : null : null;\n  if (isSVGElement && theme.mode === 1 && svg) {\n    if (svgInversionCache.has(svg)) {\n      return;\n    }\n    if (shouldAnalyzeSVGAsImage(svg)) {\n      svgInversionCache.add(svg);\n      const analyzeSVGAsImage = () => {\n        let svgString = svg.outerHTML;\n        svgString = svgString.replaceAll('<style class=\"darkreader darkreader--sync\" media=\"screen\"></style>', \"\");\n        const dataURL = \"data:image/svg+xml;base64,\".concat(btoa(svgString));\n        getImageDetails(dataURL).then(details => {\n          if (details.isDark && details.isTransparent || details.isLarge && details.isLight && !details.isTransparent) {\n            svg.setAttribute(\"data-darkreader-inline-invert\", \"\");\n          } else {\n            svg.removeAttribute(\"data-darkreader-inline-invert\");\n          }\n        });\n      };\n      analyzeSVGAsImage();\n      if (!isDOMReady()) {\n        addDOMReadyListener(analyzeSVGAsImage);\n      }\n      return;\n    }\n  }\n  if (element.hasAttribute(\"bgcolor\")) {\n    let value = element.getAttribute(\"bgcolor\");\n    if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\n      value = \"#\".concat(value);\n    }\n    setCustomProp(\"background-color\", \"background-color\", value);\n  }\n  if ((element === document.documentElement || element === document.body) && element.hasAttribute(\"background\")) {\n    var _element$getAttribute;\n    const url = getAbsoluteURL(location.href, (_element$getAttribute = element.getAttribute(\"background\")) !== null && _element$getAttribute !== void 0 ? _element$getAttribute : \"\");\n    const value = \"url(\\\"\".concat(url, \"\\\")\");\n    setCustomProp(\"background-image\", \"background-image\", value);\n  }\n  if (element.hasAttribute(\"color\") && element.rel !== \"mask-icon\") {\n    let value = element.getAttribute(\"color\");\n    if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\n      value = \"#\".concat(value);\n    }\n    setCustomProp(\"color\", \"color\", value);\n  }\n  if (isSVGElement) {\n    if (element.hasAttribute(\"fill\")) {\n      const SMALL_SVG_LIMIT = 32;\n      const value = element.getAttribute(\"fill\");\n      if (value !== \"none\") {\n        if (!(element instanceof SVGTextElement)) {\n          const handleSVGElement = () => {\n            const {\n              width,\n              height\n            } = element.getBoundingClientRect();\n            const isBg = width > SMALL_SVG_LIMIT || height > SMALL_SVG_LIMIT;\n            setCustomProp(\"fill\", isBg ? \"background-color\" : \"color\", value);\n          };\n          if (isReadyStateComplete()) {\n            handleSVGElement();\n          } else {\n            addReadyStateCompleteListener(handleSVGElement);\n          }\n        } else {\n          setCustomProp(\"fill\", \"color\", value);\n        }\n      }\n    }\n    if (element.hasAttribute(\"stop-color\")) {\n      setCustomProp(\"stop-color\", \"background-color\", element.getAttribute(\"stop-color\"));\n    }\n  }\n  if (element.hasAttribute(\"stroke\")) {\n    const value = element.getAttribute(\"stroke\");\n    setCustomProp(\"stroke\", element instanceof SVGLineElement || element instanceof SVGTextElement ? \"border-color\" : \"color\", value);\n  }\n  element.style && iterateCSSDeclarations(element.style, (property, value) => {\n    if (property === \"background-image\" && value.includes(\"url\")) {\n      if (element === document.documentElement || element === document.body) {\n        setCustomProp(property, property, value);\n      }\n      return;\n    }\n    if (overrides.hasOwnProperty(property) || property.startsWith(\"--\") && !normalizedPropList[property]) {\n      setCustomProp(property, property, value);\n    } else if (shorthandOverrides[property] && value.includes(\"var(\")) {\n      setCustomProp(property, property, value);\n    } else {\n      const overriddenProp = normalizedPropList[property];\n      if (overriddenProp && !element.style.getPropertyValue(overriddenProp) && !element.hasAttribute(overriddenProp)) {\n        if (overriddenProp === \"background-color\" && element.hasAttribute(\"bgcolor\")) {\n          return;\n        }\n        element.style.setProperty(property, \"\");\n      }\n    }\n  });\n  if (element.style && element instanceof SVGTextElement && element.style.fill) {\n    setCustomProp(\"fill\", \"color\", element.style.getPropertyValue(\"fill\"));\n  }\n  if ((_element$getAttribute2 = element.getAttribute(\"style\")) !== null && _element$getAttribute2 !== void 0 && _element$getAttribute2.includes(\"--\")) {\n    variablesStore.addInlineStyleForMatching(element.style);\n  }\n  forEach(unsetProps, cssProp => {\n    element.removeAttribute(overrides[cssProp].dataAttr);\n  });\n  inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\n}\nconst metaThemeColorName = \"theme-color\";\nconst metaThemeColorSelector = \"meta[name=\\\"\".concat(metaThemeColorName, \"\\\"]\");\nlet srcMetaThemeColor = null;\nlet observer = null;\nfunction changeMetaThemeColor(meta, theme) {\n  srcMetaThemeColor = srcMetaThemeColor || meta.content;\n  const color = parseColorWithCache(srcMetaThemeColor);\n  if (!color) {\n    logWarn(\"Invalid meta color\", color);\n    return;\n  }\n  meta.content = modifyBackgroundColor(color, theme, false);\n}\nfunction changeMetaThemeColorWhenAvailable(theme) {\n  const meta = document.querySelector(metaThemeColorSelector);\n  if (meta) {\n    changeMetaThemeColor(meta, theme);\n  } else {\n    if (observer) {\n      observer.disconnect();\n    }\n    observer = new MutationObserver(mutations => {\n      loop: for (let i = 0; i < mutations.length; i++) {\n        const {\n          addedNodes\n        } = mutations[i];\n        for (let j = 0; j < addedNodes.length; j++) {\n          const node = addedNodes[j];\n          if (node instanceof HTMLMetaElement && node.name === metaThemeColorName) {\n            observer.disconnect();\n            observer = null;\n            changeMetaThemeColor(node, theme);\n            break loop;\n          }\n        }\n      }\n    });\n    observer.observe(document.head, {\n      childList: true\n    });\n  }\n}\nfunction restoreMetaThemeColor() {\n  if (observer) {\n    observer.disconnect();\n    observer = null;\n  }\n  const meta = document.querySelector(metaThemeColorSelector);\n  if (meta && srcMetaThemeColor) {\n    meta.content = srcMetaThemeColor;\n  }\n}\nconst cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;\nfunction removeCSSComments(cssText) {\n  return cssText.replace(cssCommentsRegex, \"\");\n}\nlet canUseSheetProxy = false;\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => canUseSheetProxy = true, {\n  once: true\n});\nfunction createSheetWatcher(element, safeGetSheetRules, callback, isCancelled) {\n  let rafSheetWatcher = null;\n  function watchForSheetChanges() {\n    watchForSheetChangesUsingProxy();\n    if (!(canUseSheetProxy && element.sheet)) {\n      rafSheetWatcher = createRAFSheetWatcher(element, safeGetSheetRules, callback, isCancelled);\n      rafSheetWatcher.start();\n    }\n  }\n  let areSheetChangesPending = false;\n  function onSheetChange() {\n    var _rafSheetWatcher;\n    canUseSheetProxy = true;\n    (_rafSheetWatcher = rafSheetWatcher) === null || _rafSheetWatcher === void 0 || _rafSheetWatcher.stop();\n    if (areSheetChangesPending) {\n      return;\n    }\n    function handleSheetChanges() {\n      areSheetChangesPending = false;\n      if (isCancelled()) {\n        return;\n      }\n      callback();\n    }\n    areSheetChangesPending = true;\n    queueMicrotask(handleSheetChanges);\n  }\n  function watchForSheetChangesUsingProxy() {\n    element.addEventListener(\"__darkreader__updateSheet\", onSheetChange);\n  }\n  function stopWatchingForSheetChangesUsingProxy() {\n    element.removeEventListener(\"__darkreader__updateSheet\", onSheetChange);\n  }\n  function stopWatchingForSheetChanges() {\n    var _rafSheetWatcher2;\n    stopWatchingForSheetChangesUsingProxy();\n    (_rafSheetWatcher2 = rafSheetWatcher) === null || _rafSheetWatcher2 === void 0 || _rafSheetWatcher2.stop();\n  }\n  return {\n    start: watchForSheetChanges,\n    stop: stopWatchingForSheetChanges\n  };\n}\nfunction createRAFSheetWatcher(element, safeGetSheetRules, callback, isCancelled) {\n  let rulesChangeKey = null;\n  let rulesCheckFrameId = null;\n  function getRulesChangeKey() {\n    const rules = safeGetSheetRules();\n    return rules ? rules.length : null;\n  }\n  function didRulesKeyChange() {\n    return getRulesChangeKey() !== rulesChangeKey;\n  }\n  function watchForSheetChangesUsingRAF() {\n    rulesChangeKey = getRulesChangeKey();\n    stopWatchingForSheetChangesUsingRAF();\n    const checkForUpdate = () => {\n      const cancelled = isCancelled();\n      if (!cancelled && didRulesKeyChange()) {\n        rulesChangeKey = getRulesChangeKey();\n        callback();\n      }\n      if (cancelled || canUseSheetProxy && element.sheet) {\n        stopWatchingForSheetChangesUsingRAF();\n        return;\n      }\n      rulesCheckFrameId = requestAnimationFrame(checkForUpdate);\n    };\n    checkForUpdate();\n  }\n  function stopWatchingForSheetChangesUsingRAF() {\n    rulesCheckFrameId && cancelAnimationFrame(rulesCheckFrameId);\n  }\n  return {\n    start: watchForSheetChangesUsingRAF,\n    stop: stopWatchingForSheetChangesUsingRAF\n  };\n}\nconst STYLE_SELECTOR = 'style, link[rel*=\"stylesheet\" i]:not([disabled])';\nfunction isFontsGoogleApiStyle(element) {\n  if (!element.href) {\n    return false;\n  }\n  try {\n    const elementURL = new URL(element.href);\n    return elementURL.hostname === \"fonts.googleapis.com\";\n  } catch (err) {\n    logInfo(\"Couldn't construct \".concat(element.href, \" as URL\"));\n    return false;\n  }\n}\nconst hostsBreakingOnSVGStyleOverride = [\"account.containerstore.com\", \"containerstore.com\", \"www.onet.pl\"];\nfunction shouldManageStyle(element) {\n  return (element instanceof HTMLStyleElement || element instanceof SVGStyleElement && !hostsBreakingOnSVGStyleOverride.includes(location.hostname) || element instanceof HTMLLinkElement && Boolean(element.rel) && element.rel.toLowerCase().includes(\"stylesheet\") && Boolean(element.href) && !element.disabled && (isFirefox ? !element.href.startsWith(\"moz-extension://\") : true) && !isFontsGoogleApiStyle(element)) && !element.classList.contains(\"darkreader\") && element.media.toLowerCase() !== \"print\" && !element.classList.contains(\"stylus\");\n}\nfunction getManageableStyles(node) {\n  let results = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (shouldManageStyle(node)) {\n    results.push(node);\n  } else if (node instanceof Element || isShadowDomSupported && node instanceof ShadowRoot || node === document) {\n    forEach(node.querySelectorAll(STYLE_SELECTOR), style => getManageableStyles(style, results, false));\n    if (deep) {\n      iterateShadowHosts(node, host => getManageableStyles(host.shadowRoot, results, false));\n    }\n  }\n  return results;\n}\nconst syncStyleSet = new WeakSet();\nconst corsStyleSet = new WeakSet();\nlet loadingLinkCounter = 0;\nconst rejectorsForLoadingLinks = new Map();\nfunction cleanLoadingLinks() {\n  rejectorsForLoadingLinks.clear();\n}\nfunction manageStyle(element, _ref28) {\n  let {\n    update,\n    loadingStart,\n    loadingEnd\n  } = _ref28;\n  const inMode = getStyleInjectionMode();\n  let corsCopy = null;\n  let syncStyle = null;\n  if (inMode === \"next\") {\n    const prevStyles = [];\n    let next = element;\n    while ((next = next.nextElementSibling) && next.matches(\".darkreader\")) {\n      prevStyles.push(next);\n    }\n    corsCopy = prevStyles.find(el => el.matches(\".darkreader--cors\") && !corsStyleSet.has(el)) || null;\n    syncStyle = prevStyles.find(el => el.matches(\".darkreader--sync\") && !syncStyleSet.has(el)) || null;\n  }\n  let corsCopyPositionWatcher = null;\n  let syncStylePositionWatcher = null;\n  let cancelAsyncOperations = false;\n  let isOverrideEmpty = true;\n  const isAsyncCancelled = () => cancelAsyncOperations;\n  const sheetModifier = createStyleSheetModifier();\n  const observer = new MutationObserver(mutations => {\n    if (mutations.some(m => m.type === \"characterData\") && containsCSSImport()) {\n      var _element$textContent;\n      const cssText = ((_element$textContent = element.textContent) !== null && _element$textContent !== void 0 ? _element$textContent : \"\").trim();\n      createOrUpdateCORSCopy(cssText, location.href).then(update);\n    } else {\n      update();\n    }\n  });\n  const observerOptions = {\n    attributes: true,\n    childList: true,\n    subtree: true,\n    characterData: true\n  };\n  function containsCSSImport() {\n    var _element$textContent2;\n    if (!(element instanceof HTMLStyleElement)) {\n      return false;\n    }\n    const cssText = removeCSSComments((_element$textContent2 = element.textContent) !== null && _element$textContent2 !== void 0 ? _element$textContent2 : \"\").trim();\n    return cssText.match(cssImportRegex);\n  }\n  function hasImports(cssRules, checkCrossOrigin) {\n    let result = false;\n    if (cssRules) {\n      let rule;\n      cssRulesLoop: for (let i = 0, len = cssRules.length; i < len; i++) {\n        rule = cssRules[i];\n        if (rule.href) {\n          if (checkCrossOrigin) {\n            if (!rule.href.startsWith(\"https://fonts.googleapis.com/\") && rule.href.startsWith(\"http\") && !rule.href.startsWith(location.origin)) {\n              result = true;\n              break cssRulesLoop;\n            }\n          } else {\n            result = true;\n            break cssRulesLoop;\n          }\n        }\n      }\n    }\n    return result;\n  }\n  function getRulesSync() {\n    if (corsCopy) {\n      return corsCopy.sheet.cssRules;\n    }\n    if (containsCSSImport()) {\n      return null;\n    }\n    const cssRules = safeGetSheetRules();\n    if (element instanceof HTMLLinkElement && !isRelativeHrefOnAbsolutePath(element.href) && hasImports(cssRules, false)) {\n      return null;\n    }\n    if (hasImports(cssRules, true)) {\n      return null;\n    }\n    !cssRules && logWarn(\"[getRulesSync] cssRules is null, trying again.\");\n    return cssRules;\n  }\n  function insertStyle() {\n    if (inMode === \"next\") {\n      if (corsCopy) {\n        if (element.nextSibling !== corsCopy) {\n          element.parentNode.insertBefore(corsCopy, element.nextSibling);\n        }\n        if (corsCopy.nextSibling !== syncStyle) {\n          element.parentNode.insertBefore(syncStyle, corsCopy.nextSibling);\n        }\n      } else if (element.nextSibling !== syncStyle) {\n        element.parentNode.insertBefore(syncStyle, element.nextSibling);\n      }\n    } else if (inMode === \"away\") {\n      if (corsCopy && !corsCopy.parentNode) {\n        injectStyleAway(corsCopy);\n      }\n      injectStyleAway(syncStyle);\n    }\n  }\n  function createSyncStyle() {\n    syncStyle = element instanceof SVGStyleElement ? document.createElementNS(\"http://www.w3.org/2000/svg\", \"style\") : document.createElement(\"style\");\n    syncStyle.classList.add(\"darkreader\");\n    syncStyle.classList.add(\"darkreader--sync\");\n    syncStyle.media = \"screen\";\n    if (element.title) {\n      syncStyle.title = element.title;\n    }\n    syncStyleSet.add(syncStyle);\n  }\n  let isLoadingRules = false;\n  let wasLoadingError = false;\n  const loadingLinkId = ++loadingLinkCounter;\n  async function getRulesAsync() {\n    let cssText;\n    let cssBasePath;\n    if (element instanceof HTMLLinkElement) {\n      let [cssRules, accessError] = getRulesOrError();\n      if (accessError) {\n        logWarn(accessError);\n      }\n      if (isSafari && !element.sheet || !isSafari && !cssRules && !accessError || isStillLoadingError(accessError)) {\n        try {\n          logInfo(\"Linkelement \".concat(loadingLinkId, \" is not loaded yet and thus will be await for\"), element);\n          await linkLoading(element, loadingLinkId);\n        } catch (err) {\n          logWarn(err);\n          wasLoadingError = true;\n        }\n        if (cancelAsyncOperations) {\n          return null;\n        }\n        [cssRules, accessError] = getRulesOrError();\n        if (accessError) {\n          logWarn(accessError);\n        }\n      }\n      if (cssRules) {\n        if (!hasImports(cssRules, false)) {\n          return cssRules;\n        }\n      }\n      try {\n        cssText = await loadText(element.href);\n      } catch (err) {\n        logWarn(err);\n        cssText = \"\";\n      }\n      cssBasePath = getCSSBaseBath(element.href);\n      if (cancelAsyncOperations) {\n        return null;\n      }\n    } else if (containsCSSImport()) {\n      cssText = element.textContent.trim();\n      cssBasePath = getCSSBaseBath(location.href);\n    } else {\n      return null;\n    }\n    await createOrUpdateCORSCopy(cssText, cssBasePath);\n    if (corsCopy) {\n      return corsCopy.sheet.cssRules;\n    }\n    return null;\n  }\n  async function createOrUpdateCORSCopy(cssText, cssBasePath) {\n    if (cssText) {\n      try {\n        const fullCSSText = await replaceCSSImports(cssText, cssBasePath);\n        if (corsCopy) {\n          var _corsCopy$textContent, _corsCopy$textContent2;\n          if (((_corsCopy$textContent = (_corsCopy$textContent2 = corsCopy.textContent) === null || _corsCopy$textContent2 === void 0 ? void 0 : _corsCopy$textContent2.length) !== null && _corsCopy$textContent !== void 0 ? _corsCopy$textContent : 0) < fullCSSText.length) {\n            corsCopy.textContent = fullCSSText;\n          }\n        } else {\n          corsCopy = createCORSCopy(fullCSSText, inMode === \"next\" ? cc => element.parentNode.insertBefore(cc, element.nextSibling) : injectStyleAway);\n          if (corsCopy) {\n            if (inMode === \"next\") {\n              element.parentNode.insertBefore(corsCopy, element.nextSibling);\n            } else if (inMode === \"away\") {\n              injectStyleAway(corsCopy);\n            }\n          }\n        }\n      } catch (err) {\n        logWarn(err);\n      }\n      if (corsCopy && inMode === \"next\") {\n        corsCopyPositionWatcher = watchForNodePosition(corsCopy, \"prev-sibling\");\n      }\n    }\n  }\n  function details(options) {\n    const rules = getRulesSync();\n    if (!rules) {\n      if (options.secondRound) {\n        logWarn(\"Detected dead-lock at details(), returning early to prevent it.\");\n        return null;\n      }\n      if (isLoadingRules || wasLoadingError) {\n        return null;\n      }\n      isLoadingRules = true;\n      loadingStart();\n      getRulesAsync().then(results => {\n        isLoadingRules = false;\n        loadingEnd();\n        if (results) {\n          update();\n        }\n      }).catch(err => {\n        logWarn(err);\n        isLoadingRules = false;\n        loadingEnd();\n      });\n      return null;\n    }\n    return {\n      rules\n    };\n  }\n  let forceRenderStyle = false;\n  function render(theme, ignoreImageAnalysis) {\n    const rules = getRulesSync();\n    if (!rules) {\n      return;\n    }\n    cancelAsyncOperations = false;\n    function removeCSSRulesFromSheet(sheet) {\n      if (!sheet) {\n        return;\n      }\n      for (let i = sheet.cssRules.length - 1; i >= 0; i--) {\n        sheet.deleteRule(i);\n      }\n    }\n    function prepareOverridesSheet() {\n      if (!syncStyle) {\n        createSyncStyle();\n      }\n      syncStylePositionWatcher && syncStylePositionWatcher.stop();\n      insertStyle();\n      if (syncStyle.sheet == null) {\n        syncStyle.textContent = \"\";\n      }\n      const sheet = syncStyle.sheet;\n      removeCSSRulesFromSheet(sheet);\n      if (syncStylePositionWatcher) {\n        syncStylePositionWatcher.run();\n      } else if (inMode === \"next\") {\n        syncStylePositionWatcher = watchForNodePosition(syncStyle, \"prev-sibling\", () => {\n          forceRenderStyle = true;\n          buildOverrides();\n        });\n      }\n      return syncStyle.sheet;\n    }\n    function buildOverrides() {\n      const force = forceRenderStyle;\n      forceRenderStyle = false;\n      sheetModifier.modifySheet({\n        prepareSheet: prepareOverridesSheet,\n        sourceCSSRules: rules,\n        theme,\n        ignoreImageAnalysis,\n        force,\n        isAsyncCancelled\n      });\n      isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;\n      if (sheetModifier.shouldRebuildStyle()) {\n        addReadyStateCompleteListener(() => update());\n      }\n    }\n    buildOverrides();\n  }\n  function getRulesOrError() {\n    try {\n      if (element.sheet == null) {\n        return [null, null];\n      }\n      return [element.sheet.cssRules, null];\n    } catch (err) {\n      return [null, err];\n    }\n  }\n  function isStillLoadingError(error) {\n    return error && error.message && error.message.includes(\"loading\");\n  }\n  function safeGetSheetRules() {\n    const [cssRules, err] = getRulesOrError();\n    if (err) {\n      logWarn(err);\n      return null;\n    }\n    return cssRules;\n  }\n  const sheetChangeWatcher = createSheetWatcher(element, safeGetSheetRules, update, isAsyncCancelled);\n  function pause() {\n    observer.disconnect();\n    cancelAsyncOperations = true;\n    corsCopyPositionWatcher && corsCopyPositionWatcher.stop();\n    syncStylePositionWatcher && syncStylePositionWatcher.stop();\n    sheetChangeWatcher.stop();\n  }\n  function destroy() {\n    pause();\n    removeNode(corsCopy);\n    removeNode(syncStyle);\n    loadingEnd();\n    if (rejectorsForLoadingLinks.has(loadingLinkId)) {\n      const reject = rejectorsForLoadingLinks.get(loadingLinkId);\n      rejectorsForLoadingLinks.delete(loadingLinkId);\n      reject && reject();\n    }\n  }\n  function watch() {\n    observer.observe(element, observerOptions);\n    if (element instanceof HTMLStyleElement) {\n      sheetChangeWatcher.start();\n    }\n  }\n  const maxMoveCount = 10;\n  let moveCount = 0;\n  function restore() {\n    if (!syncStyle) {\n      return;\n    }\n    moveCount++;\n    if (moveCount > maxMoveCount) {\n      logWarn(\"Style sheet was moved multiple times\", element);\n      return;\n    }\n    logWarn(\"Restore style\", syncStyle, element);\n    insertStyle();\n    corsCopyPositionWatcher && corsCopyPositionWatcher.skip();\n    syncStylePositionWatcher && syncStylePositionWatcher.skip();\n    if (!isOverrideEmpty) {\n      forceRenderStyle = true;\n      update();\n    }\n  }\n  return {\n    details,\n    render,\n    pause,\n    destroy,\n    watch,\n    restore\n  };\n}\nasync function linkLoading(link, loadingId) {\n  return new Promise((resolve, reject) => {\n    const cleanUp = () => {\n      link.removeEventListener(\"load\", onLoad);\n      link.removeEventListener(\"error\", onError);\n      rejectorsForLoadingLinks.delete(loadingId);\n    };\n    const onLoad = () => {\n      cleanUp();\n      resolve();\n    };\n    const onError = () => {\n      cleanUp();\n      reject(\"Linkelement \".concat(loadingId, \" couldn't be loaded. \").concat(link.href));\n    };\n    rejectorsForLoadingLinks.set(loadingId, () => {\n      cleanUp();\n      reject();\n    });\n    link.addEventListener(\"load\", onLoad, {\n      passive: true\n    });\n    link.addEventListener(\"error\", onError, {\n      passive: true\n    });\n    if (!link.href) {\n      onError();\n    }\n  });\n}\nfunction getCSSImportURL(importDeclaration) {\n  return getCSSURLValue(importDeclaration.substring(7).trim().replace(/;$/, \"\").replace(/screen$/, \"\"));\n}\nasync function loadText(url) {\n  if (url.startsWith(\"data:\")) {\n    return await (await fetch(url)).text();\n  }\n  const cache = readCSSFetchCache(url);\n  if (cache) {\n    return cache;\n  }\n  const parsedURL = new URL(url);\n  let text;\n  if (parsedURL.origin === location.origin) {\n    text = await loadAsText(url, \"text/css\", location.origin);\n  } else {\n    text = await bgFetch({\n      url,\n      responseType: \"text\",\n      mimeType: \"text/css\",\n      origin: location.origin\n    });\n  }\n  writeCSSFetchCache(url, text);\n  return text;\n}\nasync function replaceCSSImports(cssText, basePath) {\n  let cache = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Map();\n  cssText = removeCSSComments(cssText);\n  cssText = replaceCSSFontFace(cssText);\n  cssText = replaceCSSRelativeURLsWithAbsolute(cssText, basePath);\n  const importMatches = getMatchesWithOffsets(cssImportRegex, cssText);\n  let prev = null;\n  let shouldIgnoreImportsInBetween = false;\n  let diff = 0;\n  for (const match of importMatches) {\n    let importedCSS;\n    const prevImportEnd = prev ? prev.offset + prev.text.length : 0;\n    const nextImportStart = match.offset;\n    const openBraceIndex = cssText.indexOf(\"{\", prevImportEnd);\n    const closeBraceIndex = cssText.indexOf(\"}\", prevImportEnd);\n    if (shouldIgnoreImportsInBetween || openBraceIndex >= 0 && openBraceIndex < nextImportStart && closeBraceIndex >= 0 && closeBraceIndex < nextImportStart) {\n      shouldIgnoreImportsInBetween = true;\n      importedCSS = \"\";\n    } else {\n      const importURL = getCSSImportURL(match.text);\n      const absoluteURL = getAbsoluteURL(basePath, importURL);\n      if (cache.has(absoluteURL)) {\n        importedCSS = cache.get(absoluteURL);\n      } else {\n        try {\n          importedCSS = await loadText(absoluteURL);\n          cache.set(absoluteURL, importedCSS);\n          importedCSS = await replaceCSSImports(importedCSS, getCSSBaseBath(absoluteURL), cache);\n        } catch (err) {\n          logWarn(err);\n          importedCSS = \"\";\n        }\n      }\n    }\n    cssText = cssText.substring(0, match.offset + diff) + importedCSS + cssText.substring(match.offset + match.text.length + diff);\n    diff += importedCSS.length - match.text.length;\n    prev = match;\n  }\n  cssText = cssText.trim();\n  return cssText;\n}\nfunction createCORSCopy(cssText, inject) {\n  if (!cssText) {\n    return null;\n  }\n  const cors = document.createElement(\"style\");\n  cors.classList.add(\"darkreader\");\n  cors.classList.add(\"darkreader--cors\");\n  cors.media = \"screen\";\n  cors.textContent = cssText;\n  inject(cors);\n  cors.sheet.disabled = true;\n  corsStyleSet.add(cors);\n  return cors;\n}\nfunction injectProxy(enableStyleSheetsProxy, enableCustomElementRegistryProxy) {\n  document.dispatchEvent(new CustomEvent(\"__darkreader__inlineScriptsAllowed\"));\n  const cleaners = [];\n  function cleanUp() {\n    cleaners.forEach(clean => clean());\n    cleaners.splice(0);\n  }\n  function documentEventListener(type, listener, options) {\n    document.addEventListener(type, listener, options);\n    cleaners.push(() => document.removeEventListener(type, listener));\n  }\n  function disableConflictingPlugins() {\n    const disableWPDarkMode = () => {\n      var _window;\n      if ((_window = window) !== null && _window !== void 0 && (_window = _window.WPDarkMode) !== null && _window !== void 0 && _window.deactivate) {\n        window.WPDarkMode.deactivate();\n      }\n    };\n    disableWPDarkMode();\n  }\n  documentEventListener(\"__darkreader__cleanUp\", cleanUp);\n  documentEventListener(\"__darkreader__disableConflictingPlugins\", disableConflictingPlugins);\n  function overrideProperty(cls, prop, overrides) {\n    const proto = cls.prototype;\n    const oldDescriptor = Object.getOwnPropertyDescriptor(proto, prop);\n    if (!oldDescriptor) {\n      return;\n    }\n    const newDescriptor = _objectSpread({}, oldDescriptor);\n    Object.keys(overrides).forEach(key => {\n      const factory = overrides[key];\n      newDescriptor[key] = factory(oldDescriptor[key]);\n    });\n    Object.defineProperty(proto, prop, newDescriptor);\n    cleaners.push(() => Object.defineProperty(proto, prop, oldDescriptor));\n  }\n  function override(cls, prop, factory) {\n    overrideProperty(cls, prop, {\n      value: factory\n    });\n  }\n  function isDRElement(element) {\n    var _element$classList;\n    return element === null || element === void 0 || (_element$classList = element.classList) === null || _element$classList === void 0 ? void 0 : _element$classList.contains(\"darkreader\");\n  }\n  function isDRSheet(sheet) {\n    return isDRElement(sheet.ownerNode);\n  }\n  const updateSheetEvent = new CustomEvent(\"__darkreader__updateSheet\");\n  const adoptedSheetChangeEvent = new CustomEvent(\"__darkreader__adoptedStyleSheetChange\");\n  const shadowDomAttachingEvent = new CustomEvent(\"__darkreader__shadowDomAttaching\", {\n    bubbles: true\n  });\n  const adoptedSheetOwners = new WeakMap();\n  const adoptedDeclarationSheets = new WeakMap();\n  function onAdoptedSheetChange(sheet) {\n    const owners = adoptedSheetOwners.get(sheet);\n    owners === null || owners === void 0 || owners.forEach(node => {\n      if (node.isConnected) {\n        node.dispatchEvent(adoptedSheetChangeEvent);\n      } else {\n        owners.delete(node);\n      }\n    });\n  }\n  function reportSheetChange(sheet) {\n    if (sheet.ownerNode && !isDRSheet(sheet)) {\n      sheet.ownerNode.dispatchEvent(updateSheetEvent);\n    }\n    if (adoptedSheetOwners.has(sheet)) {\n      onAdoptedSheetChange(sheet);\n    }\n  }\n  function reportSheetChangeAsync(sheet, promise) {\n    const {\n      ownerNode\n    } = sheet;\n    if (ownerNode && !isDRSheet(sheet) && promise && promise instanceof Promise) {\n      promise.then(() => ownerNode.dispatchEvent(updateSheetEvent));\n    }\n    if (adoptedSheetOwners.has(sheet)) {\n      if (promise && promise instanceof Promise) {\n        promise.then(() => onAdoptedSheetChange(sheet));\n      }\n    }\n  }\n  override(CSSStyleSheet, \"addRule\", native => function (selector, style, index) {\n    native.call(this, selector, style, index);\n    reportSheetChange(this);\n    return -1;\n  });\n  override(CSSStyleSheet, \"insertRule\", native => function (rule, index) {\n    const returnValue = native.call(this, rule, index);\n    reportSheetChange(this);\n    return returnValue;\n  });\n  override(CSSStyleSheet, \"deleteRule\", native => function (index) {\n    native.call(this, index);\n    reportSheetChange(this);\n  });\n  override(CSSStyleSheet, \"removeRule\", native => function (index) {\n    native.call(this, index);\n    reportSheetChange(this);\n  });\n  override(CSSStyleSheet, \"replace\", native => function (cssText) {\n    const returnValue = native.call(this, cssText);\n    reportSheetChangeAsync(this, returnValue);\n    return returnValue;\n  });\n  override(CSSStyleSheet, \"replaceSync\", native => function (cssText) {\n    native.call(this, cssText);\n    reportSheetChange(this);\n  });\n  override(Element, \"attachShadow\", native => function (options) {\n    this.dispatchEvent(shadowDomAttachingEvent);\n    return native.call(this, options);\n  });\n  const shouldWrapHTMLElement = location.hostname === \"baidu.com\" || location.hostname.endsWith(\".baidu.com\");\n  if (shouldWrapHTMLElement) {\n    override(Element, \"getElementsByTagName\", native => function (tagName) {\n      if (tagName !== \"style\") {\n        return native.call(this, tagName);\n      }\n      const getCurrentElementValue = () => {\n        const elements = native.call(this, tagName);\n        return Object.setPrototypeOf([...elements].filter(element => element && !isDRElement(element)), NodeList.prototype);\n      };\n      let elements = getCurrentElementValue();\n      const nodeListBehavior = {\n        get: function (_, property) {\n          return getCurrentElementValue()[Number(property) || property];\n        }\n      };\n      elements = new Proxy(elements, nodeListBehavior);\n      return elements;\n    });\n  }\n  const shouldProxyChildNodes = [\"brilliant.org\", \"www.vy.no\"].includes(location.hostname);\n  if (shouldProxyChildNodes) {\n    overrideProperty(Node, \"childNodes\", {\n      get: native => function () {\n        const childNodes = native.call(this);\n        return Object.setPrototypeOf([...childNodes].filter(element => {\n          return !isDRElement(element);\n        }), NodeList.prototype);\n      }\n    });\n  }\n  function resolveCustomElement(tag) {\n    customElements.whenDefined(tag).then(() => {\n      document.dispatchEvent(new CustomEvent(\"__darkreader__isDefined\", {\n        detail: {\n          tag\n        }\n      }));\n    });\n  }\n  documentEventListener(\"__darkreader__addUndefinedResolver\", e => resolveCustomElement(e.detail.tag));\n  if (enableCustomElementRegistryProxy) {\n    override(CustomElementRegistry, \"define\", native => function (name, constructor, options) {\n      resolveCustomElement(name);\n      native.call(this, name, constructor, options);\n    });\n  }\n  let blobURLAllowed = null;\n  function checkBlobURLSupport() {\n    if (blobURLAllowed != null) {\n      document.dispatchEvent(new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\n        detail: {\n          blobURLAllowed\n        }\n      }));\n      return;\n    }\n    const svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1\" height=\"1\"><rect width=\"1\" height=\"1\" fill=\"transparent\"/></svg>';\n    const bytes = new Uint8Array(svg.length);\n    for (let i = 0; i < svg.length; i++) {\n      bytes[i] = svg.charCodeAt(i);\n    }\n    const blob = new Blob([bytes], {\n      type: \"image/svg+xml\"\n    });\n    const objectURL = URL.createObjectURL(blob);\n    const image = new Image();\n    image.onload = () => {\n      blobURLAllowed = true;\n      sendBlobURLCheckResponse();\n    };\n    image.onerror = () => {\n      blobURLAllowed = false;\n      sendBlobURLCheckResponse();\n    };\n    image.src = objectURL;\n  }\n  function sendBlobURLCheckResponse() {\n    document.dispatchEvent(new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\n      detail: {\n        blobURLAllowed\n      }\n    }));\n  }\n  documentEventListener(\"__darkreader__blobURLCheckRequest\", checkBlobURLSupport);\n  if (enableStyleSheetsProxy) {\n    overrideProperty(Document, \"styleSheets\", {\n      get: native => function () {\n        const getCurrentValue = () => {\n          const docSheets = native.call(this);\n          const filteredSheets = [...docSheets].filter(styleSheet => styleSheet.ownerNode && !isDRSheet(styleSheet));\n          filteredSheets.item = item => filteredSheets[item];\n          return Object.setPrototypeOf(filteredSheets, StyleSheetList.prototype);\n        };\n        let elements = getCurrentValue();\n        const styleSheetListBehavior = {\n          get: function (_, property) {\n            return getCurrentValue()[property];\n          }\n        };\n        elements = new Proxy(elements, styleSheetListBehavior);\n        return elements;\n      }\n    });\n  }\n  {\n    const adoptedSheetsSourceProxies = new WeakMap();\n    const adoptedSheetsProxySources = new WeakMap();\n    const adoptedSheetsChangeEvent = new CustomEvent(\"__darkreader__adoptedStyleSheetsChange\");\n    const adoptedSheetOverrideCache = new WeakSet();\n    const adoptedSheetsSnapshots = new WeakMap();\n    const isDRAdoptedSheetOverride = sheet => {\n      if (!sheet || !sheet.cssRules) {\n        return false;\n      }\n      if (adoptedSheetOverrideCache.has(sheet)) {\n        return true;\n      }\n      if (sheet.cssRules.length > 0 && sheet.cssRules[0].cssText.startsWith(\"#__darkreader__adoptedOverride\")) {\n        adoptedSheetOverrideCache.add(sheet);\n        return true;\n      }\n      return false;\n    };\n    const areArraysEqual = (a, b) => {\n      return a.length === b.length && a.every((x, i) => x === b[i]);\n    };\n    const onAdoptedSheetsChange = node => {\n      const prev = adoptedSheetsSnapshots.get(node);\n      const curr = (node.adoptedStyleSheets || []).filter(s => !isDRAdoptedSheetOverride(s));\n      adoptedSheetsSnapshots.set(node, curr);\n      if (!prev || !areArraysEqual(prev, curr)) {\n        curr.forEach(sheet => {\n          if (!adoptedSheetOwners.has(sheet)) {\n            adoptedSheetOwners.set(sheet, new Set());\n          }\n          adoptedSheetOwners.get(sheet).add(node);\n          for (const rule of sheet.cssRules) {\n            const declaration = rule.style;\n            if (declaration) {\n              adoptedDeclarationSheets.set(declaration, sheet);\n            }\n          }\n        });\n        node.dispatchEvent(adoptedSheetsChangeEvent);\n      }\n    };\n    const proxyAdoptedSheetsArray = (node, source) => {\n      if (adoptedSheetsProxySources.has(source)) {\n        return source;\n      }\n      if (adoptedSheetsSourceProxies.has(source)) {\n        return adoptedSheetsSourceProxies.get(source);\n      }\n      const proxy = new Proxy(source, {\n        deleteProperty(target, property) {\n          delete target[property];\n          return true;\n        },\n        set(target, property, value) {\n          target[property] = value;\n          if (property === \"length\") {\n            onAdoptedSheetsChange(node);\n          }\n          return true;\n        }\n      });\n      adoptedSheetsSourceProxies.set(source, proxy);\n      adoptedSheetsProxySources.set(proxy, source);\n      return proxy;\n    };\n    [Document, ShadowRoot].forEach(ctor => {\n      overrideProperty(ctor, \"adoptedStyleSheets\", {\n        get: native => function () {\n          const source = native.call(this);\n          return proxyAdoptedSheetsArray(this, source);\n        },\n        set: native => function (source) {\n          if (adoptedSheetsProxySources.has(source)) {\n            source = adoptedSheetsProxySources.get(source);\n          }\n          native.call(this, source);\n          onAdoptedSheetsChange(this);\n        }\n      });\n    });\n    const adoptedDeclarationChangeEvent = new CustomEvent(\"__darkreader__adoptedStyleDeclarationChange\");\n    [\"setProperty\", \"removeProperty\"].forEach(key => {\n      override(CSSStyleDeclaration, key, native => {\n        return function () {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n          const returnValue = native.apply(this, args);\n          const sheet = adoptedDeclarationSheets.get(this);\n          if (sheet) {\n            const owners = adoptedSheetOwners.get(sheet);\n            if (owners) {\n              owners.forEach(node => {\n                node.dispatchEvent(adoptedDeclarationChangeEvent);\n              });\n            }\n          }\n          return returnValue;\n        };\n      });\n    });\n  }\n}\nconst definedCustomElements = new Set();\nconst undefinedGroups = new Map();\nlet elementsDefinitionCallback;\nfunction isCustomElement(element) {\n  if (element.tagName.includes(\"-\") || element.getAttribute(\"is\")) {\n    return true;\n  }\n  return false;\n}\nfunction recordUndefinedElement(element) {\n  let tag = element.tagName.toLowerCase();\n  if (!tag.includes(\"-\")) {\n    const extendedTag = element.getAttribute(\"is\");\n    if (extendedTag) {\n      tag = extendedTag;\n    } else {\n      return;\n    }\n  }\n  if (!undefinedGroups.has(tag)) {\n    undefinedGroups.set(tag, new Set());\n    customElementsWhenDefined(tag).then(() => {\n      if (elementsDefinitionCallback) {\n        const elements = undefinedGroups.get(tag);\n        ASSERT(\"recordUndefinedElement() undefined groups should not be empty\", elements);\n        undefinedGroups.delete(tag);\n        elementsDefinitionCallback(Array.from(elements));\n      }\n    });\n  }\n  undefinedGroups.get(tag).add(element);\n}\nfunction collectUndefinedElements(root) {\n  if (!isDefinedSelectorSupported) {\n    return;\n  }\n  forEach(root.querySelectorAll(\":not(:defined)\"), recordUndefinedElement);\n}\nlet canOptimizeUsingProxy = false;\ndocument.addEventListener(\"__darkreader__inlineScriptsAllowed\", () => {\n  canOptimizeUsingProxy = true;\n}, {\n  once: true,\n  passive: true\n});\nconst unhandledShadowHosts = new Set();\ndocument.addEventListener(\"__darkreader__shadowDomAttaching\", e => {\n  const host = e.target;\n  if (unhandledShadowHosts.size === 0) {\n    queueMicrotask(() => {\n      var _elementsDefinitionCa;\n      const hosts = [...unhandledShadowHosts].filter(el => el.shadowRoot);\n      (_elementsDefinitionCa = elementsDefinitionCallback) === null || _elementsDefinitionCa === void 0 || _elementsDefinitionCa(hosts);\n      unhandledShadowHosts.clear();\n    });\n  }\n  unhandledShadowHosts.add(host);\n});\nconst resolvers = new Map();\nfunction handleIsDefined(e) {\n  canOptimizeUsingProxy = true;\n  const tag = e.detail.tag;\n  ASSERT(\"handleIsDefined() expects lower-case node names\", () => tag.toLowerCase() === tag);\n  definedCustomElements.add(tag);\n  if (resolvers.has(tag)) {\n    const r = resolvers.get(tag);\n    resolvers.delete(tag);\n    r.forEach(r => r());\n  }\n}\nasync function customElementsWhenDefined(tag) {\n  ASSERT(\"customElementsWhenDefined() expects lower-case node names\", () => tag.toLowerCase() === tag);\n  if (definedCustomElements.has(tag)) {\n    return;\n  }\n  return new Promise(resolve => {\n    if (window.customElements && typeof customElements.whenDefined === \"function\") {\n      customElements.whenDefined(tag).then(() => resolve());\n    } else if (canOptimizeUsingProxy) {\n      if (resolvers.has(tag)) {\n        resolvers.get(tag).push(resolve);\n      } else {\n        resolvers.set(tag, [resolve]);\n      }\n      document.dispatchEvent(new CustomEvent(\"__darkreader__addUndefinedResolver\", {\n        detail: {\n          tag\n        }\n      }));\n    } else {\n      const checkIfDefined = () => {\n        const elements = undefinedGroups.get(tag);\n        if (elements && elements.size > 0) {\n          if (elements.values().next().value.matches(\":defined\")) {\n            resolve();\n          } else {\n            requestAnimationFrame(checkIfDefined);\n          }\n        }\n      };\n      requestAnimationFrame(checkIfDefined);\n    }\n  });\n}\nfunction watchWhenCustomElementsDefined(callback) {\n  elementsDefinitionCallback = callback;\n}\nfunction unsubscribeFromDefineCustomElements() {\n  elementsDefinitionCallback = null;\n  undefinedGroups.clear();\n  document.removeEventListener(\"__darkreader__isDefined\", handleIsDefined);\n}\nconst observers = [];\nlet observedRoots;\nlet handledShadowHosts;\nfunction watchForStylePositions(currentStyles, update, shadowRootDiscovered) {\n  stopWatchingForStylePositions();\n  const prevStylesByRoot = new WeakMap();\n  const getPrevStyles = root => {\n    if (!prevStylesByRoot.has(root)) {\n      prevStylesByRoot.set(root, new Set());\n    }\n    return prevStylesByRoot.get(root);\n  };\n  currentStyles.forEach(node => {\n    let root = node;\n    while (root = root.parentNode) {\n      if (root === document || root.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        const prevStyles = getPrevStyles(root);\n        prevStyles.add(node);\n        break;\n      }\n    }\n  });\n  const prevStyleSiblings = new WeakMap();\n  const nextStyleSiblings = new WeakMap();\n  function saveStylePosition(style) {\n    prevStyleSiblings.set(style, style.previousElementSibling);\n    nextStyleSiblings.set(style, style.nextElementSibling);\n  }\n  function forgetStylePosition(style) {\n    prevStyleSiblings.delete(style);\n    nextStyleSiblings.delete(style);\n  }\n  function didStylePositionChange(style) {\n    return style.previousElementSibling !== prevStyleSiblings.get(style) || style.nextElementSibling !== nextStyleSiblings.get(style);\n  }\n  currentStyles.forEach(saveStylePosition);\n  function handleStyleOperations(root, operations) {\n    const {\n      createdStyles,\n      removedStyles,\n      movedStyles\n    } = operations;\n    createdStyles.forEach(s => saveStylePosition(s));\n    movedStyles.forEach(s => saveStylePosition(s));\n    removedStyles.forEach(s => forgetStylePosition(s));\n    const prevStyles = getPrevStyles(root);\n    createdStyles.forEach(s => prevStyles.add(s));\n    removedStyles.forEach(s => prevStyles.delete(s));\n    if (createdStyles.size + removedStyles.size + movedStyles.size > 0) {\n      update({\n        created: Array.from(createdStyles),\n        removed: Array.from(removedStyles),\n        moved: Array.from(movedStyles),\n        updated: []\n      });\n    }\n  }\n  function handleMinorTreeMutations(root, _ref29) {\n    let {\n      additions,\n      moves,\n      deletions\n    } = _ref29;\n    const createdStyles = new Set();\n    const removedStyles = new Set();\n    const movedStyles = new Set();\n    additions.forEach(node => getManageableStyles(node).forEach(style => createdStyles.add(style)));\n    deletions.forEach(node => getManageableStyles(node).forEach(style => removedStyles.add(style)));\n    moves.forEach(node => getManageableStyles(node).forEach(style => movedStyles.add(style)));\n    handleStyleOperations(root, {\n      createdStyles,\n      removedStyles,\n      movedStyles\n    });\n    additions.forEach(n => {\n      deepObserve(n);\n      collectUndefinedElements(n);\n    });\n    additions.forEach(node => isCustomElement(node) && recordUndefinedElement(node));\n    additions.forEach(node => checkImageSelectors(node));\n  }\n  function handleHugeTreeMutations(root) {\n    const styles = new Set(getManageableStyles(root));\n    const createdStyles = new Set();\n    const removedStyles = new Set();\n    const movedStyles = new Set();\n    const prevStyles = getPrevStyles(root);\n    styles.forEach(s => {\n      if (!prevStyles.has(s)) {\n        createdStyles.add(s);\n      }\n    });\n    prevStyles.forEach(s => {\n      if (!styles.has(s)) {\n        removedStyles.add(s);\n      }\n    });\n    styles.forEach(s => {\n      if (!createdStyles.has(s) && !removedStyles.has(s) && didStylePositionChange(s)) {\n        movedStyles.add(s);\n      }\n    });\n    handleStyleOperations(root, {\n      createdStyles,\n      removedStyles,\n      movedStyles\n    });\n    deepObserve(root);\n    collectUndefinedElements(root);\n    checkImageSelectors(root);\n  }\n  function handleAttributeMutations(mutations) {\n    const updatedStyles = new Set();\n    const removedStyles = new Set();\n    mutations.forEach(m => {\n      const {\n        target\n      } = m;\n      if (target.isConnected) {\n        if (shouldManageStyle(target)) {\n          updatedStyles.add(target);\n        } else if (target instanceof HTMLLinkElement && target.disabled) {\n          removedStyles.add(target);\n        }\n      }\n    });\n    if (updatedStyles.size + removedStyles.size > 0) {\n      update({\n        updated: Array.from(updatedStyles),\n        created: [],\n        removed: Array.from(removedStyles),\n        moved: []\n      });\n    }\n  }\n  function observe(root) {\n    if (observedRoots.has(root)) {\n      return;\n    }\n    const treeObserver = createOptimizedTreeObserver(root, {\n      onMinorMutations: handleMinorTreeMutations,\n      onHugeMutations: handleHugeTreeMutations\n    });\n    const attrObserver = new MutationObserver(handleAttributeMutations);\n    attrObserver.observe(root, {\n      attributeFilter: [\"rel\", \"disabled\", \"media\", \"href\"],\n      subtree: true\n    });\n    observers.push(treeObserver, attrObserver);\n    observedRoots.add(root);\n  }\n  function subscribeForShadowRootChanges(node) {\n    const {\n      shadowRoot\n    } = node;\n    if (shadowRoot == null || observedRoots.has(shadowRoot)) {\n      return;\n    }\n    observe(shadowRoot);\n    shadowRootDiscovered(shadowRoot);\n  }\n  function deepObserve(node) {\n    iterateShadowHosts(node, subscribeForShadowRootChanges);\n  }\n  observe(document);\n  deepObserve(document.documentElement);\n  watchWhenCustomElementsDefined(hosts => {\n    hosts = hosts.filter(node => !handledShadowHosts.has(node));\n    const newStyles = [];\n    hosts.forEach(host => push(newStyles, getManageableStyles(host.shadowRoot)));\n    update({\n      created: newStyles,\n      updated: [],\n      removed: [],\n      moved: []\n    });\n    hosts.forEach(host => {\n      const {\n        shadowRoot\n      } = host;\n      if (shadowRoot == null) {\n        return;\n      }\n      subscribeForShadowRootChanges(host);\n      deepObserve(shadowRoot);\n      collectUndefinedElements(shadowRoot);\n    });\n    hosts.forEach(node => handledShadowHosts.add(node));\n  });\n  document.addEventListener(\"__darkreader__isDefined\", handleIsDefined);\n  collectUndefinedElements(document);\n}\nfunction resetObservers() {\n  observers.forEach(o => o.disconnect());\n  observers.splice(0, observers.length);\n  observedRoots = new WeakSet();\n  handledShadowHosts = new WeakSet();\n}\nfunction stopWatchingForStylePositions() {\n  resetObservers();\n  unsubscribeFromDefineCustomElements();\n}\nfunction watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {\n  watchForStylePositions(currentStyles, update, shadowRootDiscovered);\n}\nfunction stopWatchingForStyleChanges() {\n  stopWatchingForStylePositions();\n}\nconst INSTANCE_ID = generateUID();\nconst styleManagers = new Map();\nconst adoptedStyleManagers = [];\nconst adoptedStyleFallbacks = new Map();\nconst adoptedStyleChangeTokens = new WeakMap();\nlet theme = null;\nlet fixes = null;\nlet isIFrame$1 = null;\nlet ignoredImageAnalysisSelectors = [];\nlet ignoredInlineSelectors = [];\nlet staticStyleMap = new WeakMap();\nfunction createOrUpdateStyle(className) {\n  let root = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.head || document;\n  let element = root.querySelector(\".\".concat(className));\n  if (!staticStyleMap.has(root)) {\n    staticStyleMap.set(root, new Map());\n  }\n  const classMap = staticStyleMap.get(root);\n  if (element) {\n    classMap.set(className, element);\n  } else if (classMap.has(className)) {\n    element = classMap.get(className);\n  } else {\n    element = document.createElement(\"style\");\n    element.classList.add(\"darkreader\");\n    element.classList.add(className);\n    element.media = \"screen\";\n    element.textContent = \"\";\n    classMap.set(className, element);\n  }\n  return element;\n}\nfunction createOrUpdateScript(className) {\n  let root = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.head || document;\n  let element = root.querySelector(\".\".concat(className));\n  if (!element) {\n    element = document.createElement(\"script\");\n    element.classList.add(\"darkreader\");\n    element.classList.add(className);\n  }\n  return element;\n}\nconst nodePositionWatchers = new Map();\nfunction setupNodePositionWatcher(node, alias, callback) {\n  nodePositionWatchers.has(alias) && nodePositionWatchers.get(alias).stop();\n  nodePositionWatchers.set(alias, watchForNodePosition(node, \"head\", callback));\n}\nfunction stopStylePositionWatchers() {\n  forEach(nodePositionWatchers.values(), watcher => watcher.stop());\n  nodePositionWatchers.clear();\n}\nfunction injectStaticStyle(style, prevNode, watchAlias, callback) {\n  const mode = getStyleInjectionMode();\n  if (mode === \"next\") {\n    document.head.insertBefore(style, prevNode ? prevNode.nextSibling : document.head.firstChild);\n    setupNodePositionWatcher(style, watchAlias, callback);\n  } else if (mode === \"away\") {\n    injectStyleAway(style);\n  }\n}\nfunction createStaticStyleOverrides() {\n  var _theme, _selectionColors$back, _selectionColors$fore;\n  const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\", document);\n  fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\n    strict: true\n  });\n  injectStaticStyle(fallbackStyle, null, \"fallback\");\n  const userAgentStyle = createOrUpdateStyle(\"darkreader--user-agent\");\n  userAgentStyle.textContent = getModifiedUserAgentStyle(theme, isIFrame$1, theme.styleSystemControls);\n  injectStaticStyle(userAgentStyle, fallbackStyle, \"user-agent\");\n  const textStyle = createOrUpdateStyle(\"darkreader--text\");\n  if (theme.useFont || theme.textStroke > 0) {\n    textStyle.textContent = createTextStyle(theme);\n  } else {\n    textStyle.textContent = \"\";\n  }\n  injectStaticStyle(textStyle, userAgentStyle, \"text\");\n  const invertStyle = createOrUpdateStyle(\"darkreader--invert\");\n  if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\n    invertStyle.textContent = [\"\".concat(fixes.invert.join(\", \"), \" {\"), \"    filter: \".concat(getCSSFilterValue(_objectSpread(_objectSpread({}, theme), {}, {\n      contrast: theme.mode === 0 ? theme.contrast : clamp(theme.contrast - 10, 0, 100)\n    })), \" !important;\"), \"}\"].join(\"\\n\");\n  } else {\n    invertStyle.textContent = \"\";\n  }\n  injectStaticStyle(invertStyle, textStyle, \"invert\");\n  const inlineStyle = createOrUpdateStyle(\"darkreader--inline\");\n  inlineStyle.textContent = getInlineOverrideStyle();\n  injectStaticStyle(inlineStyle, invertStyle, \"inline\");\n  const variableStyle = createOrUpdateStyle(\"darkreader--variables\");\n  const selectionColors = (_theme = theme) !== null && _theme !== void 0 && _theme.selectionColor ? getSelectionColor(theme) : null;\n  const neutralBackgroundColor = modifyBackgroundColor(parseColorWithCache(\"#ffffff\"), theme);\n  const neutralTextColor = modifyForegroundColor(parseColorWithCache(\"#000000\"), theme);\n  variableStyle.textContent = [\":root {\", \"   --darkreader-neutral-background: \".concat(neutralBackgroundColor, \";\"), \"   --darkreader-neutral-text: \".concat(neutralTextColor, \";\"), \"   --darkreader-selection-background: \".concat((_selectionColors$back = selectionColors === null || selectionColors === void 0 ? void 0 : selectionColors.backgroundColorSelection) !== null && _selectionColors$back !== void 0 ? _selectionColors$back : \"initial\", \";\"), \"   --darkreader-selection-text: \".concat((_selectionColors$fore = selectionColors === null || selectionColors === void 0 ? void 0 : selectionColors.foregroundColorSelection) !== null && _selectionColors$fore !== void 0 ? _selectionColors$fore : \"initial\", \";\"), \"}\"].join(\"\\n\");\n  injectStaticStyle(variableStyle, inlineStyle, \"variables\", () => registerVariablesSheet(variableStyle.sheet));\n  registerVariablesSheet(variableStyle.sheet);\n  const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n  injectStaticStyle(rootVarsStyle, variableStyle, \"root-vars\");\n  const enableStyleSheetsProxy = !(fixes && fixes.disableStyleSheetsProxy);\n  const enableCustomElementRegistryProxy = !(fixes && fixes.disableCustomElementRegistryProxy);\n  document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\n  {\n    const proxyScript = createOrUpdateScript(\"darkreader--proxy\");\n    proxyScript.append(\"(\".concat(injectProxy, \")(\").concat(enableStyleSheetsProxy, \", \").concat(enableCustomElementRegistryProxy, \")\"));\n    document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);\n    proxyScript.remove();\n  }\n  const overrideStyle = createOrUpdateStyle(\"darkreader--override\");\n  overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\n  injectStaticStyle(overrideStyle, document.head.lastChild, \"override\");\n}\nconst shadowRootsWithOverrides = new Set();\nfunction createShadowStaticStyleOverridesInner(root) {\n  const inlineStyle = createOrUpdateStyle(\"darkreader--inline\", root);\n  inlineStyle.textContent = getInlineOverrideStyle();\n  root.insertBefore(inlineStyle, root.firstChild);\n  const overrideStyle = createOrUpdateStyle(\"darkreader--override\", root);\n  overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\n  root.insertBefore(overrideStyle, inlineStyle.nextSibling);\n  const invertStyle = createOrUpdateStyle(\"darkreader--invert\", root);\n  if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\n    invertStyle.textContent = [\"\".concat(fixes.invert.join(\", \"), \" {\"), \"    filter: \".concat(getCSSFilterValue(_objectSpread(_objectSpread({}, theme), {}, {\n      contrast: theme.mode === 0 ? theme.contrast : clamp(theme.contrast - 10, 0, 100)\n    })), \" !important;\"), \"}\"].join(\"\\n\");\n  } else {\n    invertStyle.textContent = \"\";\n  }\n  root.insertBefore(invertStyle, overrideStyle.nextSibling);\n  shadowRootsWithOverrides.add(root);\n}\nfunction delayedCreateShadowStaticStyleOverrides(root) {\n  const observer = new MutationObserver((mutations, observer) => {\n    observer.disconnect();\n    for (const {\n      type,\n      removedNodes\n    } of mutations) {\n      if (type === \"childList\") {\n        for (const {\n          nodeName,\n          className\n        } of removedNodes) {\n          if (nodeName === \"STYLE\" && [\"darkreader darkreader--inline\", \"darkreader darkreader--override\", \"darkreader darkreader--invert\"].includes(className)) {\n            createShadowStaticStyleOverridesInner(root);\n            return;\n          }\n        }\n      }\n    }\n  });\n  observer.observe(root, {\n    childList: true\n  });\n}\nfunction createShadowStaticStyleOverrides(root) {\n  const delayed = root.firstChild === null;\n  createShadowStaticStyleOverridesInner(root);\n  if (delayed) {\n    delayedCreateShadowStaticStyleOverrides(root);\n  }\n}\nfunction replaceCSSTemplates($cssText) {\n  return $cssText.replace(/\\${(.+?)}/g, (_, $color) => {\n    const color = parseColorWithCache($color);\n    if (color) {\n      const lightness = getSRGBLightness(color.r, color.g, color.b);\n      if (lightness > 0.5) {\n        return modifyBackgroundColor(color, theme);\n      }\n      return modifyForegroundColor(color, theme);\n    }\n    logWarn(\"Couldn't parse CSSTemplate's color.\");\n    return $color;\n  });\n}\nfunction cleanFallbackStyle() {\n  var _staticStyleMap$get, _staticStyleMap$get2;\n  const fallback = ((_staticStyleMap$get = staticStyleMap.get(document.head)) === null || _staticStyleMap$get === void 0 ? void 0 : _staticStyleMap$get.get(\"darkreader--fallback\")) || ((_staticStyleMap$get2 = staticStyleMap.get(document)) === null || _staticStyleMap$get2 === void 0 ? void 0 : _staticStyleMap$get2.get(\"darkreader--fallback\")) || document.querySelector(\".darkreader--fallback\");\n  if (fallback) {\n    fallback.textContent = \"\";\n  }\n}\nfunction createDynamicStyleOverrides() {\n  cancelRendering();\n  const allStyles = getManageableStyles(document);\n  const newManagers = allStyles.filter(style => !styleManagers.has(style)).map(style => createManager(style));\n  newManagers.map(manager => manager.details({\n    secondRound: false\n  })).filter(detail => detail && detail.rules.length > 0).forEach(detail => {\n    variablesStore.addRulesForMatching(detail.rules);\n  });\n  variablesStore.matchVariablesAndDependents();\n  variablesStore.setOnRootVariableChange(() => {\n    const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n    variablesStore.putRootVars(rootVarsStyle, theme);\n  });\n  const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n  variablesStore.putRootVars(rootVarsStyle, theme);\n  styleManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n  if (loadingStyles.size === 0) {\n    cleanFallbackStyle();\n  }\n  newManagers.forEach(manager => manager.watch());\n  const inlineStyleElements = toArray(document.querySelectorAll(INLINE_STYLE_SELECTOR));\n  iterateShadowHosts(document.documentElement, host => {\n    createShadowStaticStyleOverrides(host.shadowRoot);\n    const elements = host.shadowRoot.querySelectorAll(INLINE_STYLE_SELECTOR);\n    if (elements.length > 0) {\n      push(inlineStyleElements, elements);\n    }\n  });\n  inlineStyleElements.forEach(el => overrideInlineStyle(el, theme, ignoredInlineSelectors, ignoredImageAnalysisSelectors));\n  handleAdoptedStyleSheets(document);\n  variablesStore.matchVariablesAndDependents();\n  if (isFirefox) {\n    const onAdoptedCssChange = e => {\n      const {\n        sheets\n      } = e.detail;\n      if (!Array.isArray(sheets) || sheets.length === 0) {\n        return;\n      }\n      sheets.forEach(_ref30 => {\n        let {\n          sheet\n        } = _ref30;\n        const {\n          cssRules\n        } = sheet;\n        variablesStore.addRulesForMatching(cssRules);\n      });\n      variablesStore.matchVariablesAndDependents();\n      const response = [];\n      sheets.forEach(_ref31 => {\n        let {\n          sheetId,\n          sheet\n        } = _ref31;\n        const fallback = getAdoptedStyleSheetFallback(sheet);\n        const cssRules = sheet.cssRules;\n        fallback.render({\n          theme: theme,\n          ignoreImageAnalysis: ignoredImageAnalysisSelectors,\n          cssRules\n        });\n        const commands = fallback.commands();\n        response.push({\n          sheetId,\n          commands\n        });\n      });\n      requestAnimationFrameOnce(getAdoptedStyleChangeToken(sheets[0].sheet), () => {\n        document.dispatchEvent(new CustomEvent(\"__darkreader__adoptedStyleSheetCommands\", {\n          detail: JSON.stringify(response)\n        }));\n      });\n    };\n    document.addEventListener(\"__darkreader__adoptedStyleSheetsChange\", onAdoptedCssChange);\n    cleaners.push(() => document.removeEventListener(\"__darkreader__adoptedStyleSheetsChange\", onAdoptedCssChange));\n    document.dispatchEvent(new CustomEvent(\"__darkreader__startAdoptedStyleSheetsWatcher\"));\n  }\n}\nlet loadingStylesCounter = 0;\nconst loadingStyles = new Set();\nfunction createManager(element) {\n  const loadingStyleId = ++loadingStylesCounter;\n  function loadingStart() {\n    if (!isDOMReady() || !documentIsVisible()) {\n      loadingStyles.add(loadingStyleId);\n      logInfo(\"Current amount of styles loading: \".concat(loadingStyles.size));\n      const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\n      if (!fallbackStyle.textContent) {\n        fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\n          strict: false\n        });\n      }\n    }\n  }\n  function loadingEnd() {\n    loadingStyles.delete(loadingStyleId);\n    logInfo(\"Removed loadingStyle \".concat(loadingStyleId, \", now awaiting: \").concat(loadingStyles.size));\n    if (loadingStyles.size === 0 && isDOMReady()) {\n      cleanFallbackStyle();\n    }\n  }\n  function update() {\n    const details = manager.details({\n      secondRound: true\n    });\n    if (!details) {\n      return;\n    }\n    variablesStore.addRulesForMatching(details.rules);\n    variablesStore.matchVariablesAndDependents();\n    manager.render(theme, ignoredImageAnalysisSelectors);\n  }\n  const manager = manageStyle(element, {\n    update,\n    loadingStart,\n    loadingEnd\n  });\n  styleManagers.set(element, manager);\n  return manager;\n}\nfunction removeManager(element) {\n  const manager = styleManagers.get(element);\n  if (manager) {\n    manager.destroy();\n    styleManagers.delete(element);\n  }\n}\nconst throttledRenderAllStyles = throttle(callback => {\n  styleManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n  adoptedStyleManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n  callback && callback();\n});\nconst cancelRendering = function () {\n  throttledRenderAllStyles.cancel();\n};\nfunction onDOMReady() {\n  if (loadingStyles.size === 0) {\n    cleanFallbackStyle();\n    return;\n  }\n  logWarn(\"DOM is ready, but still have styles being loaded.\", loadingStyles);\n}\nfunction runDynamicStyle() {\n  createDynamicStyleOverrides();\n  watchForUpdates();\n}\nfunction createThemeAndWatchForUpdates() {\n  createStaticStyleOverrides();\n  if (!documentIsVisible() && !theme.immediateModify) {\n    setDocumentVisibilityListener(runDynamicStyle);\n  } else {\n    runDynamicStyle();\n  }\n  changeMetaThemeColorWhenAvailable(theme);\n}\nfunction handleAdoptedStyleSheets(node) {\n  if (isFirefox) {\n    return;\n  }\n  if (canHaveAdoptedStyleSheets(node)) {\n    node.adoptedStyleSheets.forEach(s => {\n      variablesStore.addRulesForMatching(s.cssRules);\n    });\n    const newManger = createAdoptedStyleSheetOverride(node);\n    adoptedStyleManagers.push(newManger);\n    newManger.render(theme, ignoredImageAnalysisSelectors);\n    newManger.watch(sheets => {\n      sheets.forEach(s => {\n        variablesStore.addRulesForMatching(s.cssRules);\n      });\n      variablesStore.matchVariablesAndDependents();\n      newManger.render(theme, ignoredImageAnalysisSelectors);\n    });\n  }\n}\nfunction getAdoptedStyleChangeToken(sheet) {\n  if (adoptedStyleChangeTokens.has(sheet)) {\n    return adoptedStyleChangeTokens.get(sheet);\n  }\n  const token = Symbol();\n  adoptedStyleChangeTokens.set(sheet, token);\n  return token;\n}\nfunction getAdoptedStyleSheetFallback(sheet) {\n  let fallback = adoptedStyleFallbacks.get(sheet);\n  if (!fallback) {\n    fallback = createAdoptedStyleSheetFallback();\n    adoptedStyleFallbacks.set(sheet, fallback);\n  }\n  return fallback;\n}\nfunction watchForUpdates() {\n  const managedStyles = Array.from(styleManagers.keys());\n  watchForStyleChanges(managedStyles, _ref32 => {\n    let {\n      created,\n      updated,\n      removed,\n      moved\n    } = _ref32;\n    const stylesToRemove = removed;\n    const stylesToManage = created.concat(updated).concat(moved).filter(style => !styleManagers.has(style));\n    const stylesToRestore = moved.filter(style => styleManagers.has(style));\n    stylesToRemove.forEach(style => removeManager(style));\n    const newManagers = stylesToManage.map(style => createManager(style));\n    newManagers.map(manager => manager.details({\n      secondRound: false\n    })).filter(detail => detail && detail.rules.length > 0).forEach(detail => {\n      variablesStore.addRulesForMatching(detail.rules);\n    });\n    variablesStore.matchVariablesAndDependents();\n    newManagers.forEach(manager => manager.render(theme, ignoredImageAnalysisSelectors));\n    newManagers.forEach(manager => manager.watch());\n    stylesToRestore.forEach(style => styleManagers.get(style).restore());\n  }, shadowRoot => {\n    createShadowStaticStyleOverrides(shadowRoot);\n    handleAdoptedStyleSheets(shadowRoot);\n  });\n  watchForInlineStyles(element => {\n    overrideInlineStyle(element, theme, ignoredInlineSelectors, ignoredImageAnalysisSelectors);\n    if (element === document.documentElement) {\n      const styleAttr = element.getAttribute(\"style\") || \"\";\n      if (styleAttr.includes(\"--\")) {\n        variablesStore.matchVariablesAndDependents();\n        const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\n        variablesStore.putRootVars(rootVarsStyle, theme);\n      }\n    }\n  }, root => {\n    createShadowStaticStyleOverrides(root);\n    const inlineStyleElements = root.querySelectorAll(INLINE_STYLE_SELECTOR);\n    if (inlineStyleElements.length > 0) {\n      forEach(inlineStyleElements, el => overrideInlineStyle(el, theme, ignoredInlineSelectors, ignoredImageAnalysisSelectors));\n    }\n  });\n  addDOMReadyListener(onDOMReady);\n}\nfunction stopWatchingForUpdates() {\n  styleManagers.forEach(manager => manager.pause());\n  stopStylePositionWatchers();\n  stopWatchingForStyleChanges();\n  stopWatchingForInlineStyles();\n  removeDOMReadyListener(onDOMReady);\n  cleanReadyStateCompleteListeners();\n}\nlet metaObserver;\nlet headObserver = null;\nfunction addMetaListener() {\n  metaObserver = new MutationObserver(() => {\n    if (document.querySelector('meta[name=\"darkreader-lock\"]')) {\n      metaObserver.disconnect();\n      removeDynamicTheme();\n    }\n  });\n  metaObserver.observe(document.head, {\n    childList: true,\n    subtree: true\n  });\n}\nfunction createDarkReaderInstanceMarker() {\n  const metaElement = document.createElement(\"meta\");\n  metaElement.name = \"darkreader\";\n  metaElement.content = INSTANCE_ID;\n  document.head.appendChild(metaElement);\n}\nfunction isDRLocked() {\n  return document.querySelector('meta[name=\"darkreader-lock\"]') != null;\n}\nfunction isAnotherDarkReaderInstanceActive() {\n  const meta = document.querySelector('meta[name=\"darkreader\"]');\n  if (meta) {\n    if (meta.content !== INSTANCE_ID) {\n      return true;\n    }\n    return false;\n  }\n  createDarkReaderInstanceMarker();\n  addMetaListener();\n  return false;\n}\nlet interceptorAttempts = 2;\nfunction interceptOldScript(_ref33) {\n  let {\n    success,\n    failure\n  } = _ref33;\n  if (--interceptorAttempts <= 0) {\n    failure();\n    return;\n  }\n  const oldMeta = document.head.querySelector('meta[name=\"darkreader\"]');\n  if (!oldMeta || oldMeta.content === INSTANCE_ID) {\n    return;\n  }\n  const lock = document.createElement(\"meta\");\n  lock.name = \"darkreader-lock\";\n  document.head.append(lock);\n  queueMicrotask(() => {\n    lock.remove();\n    success();\n  });\n}\nfunction disableConflictingPlugins() {\n  if (document.documentElement.hasAttribute(\"data-wp-dark-mode-preset\")) {\n    const disableWPDarkMode = () => {\n      document.dispatchEvent(new CustomEvent(\"__darkreader__disableConflictingPlugins\"));\n      document.documentElement.classList.remove(\"wp-dark-mode-active\");\n      document.documentElement.removeAttribute(\"data-wp-dark-mode-active\");\n    };\n    disableWPDarkMode();\n    const observer = new MutationObserver(() => {\n      if (document.documentElement.classList.contains(\"wp-dark-mode-active\") || document.documentElement.hasAttribute(\"data-wp-dark-mode-active\")) {\n        disableWPDarkMode();\n      }\n    });\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\", \"data-wp-dark-mode-active\"]\n    });\n  }\n}\nlet prevTheme = null;\nlet prevFixes = null;\nfunction createOrUpdateDynamicThemeInternal(themeConfig, dynamicThemeFixes, iframe) {\n  theme = themeConfig;\n  fixes = dynamicThemeFixes;\n  const colorAffectingKeys = [\"brightness\", \"contrast\", \"darkSchemeBackgroundColor\", \"darkSchemeTextColor\", \"grayscale\", \"lightSchemeBackgroundColor\", \"lightSchemeTextColor\", \"sepia\"];\n  if (prevTheme && prevFixes) {\n    const themeKeys = new Set([...Object.keys(theme), ...Object.keys(prevTheme)]);\n    let onlyColorsChanged = true;\n    for (const key of themeKeys) {\n      if (theme[key] !== prevTheme[key] && !colorAffectingKeys.includes(key)) {\n        onlyColorsChanged = false;\n        break;\n      }\n    }\n    if (onlyColorsChanged && JSON.stringify(fixes) !== JSON.stringify(prevFixes)) {\n      onlyColorsChanged = false;\n    }\n    if (onlyColorsChanged) {\n      const palette = getColorPalette();\n      clearColorPalette();\n      palette.background.forEach(color => modifyBackgroundColor(color, theme));\n      palette.text.forEach(color => modifyForegroundColor(color, theme));\n      palette.border.forEach(color => modifyBorderColor(color, theme));\n      return;\n    }\n    clearColorPalette();\n  }\n  if (fixes) {\n    ignoredImageAnalysisSelectors = Array.isArray(fixes.ignoreImageAnalysis) ? fixes.ignoreImageAnalysis : [];\n    ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle) ? fixes.ignoreInlineStyle : [];\n  } else {\n    ignoredImageAnalysisSelectors = [];\n    ignoredInlineSelectors = [];\n  }\n  if (theme.immediateModify) {\n    setIsDOMReady(() => {\n      return true;\n    });\n  }\n  isIFrame$1 = iframe;\n  const ready = () => {\n    const success = () => {\n      disableConflictingPlugins();\n      document.documentElement.setAttribute(\"data-darkreader-mode\", \"dynamic\");\n      document.documentElement.setAttribute(\"data-darkreader-scheme\", theme.mode ? \"dark\" : \"dimmed\");\n      createThemeAndWatchForUpdates();\n    };\n    const failure = () => {\n      removeDynamicTheme();\n    };\n    if (isDRLocked()) {\n      removeNode(document.querySelector(\".darkreader--fallback\"));\n    } else if (isAnotherDarkReaderInstanceActive()) {\n      interceptOldScript({\n        success,\n        failure\n      });\n    } else {\n      success();\n    }\n  };\n  if (document.head) {\n    ready();\n  } else {\n    var _headObserver;\n    if (!isFirefox) {\n      const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\n      document.documentElement.appendChild(fallbackStyle);\n      fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\n        strict: true\n      });\n    }\n    (_headObserver = headObserver) === null || _headObserver === void 0 || _headObserver.disconnect();\n    headObserver = new MutationObserver(() => {\n      if (document.head) {\n        var _headObserver2;\n        (_headObserver2 = headObserver) === null || _headObserver2 === void 0 || _headObserver2.disconnect();\n        ready();\n      }\n    });\n    cleaners.push(() => {\n      var _headObserver3;\n      (_headObserver3 = headObserver) === null || _headObserver3 === void 0 || _headObserver3.disconnect();\n      headObserver = null;\n    });\n    headObserver.observe(document, {\n      childList: true,\n      subtree: true\n    });\n  }\n  prevTheme = theme;\n  prevFixes = fixes;\n}\nfunction removeProxy() {\n  document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\n  removeNode(document.head.querySelector(\".darkreader--proxy\"));\n}\nconst cleaners = [];\nfunction removeDynamicTheme() {\n  document.documentElement.removeAttribute(\"data-darkreader-mode\");\n  document.documentElement.removeAttribute(\"data-darkreader-scheme\");\n  cleanDynamicThemeCache();\n  removeNode(document.querySelector(\".darkreader--fallback\"));\n  if (document.head) {\n    const selectors = [\".darkreader--user-agent\", \".darkreader--text\", \".darkreader--invert\", \".darkreader--inline\", \".darkreader--override\", \".darkreader--variables\", \".darkreader--root-vars\", 'meta[name=\"darkreader\"]'];\n    restoreMetaThemeColor();\n    selectors.forEach(selector => removeNode(document.head.querySelector(selector)));\n    staticStyleMap = new WeakMap();\n    removeProxy();\n  }\n  shadowRootsWithOverrides.forEach(root => {\n    removeNode(root.querySelector(\".darkreader--inline\"));\n    removeNode(root.querySelector(\".darkreader--override\"));\n  });\n  shadowRootsWithOverrides.clear();\n  forEach(styleManagers.keys(), el => removeManager(el));\n  loadingStyles.clear();\n  cleanLoadingLinks();\n  forEach(document.querySelectorAll(\".darkreader\"), removeNode);\n  adoptedStyleManagers.forEach(manager => manager.destroy());\n  adoptedStyleManagers.splice(0);\n  adoptedStyleFallbacks.forEach(fallback => fallback.destroy());\n  adoptedStyleFallbacks.clear();\n  metaObserver && metaObserver.disconnect();\n  cleaners.forEach(clean => clean());\n  cleaners.splice(0);\n}\nfunction cleanDynamicThemeCache() {\n  variablesStore.clear();\n  parsedURLCache.clear();\n  removeDocumentVisibilityListener();\n  cancelRendering();\n  stopWatchingForUpdates();\n  cleanModificationCache();\n  clearColorCache();\n  releaseVariablesSheet();\n  prevTheme = null;\n  prevFixes = null;\n}\nfunction parseCSS(cssText) {\n  cssText = removeCSSComments(cssText);\n  cssText = cssText.trim();\n  if (!cssText) {\n    return [];\n  }\n  const rules = [];\n  const excludeRanges = getTokenExclusionRanges(cssText);\n  const bracketRanges = getAllOpenCloseRanges(cssText, \"{\", \"}\", excludeRanges);\n  let ruleStart = 0;\n  bracketRanges.forEach(brackets => {\n    const key = cssText.substring(ruleStart, brackets.start).trim();\n    const content = cssText.substring(brackets.start + 1, brackets.end - 1);\n    if (key.startsWith(\"@\")) {\n      const typeEndIndex = key.search(/[\\s\\(]/);\n      const rule = {\n        type: typeEndIndex < 0 ? key : key.substring(0, typeEndIndex),\n        query: typeEndIndex < 0 ? \"\" : key.substring(typeEndIndex).trim(),\n        rules: parseCSS(content)\n      };\n      rules.push(rule);\n    } else {\n      const rule = {\n        selectors: parseSelectors(key),\n        declarations: parseDeclarations(content)\n      };\n      rules.push(rule);\n    }\n    ruleStart = brackets.end;\n  });\n  return rules;\n}\nfunction getAllOpenCloseRanges(input, openToken, closeToken) {\n  let excludeRanges = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  const ranges = [];\n  let i = 0;\n  let range;\n  while (range = getOpenCloseRange(input, i, openToken, closeToken, excludeRanges)) {\n    ranges.push(range);\n    i = range.end;\n  }\n  return ranges;\n}\nfunction getTokenExclusionRanges(cssText) {\n  const singleQuoteGoesFirst = cssText.indexOf(\"'\") < cssText.indexOf('\"');\n  const firstQuote = singleQuoteGoesFirst ? \"'\" : '\"';\n  const secondQuote = singleQuoteGoesFirst ? '\"' : \"'\";\n  const excludeRanges = getAllOpenCloseRanges(cssText, firstQuote, firstQuote);\n  excludeRanges.push(...getAllOpenCloseRanges(cssText, secondQuote, secondQuote, excludeRanges));\n  excludeRanges.push(...getAllOpenCloseRanges(cssText, \"[\", \"]\", excludeRanges));\n  excludeRanges.push(...getAllOpenCloseRanges(cssText, \"(\", \")\", excludeRanges));\n  return excludeRanges;\n}\nfunction parseSelectors(selectorText) {\n  const excludeRanges = getTokenExclusionRanges(selectorText);\n  return splitExcluding(selectorText, \",\", excludeRanges);\n}\nfunction parseDeclarations(cssDeclarationsText) {\n  const declarations = [];\n  const excludeRanges = getTokenExclusionRanges(cssDeclarationsText);\n  splitExcluding(cssDeclarationsText, \";\", excludeRanges).forEach(part => {\n    const colonIndex = part.indexOf(\":\");\n    if (colonIndex > 0) {\n      const importantIndex = part.indexOf(\"!important\");\n      declarations.push({\n        property: part.substring(0, colonIndex).trim(),\n        value: part.substring(colonIndex + 1, importantIndex > 0 ? importantIndex : part.length).trim(),\n        important: importantIndex > 0\n      });\n    }\n  });\n  return declarations;\n}\nfunction isParsedStyleRule(rule) {\n  return \"selectors\" in rule;\n}\nfunction formatCSS(cssText) {\n  const parsed = parseCSS(cssText);\n  return formatParsedCSS(parsed);\n}\nfunction formatParsedCSS(parsed) {\n  const lines = [];\n  const tab = \"    \";\n  function formatRule(rule, indent) {\n    if (isParsedStyleRule(rule)) {\n      formatStyleRule(rule, indent);\n    } else {\n      formatAtRule(rule, indent);\n    }\n  }\n  function formatAtRule(_ref34, indent) {\n    let {\n      type,\n      query,\n      rules\n    } = _ref34;\n    lines.push(\"\".concat(indent).concat(type, \" \").concat(query, \" {\"));\n    rules.forEach(child => formatRule(child, \"\".concat(indent).concat(tab)));\n    lines.push(\"\".concat(indent, \"}\"));\n  }\n  function formatStyleRule(_ref35, indent) {\n    let {\n      selectors,\n      declarations\n    } = _ref35;\n    const lastSelectorIndex = selectors.length - 1;\n    selectors.forEach((selector, i) => {\n      lines.push(\"\".concat(indent).concat(selector).concat(i < lastSelectorIndex ? \",\" : \" {\"));\n    });\n    const sorted = sortDeclarations(declarations);\n    sorted.forEach(_ref36 => {\n      let {\n        property,\n        value,\n        important\n      } = _ref36;\n      lines.push(\"\".concat(indent).concat(tab).concat(property, \": \").concat(value).concat(important ? \" !important\" : \"\", \";\"));\n    });\n    lines.push(\"\".concat(indent, \"}\"));\n  }\n  clearEmptyRules(parsed);\n  parsed.forEach(rule => formatRule(rule, \"\"));\n  return lines.join(\"\\n\");\n}\nfunction sortDeclarations(declarations) {\n  const prefixRegex = /^-[a-z]-/;\n  return [...declarations].sort((a, b) => {\n    var _aProp$match$, _aProp$match, _bProp$match$, _bProp$match;\n    const aProp = a.property;\n    const bProp = b.property;\n    const aPrefix = (_aProp$match$ = (_aProp$match = aProp.match(prefixRegex)) === null || _aProp$match === void 0 ? void 0 : _aProp$match[0]) !== null && _aProp$match$ !== void 0 ? _aProp$match$ : \"\";\n    const bPrefix = (_bProp$match$ = (_bProp$match = bProp.match(prefixRegex)) === null || _bProp$match === void 0 ? void 0 : _bProp$match[0]) !== null && _bProp$match$ !== void 0 ? _bProp$match$ : \"\";\n    const aNorm = aPrefix ? aProp.replace(prefixRegex, \"\") : aProp;\n    const bNorm = bPrefix ? bProp.replace(prefixRegex, \"\") : bProp;\n    if (aNorm === bNorm) {\n      return aPrefix.localeCompare(bPrefix);\n    }\n    return aNorm.localeCompare(bNorm);\n  });\n}\nfunction clearEmptyRules(rules) {\n  for (let i = rules.length - 1; i >= 0; i--) {\n    const rule = rules[i];\n    if (isParsedStyleRule(rule)) {\n      if (rule.declarations.length === 0) {\n        rules.splice(i, 1);\n      }\n    } else {\n      clearEmptyRules(rule.rules);\n      if (rule.rules.length === 0) {\n        rules.splice(i, 1);\n      }\n    }\n  }\n}\nconst blobRegex = /url\\(\\\"(blob\\:.*?)\\\"\\)/g;\nasync function replaceBlobs(text) {\n  const promises = [];\n  getMatches(blobRegex, text, 1).forEach(url => {\n    const promise = loadAsDataURL(url);\n    promises.push(promise);\n  });\n  const data = await Promise.all(promises);\n  return text.replace(blobRegex, () => \"url(\\\"\".concat(data.shift(), \"\\\")\"));\n}\nconst banner = \"/*\\n                        _______\\n                       /       \\\\\\n                      .==.    .==.\\n                     ((  ))==((  ))\\n                    / \\\"==\\\"    \\\"==\\\"\\\\\\n                   /____|| || ||___\\\\\\n       ________     ____    ________  ___    ___\\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\\n                https://darkreader.org\\n*/\\n\\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */\\n\";\nasync function collectCSS() {\n  const css = [banner];\n  function addStaticCSS(selector, comment) {\n    const staticStyle = document.querySelector(selector);\n    if (staticStyle && staticStyle.textContent) {\n      css.push(\"/* \".concat(comment, \" */\"));\n      css.push(staticStyle.textContent);\n      css.push(\"\");\n    }\n  }\n  addStaticCSS(\".darkreader--fallback\", \"Fallback Style\");\n  addStaticCSS(\".darkreader--user-agent\", \"User-Agent Style\");\n  addStaticCSS(\".darkreader--text\", \"Text Style\");\n  addStaticCSS(\".darkreader--invert\", \"Invert Style\");\n  addStaticCSS(\".darkreader--variables\", \"Variables Style\");\n  const modifiedCSS = [];\n  document.querySelectorAll(\".darkreader--sync\").forEach(element => {\n    forEach(element.sheet.cssRules, rule => {\n      rule && rule.cssText && modifiedCSS.push(rule.cssText);\n    });\n  });\n  if (modifiedCSS.length) {\n    const formattedCSS = formatCSS(modifiedCSS.join(\"\\n\"));\n    css.push(\"/* Modified CSS */\");\n    css.push(await replaceBlobs(formattedCSS));\n    css.push(\"\");\n  }\n  addStaticCSS(\".darkreader--override\", \"Override Style\");\n  return css.join(\"\\n\");\n}\nlet isDarkReaderEnabled = false;\nconst isIFrame = (() => {\n  try {\n    return window.self !== window.top;\n  } catch (err) {\n    console.warn(err);\n    return true;\n  }\n})();\nfunction enable() {\n  let themeOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let fixes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  const theme = _objectSpread(_objectSpread({}, DEFAULT_THEME), themeOptions);\n  if (theme.engine !== ThemeEngine.dynamicTheme) {\n    throw new Error(\"Theme engine is not supported.\");\n  }\n  createOrUpdateDynamicThemeInternal(theme, fixes, isIFrame);\n  isDarkReaderEnabled = true;\n}\nfunction isEnabled() {\n  return isDarkReaderEnabled;\n}\nfunction disable() {\n  removeDynamicTheme();\n  isDarkReaderEnabled = false;\n}\nconst darkScheme = typeof matchMedia === \"function\" ? matchMedia(\"(prefers-color-scheme: dark)\") : undefined;\nlet store = {\n  themeOptions: null,\n  fixes: null\n};\nfunction handleColorScheme() {\n  if (darkScheme !== null && darkScheme !== void 0 && darkScheme.matches) {\n    enable(store.themeOptions, store.fixes);\n  } else {\n    disable();\n  }\n}\nfunction auto() {\n  let themeOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let fixes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  if (themeOptions) {\n    store = {\n      themeOptions,\n      fixes\n    };\n    handleColorScheme();\n    if (isMatchMediaChangeEventListenerSupported) {\n      darkScheme === null || darkScheme === void 0 || darkScheme.addEventListener(\"change\", handleColorScheme);\n    } else {\n      darkScheme === null || darkScheme === void 0 || darkScheme.addListener(handleColorScheme);\n    }\n  } else {\n    if (isMatchMediaChangeEventListenerSupported) {\n      darkScheme === null || darkScheme === void 0 || darkScheme.removeEventListener(\"change\", handleColorScheme);\n    } else {\n      darkScheme === null || darkScheme === void 0 || darkScheme.removeListener(handleColorScheme);\n    }\n    disable();\n  }\n}\nasync function exportGeneratedCSS() {\n  return await collectCSS();\n}\nconst setFetchMethod = setFetchMethod$1;\nexport { auto, disable, enable, exportGeneratedCSS, isEnabled, setFetchMethod };","map":{"version":3,"names":["MessageTypeUItoBG","MessageTypeBGtoUI","DebugMessageTypeBGtoUI","MessageTypeBGtoCS","DebugMessageTypeBGtoCS","MessageTypeCStoBG","DebugMessageTypeCStoBG","MessageTypeCStoUI","MessageTypeUItoCS","isNavigatorDefined","navigator","userAgent","userAgentData","Array","isArray","brands","map","brand","concat","toLowerCase","version","join","platform","isChromium","includes","isFirefox","isSafari","isWindows","startsWith","isMacOS","mobile","isShadowDomSupported","ShadowRoot","isMatchMediaChangeEventListenerSupported","MediaQueryList","prototype","addEventListener","isLayerRuleSupported","CSSLayerBlockRule","m","match","isDefinedSelectorSupported","document","querySelector","err","isCSSColorSchemePropSupported","el","createElement","style","colorScheme","setAttribute","e","getOKResponse","url","mimeType","origin","credentials","undefined","response","fetch","cache","referrer","endsWith","headers","get","Error","ok","status","statusText","loadAsDataURL","readResponseAsDataURL","loadAsBlob","blob","dataURL","Promise","resolve","reader","FileReader","onloadend","result","readAsDataURL","loadAsText","text","throwCORSError","reject","fetcher","setFetchMethod$1","callFetchMethod","window","chrome","runtime","messageListeners","Set","sendMessage","_len","arguments","length","args","_key","type","FETCH","id","responseType","data","forEach","cb","FETCH_RESPONSE","error","console","addMessageListener","callback","add","nativeSendMessage","_len2","_key2","apply","onMessage","addListener","nativeAddListener","_len3","_key3","ThemeEngine","AutomationMode","DEFAULT_COLORS","darkScheme","background","lightScheme","DEFAULT_THEME","mode","brightness","contrast","grayscale","sepia","useFont","fontFamily","textStroke","engine","dynamicTheme","stylesheet","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor","scrollbarColor","selectionColor","styleSystemControls","lightColorScheme","darkColorScheme","immediateModify","filterModeSites","customThemes","cssFilter","theme","_objectSpread","builtIn","automation","NONE","getMatches","regex","input","group","matches","exec","push","getMatchesWithOffsets","offset","index","getHashCode","len","hash","i","c","charCodeAt","escapeRegExpSpecialChars","replaceAll","getParenthesesRange","searchStartIndex","getOpenCloseRange","openToken","closeToken","excludeRanges","indexOf","token","pos","indexOfExcluding","depth","firstOpenIndex","openIndex","closeIndex","start","end","search","position","exclusion","find","r","splitExcluding","separator","parts","commaIndex","currIndex","substring","trim","anchor","parsedURLCache","Map","fixBaseURL","$url","href","parseURL","$base","key","has","parsedURL","URL","set","getAbsoluteURL","$relative","test","location","protocol","b","a","isRelativeHrefOnAbsolutePath","hostname","port","pathname","excludedSelectors","createTextStyle","config","lines","isArrayLike","items","iterator","item","array","addition","toArray","results","scale","x","inLow","inHigh","outLow","outHigh","clamp","min","max","Math","multiplyMatrices","m1","m2","j","len2","sum","k","len3","createFilterMatrix","Matrix","identity","invertNHue","applyColorMatrix","_ref","matrix","g","rgb","round","v","t","FilterMode","getCSSFilterValue","filters","dark","evalMath","expression","rpnStack","workingStack","lastToken","operators","op","currentOp","lessOrEqualThan","shift","unshift","stack","splice","parseFloat","Operator","constructor","precedence","method","precendce","execMethod","left","right","isSystemDarkModeEnabled","matchMedia","hslaParseCache","rgbaParseCache","parseColorWithCache","$color","lowerCalcExpression","color","parse","parseToHSLWithCache","hsl","rgbToHSL","clearColorCache","clear","hslToRGB","_ref2","h","s","l","abs","n","_ref3","r255","g255","b255","toFixed","digits","fixed","dot","zerosMatch","rgbToString","rgbToHexString","_ref4","toString","hslToString","rgbMatch","hslMatch","hexMatch","supportedColorFuncs","lastIndexOf","domParseColor","parseRGB","parseHSL","parseHex","knownColors","getColorByName","systemColors","getSystemColor","some","fn","schemeColor","getNumbers","numbers","prevPos","isMining","startIndex","getNumbersFromString","str","range","units","raw","unitsList","Object","entries","unit","_ref5","u","rgbRange","rgbUnits","$rgb","hslRange","hslUnits","PI","$hsl","$hex","parseInt","searchIndex","replaceBetweenIndices","replacement","slice","includesPercentage","split","output","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_ref6","value","getSRGBLightness","canvas$1","context$1","width","height","getContext","willReadFrequently","fillStyle","fillRect","d","getImageData","throttle","pending","frameId","lastArgs","throttled","_len4","_key4","requestAnimationFrame","cancel","cancelAnimationFrame","assign","createAsyncTasksQueue","tasks","runTasks","task","delayTokens","requestAnimationFrameOnce","delete","hexify","number","generateUID","crypto","uuid","randomUUID","from","getRandomValues","Uint8Array","floor","random","documentVisibilityListener","documentIsVisible_","hidden","listenerOptions","capture","passive","watchForDocumentVisibility","stopWatchingForDocumentVisibility","removeEventListener","setDocumentVisibilityListener","alreadyWatching","Boolean","removeDocumentVisibilityListener","documentIsVisible","getDuration","time","duration","seconds","minutes","hours","days","logInfo","logWarn","logAssert","ASSERT","description","condition","removeNode","node","parentNode","removeChild","watchForNodePosition","onRestore","Function","MAX_ATTEMPTS_COUNT","RETRY_TIMEOUT","ATTEMPTS_INTERVAL","prevSibling","previousSibling","parent","attempts","timeoutId","restore","now","Date","setTimeout","head","lastChild","stop","updateParent","isConnected","insertBefore","nextSibling","firstChild","observer","takeRecords","MutationObserver","run","observe","childList","clearTimeout","disconnect","skip","iterateShadowHosts","root","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","acceptNode","shadowRoot","FILTER_SKIP","FILTER_ACCEPT","currentNode","nextNode","classList","contains","isDOMReady","readyState","setIsDOMReady","newFunc","readyStateListeners","addDOMReadyListener","listener","removeDOMReadyListener","isReadyStateComplete","readyStateCompleteListeners","addReadyStateCompleteListener","cleanReadyStateCompleteListeners","onReadyStateChange","HUGE_MUTATIONS_COUNT","isHugeMutation","mutations","addedNodesCount","addedNodes","getElementsTreeOperations","additions","deletions","moves","Element","removedNodes","duplicateAdditions","duplicateDeletions","parentElement","optimizedTreeObservers","optimizedTreeCallbacks","WeakMap","createOptimizedTreeObserver","callbacks","observerCallbacks","domReadyListener","hadHugeMutationsBefore","subscribedForReadyState","_ref7","onHugeMutations","_ref8","elementsOperations","_ref9","onMinorMutations","subtree","size","iterateCSSRules","rules","iterate","onImportError","rule","isStyleRule","_rule$cssRules","cssRules","isImportRule","styleSheet","isMediaRule","media","isScreenOrAllOrQuery","isPrintOrSpeech","isSupportsRule","CSS","supports","conditionText","isLayerRule","shorthandVarDependantProperties","shorthandVarDepPropRegexps","prop","regexp","RegExp","iterateCSSDeclarations","property","getPropertyValue","cssText","_ref0","val","handleEmptyShorthand","shorthand","parentRule","_parentRule$parentSty","sourceCSSText","parentStyleSheet","ownerNode","textContent","escapedSelector","selectorText","cssURLRegex","cssImportRegex","getCSSURLValue","cssURL","replace","getCSSBaseBath","replaceCSSRelativeURLsWithAbsolute","$css","cssBasePath","absoluteURL","escapedURL","fontFaceRegex","replaceCSSFontFace","styleRules","WeakSet","importRules","mediaRules","supportsRules","layerRules","CSSSupportsRule","sheetsScopes","defineSheetScope","sheet","getSheetScope","Document","variablesSheet","registeredColors","registerVariablesSheet","types","registered","_variablesSheet","variable","setProperty","releaseVariablesSheet","clearColorPalette","getRegisteredVariableValue","getRegisteredColor","parsed","hex","registerColor","_variablesSheet2","_variablesSheet3","getColorPalette","border","getBgPole","isDarkScheme","getFgPole","colorModificationCache","clearColorModificationCache","rgbCacheKeys","themeCacheKeys","getCacheId","resultId","modifyColorWithCache","modifyHSL","poleColor","anotherPoleColor","fnCache","pole","anotherPole","modified","rf","gf","bf","modifyAndRegisterColor","modifier","modifyLightSchemeColor","poleBg","poleFg","modifyLightModeHSL","_ref1","isDark","isNeutral","isBlue","hx","sx","lx","MAX_BG_LIGHTNESS","modifyBgHSL","_ref10","isYellow","isCloserToGreen","_modifyBackgroundColor","modifyBackgroundColor","shouldRegisterColorVariable","MIN_FG_LIGHTNESS","modifyBlueFgHue","hue","modifyFgHSL","_ref11","isLight","_modifyForegroundColor","modifyForegroundColor","modifyBorderHSL","_ref12","_modifyBorderColor","modifyBorderColor","modifyShadowColor","modifyGradientColor","gradientLength","conicGradient","conicGradientLength","radialGradient","linearGradient","parseGradient","typeGradient","possibleType","possibleGradient","hasComma","STORAGE_KEY_IMAGE_DETAILS_LIST","STORAGE_KEY_IMAGE_DETAILS_PREFIX","STORAGE_KEY_CSS_FETCH_PREFIX","imageCacheTimeout","imageDetailsCacheQueue","cachedImageUrls","writeImageDetailsQueue","details","json","JSON","stringify","sessionStorage","setItem","writeImageDetailsCache","imageDetails","readImageDetailsCache","targetMap","jsonList","getItem","list","writeCSSFetchCache","readCSSFetchCache","_sessionStorage$getIt","toSVGMatrix","getSVGFilterMatrixValue","MAX_FRAME_DURATION","AsyncQueue","queue","timerId","addTask","scheduleFrame","resolvers$1","rejectors","bgFetch","request","_window$DarkReader","DarkReader","Plugins","_ref13","imageManager","getImageDetails","_tryConvertDataURLToB","getDataURL","tryConvertDataURLToBlobSync","image","loadImage","_await$tryCreateImage","tryCreateImageBitmap","analysis","analyzeImage","src","isLarge","createImageBitmap","String","INCOMPLETE_DOC_LOADING_IMAGE_LIMIT","loadingImagesCount","Image","onload","onerror","MAX_ANALYSIS_PIXELS_COUNT","canvas","context","createCanvas","maxWidth","maxHeight","imageSmoothingEnabled","removeCanvas","LARGE_IMAGE_PIXELS_COUNT","sw","sh","HTMLImageElement","naturalWidth","naturalHeight","isTransparent","sourcePixelsCount","sqrt","ceil","clearRect","drawImage","imageData","TRANSPARENT_ALPHA_THRESHOLD","DARK_LIGHTNESS_THRESHOLD","LIGHT_LIGHTNESS_THRESHOLD","transparentPixelsCount","darkPixelsCount","lightPixelsCount","y","totalPixelsCount","opaquePixelsCount","DARK_IMAGE_THRESHOLD","LIGHT_IMAGE_THRESHOLD","TRANSPARENT_IMAGE_THRESHOLD","isBlobURLSupported","canUseProxy","blobURLCheckRequested","blobURLCheckAwaiters","once","requestBlobURLCheck","detail","blobURLAllowed","dispatchEvent","CustomEvent","isBlobURLCheckResultReady","onCSPError","blockedURI","objectURLs","getFilteredImageURL","_ref14","escapeXML","svg","btoa","bytes","Blob","objectURL","createObjectURL","xmlEscapeChars","_xmlEscapeChars$c","dataURLBlobURLs","colonIndex","semicolonIndex","encoding","toLocaleLowerCase","mediaType","characters","atob","tryConvertDataURLToBlobURL","blobURL","cleanImageProcessingCache","revokeObjectURL","getPriority","ruleStyle","getPropertyPriority","getModifiableCSSDeclaration","variablesStore","ignoreImageSelectors","isCancelled","getVariableModifier","getVariableDependantModifier","getColorSchemeModifier","getScrollbarColorModifier","borderSideProp","borderSideVal","getColorModifier","getBgImageModifier","getShadowModifier","important","sourceValue","joinSelectors","_len5","selectors","_key5","filter","hostsWithOddScrollbars","getModifiedUserAgentStyle","isIFrame","bgSelectors","getModifiedScrollbarStyle","getModifiedSelectionStyle","getSelectionColor","backgroundColorSelection","foregroundColorSelection","modifiedSelectionColor","selection","colorTrack","colorThumb","darken","darker","getModifiedFallbackStyle","_ref15","strict","factory","defaultFallbackFactory","_ref16","unparsableColors","webkitMaskImage","webkitMask","mask","imageDetailsCache","awaitingForImageLoading","didTryLoadCache","shouldIgnoreImage","ruleSelectors","ignoredSelector","beginning","ending","imageSelectorQueue","imageSelectorValues","imageSelectorNodeQueue","imageSelectorQueueFrameId","classObserver","checkImageSelectors","selector","mutation","target","element","documentElement","attributes","attributeFilter","gradients","urls","getIndices","valueIndex","sort","getGradientModifier","gradient","partsRegex","colorStopRegex","part","space","colorStopMatch","modify","getURLModifier","urlValue","_ref17","isURLEmpty","scope","baseURL","baseURI","awaiters","bgImageValue","getBgImageValue","logSrc","inverted","dimmed","filtered","modifiers","matchIndex","prevHasComma","_ref18","matchStart","prefixStart","matchEnd","betweenValue","all","then","asyncResults","combinedResult","getShadowModifierWithInfo","colorMatches","notParsed","prefixIndex","matchesLength","unparsableMatchesLength","shadowModifier","colorsMatch","thumb","track","ignoredImgSelectors","getModifierForVariable","varName","getModifierForVarDependant","cleanModificationCache","_classObserver","VAR_TYPE_BG_COLOR","VAR_TYPE_TEXT_COLOR","VAR_TYPE_BORDER_COLOR","VAR_TYPE_BG_IMG","VariablesStore","varTypes","rulesQueue","inlineStyleQueue","definedVars","varRefs","unknownColorVars","unknownBgVars","undefinedVars","initialVarTypes","changedTypeVars","typeChangeSubscriptions","unstableVarValues","isVarType","typeNum","addRulesForMatching","addInlineStyleForMatching","matchVariablesAndDependents","collectRootVariables","collectVariablesAndVarDep","collectRootVarDependents","refs","resolveVariableType","hasColor","findVarRef","ref","iterateVarRefs","options","getDeclarations","declarations","addModifiedValue","varNameWrapper","colorModifier","modifiedValue","isVarDependant","isConstructedColorVar","insertVarValues","replaceCSSVariablesNames","fallback","wrapBgColorVariableName","tryModifyBgColor","wrapTextColorVariableName","tryModifyTextColor","wrapBorderColorVariableName","tryModifyBorderColor","wrapBgImgVariableName","bgModifier","onTypeChange","decs","subscribeForVarTypeChange","removeListeners","unsubscribeFromVariableTypeChanges","isConstructedColor","isSimpleConstructedColor","isBg","isText","isTextColorProperty","defaultFallback","unknownVars","variableReplaced","modifiedShadow","isFallbackResolved","unknownVar","values","newValue","rootStore","collectVarsFromCSSDeclarations","isVariable","inspectVariable","inspectVarDependant","shouldProcessRootVariables","_document$documentEle","getAttribute","isColor","rawRGBSpaceRegex","rawRGBCommaRegex","initialType","currentType","newType","iterateVarDeps","isBgColor","varDeps","iterateVarDependencies","found","setOnRootVariableChange","onRootVariableDefined","putRootVars","styleElement","deleteRule","cssLines","insertRule","getVariableRange","searchStart","getVariablesMatches","ranges","replaceVariablesMatches","replacer","matchesCount","inputLength","replacements","getVariableNameAndFallback","name","nameReplacer","fallbackReplacer","finalFallback","matchReplacer","newName","newFallback","textColorProps","parseRawColorValue","_input$match","isRaw","handleRawColorValue","modifyFunction","outputColor","outputInRGB","source","varValues","fullStack","containsUnresolvedVar","count","varValue","inserted","replaced","getThemeKey","resultKey","asyncQueue","createStyleSheetModifier","renderId","getStyleRuleHash","mediaText","rulesTextCache","rulesModCache","varTypeChangeCleaners","prevFilterKey","hasNonLoadedLink","wasRebuilt","shouldRebuildStyle","modifySheet","sourceCSSRules","ignoreImageAnalysis","force","prepareSheet","isAsyncCancelled","rulesChanged","notFoundCacheKeys","keys","themeKey","themeChanged","modRules","textDiffersFromPrev","modDecs","mod","modRule","setRule","emptyIsWhereSelector","viewTransitionSelector","ruleText","dec","asyncDeclarations","varDeclarations","asyncDeclarationCounter","varDeclarationCounter","rootReadyGroup","isGroup","groupRefs","getGroup","parentGroup","_ref19","readyStyleRule","readyDeclarations","handleAsyncDeclaration","asyncKey","asyncDeclaration","currentRenderId","asyncValue","rebuildAsyncRule","handleVarDeclarations","varDecs","varKey","initialIndex","oldDecs","tempDec","readyDec","newDecs","readyVarDecs","rebuildVarRule","_ref20","buildStyleSheet","createTarget","iterateReadyRules","styleIterator","_ref21","canUseSheetProxy$1","overrides$1","overridesBySource","canHaveAdoptedStyleSheets","adoptedStyleSheets","createAdoptedStyleSheetOverride","cancelAsyncOperations","iterateSourceSheets","injectSheet","override","newSheets","sheetIndex","overrideIndex","sourceSheets","sourceDeclarations","cleaners","destroy","rulesChangeKey","getRulesChangeKey","CSSStyleRule","render","readyOverride","CSSStyleSheet","sheetModifier","callbackRequested","handleArrayChange","queueMicrotask","sheets","checkForUpdates","watchUsingRAF","addSheetChangeEventListener","watch","onAdoptedSheetsChange","StyleSheetCommandBuilder","commands","replaceSync","getDeepCSSCommands","deep","command","path","childCommands","clearDeepCSSCommands","createAdoptedStyleSheetFallback","builder","hostsBreakingOnStylePosition","getStyleInjectionMode","injectStyleAway","container","body","display","append","overrides","customProp","cssProp","dataAttr","shorthandOverrides","overridesList","normalizedPropList","_ref22","INLINE_STYLE_ATTRS","INLINE_STYLE_SELECTOR","attr","getInlineOverrideStyle","allOverrides","_ref23","getInlineStyleElements","querySelectorAll","treeObservers","attrObservers","watchForInlineStyles","elementStyleDidChange","shadowRootDiscovered","deepWatchForInlineStyles","host","discoveredNodes","discoverNodes","treeObserver","_root","_ref24","added","attemptCount","handleAttributeMutations","handledTargets","attributeName","attrObserver","attributeCache","_ref25","stopWatchingForInlineStyles","o","inlineStyleCache","svgInversionCache","svgAnalysisConditionCache","themeProps","shouldAnalyzeSVGAsImage","_svg$getAttribute","_svg$parentElement","shouldAnalyze","getInlineStyleCacheKey","shouldIgnoreInlineStyle","ingnoredSelector","overrideInlineStyle","ignoreInlineSelectors","_element$ownerSVGElem","_element$getAttribute2","cacheKey","unsetProps","setCustomProp","targetCSSProp","modifierCSSProp","cssVal","setStaticValue","_overrides$targetCSSP","hasAttribute","setVarDeclaration","prevDeclarations","setProps","_ref26","removeProperty","_ref27","setAsyncValue","promise","removeAttribute","isSVGElement","SVGElement","ownerSVGElement","SVGSVGElement","analyzeSVGAsImage","svgString","outerHTML","_element$getAttribute","rel","SMALL_SVG_LIMIT","SVGTextElement","handleSVGElement","getBoundingClientRect","SVGLineElement","hasOwnProperty","overriddenProp","fill","metaThemeColorName","metaThemeColorSelector","srcMetaThemeColor","changeMetaThemeColor","meta","content","changeMetaThemeColorWhenAvailable","loop","HTMLMetaElement","restoreMetaThemeColor","cssCommentsRegex","removeCSSComments","canUseSheetProxy","createSheetWatcher","safeGetSheetRules","rafSheetWatcher","watchForSheetChanges","watchForSheetChangesUsingProxy","createRAFSheetWatcher","areSheetChangesPending","onSheetChange","_rafSheetWatcher","handleSheetChanges","stopWatchingForSheetChangesUsingProxy","stopWatchingForSheetChanges","_rafSheetWatcher2","rulesCheckFrameId","didRulesKeyChange","watchForSheetChangesUsingRAF","stopWatchingForSheetChangesUsingRAF","checkForUpdate","cancelled","STYLE_SELECTOR","isFontsGoogleApiStyle","elementURL","hostsBreakingOnSVGStyleOverride","shouldManageStyle","HTMLStyleElement","SVGStyleElement","HTMLLinkElement","disabled","getManageableStyles","syncStyleSet","corsStyleSet","loadingLinkCounter","rejectorsForLoadingLinks","cleanLoadingLinks","manageStyle","_ref28","update","loadingStart","loadingEnd","inMode","corsCopy","syncStyle","prevStyles","next","nextElementSibling","corsCopyPositionWatcher","syncStylePositionWatcher","isOverrideEmpty","containsCSSImport","_element$textContent","createOrUpdateCORSCopy","observerOptions","characterData","_element$textContent2","hasImports","checkCrossOrigin","cssRulesLoop","getRulesSync","insertStyle","createSyncStyle","createElementNS","title","isLoadingRules","wasLoadingError","loadingLinkId","getRulesAsync","accessError","getRulesOrError","isStillLoadingError","linkLoading","loadText","fullCSSText","replaceCSSImports","_corsCopy$textContent","_corsCopy$textContent2","createCORSCopy","cc","secondRound","catch","forceRenderStyle","removeCSSRulesFromSheet","prepareOverridesSheet","buildOverrides","message","sheetChangeWatcher","pause","maxMoveCount","moveCount","link","loadingId","cleanUp","onLoad","onError","getCSSImportURL","importDeclaration","basePath","importMatches","prev","shouldIgnoreImportsInBetween","diff","importedCSS","prevImportEnd","nextImportStart","openBraceIndex","closeBraceIndex","importURL","inject","cors","injectProxy","enableStyleSheetsProxy","enableCustomElementRegistryProxy","clean","documentEventListener","disableConflictingPlugins","disableWPDarkMode","_window","WPDarkMode","deactivate","overrideProperty","cls","proto","oldDescriptor","getOwnPropertyDescriptor","newDescriptor","defineProperty","isDRElement","_element$classList","isDRSheet","updateSheetEvent","adoptedSheetChangeEvent","shadowDomAttachingEvent","bubbles","adoptedSheetOwners","adoptedDeclarationSheets","onAdoptedSheetChange","owners","reportSheetChange","reportSheetChangeAsync","native","call","returnValue","shouldWrapHTMLElement","tagName","getCurrentElementValue","elements","setPrototypeOf","NodeList","nodeListBehavior","_","Number","Proxy","shouldProxyChildNodes","Node","childNodes","resolveCustomElement","tag","customElements","whenDefined","CustomElementRegistry","checkBlobURLSupport","sendBlobURLCheckResponse","getCurrentValue","docSheets","filteredSheets","StyleSheetList","styleSheetListBehavior","adoptedSheetsSourceProxies","adoptedSheetsProxySources","adoptedSheetsChangeEvent","adoptedSheetOverrideCache","adoptedSheetsSnapshots","isDRAdoptedSheetOverride","areArraysEqual","every","curr","declaration","proxyAdoptedSheetsArray","proxy","deleteProperty","ctor","adoptedDeclarationChangeEvent","CSSStyleDeclaration","_len6","_key6","definedCustomElements","undefinedGroups","elementsDefinitionCallback","isCustomElement","recordUndefinedElement","extendedTag","customElementsWhenDefined","collectUndefinedElements","canOptimizeUsingProxy","unhandledShadowHosts","_elementsDefinitionCa","hosts","resolvers","handleIsDefined","checkIfDefined","watchWhenCustomElementsDefined","unsubscribeFromDefineCustomElements","observers","observedRoots","handledShadowHosts","watchForStylePositions","currentStyles","stopWatchingForStylePositions","prevStylesByRoot","getPrevStyles","nodeType","DOCUMENT_FRAGMENT_NODE","prevStyleSiblings","nextStyleSiblings","saveStylePosition","previousElementSibling","forgetStylePosition","didStylePositionChange","handleStyleOperations","operations","createdStyles","removedStyles","movedStyles","created","removed","moved","updated","handleMinorTreeMutations","_ref29","deepObserve","handleHugeTreeMutations","styles","updatedStyles","subscribeForShadowRootChanges","newStyles","resetObservers","watchForStyleChanges","stopWatchingForStyleChanges","INSTANCE_ID","styleManagers","adoptedStyleManagers","adoptedStyleFallbacks","adoptedStyleChangeTokens","fixes","isIFrame$1","ignoredImageAnalysisSelectors","ignoredInlineSelectors","staticStyleMap","createOrUpdateStyle","className","classMap","createOrUpdateScript","nodePositionWatchers","setupNodePositionWatcher","alias","stopStylePositionWatchers","watcher","injectStaticStyle","prevNode","watchAlias","createStaticStyleOverrides","_theme","_selectionColors$back","_selectionColors$fore","fallbackStyle","userAgentStyle","textStyle","invertStyle","invert","inlineStyle","variableStyle","selectionColors","neutralBackgroundColor","neutralTextColor","rootVarsStyle","disableStyleSheetsProxy","disableCustomElementRegistryProxy","proxyScript","remove","overrideStyle","css","replaceCSSTemplates","shadowRootsWithOverrides","createShadowStaticStyleOverridesInner","delayedCreateShadowStaticStyleOverrides","nodeName","createShadowStaticStyleOverrides","delayed","$cssText","lightness","cleanFallbackStyle","_staticStyleMap$get","_staticStyleMap$get2","createDynamicStyleOverrides","cancelRendering","allStyles","newManagers","createManager","manager","loadingStyles","inlineStyleElements","handleAdoptedStyleSheets","onAdoptedCssChange","_ref30","_ref31","sheetId","getAdoptedStyleSheetFallback","getAdoptedStyleChangeToken","loadingStylesCounter","loadingStyleId","removeManager","throttledRenderAllStyles","onDOMReady","runDynamicStyle","watchForUpdates","createThemeAndWatchForUpdates","newManger","Symbol","managedStyles","_ref32","stylesToRemove","stylesToManage","stylesToRestore","styleAttr","stopWatchingForUpdates","metaObserver","headObserver","addMetaListener","removeDynamicTheme","createDarkReaderInstanceMarker","metaElement","appendChild","isDRLocked","isAnotherDarkReaderInstanceActive","interceptorAttempts","interceptOldScript","_ref33","success","failure","oldMeta","lock","prevTheme","prevFixes","createOrUpdateDynamicThemeInternal","themeConfig","dynamicThemeFixes","iframe","colorAffectingKeys","themeKeys","onlyColorsChanged","palette","ignoreInlineStyle","ready","_headObserver","_headObserver2","_headObserver3","removeProxy","cleanDynamicThemeCache","parseCSS","getTokenExclusionRanges","bracketRanges","getAllOpenCloseRanges","ruleStart","brackets","typeEndIndex","query","parseSelectors","parseDeclarations","singleQuoteGoesFirst","firstQuote","secondQuote","cssDeclarationsText","importantIndex","isParsedStyleRule","formatCSS","formatParsedCSS","tab","formatRule","indent","formatStyleRule","formatAtRule","_ref34","child","_ref35","lastSelectorIndex","sorted","sortDeclarations","_ref36","clearEmptyRules","prefixRegex","_aProp$match$","_aProp$match","_bProp$match$","_bProp$match","aProp","bProp","aPrefix","bPrefix","aNorm","bNorm","localeCompare","blobRegex","replaceBlobs","promises","banner","collectCSS","addStaticCSS","comment","staticStyle","modifiedCSS","formattedCSS","isDarkReaderEnabled","self","top","warn","enable","themeOptions","isEnabled","disable","store","handleColorScheme","auto","removeListener","exportGeneratedCSS","setFetchMethod"],"sources":["/Users/stanislaudasilva/Downloads/portfolio/node_modules/darkreader/darkreader.mjs"],"sourcesContent":["/**\r\n * Dark Reader v4.9.109\r\n * https://darkreader.org/\r\n */\r\n\r\nvar MessageTypeUItoBG;\r\n(function (MessageTypeUItoBG) {\r\n    MessageTypeUItoBG[\"GET_DATA\"] = \"ui-bg-get-data\";\r\n    MessageTypeUItoBG[\"GET_DEVTOOLS_DATA\"] = \"ui-bg-get-devtools-data\";\r\n    MessageTypeUItoBG[\"SUBSCRIBE_TO_CHANGES\"] = \"ui-bg-subscribe-to-changes\";\r\n    MessageTypeUItoBG[\"UNSUBSCRIBE_FROM_CHANGES\"] =\r\n        \"ui-bg-unsubscribe-from-changes\";\r\n    MessageTypeUItoBG[\"CHANGE_SETTINGS\"] = \"ui-bg-change-settings\";\r\n    MessageTypeUItoBG[\"SET_THEME\"] = \"ui-bg-set-theme\";\r\n    MessageTypeUItoBG[\"TOGGLE_ACTIVE_TAB\"] = \"ui-bg-toggle-active-tab\";\r\n    MessageTypeUItoBG[\"MARK_NEWS_AS_READ\"] = \"ui-bg-mark-news-as-read\";\r\n    MessageTypeUItoBG[\"MARK_NEWS_AS_DISPLAYED\"] =\r\n        \"ui-bg-mark-news-as-displayed\";\r\n    MessageTypeUItoBG[\"LOAD_CONFIG\"] = \"ui-bg-load-config\";\r\n    MessageTypeUItoBG[\"APPLY_DEV_DYNAMIC_THEME_FIXES\"] =\r\n        \"ui-bg-apply-dev-dynamic-theme-fixes\";\r\n    MessageTypeUItoBG[\"RESET_DEV_DYNAMIC_THEME_FIXES\"] =\r\n        \"ui-bg-reset-dev-dynamic-theme-fixes\";\r\n    MessageTypeUItoBG[\"APPLY_DEV_INVERSION_FIXES\"] =\r\n        \"ui-bg-apply-dev-inversion-fixes\";\r\n    MessageTypeUItoBG[\"RESET_DEV_INVERSION_FIXES\"] =\r\n        \"ui-bg-reset-dev-inversion-fixes\";\r\n    MessageTypeUItoBG[\"APPLY_DEV_STATIC_THEMES\"] =\r\n        \"ui-bg-apply-dev-static-themes\";\r\n    MessageTypeUItoBG[\"RESET_DEV_STATIC_THEMES\"] =\r\n        \"ui-bg-reset-dev-static-themes\";\r\n    MessageTypeUItoBG[\"START_ACTIVATION\"] = \"ui-bg-start-activation\";\r\n    MessageTypeUItoBG[\"RESET_ACTIVATION\"] = \"ui-bg-reset-activation\";\r\n    MessageTypeUItoBG[\"COLOR_SCHEME_CHANGE\"] = \"ui-bg-color-scheme-change\";\r\n    MessageTypeUItoBG[\"HIDE_HIGHLIGHTS\"] = \"ui-bg-hide-highlights\";\r\n})(MessageTypeUItoBG || (MessageTypeUItoBG = {}));\r\nvar MessageTypeBGtoUI;\r\n(function (MessageTypeBGtoUI) {\r\n    MessageTypeBGtoUI[\"CHANGES\"] = \"bg-ui-changes\";\r\n})(MessageTypeBGtoUI || (MessageTypeBGtoUI = {}));\r\nvar DebugMessageTypeBGtoUI;\r\n(function (DebugMessageTypeBGtoUI) {\r\n    DebugMessageTypeBGtoUI[\"CSS_UPDATE\"] = \"debug-bg-ui-css-update\";\r\n    DebugMessageTypeBGtoUI[\"UPDATE\"] = \"debug-bg-ui-update\";\r\n})(DebugMessageTypeBGtoUI || (DebugMessageTypeBGtoUI = {}));\r\nvar MessageTypeBGtoCS;\r\n(function (MessageTypeBGtoCS) {\r\n    MessageTypeBGtoCS[\"ADD_CSS_FILTER\"] = \"bg-cs-add-css-filter\";\r\n    MessageTypeBGtoCS[\"ADD_DYNAMIC_THEME\"] = \"bg-cs-add-dynamic-theme\";\r\n    MessageTypeBGtoCS[\"ADD_STATIC_THEME\"] = \"bg-cs-add-static-theme\";\r\n    MessageTypeBGtoCS[\"ADD_SVG_FILTER\"] = \"bg-cs-add-svg-filter\";\r\n    MessageTypeBGtoCS[\"CLEAN_UP\"] = \"bg-cs-clean-up\";\r\n    MessageTypeBGtoCS[\"FETCH_RESPONSE\"] = \"bg-cs-fetch-response\";\r\n    MessageTypeBGtoCS[\"UNSUPPORTED_SENDER\"] = \"bg-cs-unsupported-sender\";\r\n})(MessageTypeBGtoCS || (MessageTypeBGtoCS = {}));\r\nvar DebugMessageTypeBGtoCS;\r\n(function (DebugMessageTypeBGtoCS) {\r\n    DebugMessageTypeBGtoCS[\"RELOAD\"] = \"debug-bg-cs-reload\";\r\n})(DebugMessageTypeBGtoCS || (DebugMessageTypeBGtoCS = {}));\r\nvar MessageTypeCStoBG;\r\n(function (MessageTypeCStoBG) {\r\n    MessageTypeCStoBG[\"COLOR_SCHEME_CHANGE\"] = \"cs-bg-color-scheme-change\";\r\n    MessageTypeCStoBG[\"DARK_THEME_DETECTED\"] = \"cs-bg-dark-theme-detected\";\r\n    MessageTypeCStoBG[\"DARK_THEME_NOT_DETECTED\"] =\r\n        \"cs-bg-dark-theme-not-detected\";\r\n    MessageTypeCStoBG[\"FETCH\"] = \"cs-bg-fetch\";\r\n    MessageTypeCStoBG[\"DOCUMENT_CONNECT\"] = \"cs-bg-document-connect\";\r\n    MessageTypeCStoBG[\"DOCUMENT_FORGET\"] = \"cs-bg-document-forget\";\r\n    MessageTypeCStoBG[\"DOCUMENT_FREEZE\"] = \"cs-bg-document-freeze\";\r\n    MessageTypeCStoBG[\"DOCUMENT_RESUME\"] = \"cs-bg-document-resume\";\r\n})(MessageTypeCStoBG || (MessageTypeCStoBG = {}));\r\nvar DebugMessageTypeCStoBG;\r\n(function (DebugMessageTypeCStoBG) {\r\n    DebugMessageTypeCStoBG[\"LOG\"] = \"debug-cs-bg-log\";\r\n})(DebugMessageTypeCStoBG || (DebugMessageTypeCStoBG = {}));\r\nvar MessageTypeCStoUI;\r\n(function (MessageTypeCStoUI) {\r\n    MessageTypeCStoUI[\"EXPORT_CSS_RESPONSE\"] = \"cs-ui-export-css-response\";\r\n})(MessageTypeCStoUI || (MessageTypeCStoUI = {}));\r\nvar MessageTypeUItoCS;\r\n(function (MessageTypeUItoCS) {\r\n    MessageTypeUItoCS[\"EXPORT_CSS\"] = \"ui-cs-export-css\";\r\n})(MessageTypeUItoCS || (MessageTypeUItoCS = {}));\r\n\r\nconst isNavigatorDefined = typeof navigator !== \"undefined\";\r\nconst userAgent = isNavigatorDefined\r\n    ? navigator.userAgentData && Array.isArray(navigator.userAgentData.brands)\r\n        ? navigator.userAgentData.brands\r\n              .map((brand) => `${brand.brand.toLowerCase()} ${brand.version}`)\r\n              .join(\" \")\r\n        : navigator.userAgent.toLowerCase()\r\n    : \"some useragent\";\r\nconst platform = isNavigatorDefined\r\n    ? navigator.userAgentData &&\r\n      typeof navigator.userAgentData.platform === \"string\"\r\n        ? navigator.userAgentData.platform.toLowerCase()\r\n        : navigator.platform.toLowerCase()\r\n    : \"some platform\";\r\nconst isChromium =\r\n    userAgent.includes(\"chrome\") || userAgent.includes(\"chromium\");\r\nconst isFirefox =\r\n    userAgent.includes(\"firefox\") ||\r\n    userAgent.includes(\"thunderbird\") ||\r\n    userAgent.includes(\"librewolf\");\r\nconst isSafari = userAgent.includes(\"safari\") && !isChromium;\r\nconst isWindows = platform.startsWith(\"win\");\r\nconst isMacOS = platform.startsWith(\"mac\");\r\nisNavigatorDefined && navigator.userAgentData\r\n    ? navigator.userAgentData.mobile\r\n    : userAgent.includes(\"mobile\");\r\nconst isShadowDomSupported = typeof ShadowRoot === \"function\";\r\nconst isMatchMediaChangeEventListenerSupported =\r\n    typeof MediaQueryList === \"function\" &&\r\n    typeof MediaQueryList.prototype.addEventListener === \"function\";\r\nconst isLayerRuleSupported = typeof CSSLayerBlockRule === \"function\";\r\n(() => {\r\n    const m = userAgent.match(/chrom(?:e|ium)(?:\\/| )([^ ]+)/);\r\n    if (m && m[1]) {\r\n        return m[1];\r\n    }\r\n    return \"\";\r\n})();\r\n(() => {\r\n    const m = userAgent.match(/(?:firefox|librewolf)(?:\\/| )([^ ]+)/);\r\n    if (m && m[1]) {\r\n        return m[1];\r\n    }\r\n    return \"\";\r\n})();\r\nconst isDefinedSelectorSupported = (() => {\r\n    try {\r\n        document.querySelector(\":defined\");\r\n        return true;\r\n    } catch (err) {\r\n        return false;\r\n    }\r\n})();\r\nconst isCSSColorSchemePropSupported = (() => {\r\n    try {\r\n        if (typeof document === \"undefined\") {\r\n            return false;\r\n        }\r\n        const el = document.createElement(\"div\");\r\n        if (!el || typeof el.style !== \"object\") {\r\n            return false;\r\n        }\r\n        if (typeof el.style.colorScheme === \"string\") {\r\n            return true;\r\n        }\r\n        el.setAttribute(\"style\", \"color-scheme: dark\");\r\n        return el.style.colorScheme === \"dark\";\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n})();\r\n\r\nasync function getOKResponse(url, mimeType, origin) {\r\n    const credentials =\r\n        origin && url.startsWith(`${origin}/`) ? undefined : \"omit\";\r\n    const response = await fetch(url, {\r\n        cache: \"force-cache\",\r\n        credentials,\r\n        referrer: origin\r\n    });\r\n    if (\r\n        isFirefox &&\r\n        mimeType === \"text/css\" &&\r\n        url.startsWith(\"moz-extension://\") &&\r\n        url.endsWith(\".css\")\r\n    ) {\r\n        return response;\r\n    }\r\n    if (\r\n        mimeType &&\r\n        !response.headers.get(\"Content-Type\").startsWith(mimeType)\r\n    ) {\r\n        throw new Error(`Mime type mismatch when loading ${url}`);\r\n    }\r\n    if (!response.ok) {\r\n        throw new Error(\r\n            `Unable to load ${url} ${response.status} ${response.statusText}`\r\n        );\r\n    }\r\n    return response;\r\n}\r\nasync function loadAsDataURL(url, mimeType) {\r\n    const response = await getOKResponse(url, mimeType);\r\n    return await readResponseAsDataURL(response);\r\n}\r\nasync function loadAsBlob(url, mimeType) {\r\n    const response = await getOKResponse(url, mimeType);\r\n    return await response.blob();\r\n}\r\nasync function readResponseAsDataURL(response) {\r\n    const blob = await response.blob();\r\n    const dataURL = await new Promise((resolve) => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => resolve(reader.result);\r\n        reader.readAsDataURL(blob);\r\n    });\r\n    return dataURL;\r\n}\r\nasync function loadAsText(url, mimeType, origin) {\r\n    const response = await getOKResponse(url, mimeType, origin);\r\n    return await response.text();\r\n}\r\n\r\nconst throwCORSError = async (url) => {\r\n    return Promise.reject(\r\n        new Error(\r\n            [\r\n                \"Embedded Dark Reader cannot access a cross-origin resource\",\r\n                url,\r\n                \"Overview your URLs and CORS policies or use\",\r\n                \"`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.\",\r\n                \"See if using `DarkReader.setFetchMethod(window.fetch)`\",\r\n                \"before `DarkReader.enable()` works.\"\r\n            ].join(\" \")\r\n        )\r\n    );\r\n};\r\nlet fetcher = throwCORSError;\r\nfunction setFetchMethod$1(fetch) {\r\n    if (fetch) {\r\n        fetcher = fetch;\r\n    } else {\r\n        fetcher = throwCORSError;\r\n    }\r\n}\r\nasync function callFetchMethod(url) {\r\n    return await fetcher(url);\r\n}\r\n\r\nif (!window.chrome) {\r\n    window.chrome = {};\r\n}\r\nif (!chrome.runtime) {\r\n    chrome.runtime = {};\r\n}\r\nconst messageListeners = new Set();\r\nasync function sendMessage(...args) {\r\n    if (args[0] && args[0].type === MessageTypeCStoBG.FETCH) {\r\n        const {id} = args[0];\r\n        try {\r\n            const {url, responseType} = args[0].data;\r\n            const response = await callFetchMethod(url);\r\n            let text;\r\n            if (responseType === \"data-url\") {\r\n                text = await readResponseAsDataURL(response);\r\n            } else {\r\n                text = await response.text();\r\n            }\r\n            messageListeners.forEach((cb) =>\r\n                cb({\r\n                    type: MessageTypeBGtoCS.FETCH_RESPONSE,\r\n                    data: text,\r\n                    error: null,\r\n                    id\r\n                })\r\n            );\r\n        } catch (error) {\r\n            console.error(error);\r\n            messageListeners.forEach((cb) =>\r\n                cb({\r\n                    type: MessageTypeBGtoCS.FETCH_RESPONSE,\r\n                    data: null,\r\n                    error,\r\n                    id\r\n                })\r\n            );\r\n        }\r\n    }\r\n}\r\nfunction addMessageListener(callback) {\r\n    messageListeners.add(callback);\r\n}\r\nif (typeof chrome.runtime.sendMessage === \"function\") {\r\n    const nativeSendMessage = chrome.runtime.sendMessage;\r\n    chrome.runtime.sendMessage = (...args) => {\r\n        sendMessage(...args);\r\n        nativeSendMessage.apply(chrome.runtime, args);\r\n    };\r\n} else {\r\n    chrome.runtime.sendMessage = sendMessage;\r\n}\r\nif (!chrome.runtime.onMessage) {\r\n    chrome.runtime.onMessage = {};\r\n}\r\nif (typeof chrome.runtime.onMessage.addListener === \"function\") {\r\n    const nativeAddListener = chrome.runtime.onMessage.addListener;\r\n    chrome.runtime.onMessage.addListener = (...args) => {\r\n        addMessageListener(args[0]);\r\n        nativeAddListener.apply(chrome.runtime.onMessage, args);\r\n    };\r\n} else {\r\n    chrome.runtime.onMessage.addListener = (...args) =>\r\n        addMessageListener(args[0]);\r\n}\r\n\r\nvar ThemeEngine;\r\n(function (ThemeEngine) {\r\n    ThemeEngine[\"cssFilter\"] = \"cssFilter\";\r\n    ThemeEngine[\"svgFilter\"] = \"svgFilter\";\r\n    ThemeEngine[\"staticTheme\"] = \"staticTheme\";\r\n    ThemeEngine[\"dynamicTheme\"] = \"dynamicTheme\";\r\n})(ThemeEngine || (ThemeEngine = {}));\r\n\r\nvar AutomationMode;\r\n(function (AutomationMode) {\r\n    AutomationMode[\"NONE\"] = \"\";\r\n    AutomationMode[\"TIME\"] = \"time\";\r\n    AutomationMode[\"SYSTEM\"] = \"system\";\r\n    AutomationMode[\"LOCATION\"] = \"location\";\r\n})(AutomationMode || (AutomationMode = {}));\r\n\r\nconst DEFAULT_COLORS = {\r\n    darkScheme: {\r\n        background: \"#181a1b\",\r\n        text: \"#e8e6e3\"\r\n    },\r\n    lightScheme: {\r\n        background: \"#dcdad7\",\r\n        text: \"#181a1b\"\r\n    }\r\n};\r\nconst DEFAULT_THEME = {\r\n    mode: 1,\r\n    brightness: 100,\r\n    contrast: 100,\r\n    grayscale: 0,\r\n    sepia: 0,\r\n    useFont: false,\r\n    fontFamily: isMacOS\r\n        ? \"Helvetica Neue\"\r\n        : isWindows\r\n          ? \"Segoe UI\"\r\n          : \"Open Sans\",\r\n    textStroke: 0,\r\n    engine: ThemeEngine.dynamicTheme,\r\n    stylesheet: \"\",\r\n    darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,\r\n    darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,\r\n    lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,\r\n    lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,\r\n    scrollbarColor: \"\",\r\n    selectionColor: \"auto\",\r\n    styleSystemControls: !isCSSColorSchemePropSupported,\r\n    lightColorScheme: \"Default\",\r\n    darkColorScheme: \"Default\",\r\n    immediateModify: false\r\n};\r\nconst filterModeSites = [\r\n    \"*.officeapps.live.com\",\r\n    \"*.sharepoint.com\",\r\n    \"docs.google.com\",\r\n    \"onedrive.live.com\"\r\n];\r\n({\r\n    customThemes: filterModeSites.map((url) => {\r\n        const engine = ThemeEngine.cssFilter;\r\n        return {\r\n            url: [url],\r\n            theme: {...DEFAULT_THEME, engine},\r\n            builtIn: true\r\n        };\r\n    }),\r\n    automation: {\r\n        mode: AutomationMode.NONE\r\n    }\r\n});\r\n\r\nfunction getMatches(regex, input, group = 0) {\r\n    const matches = [];\r\n    let m;\r\n    while ((m = regex.exec(input))) {\r\n        matches.push(m[group]);\r\n    }\r\n    return matches;\r\n}\r\nfunction getMatchesWithOffsets(regex, input, group = 0) {\r\n    const matches = [];\r\n    let m;\r\n    while ((m = regex.exec(input))) {\r\n        matches.push({text: m[group], offset: m.index});\r\n    }\r\n    return matches;\r\n}\r\nfunction getHashCode(text) {\r\n    const len = text.length;\r\n    let hash = 0;\r\n    for (let i = 0; i < len; i++) {\r\n        const c = text.charCodeAt(i);\r\n        hash = ((hash << 5) - hash + c) & 4294967295;\r\n    }\r\n    return hash;\r\n}\r\nfunction escapeRegExpSpecialChars(input) {\r\n    return input.replaceAll(/[\\^$.*+?\\(\\)\\[\\]{}|\\-\\\\]/g, \"\\\\$&\");\r\n}\r\nfunction getParenthesesRange(input, searchStartIndex = 0) {\r\n    return getOpenCloseRange(input, searchStartIndex, \"(\", \")\", []);\r\n}\r\nfunction getOpenCloseRange(\r\n    input,\r\n    searchStartIndex,\r\n    openToken,\r\n    closeToken,\r\n    excludeRanges\r\n) {\r\n    let indexOf;\r\n    if (excludeRanges.length === 0) {\r\n        indexOf = (token, pos) => input.indexOf(token, pos);\r\n    } else {\r\n        indexOf = (token, pos) =>\r\n            indexOfExcluding(input, token, pos, excludeRanges);\r\n    }\r\n    const {length} = input;\r\n    let depth = 0;\r\n    let firstOpenIndex = -1;\r\n    for (let i = searchStartIndex; i < length; i++) {\r\n        if (depth === 0) {\r\n            const openIndex = indexOf(openToken, i);\r\n            if (openIndex < 0) {\r\n                break;\r\n            }\r\n            firstOpenIndex = openIndex;\r\n            depth++;\r\n            i = openIndex;\r\n        } else {\r\n            const closeIndex = indexOf(closeToken, i);\r\n            if (closeIndex < 0) {\r\n                break;\r\n            }\r\n            const openIndex = indexOf(openToken, i);\r\n            if (openIndex < 0 || closeIndex <= openIndex) {\r\n                depth--;\r\n                if (depth === 0) {\r\n                    return {start: firstOpenIndex, end: closeIndex + 1};\r\n                }\r\n                i = closeIndex;\r\n            } else {\r\n                depth++;\r\n                i = openIndex;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction indexOfExcluding(input, search, position, excludeRanges) {\r\n    const i = input.indexOf(search, position);\r\n    const exclusion = excludeRanges.find((r) => i >= r.start && i < r.end);\r\n    if (exclusion) {\r\n        return indexOfExcluding(input, search, exclusion.end, excludeRanges);\r\n    }\r\n    return i;\r\n}\r\nfunction splitExcluding(input, separator, excludeRanges) {\r\n    const parts = [];\r\n    let commaIndex = -1;\r\n    let currIndex = 0;\r\n    while (\r\n        (commaIndex = indexOfExcluding(\r\n            input,\r\n            separator,\r\n            currIndex,\r\n            excludeRanges\r\n        )) >= 0\r\n    ) {\r\n        parts.push(input.substring(currIndex, commaIndex).trim());\r\n        currIndex = commaIndex + 1;\r\n    }\r\n    parts.push(input.substring(currIndex).trim());\r\n    return parts;\r\n}\r\n\r\nlet anchor;\r\nconst parsedURLCache = new Map();\r\nfunction fixBaseURL($url) {\r\n    if (!anchor) {\r\n        anchor = document.createElement(\"a\");\r\n    }\r\n    anchor.href = $url;\r\n    return anchor.href;\r\n}\r\nfunction parseURL($url, $base = null) {\r\n    const key = `${$url}${$base ? `;${$base}` : \"\"}`;\r\n    if (parsedURLCache.has(key)) {\r\n        return parsedURLCache.get(key);\r\n    }\r\n    if ($base) {\r\n        const parsedURL = new URL($url, fixBaseURL($base));\r\n        parsedURLCache.set(key, parsedURL);\r\n        return parsedURL;\r\n    }\r\n    const parsedURL = new URL(fixBaseURL($url));\r\n    parsedURLCache.set($url, parsedURL);\r\n    return parsedURL;\r\n}\r\nfunction getAbsoluteURL($base, $relative) {\r\n    if ($relative.match(/^data\\\\?\\:/)) {\r\n        return $relative;\r\n    }\r\n    if (/^\\/\\//.test($relative)) {\r\n        return `${location.protocol}${$relative}`;\r\n    }\r\n    const b = parseURL($base);\r\n    const a = parseURL($relative, b.href);\r\n    return a.href;\r\n}\r\nfunction isRelativeHrefOnAbsolutePath(href) {\r\n    if (href.startsWith(\"data:\")) {\r\n        return true;\r\n    }\r\n    const url = parseURL(href);\r\n    if (url.protocol !== location.protocol) {\r\n        return false;\r\n    }\r\n    if (url.hostname !== location.hostname) {\r\n        return false;\r\n    }\r\n    if (url.port !== location.port) {\r\n        return false;\r\n    }\r\n    return url.pathname === location.pathname;\r\n}\r\n\r\nconst excludedSelectors = [\r\n    \"pre\",\r\n    \"pre *\",\r\n    \"code\",\r\n    '[aria-hidden=\"true\"]',\r\n    '[class*=\"fa-\"]',\r\n    \".fa\",\r\n    \".fab\",\r\n    \".fad\",\r\n    \".fal\",\r\n    \".far\",\r\n    \".fas\",\r\n    \".fass\",\r\n    \".fasr\",\r\n    \".fat\",\r\n    \".icofont\",\r\n    '[style*=\"font-\"]',\r\n    '[class*=\"icon\"]',\r\n    '[class*=\"Icon\"]',\r\n    '[class*=\"symbol\"]',\r\n    '[class*=\"Symbol\"]',\r\n    \".glyphicon\",\r\n    '[class*=\"material-symbol\"]',\r\n    '[class*=\"material-icon\"]',\r\n    \"mu\",\r\n    '[class*=\"mu-\"]',\r\n    \".typcn\",\r\n    '[class*=\"vjs-\"]'\r\n];\r\nfunction createTextStyle(config) {\r\n    const lines = [];\r\n    lines.push(`*:not(${excludedSelectors.join(\", \")}) {`);\r\n    if (config.useFont && config.fontFamily) {\r\n        lines.push(`  font-family: ${config.fontFamily} !important;`);\r\n    }\r\n    if (config.textStroke > 0) {\r\n        lines.push(`  -webkit-text-stroke: ${config.textStroke}px !important;`);\r\n        lines.push(`  text-stroke: ${config.textStroke}px !important;`);\r\n    }\r\n    lines.push(\"}\");\r\n    return lines.join(\"\\n\");\r\n}\r\n\r\nfunction isArrayLike(items) {\r\n    return items.length != null;\r\n}\r\nfunction forEach(items, iterator) {\r\n    if (isArrayLike(items)) {\r\n        for (let i = 0, len = items.length; i < len; i++) {\r\n            iterator(items[i]);\r\n        }\r\n    } else {\r\n        for (const item of items) {\r\n            iterator(item);\r\n        }\r\n    }\r\n}\r\nfunction push(array, addition) {\r\n    forEach(addition, (a) => array.push(a));\r\n}\r\nfunction toArray(items) {\r\n    const results = [];\r\n    for (let i = 0, len = items.length; i < len; i++) {\r\n        results.push(items[i]);\r\n    }\r\n    return results;\r\n}\r\n\r\nfunction scale(x, inLow, inHigh, outLow, outHigh) {\r\n    return ((x - inLow) * (outHigh - outLow)) / (inHigh - inLow) + outLow;\r\n}\r\nfunction clamp(x, min, max) {\r\n    return Math.min(max, Math.max(min, x));\r\n}\r\nfunction multiplyMatrices(m1, m2) {\r\n    const result = [];\r\n    for (let i = 0, len = m1.length; i < len; i++) {\r\n        result[i] = [];\r\n        for (let j = 0, len2 = m2[0].length; j < len2; j++) {\r\n            let sum = 0;\r\n            for (let k = 0, len3 = m1[0].length; k < len3; k++) {\r\n                sum += m1[i][k] * m2[k][j];\r\n            }\r\n            result[i][j] = sum;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction createFilterMatrix(config) {\r\n    let m = Matrix.identity();\r\n    if (config.sepia !== 0) {\r\n        m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));\r\n    }\r\n    if (config.grayscale !== 0) {\r\n        m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));\r\n    }\r\n    if (config.contrast !== 100) {\r\n        m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));\r\n    }\r\n    if (config.brightness !== 100) {\r\n        m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));\r\n    }\r\n    if (config.mode === 1) {\r\n        m = multiplyMatrices(m, Matrix.invertNHue());\r\n    }\r\n    return m;\r\n}\r\nfunction applyColorMatrix([r, g, b], matrix) {\r\n    const rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];\r\n    const result = multiplyMatrices(matrix, rgb);\r\n    return [0, 1, 2].map((i) => clamp(Math.round(result[i][0] * 255), 0, 255));\r\n}\r\nconst Matrix = {\r\n    identity() {\r\n        return [\r\n            [1, 0, 0, 0, 0],\r\n            [0, 1, 0, 0, 0],\r\n            [0, 0, 1, 0, 0],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    invertNHue() {\r\n        return [\r\n            [0.333, -0.667, -0.667, 0, 1],\r\n            [-0.667, 0.333, -0.667, 0, 1],\r\n            [-0.667, -0.667, 0.333, 0, 1],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    brightness(v) {\r\n        return [\r\n            [v, 0, 0, 0, 0],\r\n            [0, v, 0, 0, 0],\r\n            [0, 0, v, 0, 0],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    contrast(v) {\r\n        const t = (1 - v) / 2;\r\n        return [\r\n            [v, 0, 0, 0, t],\r\n            [0, v, 0, 0, t],\r\n            [0, 0, v, 0, t],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    sepia(v) {\r\n        return [\r\n            [\r\n                0.393 + 0.607 * (1 - v),\r\n                0.769 - 0.769 * (1 - v),\r\n                0.189 - 0.189 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.349 - 0.349 * (1 - v),\r\n                0.686 + 0.314 * (1 - v),\r\n                0.168 - 0.168 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.272 - 0.272 * (1 - v),\r\n                0.534 - 0.534 * (1 - v),\r\n                0.131 + 0.869 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    },\r\n    grayscale(v) {\r\n        return [\r\n            [\r\n                0.2126 + 0.7874 * (1 - v),\r\n                0.7152 - 0.7152 * (1 - v),\r\n                0.0722 - 0.0722 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.2126 - 0.2126 * (1 - v),\r\n                0.7152 + 0.2848 * (1 - v),\r\n                0.0722 - 0.0722 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [\r\n                0.2126 - 0.2126 * (1 - v),\r\n                0.7152 - 0.7152 * (1 - v),\r\n                0.0722 + 0.9278 * (1 - v),\r\n                0,\r\n                0\r\n            ],\r\n            [0, 0, 0, 1, 0],\r\n            [0, 0, 0, 0, 1]\r\n        ];\r\n    }\r\n};\r\n\r\nvar FilterMode;\r\n(function (FilterMode) {\r\n    FilterMode[(FilterMode[\"light\"] = 0)] = \"light\";\r\n    FilterMode[(FilterMode[\"dark\"] = 1)] = \"dark\";\r\n})(FilterMode || (FilterMode = {}));\r\nfunction getCSSFilterValue(config) {\r\n    const filters = [];\r\n    if (config.mode === FilterMode.dark) {\r\n        filters.push(\"invert(100%) hue-rotate(180deg)\");\r\n    }\r\n    if (config.brightness !== 100) {\r\n        filters.push(`brightness(${config.brightness}%)`);\r\n    }\r\n    if (config.contrast !== 100) {\r\n        filters.push(`contrast(${config.contrast}%)`);\r\n    }\r\n    if (config.grayscale !== 0) {\r\n        filters.push(`grayscale(${config.grayscale}%)`);\r\n    }\r\n    if (config.sepia !== 0) {\r\n        filters.push(`sepia(${config.sepia}%)`);\r\n    }\r\n    if (filters.length === 0) {\r\n        return null;\r\n    }\r\n    return filters.join(\" \");\r\n}\r\n\r\nfunction evalMath(expression) {\r\n    const rpnStack = [];\r\n    const workingStack = [];\r\n    let lastToken;\r\n    for (let i = 0, len = expression.length; i < len; i++) {\r\n        const token = expression[i];\r\n        if (!token || token === \" \") {\r\n            continue;\r\n        }\r\n        if (operators.has(token)) {\r\n            const op = operators.get(token);\r\n            while (workingStack.length) {\r\n                const currentOp = operators.get(workingStack[0]);\r\n                if (!currentOp) {\r\n                    break;\r\n                }\r\n                if (op.lessOrEqualThan(currentOp)) {\r\n                    rpnStack.push(workingStack.shift());\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            workingStack.unshift(token);\r\n        } else if (!lastToken || operators.has(lastToken)) {\r\n            rpnStack.push(token);\r\n        } else {\r\n            rpnStack[rpnStack.length - 1] += token;\r\n        }\r\n        lastToken = token;\r\n    }\r\n    rpnStack.push(...workingStack);\r\n    const stack = [];\r\n    for (let i = 0, len = rpnStack.length; i < len; i++) {\r\n        const op = operators.get(rpnStack[i]);\r\n        if (op) {\r\n            const args = stack.splice(0, 2);\r\n            stack.push(op.exec(args[1], args[0]));\r\n        } else {\r\n            stack.unshift(parseFloat(rpnStack[i]));\r\n        }\r\n    }\r\n    return stack[0];\r\n}\r\nclass Operator {\r\n    constructor(precedence, method) {\r\n        this.precendce = precedence;\r\n        this.execMethod = method;\r\n    }\r\n    exec(left, right) {\r\n        return this.execMethod(left, right);\r\n    }\r\n    lessOrEqualThan(op) {\r\n        return this.precendce <= op.precendce;\r\n    }\r\n}\r\nconst operators = new Map([\r\n    [\"+\", new Operator(1, (left, right) => left + right)],\r\n    [\"-\", new Operator(1, (left, right) => left - right)],\r\n    [\"*\", new Operator(2, (left, right) => left * right)],\r\n    [\"/\", new Operator(2, (left, right) => left / right)]\r\n]);\r\n\r\nconst isSystemDarkModeEnabled = () =>\r\n    matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n\r\nconst hslaParseCache = new Map();\r\nconst rgbaParseCache = new Map();\r\nfunction parseColorWithCache($color) {\r\n    $color = $color.trim();\r\n    if (rgbaParseCache.has($color)) {\r\n        return rgbaParseCache.get($color);\r\n    }\r\n    if ($color.includes(\"calc(\")) {\r\n        $color = lowerCalcExpression($color);\r\n    }\r\n    const color = parse($color);\r\n    if (color) {\r\n        rgbaParseCache.set($color, color);\r\n        return color;\r\n    }\r\n    return null;\r\n}\r\nfunction parseToHSLWithCache(color) {\r\n    if (hslaParseCache.has(color)) {\r\n        return hslaParseCache.get(color);\r\n    }\r\n    const rgb = parseColorWithCache(color);\r\n    if (!rgb) {\r\n        return null;\r\n    }\r\n    const hsl = rgbToHSL(rgb);\r\n    hslaParseCache.set(color, hsl);\r\n    return hsl;\r\n}\r\nfunction clearColorCache() {\r\n    hslaParseCache.clear();\r\n    rgbaParseCache.clear();\r\n}\r\nfunction hslToRGB({h, s, l, a = 1}) {\r\n    if (s === 0) {\r\n        const [r, b, g] = [l, l, l].map((x) => Math.round(x * 255));\r\n        return {r, g, b, a};\r\n    }\r\n    const c = (1 - Math.abs(2 * l - 1)) * s;\r\n    const x = c * (1 - Math.abs(((h / 60) % 2) - 1));\r\n    const m = l - c / 2;\r\n    const [r, g, b] = (\r\n        h < 60\r\n            ? [c, x, 0]\r\n            : h < 120\r\n              ? [x, c, 0]\r\n              : h < 180\r\n                ? [0, c, x]\r\n                : h < 240\r\n                  ? [0, x, c]\r\n                  : h < 300\r\n                    ? [x, 0, c]\r\n                    : [c, 0, x]\r\n    ).map((n) => Math.round((n + m) * 255));\r\n    return {r, g, b, a};\r\n}\r\nfunction rgbToHSL({r: r255, g: g255, b: b255, a = 1}) {\r\n    const r = r255 / 255;\r\n    const g = g255 / 255;\r\n    const b = b255 / 255;\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    const c = max - min;\r\n    const l = (max + min) / 2;\r\n    if (c === 0) {\r\n        return {h: 0, s: 0, l, a};\r\n    }\r\n    let h =\r\n        (max === r\r\n            ? ((g - b) / c) % 6\r\n            : max === g\r\n              ? (b - r) / c + 2\r\n              : (r - g) / c + 4) * 60;\r\n    if (h < 0) {\r\n        h += 360;\r\n    }\r\n    const s = c / (1 - Math.abs(2 * l - 1));\r\n    return {h, s, l, a};\r\n}\r\nfunction toFixed(n, digits = 0) {\r\n    const fixed = n.toFixed(digits);\r\n    if (digits === 0) {\r\n        return fixed;\r\n    }\r\n    const dot = fixed.indexOf(\".\");\r\n    if (dot >= 0) {\r\n        const zerosMatch = fixed.match(/0+$/);\r\n        if (zerosMatch) {\r\n            if (zerosMatch.index === dot + 1) {\r\n                return fixed.substring(0, dot);\r\n            }\r\n            return fixed.substring(0, zerosMatch.index);\r\n        }\r\n    }\r\n    return fixed;\r\n}\r\nfunction rgbToString(rgb) {\r\n    const {r, g, b, a} = rgb;\r\n    if (a != null && a < 1) {\r\n        return `rgba(${toFixed(r)}, ${toFixed(g)}, ${toFixed(b)}, ${toFixed(a, 2)})`;\r\n    }\r\n    return `rgb(${toFixed(r)}, ${toFixed(g)}, ${toFixed(b)})`;\r\n}\r\nfunction rgbToHexString({r, g, b, a}) {\r\n    return `#${(a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b])\r\n        .map((x) => {\r\n            return `${x < 16 ? \"0\" : \"\"}${x.toString(16)}`;\r\n        })\r\n        .join(\"\")}`;\r\n}\r\nfunction hslToString(hsl) {\r\n    const {h, s, l, a} = hsl;\r\n    if (a != null && a < 1) {\r\n        return `hsla(${toFixed(h)}, ${toFixed(s * 100)}%, ${toFixed(l * 100)}%, ${toFixed(a, 2)})`;\r\n    }\r\n    return `hsl(${toFixed(h)}, ${toFixed(s * 100)}%, ${toFixed(l * 100)}%)`;\r\n}\r\nconst rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;\r\nconst hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;\r\nconst hexMatch = /^#[0-9a-f]+$/i;\r\nconst supportedColorFuncs = [\r\n    \"color\",\r\n    \"color-mix\",\r\n    \"hwb\",\r\n    \"lab\",\r\n    \"lch\",\r\n    \"oklab\",\r\n    \"oklch\"\r\n];\r\nfunction parse($color) {\r\n    const c = $color.trim().toLowerCase();\r\n    if (c.includes(\"(from \")) {\r\n        if (c.indexOf(\"(from\") !== c.lastIndexOf(\"(from\")) {\r\n            return null;\r\n        }\r\n        return domParseColor(c);\r\n    }\r\n    if (c.match(rgbMatch)) {\r\n        if (c.startsWith(\"rgb(#\") || c.startsWith(\"rgba(#\")) {\r\n            if (c.lastIndexOf(\"rgb\") > 0) {\r\n                return null;\r\n            }\r\n            return domParseColor(c);\r\n        }\r\n        return parseRGB(c);\r\n    }\r\n    if (c.match(hslMatch)) {\r\n        return parseHSL(c);\r\n    }\r\n    if (c.match(hexMatch)) {\r\n        return parseHex(c);\r\n    }\r\n    if (knownColors.has(c)) {\r\n        return getColorByName(c);\r\n    }\r\n    if (systemColors.has(c)) {\r\n        return getSystemColor(c);\r\n    }\r\n    if (c === \"transparent\") {\r\n        return {r: 0, g: 0, b: 0, a: 0};\r\n    }\r\n    if (\r\n        c.endsWith(\")\") &&\r\n        supportedColorFuncs.some(\r\n            (fn) =>\r\n                c.startsWith(fn) &&\r\n                c[fn.length] === \"(\" &&\r\n                c.lastIndexOf(fn) === 0\r\n        )\r\n    ) {\r\n        return domParseColor(c);\r\n    }\r\n    if (c.startsWith(\"light-dark(\") && c.endsWith(\")\")) {\r\n        const match = c.match(\r\n            /^light-dark\\(\\s*([a-z]+(\\(.*\\))?),\\s*([a-z]+(\\(.*\\))?)\\s*\\)$/\r\n        );\r\n        if (match) {\r\n            const schemeColor = isSystemDarkModeEnabled() ? match[3] : match[1];\r\n            return parse(schemeColor);\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getNumbers($color) {\r\n    const numbers = [];\r\n    let prevPos = 0;\r\n    let isMining = false;\r\n    const startIndex = $color.indexOf(\"(\");\r\n    $color = $color.substring(startIndex + 1, $color.length - 1);\r\n    for (let i = 0; i < $color.length; i++) {\r\n        const c = $color[i];\r\n        if ((c >= \"0\" && c <= \"9\") || c === \".\" || c === \"+\" || c === \"-\") {\r\n            isMining = true;\r\n        } else if (isMining && (c === \" \" || c === \",\" || c === \"/\")) {\r\n            numbers.push($color.substring(prevPos, i));\r\n            isMining = false;\r\n            prevPos = i + 1;\r\n        } else if (!isMining) {\r\n            prevPos = i + 1;\r\n        }\r\n    }\r\n    if (isMining) {\r\n        numbers.push($color.substring(prevPos, $color.length));\r\n    }\r\n    return numbers;\r\n}\r\nfunction getNumbersFromString(str, range, units) {\r\n    const raw = getNumbers(str);\r\n    const unitsList = Object.entries(units);\r\n    const numbers = raw\r\n        .map((r) => r.trim())\r\n        .map((r, i) => {\r\n            let n;\r\n            const unit = unitsList.find(([u]) => r.endsWith(u));\r\n            if (unit) {\r\n                n =\r\n                    (parseFloat(r.substring(0, r.length - unit[0].length)) /\r\n                        unit[1]) *\r\n                    range[i];\r\n            } else {\r\n                n = parseFloat(r);\r\n            }\r\n            if (range[i] > 1) {\r\n                return Math.round(n);\r\n            }\r\n            return n;\r\n        });\r\n    return numbers;\r\n}\r\nconst rgbRange = [255, 255, 255, 1];\r\nconst rgbUnits = {\"%\": 100};\r\nfunction parseRGB($rgb) {\r\n    const [r, g, b, a = 1] = getNumbersFromString($rgb, rgbRange, rgbUnits);\r\n    if (r == null || g == null || b == null || a == null) {\r\n        return null;\r\n    }\r\n    return {r, g, b, a};\r\n}\r\nconst hslRange = [360, 1, 1, 1];\r\nconst hslUnits = {\"%\": 100, \"deg\": 360, \"rad\": 2 * Math.PI, \"turn\": 1};\r\nfunction parseHSL($hsl) {\r\n    const [h, s, l, a = 1] = getNumbersFromString($hsl, hslRange, hslUnits);\r\n    if (h == null || s == null || l == null || a == null) {\r\n        return null;\r\n    }\r\n    return hslToRGB({h, s, l, a});\r\n}\r\nfunction parseHex($hex) {\r\n    const h = $hex.substring(1);\r\n    switch (h.length) {\r\n        case 3:\r\n        case 4: {\r\n            const [r, g, b] = [0, 1, 2].map((i) =>\r\n                parseInt(`${h[i]}${h[i]}`, 16)\r\n            );\r\n            const a = h.length === 3 ? 1 : parseInt(`${h[3]}${h[3]}`, 16) / 255;\r\n            return {r, g, b, a};\r\n        }\r\n        case 6:\r\n        case 8: {\r\n            const [r, g, b] = [0, 2, 4].map((i) =>\r\n                parseInt(h.substring(i, i + 2), 16)\r\n            );\r\n            const a =\r\n                h.length === 6 ? 1 : parseInt(h.substring(6, 8), 16) / 255;\r\n            return {r, g, b, a};\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getColorByName($color) {\r\n    const n = knownColors.get($color);\r\n    return {\r\n        r: (n >> 16) & 255,\r\n        g: (n >> 8) & 255,\r\n        b: (n >> 0) & 255,\r\n        a: 1\r\n    };\r\n}\r\nfunction getSystemColor($color) {\r\n    const n = systemColors.get($color);\r\n    return {\r\n        r: (n >> 16) & 255,\r\n        g: (n >> 8) & 255,\r\n        b: (n >> 0) & 255,\r\n        a: 1\r\n    };\r\n}\r\nfunction lowerCalcExpression(color) {\r\n    let searchIndex = 0;\r\n    const replaceBetweenIndices = (start, end, replacement) => {\r\n        color = color.substring(0, start) + replacement + color.substring(end);\r\n    };\r\n    while ((searchIndex = color.indexOf(\"calc(\")) !== -1) {\r\n        const range = getParenthesesRange(color, searchIndex);\r\n        if (!range) {\r\n            break;\r\n        }\r\n        let slice = color.slice(range.start + 1, range.end - 1);\r\n        const includesPercentage = slice.includes(\"%\");\r\n        slice = slice.split(\"%\").join(\"\");\r\n        const output = Math.round(evalMath(slice));\r\n        replaceBetweenIndices(\r\n            range.start - 4,\r\n            range.end,\r\n            output + (includesPercentage ? \"%\" : \"\")\r\n        );\r\n    }\r\n    return color;\r\n}\r\nconst knownColors = new Map(\r\n    Object.entries({\r\n        aliceblue: 0xf0f8ff,\r\n        antiquewhite: 0xfaebd7,\r\n        aqua: 0x00ffff,\r\n        aquamarine: 0x7fffd4,\r\n        azure: 0xf0ffff,\r\n        beige: 0xf5f5dc,\r\n        bisque: 0xffe4c4,\r\n        black: 0x000000,\r\n        blanchedalmond: 0xffebcd,\r\n        blue: 0x0000ff,\r\n        blueviolet: 0x8a2be2,\r\n        brown: 0xa52a2a,\r\n        burlywood: 0xdeb887,\r\n        cadetblue: 0x5f9ea0,\r\n        chartreuse: 0x7fff00,\r\n        chocolate: 0xd2691e,\r\n        coral: 0xff7f50,\r\n        cornflowerblue: 0x6495ed,\r\n        cornsilk: 0xfff8dc,\r\n        crimson: 0xdc143c,\r\n        cyan: 0x00ffff,\r\n        darkblue: 0x00008b,\r\n        darkcyan: 0x008b8b,\r\n        darkgoldenrod: 0xb8860b,\r\n        darkgray: 0xa9a9a9,\r\n        darkgrey: 0xa9a9a9,\r\n        darkgreen: 0x006400,\r\n        darkkhaki: 0xbdb76b,\r\n        darkmagenta: 0x8b008b,\r\n        darkolivegreen: 0x556b2f,\r\n        darkorange: 0xff8c00,\r\n        darkorchid: 0x9932cc,\r\n        darkred: 0x8b0000,\r\n        darksalmon: 0xe9967a,\r\n        darkseagreen: 0x8fbc8f,\r\n        darkslateblue: 0x483d8b,\r\n        darkslategray: 0x2f4f4f,\r\n        darkslategrey: 0x2f4f4f,\r\n        darkturquoise: 0x00ced1,\r\n        darkviolet: 0x9400d3,\r\n        deeppink: 0xff1493,\r\n        deepskyblue: 0x00bfff,\r\n        dimgray: 0x696969,\r\n        dimgrey: 0x696969,\r\n        dodgerblue: 0x1e90ff,\r\n        firebrick: 0xb22222,\r\n        floralwhite: 0xfffaf0,\r\n        forestgreen: 0x228b22,\r\n        fuchsia: 0xff00ff,\r\n        gainsboro: 0xdcdcdc,\r\n        ghostwhite: 0xf8f8ff,\r\n        gold: 0xffd700,\r\n        goldenrod: 0xdaa520,\r\n        gray: 0x808080,\r\n        grey: 0x808080,\r\n        green: 0x008000,\r\n        greenyellow: 0xadff2f,\r\n        honeydew: 0xf0fff0,\r\n        hotpink: 0xff69b4,\r\n        indianred: 0xcd5c5c,\r\n        indigo: 0x4b0082,\r\n        ivory: 0xfffff0,\r\n        khaki: 0xf0e68c,\r\n        lavender: 0xe6e6fa,\r\n        lavenderblush: 0xfff0f5,\r\n        lawngreen: 0x7cfc00,\r\n        lemonchiffon: 0xfffacd,\r\n        lightblue: 0xadd8e6,\r\n        lightcoral: 0xf08080,\r\n        lightcyan: 0xe0ffff,\r\n        lightgoldenrodyellow: 0xfafad2,\r\n        lightgray: 0xd3d3d3,\r\n        lightgrey: 0xd3d3d3,\r\n        lightgreen: 0x90ee90,\r\n        lightpink: 0xffb6c1,\r\n        lightsalmon: 0xffa07a,\r\n        lightseagreen: 0x20b2aa,\r\n        lightskyblue: 0x87cefa,\r\n        lightslategray: 0x778899,\r\n        lightslategrey: 0x778899,\r\n        lightsteelblue: 0xb0c4de,\r\n        lightyellow: 0xffffe0,\r\n        lime: 0x00ff00,\r\n        limegreen: 0x32cd32,\r\n        linen: 0xfaf0e6,\r\n        magenta: 0xff00ff,\r\n        maroon: 0x800000,\r\n        mediumaquamarine: 0x66cdaa,\r\n        mediumblue: 0x0000cd,\r\n        mediumorchid: 0xba55d3,\r\n        mediumpurple: 0x9370db,\r\n        mediumseagreen: 0x3cb371,\r\n        mediumslateblue: 0x7b68ee,\r\n        mediumspringgreen: 0x00fa9a,\r\n        mediumturquoise: 0x48d1cc,\r\n        mediumvioletred: 0xc71585,\r\n        midnightblue: 0x191970,\r\n        mintcream: 0xf5fffa,\r\n        mistyrose: 0xffe4e1,\r\n        moccasin: 0xffe4b5,\r\n        navajowhite: 0xffdead,\r\n        navy: 0x000080,\r\n        oldlace: 0xfdf5e6,\r\n        olive: 0x808000,\r\n        olivedrab: 0x6b8e23,\r\n        orange: 0xffa500,\r\n        orangered: 0xff4500,\r\n        orchid: 0xda70d6,\r\n        palegoldenrod: 0xeee8aa,\r\n        palegreen: 0x98fb98,\r\n        paleturquoise: 0xafeeee,\r\n        palevioletred: 0xdb7093,\r\n        papayawhip: 0xffefd5,\r\n        peachpuff: 0xffdab9,\r\n        peru: 0xcd853f,\r\n        pink: 0xffc0cb,\r\n        plum: 0xdda0dd,\r\n        powderblue: 0xb0e0e6,\r\n        purple: 0x800080,\r\n        rebeccapurple: 0x663399,\r\n        red: 0xff0000,\r\n        rosybrown: 0xbc8f8f,\r\n        royalblue: 0x4169e1,\r\n        saddlebrown: 0x8b4513,\r\n        salmon: 0xfa8072,\r\n        sandybrown: 0xf4a460,\r\n        seagreen: 0x2e8b57,\r\n        seashell: 0xfff5ee,\r\n        sienna: 0xa0522d,\r\n        silver: 0xc0c0c0,\r\n        skyblue: 0x87ceeb,\r\n        slateblue: 0x6a5acd,\r\n        slategray: 0x708090,\r\n        slategrey: 0x708090,\r\n        snow: 0xfffafa,\r\n        springgreen: 0x00ff7f,\r\n        steelblue: 0x4682b4,\r\n        tan: 0xd2b48c,\r\n        teal: 0x008080,\r\n        thistle: 0xd8bfd8,\r\n        tomato: 0xff6347,\r\n        turquoise: 0x40e0d0,\r\n        violet: 0xee82ee,\r\n        wheat: 0xf5deb3,\r\n        white: 0xffffff,\r\n        whitesmoke: 0xf5f5f5,\r\n        yellow: 0xffff00,\r\n        yellowgreen: 0x9acd32\r\n    })\r\n);\r\nconst systemColors = new Map(\r\n    Object.entries({\r\n        \"ActiveBorder\": 0x3b99fc,\r\n        \"ActiveCaption\": 0x000000,\r\n        \"AppWorkspace\": 0xaaaaaa,\r\n        \"Background\": 0x6363ce,\r\n        \"ButtonFace\": 0xffffff,\r\n        \"ButtonHighlight\": 0xe9e9e9,\r\n        \"ButtonShadow\": 0x9fa09f,\r\n        \"ButtonText\": 0x000000,\r\n        \"CaptionText\": 0x000000,\r\n        \"GrayText\": 0x7f7f7f,\r\n        \"Highlight\": 0xb2d7ff,\r\n        \"HighlightText\": 0x000000,\r\n        \"InactiveBorder\": 0xffffff,\r\n        \"InactiveCaption\": 0xffffff,\r\n        \"InactiveCaptionText\": 0x000000,\r\n        \"InfoBackground\": 0xfbfcc5,\r\n        \"InfoText\": 0x000000,\r\n        \"Menu\": 0xf6f6f6,\r\n        \"MenuText\": 0xffffff,\r\n        \"Scrollbar\": 0xaaaaaa,\r\n        \"ThreeDDarkShadow\": 0x000000,\r\n        \"ThreeDFace\": 0xc0c0c0,\r\n        \"ThreeDHighlight\": 0xffffff,\r\n        \"ThreeDLightShadow\": 0xffffff,\r\n        \"ThreeDShadow\": 0x000000,\r\n        \"Window\": 0xececec,\r\n        \"WindowFrame\": 0xaaaaaa,\r\n        \"WindowText\": 0x000000,\r\n        \"-webkit-focus-ring-color\": 0xe59700\r\n    }).map(([key, value]) => [key.toLowerCase(), value])\r\n);\r\nfunction getSRGBLightness(r, g, b) {\r\n    return (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;\r\n}\r\nlet canvas$1;\r\nlet context$1;\r\nfunction domParseColor($color) {\r\n    if (!context$1) {\r\n        canvas$1 = document.createElement(\"canvas\");\r\n        canvas$1.width = 1;\r\n        canvas$1.height = 1;\r\n        context$1 = canvas$1.getContext(\"2d\", {willReadFrequently: true});\r\n    }\r\n    context$1.fillStyle = $color;\r\n    context$1.fillRect(0, 0, 1, 1);\r\n    const d = context$1.getImageData(0, 0, 1, 1).data;\r\n    const color = `rgba(${d[0]}, ${d[1]}, ${d[2]}, ${(d[3] / 255).toFixed(2)})`;\r\n    return parseRGB(color);\r\n}\r\n\r\nfunction throttle(callback) {\r\n    let pending = false;\r\n    let frameId = null;\r\n    let lastArgs;\r\n    const throttled = (...args) => {\r\n        lastArgs = args;\r\n        if (frameId) {\r\n            pending = true;\r\n        } else {\r\n            callback(...lastArgs);\r\n            frameId = requestAnimationFrame(() => {\r\n                frameId = null;\r\n                if (pending) {\r\n                    callback(...lastArgs);\r\n                    pending = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    const cancel = () => {\r\n        cancelAnimationFrame(frameId);\r\n        pending = false;\r\n        frameId = null;\r\n    };\r\n    return Object.assign(throttled, {cancel});\r\n}\r\nfunction createAsyncTasksQueue() {\r\n    const tasks = [];\r\n    let frameId = null;\r\n    function runTasks() {\r\n        let task;\r\n        while ((task = tasks.shift())) {\r\n            task();\r\n        }\r\n        frameId = null;\r\n    }\r\n    function add(task) {\r\n        tasks.push(task);\r\n        if (!frameId) {\r\n            frameId = requestAnimationFrame(runTasks);\r\n        }\r\n    }\r\n    function cancel() {\r\n        tasks.splice(0);\r\n        cancelAnimationFrame(frameId);\r\n        frameId = null;\r\n    }\r\n    return {add, cancel};\r\n}\r\nconst delayTokens = new Set();\r\nfunction requestAnimationFrameOnce(token, callback) {\r\n    if (delayTokens.has(token)) {\r\n        return;\r\n    }\r\n    delayTokens.add(token);\r\n    requestAnimationFrame(() => {\r\n        delayTokens.delete(token);\r\n        callback();\r\n    });\r\n}\r\n\r\nfunction hexify(number) {\r\n    return (number < 16 ? \"0\" : \"\") + number.toString(16);\r\n}\r\nfunction generateUID() {\r\n    if (\"randomUUID\" in crypto) {\r\n        const uuid = crypto.randomUUID();\r\n        return (\r\n            uuid.substring(0, 8) +\r\n            uuid.substring(9, 13) +\r\n            uuid.substring(14, 18) +\r\n            uuid.substring(19, 23) +\r\n            uuid.substring(24)\r\n        );\r\n    }\r\n    if (\"getRandomValues\" in crypto) {\r\n        return Array.from(crypto.getRandomValues(new Uint8Array(16)))\r\n            .map((x) => hexify(x))\r\n            .join(\"\");\r\n    }\r\n    return Math.floor(Math.random() * 2 ** 55).toString(36);\r\n}\r\n\r\nlet documentVisibilityListener = null;\r\nlet documentIsVisible_ = !document.hidden;\r\nconst listenerOptions = {\r\n    capture: true,\r\n    passive: true\r\n};\r\nfunction watchForDocumentVisibility() {\r\n    document.addEventListener(\r\n        \"visibilitychange\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.addEventListener(\r\n        \"pageshow\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.addEventListener(\r\n        \"focus\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n}\r\nfunction stopWatchingForDocumentVisibility() {\r\n    document.removeEventListener(\r\n        \"visibilitychange\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.removeEventListener(\r\n        \"pageshow\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n    window.removeEventListener(\r\n        \"focus\",\r\n        documentVisibilityListener,\r\n        listenerOptions\r\n    );\r\n}\r\nfunction setDocumentVisibilityListener(callback) {\r\n    const alreadyWatching = Boolean(documentVisibilityListener);\r\n    documentVisibilityListener = () => {\r\n        if (!document.hidden) {\r\n            removeDocumentVisibilityListener();\r\n            callback();\r\n            documentIsVisible_ = true;\r\n        }\r\n    };\r\n    if (!alreadyWatching) {\r\n        watchForDocumentVisibility();\r\n    }\r\n}\r\nfunction removeDocumentVisibilityListener() {\r\n    stopWatchingForDocumentVisibility();\r\n    documentVisibilityListener = null;\r\n}\r\nfunction documentIsVisible() {\r\n    return documentIsVisible_;\r\n}\r\n\r\nfunction getDuration(time) {\r\n    let duration = 0;\r\n    if (time.seconds) {\r\n        duration += time.seconds * 1000;\r\n    }\r\n    if (time.minutes) {\r\n        duration += time.minutes * 60 * 1000;\r\n    }\r\n    if (time.hours) {\r\n        duration += time.hours * 60 * 60 * 1000;\r\n    }\r\n    if (time.days) {\r\n        duration += time.days * 24 * 60 * 60 * 1000;\r\n    }\r\n    return duration;\r\n}\r\n\r\nfunction logInfo(...args) {}\r\nfunction logWarn(...args) {}\r\nfunction logAssert(...args) {}\r\nfunction ASSERT(description, condition) {\r\n    if (!condition) {\r\n        logAssert(description);\r\n    }\r\n}\r\n\r\nfunction removeNode(node) {\r\n    node && node.parentNode && node.parentNode.removeChild(node);\r\n}\r\nfunction watchForNodePosition(node, mode, onRestore = Function.prototype) {\r\n    const MAX_ATTEMPTS_COUNT = 10;\r\n    const RETRY_TIMEOUT = getDuration({seconds: 2});\r\n    const ATTEMPTS_INTERVAL = getDuration({seconds: 10});\r\n    let prevSibling = node.previousSibling;\r\n    let parent = node.parentNode;\r\n    if (!parent) {\r\n        throw new Error(\r\n            \"Unable to watch for node position: parent element not found\"\r\n        );\r\n    }\r\n    if (mode === \"prev-sibling\" && !prevSibling) {\r\n        throw new Error(\r\n            \"Unable to watch for node position: there is no previous sibling\"\r\n        );\r\n    }\r\n    let attempts = 0;\r\n    let start = null;\r\n    let timeoutId = null;\r\n    const restore = throttle(() => {\r\n        if (timeoutId) {\r\n            return;\r\n        }\r\n        attempts++;\r\n        const now = Date.now();\r\n        if (start == null) {\r\n            start = now;\r\n        } else if (attempts >= MAX_ATTEMPTS_COUNT) {\r\n            if (now - start < ATTEMPTS_INTERVAL) {\r\n                logWarn(\r\n                    `Node position watcher paused: retry in ${RETRY_TIMEOUT}ms`,\r\n                    node,\r\n                    prevSibling\r\n                );\r\n                timeoutId = setTimeout(() => {\r\n                    start = null;\r\n                    attempts = 0;\r\n                    timeoutId = null;\r\n                    restore();\r\n                }, RETRY_TIMEOUT);\r\n                return;\r\n            }\r\n            start = now;\r\n            attempts = 1;\r\n        }\r\n        if (mode === \"head\") {\r\n            if (prevSibling && prevSibling.parentNode !== parent) {\r\n                logWarn(\r\n                    \"Sibling moved, moving node to the head end\",\r\n                    node,\r\n                    prevSibling,\r\n                    parent\r\n                );\r\n                prevSibling = document.head.lastChild;\r\n            }\r\n        }\r\n        if (mode === \"prev-sibling\") {\r\n            if (prevSibling.parentNode == null) {\r\n                logWarn(\r\n                    \"Unable to restore node position: sibling was removed\",\r\n                    node,\r\n                    prevSibling,\r\n                    parent\r\n                );\r\n                stop();\r\n                return;\r\n            }\r\n            if (prevSibling.parentNode !== parent) {\r\n                logWarn(\r\n                    \"Style was moved to another parent\",\r\n                    node,\r\n                    prevSibling,\r\n                    parent\r\n                );\r\n                updateParent(prevSibling.parentNode);\r\n            }\r\n        }\r\n        if (mode === \"head\" && !parent.isConnected) {\r\n            parent = document.head;\r\n        }\r\n        logWarn(\"Restoring node position\", node, prevSibling, parent);\r\n        parent.insertBefore(\r\n            node,\r\n            prevSibling && prevSibling.isConnected\r\n                ? prevSibling.nextSibling\r\n                : parent.firstChild\r\n        );\r\n        observer.takeRecords();\r\n        onRestore && onRestore();\r\n    });\r\n    const observer = new MutationObserver(() => {\r\n        if (\r\n            (mode === \"head\" &&\r\n                (node.parentNode !== parent || !node.parentNode.isConnected)) ||\r\n            (mode === \"prev-sibling\" && node.previousSibling !== prevSibling)\r\n        ) {\r\n            restore();\r\n        }\r\n    });\r\n    const run = () => {\r\n        observer.observe(parent, {childList: true});\r\n    };\r\n    const stop = () => {\r\n        clearTimeout(timeoutId);\r\n        observer.disconnect();\r\n        restore.cancel();\r\n    };\r\n    const skip = () => {\r\n        observer.takeRecords();\r\n    };\r\n    const updateParent = (parentNode) => {\r\n        parent = parentNode;\r\n        stop();\r\n        run();\r\n    };\r\n    run();\r\n    return {run, stop, skip};\r\n}\r\nfunction iterateShadowHosts(root, iterator) {\r\n    if (root == null) {\r\n        return;\r\n    }\r\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\r\n        acceptNode(node) {\r\n            return node.shadowRoot == null\r\n                ? NodeFilter.FILTER_SKIP\r\n                : NodeFilter.FILTER_ACCEPT;\r\n        }\r\n    });\r\n    for (\r\n        let node = root.shadowRoot ? walker.currentNode : walker.nextNode();\r\n        node != null;\r\n        node = walker.nextNode()\r\n    ) {\r\n        if (node.classList.contains(\"surfingkeys_hints_host\")) {\r\n            continue;\r\n        }\r\n        iterator(node);\r\n        iterateShadowHosts(node.shadowRoot, iterator);\r\n    }\r\n}\r\nlet isDOMReady = () => {\r\n    return (\r\n        document.readyState === \"complete\" ||\r\n        document.readyState === \"interactive\"\r\n    );\r\n};\r\nfunction setIsDOMReady(newFunc) {\r\n    isDOMReady = newFunc;\r\n}\r\nconst readyStateListeners = new Set();\r\nfunction addDOMReadyListener(listener) {\r\n    isDOMReady() ? listener() : readyStateListeners.add(listener);\r\n}\r\nfunction removeDOMReadyListener(listener) {\r\n    readyStateListeners.delete(listener);\r\n}\r\nfunction isReadyStateComplete() {\r\n    return document.readyState === \"complete\";\r\n}\r\nconst readyStateCompleteListeners = new Set();\r\nfunction addReadyStateCompleteListener(listener) {\r\n    isReadyStateComplete()\r\n        ? listener()\r\n        : readyStateCompleteListeners.add(listener);\r\n}\r\nfunction cleanReadyStateCompleteListeners() {\r\n    readyStateCompleteListeners.clear();\r\n}\r\nif (!isDOMReady()) {\r\n    const onReadyStateChange = () => {\r\n        if (isDOMReady()) {\r\n            readyStateListeners.forEach((listener) => listener());\r\n            readyStateListeners.clear();\r\n            if (isReadyStateComplete()) {\r\n                document.removeEventListener(\r\n                    \"readystatechange\",\r\n                    onReadyStateChange\r\n                );\r\n                readyStateCompleteListeners.forEach((listener) => listener());\r\n                readyStateCompleteListeners.clear();\r\n            }\r\n        }\r\n    };\r\n    document.addEventListener(\"readystatechange\", onReadyStateChange);\r\n}\r\nconst HUGE_MUTATIONS_COUNT = 1000;\r\nfunction isHugeMutation(mutations) {\r\n    if (mutations.length > HUGE_MUTATIONS_COUNT) {\r\n        return true;\r\n    }\r\n    let addedNodesCount = 0;\r\n    for (let i = 0; i < mutations.length; i++) {\r\n        addedNodesCount += mutations[i].addedNodes.length;\r\n        if (addedNodesCount > HUGE_MUTATIONS_COUNT) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction getElementsTreeOperations(mutations) {\r\n    const additions = new Set();\r\n    const deletions = new Set();\r\n    const moves = new Set();\r\n    mutations.forEach((m) => {\r\n        forEach(m.addedNodes, (n) => {\r\n            if (n instanceof Element && n.isConnected) {\r\n                additions.add(n);\r\n            }\r\n        });\r\n        forEach(m.removedNodes, (n) => {\r\n            if (n instanceof Element) {\r\n                if (n.isConnected) {\r\n                    moves.add(n);\r\n                    additions.delete(n);\r\n                } else {\r\n                    deletions.add(n);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const duplicateAdditions = [];\r\n    const duplicateDeletions = [];\r\n    additions.forEach((node) => {\r\n        if (additions.has(node.parentElement)) {\r\n            duplicateAdditions.push(node);\r\n        }\r\n    });\r\n    deletions.forEach((node) => {\r\n        if (deletions.has(node.parentElement)) {\r\n            duplicateDeletions.push(node);\r\n        }\r\n    });\r\n    duplicateAdditions.forEach((node) => additions.delete(node));\r\n    duplicateDeletions.forEach((node) => deletions.delete(node));\r\n    return {additions, moves, deletions};\r\n}\r\nconst optimizedTreeObservers = new Map();\r\nconst optimizedTreeCallbacks = new WeakMap();\r\nfunction createOptimizedTreeObserver(root, callbacks) {\r\n    let observer;\r\n    let observerCallbacks;\r\n    let domReadyListener;\r\n    if (optimizedTreeObservers.has(root)) {\r\n        observer = optimizedTreeObservers.get(root);\r\n        observerCallbacks = optimizedTreeCallbacks.get(observer);\r\n    } else {\r\n        let hadHugeMutationsBefore = false;\r\n        let subscribedForReadyState = false;\r\n        observer = new MutationObserver((mutations) => {\r\n            if (isHugeMutation(mutations)) {\r\n                if (!hadHugeMutationsBefore || isDOMReady()) {\r\n                    observerCallbacks.forEach(({onHugeMutations}) =>\r\n                        onHugeMutations(root)\r\n                    );\r\n                } else if (!subscribedForReadyState) {\r\n                    domReadyListener = () =>\r\n                        observerCallbacks.forEach(({onHugeMutations}) =>\r\n                            onHugeMutations(root)\r\n                        );\r\n                    addDOMReadyListener(domReadyListener);\r\n                    subscribedForReadyState = true;\r\n                }\r\n                hadHugeMutationsBefore = true;\r\n            } else {\r\n                const elementsOperations = getElementsTreeOperations(mutations);\r\n                observerCallbacks.forEach(({onMinorMutations}) =>\r\n                    onMinorMutations(root, elementsOperations)\r\n                );\r\n            }\r\n        });\r\n        observer.observe(root, {childList: true, subtree: true});\r\n        optimizedTreeObservers.set(root, observer);\r\n        observerCallbacks = new Set();\r\n        optimizedTreeCallbacks.set(observer, observerCallbacks);\r\n    }\r\n    observerCallbacks.add(callbacks);\r\n    return {\r\n        disconnect() {\r\n            observerCallbacks.delete(callbacks);\r\n            if (domReadyListener) {\r\n                removeDOMReadyListener(domReadyListener);\r\n            }\r\n            if (observerCallbacks.size === 0) {\r\n                observer.disconnect();\r\n                optimizedTreeCallbacks.delete(observer);\r\n                optimizedTreeObservers.delete(root);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction iterateCSSRules(rules, iterate, onImportError) {\r\n    forEach(rules, (rule) => {\r\n        if (isStyleRule(rule)) {\r\n            iterate(rule);\r\n            if (rule.cssRules?.length > 0) {\r\n                iterateCSSRules(rule.cssRules, iterate);\r\n            }\r\n        } else if (isImportRule(rule)) {\r\n            try {\r\n                iterateCSSRules(\r\n                    rule.styleSheet.cssRules,\r\n                    iterate,\r\n                    onImportError\r\n                );\r\n            } catch (err) {\r\n                onImportError?.();\r\n            }\r\n        } else if (isMediaRule(rule)) {\r\n            const media = Array.from(rule.media);\r\n            const isScreenOrAllOrQuery = media.some(\r\n                (m) =>\r\n                    m.startsWith(\"screen\") ||\r\n                    m.startsWith(\"all\") ||\r\n                    m.startsWith(\"(\")\r\n            );\r\n            const isPrintOrSpeech = media.some(\r\n                (m) => m.startsWith(\"print\") || m.startsWith(\"speech\")\r\n            );\r\n            if (isScreenOrAllOrQuery || !isPrintOrSpeech) {\r\n                iterateCSSRules(rule.cssRules, iterate, onImportError);\r\n            }\r\n        } else if (isSupportsRule(rule)) {\r\n            if (CSS.supports(rule.conditionText)) {\r\n                iterateCSSRules(rule.cssRules, iterate, onImportError);\r\n            }\r\n        } else if (isLayerRule(rule)) {\r\n            iterateCSSRules(rule.cssRules, iterate, onImportError);\r\n        } else {\r\n            logWarn(`CSSRule type not supported`, rule);\r\n        }\r\n    });\r\n}\r\nconst shorthandVarDependantProperties = [\r\n    \"background\",\r\n    \"border\",\r\n    \"border-color\",\r\n    \"border-bottom\",\r\n    \"border-left\",\r\n    \"border-right\",\r\n    \"border-top\",\r\n    \"outline\",\r\n    \"outline-color\"\r\n];\r\nconst shorthandVarDepPropRegexps = isSafari\r\n    ? shorthandVarDependantProperties.map((prop) => {\r\n          const regexp = new RegExp(`${prop}:\\\\s*(.*?)\\\\s*;`);\r\n          return [prop, regexp];\r\n      })\r\n    : null;\r\nfunction iterateCSSDeclarations(style, iterate) {\r\n    forEach(style, (property) => {\r\n        const value = style.getPropertyValue(property).trim();\r\n        if (!value) {\r\n            return;\r\n        }\r\n        iterate(property, value);\r\n    });\r\n    const cssText = style.cssText;\r\n    if (cssText.includes(\"var(\")) {\r\n        if (isSafari) {\r\n            shorthandVarDepPropRegexps.forEach(([prop, regexp]) => {\r\n                const match = cssText.match(regexp);\r\n                if (match && match[1]) {\r\n                    const val = match[1].trim();\r\n                    iterate(prop, val);\r\n                }\r\n            });\r\n        } else {\r\n            shorthandVarDependantProperties.forEach((prop) => {\r\n                const val = style.getPropertyValue(prop);\r\n                if (val && val.includes(\"var(\")) {\r\n                    iterate(prop, val);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    if (\r\n        cssText.includes(\"background-color: ;\") &&\r\n        !style.getPropertyValue(\"background\")\r\n    ) {\r\n        handleEmptyShorthand(\"background\", style, iterate);\r\n    }\r\n    if (\r\n        cssText.includes(\"border-\") &&\r\n        cssText.includes(\"-color: ;\") &&\r\n        !style.getPropertyValue(\"border\")\r\n    ) {\r\n        handleEmptyShorthand(\"border\", style, iterate);\r\n    }\r\n}\r\nfunction handleEmptyShorthand(shorthand, style, iterate) {\r\n    const parentRule = style.parentRule;\r\n    if (isStyleRule(parentRule)) {\r\n        const sourceCSSText =\r\n            parentRule.parentStyleSheet?.ownerNode?.textContent;\r\n        if (sourceCSSText) {\r\n            let escapedSelector = escapeRegExpSpecialChars(\r\n                parentRule.selectorText\r\n            );\r\n            escapedSelector = escapedSelector.replaceAll(/\\s+/g, \"\\\\s*\");\r\n            escapedSelector = escapedSelector.replaceAll(/::/g, \"::?\");\r\n            const regexp = new RegExp(\r\n                `${escapedSelector}\\\\s*{[^}]*${shorthand}:\\\\s*([^;}]+)`\r\n            );\r\n            const match = sourceCSSText.match(regexp);\r\n            if (match) {\r\n                iterate(shorthand, match[1]);\r\n            }\r\n        } else if (shorthand === \"background\") {\r\n            iterate(\"background-color\", \"#ffffff\");\r\n        }\r\n    }\r\n}\r\nconst cssURLRegex = /url\\((('.*?')|(\".*?\")|([^\\)]*?))\\)/g;\r\nconst cssImportRegex =\r\n    /@import\\s*(url\\()?(('.+?')|(\".+?\")|([^\\)]*?))\\)? ?(screen)?;?/gi;\r\nfunction getCSSURLValue(cssURL) {\r\n    return cssURL\r\n        .trim()\r\n        .replace(/[\\n\\r\\\\]+/g, \"\")\r\n        .replace(/^url\\((.*)\\)$/, \"$1\")\r\n        .trim()\r\n        .replace(/^\"(.*)\"$/, \"$1\")\r\n        .replace(/^'(.*)'$/, \"$1\")\r\n        .replace(/(?:\\\\(.))/g, \"$1\");\r\n}\r\nfunction getCSSBaseBath(url) {\r\n    const cssURL = parseURL(url);\r\n    return `${cssURL.origin}${cssURL.pathname.replace(/\\?.*$/, \"\").replace(/(\\/)([^\\/]+)$/i, \"$1\")}`;\r\n}\r\nfunction replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {\r\n    return $css.replace(cssURLRegex, (match) => {\r\n        try {\r\n            const url = getCSSURLValue(match);\r\n            const absoluteURL = getAbsoluteURL(cssBasePath, url);\r\n            const escapedURL = absoluteURL.replaceAll(\"'\", \"\\\\'\");\r\n            return `url('${escapedURL}')`;\r\n        } catch (err) {\r\n            logWarn(\r\n                \"Not able to replace relative URL with Absolute URL, skipping\"\r\n            );\r\n            return match;\r\n        }\r\n    });\r\n}\r\nconst fontFaceRegex = /@font-face\\s*{[^}]*}/g;\r\nfunction replaceCSSFontFace($css) {\r\n    return $css.replace(fontFaceRegex, \"\");\r\n}\r\nconst styleRules = new WeakSet();\r\nconst importRules = new WeakSet();\r\nconst mediaRules = new WeakSet();\r\nconst supportsRules = new WeakSet();\r\nconst layerRules = new WeakSet();\r\nfunction isStyleRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule.selectorText) {\r\n        styleRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isImportRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (importRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule.href) {\r\n        importRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isMediaRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (mediaRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule.media) {\r\n        mediaRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSupportsRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (supportsRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (rule instanceof CSSSupportsRule) {\r\n        supportsRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isLayerRule(rule) {\r\n    if (!rule) {\r\n        return false;\r\n    }\r\n    if (styleRules.has(rule)) {\r\n        return false;\r\n    }\r\n    if (layerRules.has(rule)) {\r\n        return true;\r\n    }\r\n    if (isLayerRuleSupported && rule instanceof CSSLayerBlockRule) {\r\n        layerRules.add(rule);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nconst sheetsScopes = new WeakMap();\r\nfunction defineSheetScope(sheet, node) {\r\n    sheetsScopes.set(sheet, node);\r\n}\r\nfunction getSheetScope(sheet) {\r\n    if (!sheet.ownerNode) {\r\n        return null;\r\n    }\r\n    if (sheetsScopes.has(sheet)) {\r\n        return sheetsScopes.get(sheet);\r\n    }\r\n    let node = sheet.ownerNode;\r\n    while (node) {\r\n        if (node instanceof ShadowRoot || node instanceof Document) {\r\n            defineSheetScope(sheet, node);\r\n            return node;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return null;\r\n}\r\n\r\nlet variablesSheet;\r\nconst registeredColors = new Map();\r\nfunction registerVariablesSheet(sheet) {\r\n    variablesSheet = sheet;\r\n    const types = [\"background\", \"text\", \"border\"];\r\n    registeredColors.forEach((registered) => {\r\n        types.forEach((type) => {\r\n            if (registered[type]) {\r\n                const {variable, value} = registered[type];\r\n                variablesSheet?.cssRules[0].style.setProperty(variable, value);\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction releaseVariablesSheet() {\r\n    variablesSheet = null;\r\n    clearColorPalette();\r\n}\r\nfunction getRegisteredVariableValue(type, registered) {\r\n    return `var(${registered[type].variable}, ${registered[type].value})`;\r\n}\r\nfunction getRegisteredColor(type, parsed) {\r\n    const hex = rgbToHexString(parsed);\r\n    const registered = registeredColors.get(hex);\r\n    if (registered?.[type]) {\r\n        return getRegisteredVariableValue(type, registered);\r\n    }\r\n    return null;\r\n}\r\nfunction registerColor(type, parsed, value) {\r\n    const hex = rgbToHexString(parsed);\r\n    let registered;\r\n    if (registeredColors.has(hex)) {\r\n        registered = registeredColors.get(hex);\r\n    } else {\r\n        const parsed = parseColorWithCache(hex);\r\n        registered = {parsed};\r\n        registeredColors.set(hex, registered);\r\n    }\r\n    const variable = `--darkreader-${type}-${hex.replace(\"#\", \"\")}`;\r\n    registered[type] = {variable, value};\r\n    if (variablesSheet?.cssRules[0]?.style) {\r\n        variablesSheet?.cssRules[0].style.setProperty(variable, value);\r\n    }\r\n    return getRegisteredVariableValue(type, registered);\r\n}\r\nfunction getColorPalette() {\r\n    const background = [];\r\n    const border = [];\r\n    const text = [];\r\n    registeredColors.forEach((registered) => {\r\n        if (registered.background) {\r\n            background.push(registered.parsed);\r\n        }\r\n        if (registered.border) {\r\n            border.push(registered.parsed);\r\n        }\r\n        if (registered.text) {\r\n            text.push(registered.parsed);\r\n        }\r\n    });\r\n    return {background, border, text};\r\n}\r\nfunction clearColorPalette() {\r\n    registeredColors.clear();\r\n}\r\n\r\nfunction getBgPole(theme) {\r\n    const isDarkScheme = theme.mode === 1;\r\n    const prop = isDarkScheme\r\n        ? \"darkSchemeBackgroundColor\"\r\n        : \"lightSchemeBackgroundColor\";\r\n    return theme[prop];\r\n}\r\nfunction getFgPole(theme) {\r\n    const isDarkScheme = theme.mode === 1;\r\n    const prop = isDarkScheme ? \"darkSchemeTextColor\" : \"lightSchemeTextColor\";\r\n    return theme[prop];\r\n}\r\nconst colorModificationCache = new Map();\r\nfunction clearColorModificationCache() {\r\n    colorModificationCache.clear();\r\n}\r\nconst rgbCacheKeys = [\"r\", \"g\", \"b\", \"a\"];\r\nconst themeCacheKeys = [\r\n    \"mode\",\r\n    \"brightness\",\r\n    \"contrast\",\r\n    \"grayscale\",\r\n    \"sepia\",\r\n    \"darkSchemeBackgroundColor\",\r\n    \"darkSchemeTextColor\",\r\n    \"lightSchemeBackgroundColor\",\r\n    \"lightSchemeTextColor\"\r\n];\r\nfunction getCacheId(rgb, theme) {\r\n    let resultId = \"\";\r\n    rgbCacheKeys.forEach((key) => {\r\n        resultId += `${rgb[key]};`;\r\n    });\r\n    themeCacheKeys.forEach((key) => {\r\n        resultId += `${theme[key]};`;\r\n    });\r\n    return resultId;\r\n}\r\nfunction modifyColorWithCache(\r\n    rgb,\r\n    theme,\r\n    modifyHSL,\r\n    poleColor,\r\n    anotherPoleColor\r\n) {\r\n    let fnCache;\r\n    if (colorModificationCache.has(modifyHSL)) {\r\n        fnCache = colorModificationCache.get(modifyHSL);\r\n    } else {\r\n        fnCache = new Map();\r\n        colorModificationCache.set(modifyHSL, fnCache);\r\n    }\r\n    const id = getCacheId(rgb, theme);\r\n    if (fnCache.has(id)) {\r\n        return fnCache.get(id);\r\n    }\r\n    const hsl = rgbToHSL(rgb);\r\n    const pole = poleColor == null ? null : parseToHSLWithCache(poleColor);\r\n    const anotherPole =\r\n        anotherPoleColor == null ? null : parseToHSLWithCache(anotherPoleColor);\r\n    const modified = modifyHSL(hsl, pole, anotherPole);\r\n    const {r, g, b, a} = hslToRGB(modified);\r\n    const matrix = createFilterMatrix({...theme, mode: 0});\r\n    const [rf, gf, bf] = applyColorMatrix([r, g, b], matrix);\r\n    const color =\r\n        a === 1\r\n            ? rgbToHexString({r: rf, g: gf, b: bf})\r\n            : rgbToString({r: rf, g: gf, b: bf, a});\r\n    fnCache.set(id, color);\r\n    return color;\r\n}\r\nfunction modifyAndRegisterColor(type, rgb, theme, modifier) {\r\n    const registered = getRegisteredColor(type, rgb);\r\n    if (registered) {\r\n        return registered;\r\n    }\r\n    const value = modifier(rgb, theme);\r\n    return registerColor(type, rgb, value);\r\n}\r\nfunction modifyLightSchemeColor(rgb, theme) {\r\n    const poleBg = getBgPole(theme);\r\n    const poleFg = getFgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyLightModeHSL, poleFg, poleBg);\r\n}\r\nfunction modifyLightModeHSL({h, s, l, a}, poleFg, poleBg) {\r\n    const isDark = l < 0.5;\r\n    let isNeutral;\r\n    if (isDark) {\r\n        isNeutral = l < 0.2 || s < 0.12;\r\n    } else {\r\n        const isBlue = h > 200 && h < 280;\r\n        isNeutral = s < 0.24 || (l > 0.8 && isBlue);\r\n    }\r\n    let hx = h;\r\n    let sx = s;\r\n    if (isNeutral) {\r\n        if (isDark) {\r\n            hx = poleFg.h;\r\n            sx = poleFg.s;\r\n        } else {\r\n            hx = poleBg.h;\r\n            sx = poleBg.s;\r\n        }\r\n    }\r\n    const lx = scale(l, 0, 1, poleFg.l, poleBg.l);\r\n    return {h: hx, s: sx, l: lx, a};\r\n}\r\nconst MAX_BG_LIGHTNESS = 0.4;\r\nfunction modifyBgHSL({h, s, l, a}, pole) {\r\n    const isDark = l < 0.5;\r\n    const isBlue = h > 200 && h < 280;\r\n    const isNeutral = s < 0.12 || (l > 0.8 && isBlue);\r\n    if (isDark) {\r\n        const lx = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);\r\n        if (isNeutral) {\r\n            const hx = pole.h;\r\n            const sx = pole.s;\r\n            return {h: hx, s: sx, l: lx, a};\r\n        }\r\n        return {h, s, l: lx, a};\r\n    }\r\n    let lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);\r\n    if (isNeutral) {\r\n        const hx = pole.h;\r\n        const sx = pole.s;\r\n        return {h: hx, s: sx, l: lx, a};\r\n    }\r\n    let hx = h;\r\n    const isYellow = h > 60 && h < 180;\r\n    if (isYellow) {\r\n        const isCloserToGreen = h > 120;\r\n        if (isCloserToGreen) {\r\n            hx = scale(h, 120, 180, 135, 180);\r\n        } else {\r\n            hx = scale(h, 60, 120, 60, 105);\r\n        }\r\n    }\r\n    if (hx > 40 && hx < 80) {\r\n        lx *= 0.75;\r\n    }\r\n    return {h: hx, s, l: lx, a};\r\n}\r\nfunction _modifyBackgroundColor(rgb, theme) {\r\n    if (theme.mode === 0) {\r\n        return modifyLightSchemeColor(rgb, theme);\r\n    }\r\n    const pole = getBgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyBgHSL, pole);\r\n}\r\nfunction modifyBackgroundColor(rgb, theme, shouldRegisterColorVariable = true) {\r\n    if (!shouldRegisterColorVariable) {\r\n        return _modifyBackgroundColor(rgb, theme);\r\n    }\r\n    return modifyAndRegisterColor(\r\n        \"background\",\r\n        rgb,\r\n        theme,\r\n        _modifyBackgroundColor\r\n    );\r\n}\r\nconst MIN_FG_LIGHTNESS = 0.55;\r\nfunction modifyBlueFgHue(hue) {\r\n    return scale(hue, 205, 245, 205, 220);\r\n}\r\nfunction modifyFgHSL({h, s, l, a}, pole) {\r\n    const isLight = l > 0.5;\r\n    const isNeutral = l < 0.2 || s < 0.24;\r\n    const isBlue = !isNeutral && h > 205 && h < 245;\r\n    if (isLight) {\r\n        const lx = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);\r\n        if (isNeutral) {\r\n            const hx = pole.h;\r\n            const sx = pole.s;\r\n            return {h: hx, s: sx, l: lx, a};\r\n        }\r\n        let hx = h;\r\n        if (isBlue) {\r\n            hx = modifyBlueFgHue(h);\r\n        }\r\n        return {h: hx, s, l: lx, a};\r\n    }\r\n    if (isNeutral) {\r\n        const hx = pole.h;\r\n        const sx = pole.s;\r\n        const lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n        return {h: hx, s: sx, l: lx, a};\r\n    }\r\n    let hx = h;\r\n    let lx;\r\n    if (isBlue) {\r\n        hx = modifyBlueFgHue(h);\r\n        lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));\r\n    } else {\r\n        lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);\r\n    }\r\n    return {h: hx, s, l: lx, a};\r\n}\r\nfunction _modifyForegroundColor(rgb, theme) {\r\n    if (theme.mode === 0) {\r\n        return modifyLightSchemeColor(rgb, theme);\r\n    }\r\n    const pole = getFgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyFgHSL, pole);\r\n}\r\nfunction modifyForegroundColor(rgb, theme, shouldRegisterColorVariable = true) {\r\n    if (!shouldRegisterColorVariable) {\r\n        return _modifyForegroundColor(rgb, theme);\r\n    }\r\n    return modifyAndRegisterColor(\"text\", rgb, theme, _modifyForegroundColor);\r\n}\r\nfunction modifyBorderHSL({h, s, l, a}, poleFg, poleBg) {\r\n    const isDark = l < 0.5;\r\n    const isNeutral = l < 0.2 || s < 0.24;\r\n    let hx = h;\r\n    let sx = s;\r\n    if (isNeutral) {\r\n        if (isDark) {\r\n            hx = poleFg.h;\r\n            sx = poleFg.s;\r\n        } else {\r\n            hx = poleBg.h;\r\n            sx = poleBg.s;\r\n        }\r\n    }\r\n    const lx = scale(l, 0, 1, 0.5, 0.2);\r\n    return {h: hx, s: sx, l: lx, a};\r\n}\r\nfunction _modifyBorderColor(rgb, theme) {\r\n    if (theme.mode === 0) {\r\n        return modifyLightSchemeColor(rgb, theme);\r\n    }\r\n    const poleFg = getFgPole(theme);\r\n    const poleBg = getBgPole(theme);\r\n    return modifyColorWithCache(rgb, theme, modifyBorderHSL, poleFg, poleBg);\r\n}\r\nfunction modifyBorderColor(rgb, theme, shouldRegisterColorVariable = true) {\r\n    if (!shouldRegisterColorVariable) {\r\n        return _modifyBorderColor(rgb, theme);\r\n    }\r\n    return modifyAndRegisterColor(\"border\", rgb, theme, _modifyBorderColor);\r\n}\r\nfunction modifyShadowColor(rgb, theme) {\r\n    return modifyBackgroundColor(rgb, theme);\r\n}\r\nfunction modifyGradientColor(rgb, theme) {\r\n    return modifyBackgroundColor(rgb, theme);\r\n}\r\n\r\nconst gradientLength = \"gradient\".length;\r\nconst conicGradient = \"conic-\";\r\nconst conicGradientLength = conicGradient.length;\r\nconst radialGradient = \"radial-\";\r\nconst linearGradient = \"linear-\";\r\nfunction parseGradient(value) {\r\n    const result = [];\r\n    let index = 0;\r\n    let startIndex = conicGradient.length;\r\n    while ((index = value.indexOf(\"gradient\", startIndex)) !== -1) {\r\n        let typeGradient;\r\n        [linearGradient, radialGradient, conicGradient].find((possibleType) => {\r\n            if (index - possibleType.length >= 0) {\r\n                const possibleGradient = value.substring(\r\n                    index - possibleType.length,\r\n                    index\r\n                );\r\n                if (possibleGradient === possibleType) {\r\n                    if (\r\n                        value.slice(\r\n                            index - possibleType.length - 10,\r\n                            index - possibleType.length - 1\r\n                        ) === \"repeating\"\r\n                    ) {\r\n                        typeGradient = `repeating-${possibleType}gradient`;\r\n                        return true;\r\n                    }\r\n                    if (\r\n                        value.slice(\r\n                            index - possibleType.length - 8,\r\n                            index - possibleType.length - 1\r\n                        ) === \"-webkit\"\r\n                    ) {\r\n                        typeGradient = `-webkit-${possibleType}gradient`;\r\n                        return true;\r\n                    }\r\n                    typeGradient = `${possibleType}gradient`;\r\n                    return true;\r\n                }\r\n            }\r\n        });\r\n        if (!typeGradient) {\r\n            break;\r\n        }\r\n        const {start, end} = getParenthesesRange(value, index + gradientLength);\r\n        const match = value.substring(start + 1, end - 1);\r\n        startIndex = end + 1 + conicGradientLength;\r\n        result.push({\r\n            typeGradient,\r\n            match,\r\n            offset: typeGradient.length + 2,\r\n            index: index - typeGradient.length + gradientLength,\r\n            hasComma: true\r\n        });\r\n    }\r\n    if (result.length) {\r\n        result[result.length - 1].hasComma = false;\r\n    }\r\n    return result;\r\n}\r\n\r\nconst STORAGE_KEY_IMAGE_DETAILS_LIST = \"__darkreader__imageDetails_v2_list\";\r\nconst STORAGE_KEY_IMAGE_DETAILS_PREFIX = \"__darkreader__imageDetails_v2_\";\r\nconst STORAGE_KEY_CSS_FETCH_PREFIX = \"__darkreader__cssFetch_\";\r\nlet imageCacheTimeout = 0;\r\nconst imageDetailsCacheQueue = new Map();\r\nconst cachedImageUrls = [];\r\nfunction writeImageDetailsQueue() {\r\n    imageDetailsCacheQueue.forEach((details, url) => {\r\n        if (url && url.startsWith(\"https://\")) {\r\n            try {\r\n                const json = JSON.stringify(details);\r\n                sessionStorage.setItem(\r\n                    `${STORAGE_KEY_IMAGE_DETAILS_PREFIX}${url}`,\r\n                    json\r\n                );\r\n                cachedImageUrls.push(url);\r\n            } catch (err) {}\r\n        }\r\n    });\r\n    imageDetailsCacheQueue.clear();\r\n    sessionStorage.setItem(\r\n        STORAGE_KEY_IMAGE_DETAILS_LIST,\r\n        JSON.stringify(cachedImageUrls)\r\n    );\r\n}\r\nfunction writeImageDetailsCache(url, imageDetails) {\r\n    if (!url || !url.startsWith(\"https://\")) {\r\n        return;\r\n    }\r\n    imageDetailsCacheQueue.set(url, imageDetails);\r\n    clearTimeout(imageCacheTimeout);\r\n    imageCacheTimeout = setTimeout(writeImageDetailsQueue, 1000);\r\n}\r\nfunction readImageDetailsCache(targetMap) {\r\n    try {\r\n        const jsonList = sessionStorage.getItem(STORAGE_KEY_IMAGE_DETAILS_LIST);\r\n        if (!jsonList) {\r\n            return;\r\n        }\r\n        const list = JSON.parse(jsonList);\r\n        list.forEach((url) => {\r\n            const json = sessionStorage.getItem(\r\n                `${STORAGE_KEY_IMAGE_DETAILS_PREFIX}${url}`\r\n            );\r\n            if (json) {\r\n                const details = JSON.parse(json);\r\n                targetMap.set(url, details);\r\n            }\r\n        });\r\n    } catch (err) {}\r\n}\r\nfunction writeCSSFetchCache(url, cssText) {\r\n    const key = `${STORAGE_KEY_CSS_FETCH_PREFIX}${url}`;\r\n    try {\r\n        sessionStorage.setItem(key, cssText);\r\n    } catch (err) {}\r\n}\r\nfunction readCSSFetchCache(url) {\r\n    const key = `${STORAGE_KEY_CSS_FETCH_PREFIX}${url}`;\r\n    try {\r\n        return sessionStorage.getItem(key) ?? null;\r\n    } catch (err) {}\r\n    return null;\r\n}\r\n\r\nfunction toSVGMatrix(matrix) {\r\n    return matrix\r\n        .slice(0, 4)\r\n        .map((m) => m.map((m) => m.toFixed(3)).join(\" \"))\r\n        .join(\" \");\r\n}\r\nfunction getSVGFilterMatrixValue(config) {\r\n    return toSVGMatrix(createFilterMatrix(config));\r\n}\r\n\r\nconst MAX_FRAME_DURATION = 1000 / 60;\r\nclass AsyncQueue {\r\n    constructor() {\r\n        this.queue = [];\r\n        this.timerId = null;\r\n    }\r\n    addTask(task) {\r\n        this.queue.push(task);\r\n        this.scheduleFrame();\r\n    }\r\n    stop() {\r\n        if (this.timerId !== null) {\r\n            cancelAnimationFrame(this.timerId);\r\n            this.timerId = null;\r\n        }\r\n        this.queue = [];\r\n    }\r\n    scheduleFrame() {\r\n        if (this.timerId) {\r\n            return;\r\n        }\r\n        this.timerId = requestAnimationFrame(() => {\r\n            this.timerId = null;\r\n            const start = Date.now();\r\n            let cb;\r\n            while ((cb = this.queue.shift())) {\r\n                cb();\r\n                if (Date.now() - start >= MAX_FRAME_DURATION) {\r\n                    this.scheduleFrame();\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nconst resolvers$1 = new Map();\r\nconst rejectors = new Map();\r\nasync function bgFetch(request) {\r\n    if (window.DarkReader?.Plugins?.fetch) {\r\n        return window.DarkReader.Plugins.fetch(request);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        const id = generateUID();\r\n        resolvers$1.set(id, resolve);\r\n        rejectors.set(id, reject);\r\n        chrome.runtime.sendMessage({\r\n            type: MessageTypeCStoBG.FETCH,\r\n            data: request,\r\n            id\r\n        });\r\n    });\r\n}\r\nchrome.runtime.onMessage.addListener(({type, data, error, id}) => {\r\n    if (type === MessageTypeBGtoCS.FETCH_RESPONSE) {\r\n        const resolve = resolvers$1.get(id);\r\n        const reject = rejectors.get(id);\r\n        resolvers$1.delete(id);\r\n        rejectors.delete(id);\r\n        if (error) {\r\n            reject &&\r\n                reject(typeof error === \"string\" ? new Error(error) : error);\r\n        } else {\r\n            resolve && resolve(data);\r\n        }\r\n    }\r\n});\r\n\r\nconst imageManager = new AsyncQueue();\r\nasync function getImageDetails(url) {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const dataURL = url.startsWith(\"data:\")\r\n                ? url\r\n                : await getDataURL(url);\r\n            const blob =\r\n                tryConvertDataURLToBlobSync(dataURL) ?? (await loadAsBlob(url));\r\n            let image;\r\n            if (dataURL.startsWith(\"data:image/svg+xml\")) {\r\n                image = await loadImage(dataURL);\r\n            } else {\r\n                image =\r\n                    (await tryCreateImageBitmap(blob)) ??\r\n                    (await loadImage(dataURL));\r\n            }\r\n            imageManager.addTask(() => {\r\n                const analysis = analyzeImage(image);\r\n                resolve({\r\n                    src: url,\r\n                    dataURL: analysis.isLarge ? \"\" : dataURL,\r\n                    width: image.width,\r\n                    height: image.height,\r\n                    ...analysis\r\n                });\r\n            });\r\n        } catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\nasync function getDataURL(url) {\r\n    const parsedURL = new URL(url);\r\n    if (parsedURL.origin === location.origin) {\r\n        return await loadAsDataURL(url);\r\n    }\r\n    return await bgFetch({url, responseType: \"data-url\"});\r\n}\r\nasync function tryCreateImageBitmap(blob) {\r\n    try {\r\n        return await createImageBitmap(blob);\r\n    } catch (err) {\r\n        logWarn(\r\n            `Unable to create image bitmap for type ${blob.type}: ${String(err)}`\r\n        );\r\n        return null;\r\n    }\r\n}\r\nconst INCOMPLETE_DOC_LOADING_IMAGE_LIMIT = 256;\r\nlet loadingImagesCount = 0;\r\nasync function loadImage(url) {\r\n    return new Promise((resolve, reject) => {\r\n        const image = new Image();\r\n        image.onload = () => resolve(image);\r\n        image.onerror = () => reject(`Unable to load image ${url}`);\r\n        if (\r\n            ++loadingImagesCount <= INCOMPLETE_DOC_LOADING_IMAGE_LIMIT ||\r\n            isReadyStateComplete()\r\n        ) {\r\n            image.src = url;\r\n        } else {\r\n            addReadyStateCompleteListener(() => (image.src = url));\r\n        }\r\n    });\r\n}\r\nconst MAX_ANALYSIS_PIXELS_COUNT = 32 * 32;\r\nlet canvas;\r\nlet context;\r\nfunction createCanvas() {\r\n    const maxWidth = MAX_ANALYSIS_PIXELS_COUNT;\r\n    const maxHeight = MAX_ANALYSIS_PIXELS_COUNT;\r\n    canvas = document.createElement(\"canvas\");\r\n    canvas.width = maxWidth;\r\n    canvas.height = maxHeight;\r\n    context = canvas.getContext(\"2d\", {willReadFrequently: true});\r\n    context.imageSmoothingEnabled = false;\r\n}\r\nfunction removeCanvas() {\r\n    canvas = null;\r\n    context = null;\r\n}\r\nconst LARGE_IMAGE_PIXELS_COUNT = 512 * 512;\r\nfunction analyzeImage(image) {\r\n    if (!canvas) {\r\n        createCanvas();\r\n    }\r\n    let sw;\r\n    let sh;\r\n    if (image instanceof HTMLImageElement) {\r\n        sw = image.naturalWidth;\r\n        sh = image.naturalHeight;\r\n    } else {\r\n        sw = image.width;\r\n        sh = image.height;\r\n    }\r\n    if (sw === 0 || sh === 0) {\r\n        logWarn(\"Image is empty\");\r\n        return {\r\n            isDark: false,\r\n            isLight: false,\r\n            isTransparent: false,\r\n            isLarge: false\r\n        };\r\n    }\r\n    const isLarge = sw * sh > LARGE_IMAGE_PIXELS_COUNT;\r\n    const sourcePixelsCount = sw * sh;\r\n    const k = Math.min(\r\n        1,\r\n        Math.sqrt(MAX_ANALYSIS_PIXELS_COUNT / sourcePixelsCount)\r\n    );\r\n    const width = Math.ceil(sw * k);\r\n    const height = Math.ceil(sh * k);\r\n    context.clearRect(0, 0, width, height);\r\n    context.drawImage(image, 0, 0, sw, sh, 0, 0, width, height);\r\n    const imageData = context.getImageData(0, 0, width, height);\r\n    const d = imageData.data;\r\n    const TRANSPARENT_ALPHA_THRESHOLD = 0.05;\r\n    const DARK_LIGHTNESS_THRESHOLD = 0.4;\r\n    const LIGHT_LIGHTNESS_THRESHOLD = 0.7;\r\n    let transparentPixelsCount = 0;\r\n    let darkPixelsCount = 0;\r\n    let lightPixelsCount = 0;\r\n    let i, x, y;\r\n    let r, g, b, a;\r\n    let l;\r\n    for (y = 0; y < height; y++) {\r\n        for (x = 0; x < width; x++) {\r\n            i = 4 * (y * width + x);\r\n            r = d[i + 0];\r\n            g = d[i + 1];\r\n            b = d[i + 2];\r\n            a = d[i + 3];\r\n            if (a / 255 < TRANSPARENT_ALPHA_THRESHOLD) {\r\n                transparentPixelsCount++;\r\n            } else {\r\n                l = getSRGBLightness(r, g, b);\r\n                if (l < DARK_LIGHTNESS_THRESHOLD) {\r\n                    darkPixelsCount++;\r\n                }\r\n                if (l > LIGHT_LIGHTNESS_THRESHOLD) {\r\n                    lightPixelsCount++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const totalPixelsCount = width * height;\r\n    const opaquePixelsCount = totalPixelsCount - transparentPixelsCount;\r\n    const DARK_IMAGE_THRESHOLD = 0.7;\r\n    const LIGHT_IMAGE_THRESHOLD = 0.7;\r\n    const TRANSPARENT_IMAGE_THRESHOLD = 0.1;\r\n    return {\r\n        isDark: darkPixelsCount / opaquePixelsCount >= DARK_IMAGE_THRESHOLD,\r\n        isLight: lightPixelsCount / opaquePixelsCount >= LIGHT_IMAGE_THRESHOLD,\r\n        isTransparent:\r\n            transparentPixelsCount / totalPixelsCount >=\r\n            TRANSPARENT_IMAGE_THRESHOLD,\r\n        isLarge\r\n    };\r\n}\r\nlet isBlobURLSupported = null;\r\nlet canUseProxy = false;\r\nlet blobURLCheckRequested = false;\r\nconst blobURLCheckAwaiters = [];\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => (canUseProxy = true),\r\n    {once: true}\r\n);\r\nasync function requestBlobURLCheck() {\r\n    if (!canUseProxy) {\r\n        return;\r\n    }\r\n    if (blobURLCheckRequested) {\r\n        return await new Promise((resolve) =>\r\n            blobURLCheckAwaiters.push(resolve)\r\n        );\r\n    }\r\n    blobURLCheckRequested = true;\r\n    await new Promise((resolve) => {\r\n        document.addEventListener(\r\n            \"__darkreader__blobURLCheckResponse\",\r\n            (e) => {\r\n                isBlobURLSupported = e.detail.blobURLAllowed;\r\n                resolve();\r\n                blobURLCheckAwaiters.forEach((r) => r());\r\n                blobURLCheckAwaiters.splice(0);\r\n            },\r\n            {once: true}\r\n        );\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__blobURLCheckRequest\")\r\n        );\r\n    });\r\n}\r\nfunction isBlobURLCheckResultReady() {\r\n    return isBlobURLSupported != null || !canUseProxy;\r\n}\r\nfunction onCSPError(err) {\r\n    if (err.blockedURI === \"blob\") {\r\n        isBlobURLSupported = false;\r\n        document.removeEventListener(\"securitypolicyviolation\", onCSPError);\r\n    }\r\n}\r\ndocument.addEventListener(\"securitypolicyviolation\", onCSPError);\r\nconst objectURLs = new Set();\r\nfunction getFilteredImageURL({dataURL, width, height}, theme) {\r\n    if (dataURL.startsWith(\"data:image/svg+xml\")) {\r\n        dataURL = escapeXML(dataURL);\r\n    }\r\n    const matrix = getSVGFilterMatrixValue(theme);\r\n    const svg = [\r\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"${width}\" height=\"${height}\">`,\r\n        \"<defs>\",\r\n        '<filter id=\"darkreader-image-filter\">',\r\n        `<feColorMatrix type=\"matrix\" values=\"${matrix}\" />`,\r\n        \"</filter>\",\r\n        \"</defs>\",\r\n        `<image width=\"${width}\" height=\"${height}\" filter=\"url(#darkreader-image-filter)\" xlink:href=\"${dataURL}\" />`,\r\n        \"</svg>\"\r\n    ].join(\"\");\r\n    if (!isBlobURLSupported) {\r\n        return `data:image/svg+xml;base64,${btoa(svg)}`;\r\n    }\r\n    const bytes = new Uint8Array(svg.length);\r\n    for (let i = 0; i < svg.length; i++) {\r\n        bytes[i] = svg.charCodeAt(i);\r\n    }\r\n    const blob = new Blob([bytes], {type: \"image/svg+xml\"});\r\n    const objectURL = URL.createObjectURL(blob);\r\n    objectURLs.add(objectURL);\r\n    return objectURL;\r\n}\r\nconst xmlEscapeChars = {\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    \"&\": \"&amp;\",\r\n    \"'\": \"&apos;\",\r\n    '\"': \"&quot;\"\r\n};\r\nfunction escapeXML(str) {\r\n    return str.replace(/[<>&'\"]/g, (c) => xmlEscapeChars[c] ?? c);\r\n}\r\nconst dataURLBlobURLs = new Map();\r\nfunction tryConvertDataURLToBlobSync(dataURL) {\r\n    const colonIndex = dataURL.indexOf(\":\");\r\n    const semicolonIndex = dataURL.indexOf(\";\", colonIndex + 1);\r\n    const commaIndex = dataURL.indexOf(\",\", semicolonIndex + 1);\r\n    const encoding = dataURL\r\n        .substring(semicolonIndex + 1, commaIndex)\r\n        .toLocaleLowerCase();\r\n    const mediaType = dataURL.substring(colonIndex + 1, semicolonIndex);\r\n    if (encoding !== \"base64\" || !mediaType) {\r\n        return null;\r\n    }\r\n    const characters = atob(dataURL.substring(commaIndex + 1));\r\n    const bytes = new Uint8Array(characters.length);\r\n    for (let i = 0; i < characters.length; i++) {\r\n        bytes[i] = characters.charCodeAt(i);\r\n    }\r\n    return new Blob([bytes], {type: mediaType});\r\n}\r\nasync function tryConvertDataURLToBlobURL(dataURL) {\r\n    if (!isBlobURLSupported) {\r\n        return null;\r\n    }\r\n    const hash = getHashCode(dataURL);\r\n    let blobURL = dataURLBlobURLs.get(hash);\r\n    if (blobURL) {\r\n        return blobURL;\r\n    }\r\n    let blob = tryConvertDataURLToBlobSync(dataURL);\r\n    if (!blob) {\r\n        const response = await fetch(dataURL);\r\n        blob = await response.blob();\r\n    }\r\n    blobURL = URL.createObjectURL(blob);\r\n    dataURLBlobURLs.set(hash, blobURL);\r\n    return blobURL;\r\n}\r\nfunction cleanImageProcessingCache() {\r\n    imageManager && imageManager.stop();\r\n    removeCanvas();\r\n    objectURLs.forEach((u) => URL.revokeObjectURL(u));\r\n    objectURLs.clear();\r\n    dataURLBlobURLs.forEach((u) => URL.revokeObjectURL(u));\r\n    dataURLBlobURLs.clear();\r\n}\r\n\r\nfunction getPriority(ruleStyle, property) {\r\n    return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));\r\n}\r\nfunction getModifiableCSSDeclaration(\r\n    property,\r\n    value,\r\n    rule,\r\n    variablesStore,\r\n    ignoreImageSelectors,\r\n    isCancelled\r\n) {\r\n    let modifier = null;\r\n    if (property.startsWith(\"--\")) {\r\n        modifier = getVariableModifier(\r\n            variablesStore,\r\n            property,\r\n            value,\r\n            rule,\r\n            ignoreImageSelectors,\r\n            isCancelled\r\n        );\r\n    } else if (value.includes(\"var(\")) {\r\n        modifier = getVariableDependantModifier(\r\n            variablesStore,\r\n            property,\r\n            value\r\n        );\r\n    } else if (property === \"color-scheme\") {\r\n        modifier = getColorSchemeModifier();\r\n    } else if (property === \"scrollbar-color\") {\r\n        modifier = getScrollbarColorModifier(value);\r\n    } else if (\r\n        (property.includes(\"color\") &&\r\n            property !== \"-webkit-print-color-adjust\") ||\r\n        property === \"fill\" ||\r\n        property === \"stroke\" ||\r\n        property === \"stop-color\"\r\n    ) {\r\n        if (\r\n            property.startsWith(\"border\") &&\r\n            property !== \"border-color\" &&\r\n            value === \"initial\"\r\n        ) {\r\n            const borderSideProp = property.substring(0, property.length - 6);\r\n            const borderSideVal = rule.style.getPropertyValue(borderSideProp);\r\n            if (borderSideVal.startsWith(\"0px\") || borderSideVal === \"none\") {\r\n                property = borderSideProp;\r\n                modifier = borderSideVal;\r\n            } else {\r\n                modifier = value;\r\n            }\r\n        } else {\r\n            modifier = getColorModifier(property, value, rule);\r\n        }\r\n    } else if (\r\n        property === \"background-image\" ||\r\n        property === \"list-style-image\"\r\n    ) {\r\n        modifier = getBgImageModifier(\r\n            value,\r\n            rule,\r\n            ignoreImageSelectors,\r\n            isCancelled\r\n        );\r\n    } else if (property.includes(\"shadow\")) {\r\n        modifier = getShadowModifier(value);\r\n    }\r\n    if (!modifier) {\r\n        return null;\r\n    }\r\n    return {\r\n        property,\r\n        value: modifier,\r\n        important: getPriority(rule.style, property),\r\n        sourceValue: value\r\n    };\r\n}\r\nfunction joinSelectors(...selectors) {\r\n    return selectors.filter(Boolean).join(\", \");\r\n}\r\nconst hostsWithOddScrollbars = [\"calendar.google.com\"];\r\nfunction getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {\r\n    const lines = [];\r\n    if (!isIFrame) {\r\n        lines.push(\"html {\");\r\n        lines.push(\r\n            `    background-color: ${modifyBackgroundColor({r: 255, g: 255, b: 255}, theme)} !important;`\r\n        );\r\n        lines.push(\"}\");\r\n    }\r\n    if (isCSSColorSchemePropSupported && theme.mode === 1) {\r\n        lines.push(\"html {\");\r\n        lines.push(`    color-scheme: dark !important;`);\r\n        lines.push(\"}\");\r\n        lines.push(\"iframe {\");\r\n        lines.push(`    color-scheme: dark !important;`);\r\n        lines.push(\"}\");\r\n    }\r\n    const bgSelectors = joinSelectors(\r\n        isIFrame ? \"\" : \"html, body\",\r\n        styleSystemControls ? \"input, textarea, select, button, dialog\" : \"\"\r\n    );\r\n    if (bgSelectors) {\r\n        lines.push(`${bgSelectors} {`);\r\n        lines.push(\r\n            `    background-color: ${modifyBackgroundColor({r: 255, g: 255, b: 255}, theme)};`\r\n        );\r\n        lines.push(\"}\");\r\n    }\r\n    lines.push(\r\n        `${joinSelectors(\"html, body\", styleSystemControls ? \"input, textarea, select, button\" : \"\")} {`\r\n    );\r\n    lines.push(\r\n        `    border-color: ${modifyBorderColor({r: 76, g: 76, b: 76}, theme)};`\r\n    );\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"a {\");\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 64, b: 255}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"table {\");\r\n    lines.push(\r\n        `    border-color: ${modifyBorderColor({r: 128, g: 128, b: 128}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"mark {\");\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"::placeholder {\");\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 169, g: 169, b: 169}, theme)};`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(\"input:-webkit-autofill,\");\r\n    lines.push(\"textarea:-webkit-autofill,\");\r\n    lines.push(\"select:-webkit-autofill {\");\r\n    lines.push(\r\n        `    background-color: ${modifyBackgroundColor({r: 250, g: 255, b: 189}, theme)} !important;`\r\n    );\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)} !important;`\r\n    );\r\n    lines.push(\"}\");\r\n    if (\r\n        theme.scrollbarColor &&\r\n        !hostsWithOddScrollbars.includes(location.hostname)\r\n    ) {\r\n        lines.push(getModifiedScrollbarStyle(theme));\r\n    }\r\n    if (theme.selectionColor) {\r\n        lines.push(getModifiedSelectionStyle(theme));\r\n    }\r\n    if (isLayerRuleSupported) {\r\n        lines.unshift(\"@layer {\");\r\n        lines.push(\"}\");\r\n    }\r\n    return lines.join(\"\\n\");\r\n}\r\nfunction getSelectionColor(theme) {\r\n    let backgroundColorSelection;\r\n    let foregroundColorSelection;\r\n    if (theme.selectionColor === \"auto\") {\r\n        backgroundColorSelection = modifyBackgroundColor(\r\n            {r: 0, g: 96, b: 212},\r\n            {...theme, grayscale: 0}\r\n        );\r\n        foregroundColorSelection = modifyForegroundColor(\r\n            {r: 255, g: 255, b: 255},\r\n            {...theme, grayscale: 0}\r\n        );\r\n    } else {\r\n        const rgb = parseColorWithCache(theme.selectionColor);\r\n        const hsl = rgbToHSL(rgb);\r\n        backgroundColorSelection = theme.selectionColor;\r\n        if (hsl.l < 0.5) {\r\n            foregroundColorSelection = \"#FFF\";\r\n        } else {\r\n            foregroundColorSelection = \"#000\";\r\n        }\r\n    }\r\n    return {backgroundColorSelection, foregroundColorSelection};\r\n}\r\nfunction getModifiedSelectionStyle(theme) {\r\n    const lines = [];\r\n    const modifiedSelectionColor = getSelectionColor(theme);\r\n    const backgroundColorSelection =\r\n        modifiedSelectionColor.backgroundColorSelection;\r\n    const foregroundColorSelection =\r\n        modifiedSelectionColor.foregroundColorSelection;\r\n    [\"::selection\", \"::-moz-selection\"].forEach((selection) => {\r\n        lines.push(`${selection} {`);\r\n        lines.push(\r\n            `    background-color: ${backgroundColorSelection} !important;`\r\n        );\r\n        lines.push(`    color: ${foregroundColorSelection} !important;`);\r\n        lines.push(\"}\");\r\n    });\r\n    return lines.join(\"\\n\");\r\n}\r\nfunction getModifiedScrollbarStyle(theme) {\r\n    let colorTrack;\r\n    let colorThumb;\r\n    if (theme.scrollbarColor === \"auto\") {\r\n        colorTrack = modifyBackgroundColor({r: 241, g: 241, b: 241}, theme);\r\n        colorThumb = modifyBackgroundColor({r: 176, g: 176, b: 176}, theme);\r\n    } else {\r\n        const rgb = parseColorWithCache(theme.scrollbarColor);\r\n        const hsl = rgbToHSL(rgb);\r\n        const darken = (darker) => ({...hsl, l: clamp(hsl.l - darker, 0, 1)});\r\n        colorTrack = hslToString(darken(0.4));\r\n        colorThumb = hslToString(hsl);\r\n    }\r\n    return [\r\n        `* {`,\r\n        `    scrollbar-color: ${colorThumb} ${colorTrack};`,\r\n        `}`\r\n    ].join(\"\\n\");\r\n}\r\nfunction getModifiedFallbackStyle(theme, {strict}) {\r\n    const factory = defaultFallbackFactory;\r\n    return factory(theme, {strict});\r\n}\r\nfunction defaultFallbackFactory(theme, {strict}) {\r\n    const lines = [];\r\n    lines.push(\r\n        `html, body, ${strict ? \"body :not(iframe)\" : \"body > :not(iframe)\"} {`\r\n    );\r\n    lines.push(\r\n        `    background-color: ${modifyBackgroundColor({r: 255, g: 255, b: 255}, theme)} !important;`\r\n    );\r\n    lines.push(\r\n        `    border-color: ${modifyBorderColor({r: 64, g: 64, b: 64}, theme)} !important;`\r\n    );\r\n    lines.push(\r\n        `    color: ${modifyForegroundColor({r: 0, g: 0, b: 0}, theme)} !important;`\r\n    );\r\n    lines.push(\"}\");\r\n    lines.push(`div[style*=\"background-color: rgb(135, 135, 135)\"] {`);\r\n    lines.push(`    background-color: #878787 !important;`);\r\n    lines.push(\"}\");\r\n    return lines.join(\"\\n\");\r\n}\r\nconst unparsableColors = new Set([\r\n    \"inherit\",\r\n    \"transparent\",\r\n    \"initial\",\r\n    \"currentcolor\",\r\n    \"none\",\r\n    \"unset\",\r\n    \"auto\"\r\n]);\r\nfunction getColorModifier(prop, value, rule) {\r\n    if (\r\n        unparsableColors.has(value.toLowerCase()) &&\r\n        !(prop === \"color\" && value === \"initial\")\r\n    ) {\r\n        return value;\r\n    }\r\n    let rgb = null;\r\n    if (prop === \"color\" && value === \"initial\") {\r\n        rgb = {r: 0, g: 0, b: 0, a: 1};\r\n    } else {\r\n        rgb = parseColorWithCache(value);\r\n    }\r\n    if (!rgb) {\r\n        logWarn(\"Couldn't parse color\", value);\r\n        return null;\r\n    }\r\n    if (prop.includes(\"background\")) {\r\n        if (\r\n            (rule.style.webkitMaskImage &&\r\n                rule.style.webkitMaskImage !== \"none\") ||\r\n            (rule.style.webkitMask &&\r\n                !rule.style.webkitMask.startsWith(\"none\")) ||\r\n            (rule.style.mask && rule.style.mask !== \"none\") ||\r\n            (rule.style.getPropertyValue(\"mask-image\") &&\r\n                rule.style.getPropertyValue(\"mask-image\") !== \"none\")\r\n        ) {\r\n            return (theme) => modifyForegroundColor(rgb, theme);\r\n        }\r\n        return (theme) => modifyBackgroundColor(rgb, theme);\r\n    }\r\n    if (prop.includes(\"border\") || prop.includes(\"outline\")) {\r\n        return (theme) => modifyBorderColor(rgb, theme);\r\n    }\r\n    return (theme) => modifyForegroundColor(rgb, theme);\r\n}\r\nconst imageDetailsCache = new Map();\r\nconst awaitingForImageLoading = new Map();\r\nlet didTryLoadCache = false;\r\nfunction shouldIgnoreImage(selectorText, selectors) {\r\n    if (!selectorText || selectors.length === 0) {\r\n        return false;\r\n    }\r\n    if (selectors.some((s) => s === \"*\")) {\r\n        return true;\r\n    }\r\n    const ruleSelectors = selectorText.split(/,\\s*/g);\r\n    for (let i = 0; i < selectors.length; i++) {\r\n        const ignoredSelector = selectors[i];\r\n        if (ignoredSelector.startsWith(\"^\")) {\r\n            const beginning = ignoredSelector.slice(1);\r\n            if (ruleSelectors.some((s) => s.startsWith(beginning))) {\r\n                return true;\r\n            }\r\n        } else if (ignoredSelector.endsWith(\"$\")) {\r\n            const ending = ignoredSelector.slice(0, ignoredSelector.length - 1);\r\n            if (ruleSelectors.some((s) => s.endsWith(ending))) {\r\n                return true;\r\n            }\r\n        } else if (ruleSelectors.some((s) => s === ignoredSelector)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nconst imageSelectorQueue = new Map();\r\nconst imageSelectorValues = new Map();\r\nconst imageSelectorNodeQueue = new Set();\r\nlet imageSelectorQueueFrameId = null;\r\nlet classObserver = null;\r\nfunction checkImageSelectors(node) {\r\n    for (const [selector, callbacks] of imageSelectorQueue) {\r\n        if (\r\n            node.querySelector(selector) ||\r\n            (node instanceof Element && node.matches(selector))\r\n        ) {\r\n            imageSelectorQueue.delete(selector);\r\n            callbacks.forEach((cb) => cb());\r\n        }\r\n    }\r\n    if (!classObserver) {\r\n        classObserver = new MutationObserver((mutations) => {\r\n            mutations.forEach((mutation) => {\r\n                imageSelectorNodeQueue.add(mutation.target);\r\n                if (!imageSelectorQueueFrameId) {\r\n                    imageSelectorQueueFrameId = requestAnimationFrame(() => {\r\n                        imageSelectorNodeQueue.forEach((element) => {\r\n                            checkImageSelectors(element);\r\n                        });\r\n                        imageSelectorNodeQueue.clear();\r\n                        imageSelectorQueueFrameId = null;\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        classObserver.observe(document.documentElement, {\r\n            attributes: true,\r\n            attributeFilter: [\"class\"],\r\n            subtree: true\r\n        });\r\n    }\r\n}\r\nfunction getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled) {\r\n    try {\r\n        if (shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)) {\r\n            return value;\r\n        }\r\n        const gradients = parseGradient(value);\r\n        const urls = getMatches(cssURLRegex, value);\r\n        if (urls.length === 0 && gradients.length === 0) {\r\n            return value;\r\n        }\r\n        const getIndices = (matches) => {\r\n            let index = 0;\r\n            return matches.map((match) => {\r\n                const valueIndex = value.indexOf(match, index);\r\n                index = valueIndex + match.length;\r\n                return {match, index: valueIndex};\r\n            });\r\n        };\r\n        const matches = gradients\r\n            .map((i) => ({type: \"gradient\", ...i}))\r\n            .concat(\r\n                getIndices(urls).map((i) => ({type: \"url\", offset: 0, ...i}))\r\n            )\r\n            .sort((a, b) => (a.index > b.index ? 1 : -1));\r\n        const getGradientModifier = (gradient) => {\r\n            const {typeGradient, match, hasComma} = gradient;\r\n            const partsRegex =\r\n                /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?([^\\(\\), ]|( (?!calc)))*),?/g;\r\n            const colorStopRegex =\r\n                /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;\r\n            const parts = getMatches(partsRegex, match, 1).map((part) => {\r\n                part = part.trim();\r\n                let rgb = parseColorWithCache(part);\r\n                if (rgb) {\r\n                    return (theme) => modifyGradientColor(rgb, theme);\r\n                }\r\n                const space = part.lastIndexOf(\" \");\r\n                rgb = parseColorWithCache(part.substring(0, space));\r\n                if (rgb) {\r\n                    return (theme) =>\r\n                        `${modifyGradientColor(rgb, theme)} ${part.substring(space + 1)}`;\r\n                }\r\n                const colorStopMatch = part.match(colorStopRegex);\r\n                if (colorStopMatch) {\r\n                    rgb = parseColorWithCache(colorStopMatch[3]);\r\n                    if (rgb) {\r\n                        return (theme) =>\r\n                            `${colorStopMatch[1]}(${colorStopMatch[2] ? `${colorStopMatch[2]}, ` : \"\"}${modifyGradientColor(rgb, theme)})`;\r\n                    }\r\n                }\r\n                return () => part;\r\n            });\r\n            return (theme) => {\r\n                return `${typeGradient}(${parts.map((modify) => modify(theme)).join(\", \")})${hasComma ? \", \" : \"\"}`;\r\n            };\r\n        };\r\n        const getURLModifier = (urlValue) => {\r\n            if (!didTryLoadCache) {\r\n                didTryLoadCache = true;\r\n                readImageDetailsCache(imageDetailsCache);\r\n            }\r\n            let url = getCSSURLValue(urlValue);\r\n            const isURLEmpty = url.length === 0;\r\n            const {parentStyleSheet} = rule;\r\n            const ownerNode = parentStyleSheet?.ownerNode;\r\n            const scope =\r\n                (parentStyleSheet && getSheetScope(parentStyleSheet)) ??\r\n                document;\r\n            const baseURL =\r\n                parentStyleSheet && parentStyleSheet.href\r\n                    ? getCSSBaseBath(parentStyleSheet.href)\r\n                    : ownerNode?.baseURI || location.origin;\r\n            url = getAbsoluteURL(baseURL, url);\r\n            return async (theme) => {\r\n                if (isURLEmpty) {\r\n                    return \"url('')\";\r\n                }\r\n                let selector = rule.selectorText;\r\n                if (selector) {\r\n                    if (selector.includes(\"::before\")) {\r\n                        selector = selector.replaceAll(\"::before\", \"\");\r\n                    }\r\n                    if (selector.includes(\"::after\")) {\r\n                        selector = selector.replaceAll(\"::after\", \"\");\r\n                    }\r\n                    if (!scope.querySelector(selector)) {\r\n                        await new Promise((resolve) => {\r\n                            if (imageSelectorQueue.has(selector)) {\r\n                                imageSelectorQueue.get(selector).push(resolve);\r\n                            } else {\r\n                                imageSelectorQueue.set(selector, [resolve]);\r\n                                imageSelectorValues.set(selector, urlValue);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                let imageDetails = null;\r\n                if (imageDetailsCache.has(url)) {\r\n                    imageDetails = imageDetailsCache.get(url);\r\n                } else {\r\n                    try {\r\n                        if (!isBlobURLCheckResultReady()) {\r\n                            await requestBlobURLCheck();\r\n                        }\r\n                        if (awaitingForImageLoading.has(url)) {\r\n                            const awaiters = awaitingForImageLoading.get(url);\r\n                            imageDetails = await new Promise((resolve) =>\r\n                                awaiters.push(resolve)\r\n                            );\r\n                            if (!imageDetails) {\r\n                                return null;\r\n                            }\r\n                        } else {\r\n                            awaitingForImageLoading.set(url, []);\r\n                            imageDetails = await getImageDetails(url);\r\n                            imageDetailsCache.set(url, imageDetails);\r\n                            writeImageDetailsCache(url, imageDetails);\r\n                            awaitingForImageLoading\r\n                                .get(url)\r\n                                .forEach((resolve) => resolve(imageDetails));\r\n                            awaitingForImageLoading.delete(url);\r\n                        }\r\n                        if (isCancelled()) {\r\n                            return null;\r\n                        }\r\n                    } catch (err) {\r\n                        logWarn(err);\r\n                        if (awaitingForImageLoading.has(url)) {\r\n                            awaitingForImageLoading\r\n                                .get(url)\r\n                                .forEach((resolve) => resolve(null));\r\n                            awaitingForImageLoading.delete(url);\r\n                        }\r\n                    }\r\n                }\r\n                if (imageDetails) {\r\n                    const bgImageValue = getBgImageValue(imageDetails, theme);\r\n                    if (bgImageValue) {\r\n                        return bgImageValue;\r\n                    }\r\n                }\r\n                if (url.startsWith(\"data:\")) {\r\n                    const blobURL = await tryConvertDataURLToBlobURL(url);\r\n                    if (blobURL) {\r\n                        return `url(\"${blobURL}\")`;\r\n                    }\r\n                }\r\n                return `url(\"${url}\")`;\r\n            };\r\n        };\r\n        const getBgImageValue = (imageDetails, theme) => {\r\n            const {isDark, isLight, isTransparent, isLarge, width} =\r\n                imageDetails;\r\n            let result;\r\n            const logSrc = imageDetails.src.startsWith(\"data:\")\r\n                ? \"data:\"\r\n                : imageDetails.src;\r\n            if (isLarge && isLight && !isTransparent && theme.mode === 1) {\r\n                logInfo(`Hiding large light image ${logSrc}`);\r\n                result = \"none\";\r\n            } else if (\r\n                isDark &&\r\n                isTransparent &&\r\n                theme.mode === 1 &&\r\n                width > 2\r\n            ) {\r\n                logInfo(`Inverting dark image ${logSrc}`);\r\n                const inverted = getFilteredImageURL(imageDetails, {\r\n                    ...theme,\r\n                    sepia: clamp(theme.sepia + 10, 0, 100)\r\n                });\r\n                result = `url(\"${inverted}\")`;\r\n            } else if (isLight && !isTransparent && theme.mode === 1) {\r\n                logInfo(`Dimming light image ${logSrc}`);\r\n                const dimmed = getFilteredImageURL(imageDetails, theme);\r\n                result = `url(\"${dimmed}\")`;\r\n            } else if (theme.mode === 0 && isLight) {\r\n                logInfo(`Applying filter to image ${logSrc}`);\r\n                const filtered = getFilteredImageURL(imageDetails, {\r\n                    ...theme,\r\n                    brightness: clamp(theme.brightness - 10, 5, 200),\r\n                    sepia: clamp(theme.sepia + 10, 0, 100)\r\n                });\r\n                result = `url(\"${filtered}\")`;\r\n            } else {\r\n                logInfo(`Not modifying the image ${logSrc}`);\r\n                result = null;\r\n            }\r\n            return result;\r\n        };\r\n        const modifiers = [];\r\n        let matchIndex = 0;\r\n        let prevHasComma = false;\r\n        matches.forEach(\r\n            ({type, match, index, typeGradient, hasComma, offset}, i) => {\r\n                const matchStart = index;\r\n                const prefixStart = matchIndex;\r\n                const matchEnd = matchStart + match.length + offset;\r\n                matchIndex = matchEnd;\r\n                if (prefixStart !== matchStart) {\r\n                    if (prevHasComma) {\r\n                        modifiers.push(() => {\r\n                            let betweenValue = value.substring(\r\n                                prefixStart,\r\n                                matchStart\r\n                            );\r\n                            if (betweenValue[0] === \",\") {\r\n                                betweenValue = betweenValue.substring(1);\r\n                            }\r\n                            return betweenValue;\r\n                        });\r\n                    } else {\r\n                        modifiers.push(() =>\r\n                            value.substring(prefixStart, matchStart)\r\n                        );\r\n                    }\r\n                }\r\n                prevHasComma = hasComma || false;\r\n                if (type === \"url\") {\r\n                    modifiers.push(getURLModifier(match));\r\n                } else if (type === \"gradient\") {\r\n                    modifiers.push(\r\n                        getGradientModifier({\r\n                            match,\r\n                            index,\r\n                            typeGradient: typeGradient,\r\n                            hasComma: hasComma || false,\r\n                            offset\r\n                        })\r\n                    );\r\n                }\r\n                if (i === matches.length - 1) {\r\n                    modifiers.push(() => value.substring(matchEnd));\r\n                }\r\n            }\r\n        );\r\n        return (theme) => {\r\n            const results = modifiers\r\n                .filter(Boolean)\r\n                .map((modify) => modify(theme));\r\n            if (results.some((r) => r instanceof Promise)) {\r\n                return Promise.all(results).then((asyncResults) => {\r\n                    return asyncResults.filter(Boolean).join(\"\");\r\n                });\r\n            }\r\n            const combinedResult = results.join(\"\");\r\n            if (combinedResult.endsWith(\", initial\")) {\r\n                return combinedResult.slice(0, -9);\r\n            }\r\n            return combinedResult;\r\n        };\r\n    } catch (err) {\r\n        logWarn(`Unable to parse gradient ${value}`, err);\r\n        return null;\r\n    }\r\n}\r\nfunction getShadowModifierWithInfo(value) {\r\n    try {\r\n        let index = 0;\r\n        const colorMatches = getMatches(\r\n            /(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,\r\n            value,\r\n            2\r\n        );\r\n        let notParsed = 0;\r\n        const modifiers = colorMatches.map((match, i) => {\r\n            const prefixIndex = index;\r\n            const matchIndex = value.indexOf(match, index);\r\n            const matchEnd = matchIndex + match.length;\r\n            index = matchEnd;\r\n            const rgb = parseColorWithCache(match);\r\n            if (!rgb) {\r\n                notParsed++;\r\n                return () => value.substring(prefixIndex, matchEnd);\r\n            }\r\n            return (theme) =>\r\n                `${value.substring(prefixIndex, matchIndex)}${modifyShadowColor(rgb, theme)}${i === colorMatches.length - 1 ? value.substring(matchEnd) : \"\"}`;\r\n        });\r\n        return (theme) => {\r\n            const modified = modifiers.map((modify) => modify(theme)).join(\"\");\r\n            return {\r\n                matchesLength: colorMatches.length,\r\n                unparsableMatchesLength: notParsed,\r\n                result: modified\r\n            };\r\n        };\r\n    } catch (err) {\r\n        logWarn(`Unable to parse shadow ${value}`, err);\r\n        return null;\r\n    }\r\n}\r\nfunction getShadowModifier(value) {\r\n    const shadowModifier = getShadowModifierWithInfo(value);\r\n    if (!shadowModifier) {\r\n        return null;\r\n    }\r\n    return (theme) => shadowModifier(theme).result;\r\n}\r\nfunction getScrollbarColorModifier(value) {\r\n    const colorsMatch = value.match(\r\n        /^\\s*([a-z]+(\\(.*\\))?)\\s+([a-z]+(\\(.*\\))?)\\s*$/\r\n    );\r\n    if (!colorsMatch) {\r\n        return value;\r\n    }\r\n    const thumb = parseColorWithCache(colorsMatch[1]);\r\n    const track = parseColorWithCache(colorsMatch[3]);\r\n    if (!thumb || !track) {\r\n        logWarn(\"Couldn't parse color\", ...[thumb, track].filter((c) => !c));\r\n        return null;\r\n    }\r\n    return (theme) =>\r\n        `${modifyForegroundColor(thumb, theme)} ${modifyBackgroundColor(track, theme)}`;\r\n}\r\nfunction getColorSchemeModifier() {\r\n    return (theme) => (theme.mode === 0 ? \"dark light\" : \"dark\");\r\n}\r\nfunction getVariableModifier(\r\n    variablesStore,\r\n    prop,\r\n    value,\r\n    rule,\r\n    ignoredImgSelectors,\r\n    isCancelled\r\n) {\r\n    return variablesStore.getModifierForVariable({\r\n        varName: prop,\r\n        sourceValue: value,\r\n        rule,\r\n        ignoredImgSelectors,\r\n        isCancelled\r\n    });\r\n}\r\nfunction getVariableDependantModifier(variablesStore, prop, value) {\r\n    return variablesStore.getModifierForVarDependant(prop, value);\r\n}\r\nfunction cleanModificationCache() {\r\n    clearColorModificationCache();\r\n    imageDetailsCache.clear();\r\n    cleanImageProcessingCache();\r\n    awaitingForImageLoading.clear();\r\n    imageSelectorQueue.clear();\r\n    classObserver?.disconnect();\r\n    classObserver = null;\r\n}\r\n\r\nconst VAR_TYPE_BG_COLOR = 1 << 0;\r\nconst VAR_TYPE_TEXT_COLOR = 1 << 1;\r\nconst VAR_TYPE_BORDER_COLOR = 1 << 2;\r\nconst VAR_TYPE_BG_IMG = 1 << 3;\r\nclass VariablesStore {\r\n    constructor() {\r\n        this.varTypes = new Map();\r\n        this.rulesQueue = new Set();\r\n        this.inlineStyleQueue = [];\r\n        this.definedVars = new Set();\r\n        this.varRefs = new Map();\r\n        this.unknownColorVars = new Set();\r\n        this.unknownBgVars = new Set();\r\n        this.undefinedVars = new Set();\r\n        this.initialVarTypes = new Map();\r\n        this.changedTypeVars = new Set();\r\n        this.typeChangeSubscriptions = new Map();\r\n        this.unstableVarValues = new Map();\r\n    }\r\n    clear() {\r\n        this.varTypes.clear();\r\n        this.rulesQueue.clear();\r\n        this.inlineStyleQueue.splice(0);\r\n        this.definedVars.clear();\r\n        this.varRefs.clear();\r\n        this.unknownColorVars.clear();\r\n        this.unknownBgVars.clear();\r\n        this.undefinedVars.clear();\r\n        this.initialVarTypes.clear();\r\n        this.changedTypeVars.clear();\r\n        this.typeChangeSubscriptions.clear();\r\n        this.unstableVarValues.clear();\r\n    }\r\n    isVarType(varName, typeNum) {\r\n        return (\r\n            this.varTypes.has(varName) &&\r\n            (this.varTypes.get(varName) & typeNum) > 0\r\n        );\r\n    }\r\n    addRulesForMatching(rules) {\r\n        this.rulesQueue.add(rules);\r\n    }\r\n    addInlineStyleForMatching(style) {\r\n        this.inlineStyleQueue.push(style);\r\n    }\r\n    matchVariablesAndDependents() {\r\n        if (this.rulesQueue.size === 0 && this.inlineStyleQueue.length === 0) {\r\n            return;\r\n        }\r\n        this.changedTypeVars.clear();\r\n        this.initialVarTypes = new Map(this.varTypes);\r\n        this.collectRootVariables();\r\n        this.collectVariablesAndVarDep();\r\n        this.collectRootVarDependents();\r\n        this.varRefs.forEach((refs, v) => {\r\n            refs.forEach((r) => {\r\n                if (this.varTypes.has(v)) {\r\n                    this.resolveVariableType(r, this.varTypes.get(v));\r\n                }\r\n            });\r\n        });\r\n        this.unknownColorVars.forEach((v) => {\r\n            if (this.unknownBgVars.has(v)) {\r\n                this.unknownColorVars.delete(v);\r\n                this.unknownBgVars.delete(v);\r\n                this.resolveVariableType(v, VAR_TYPE_BG_COLOR);\r\n            } else if (\r\n                this.isVarType(\r\n                    v,\r\n                    VAR_TYPE_BG_COLOR |\r\n                        VAR_TYPE_TEXT_COLOR |\r\n                        VAR_TYPE_BORDER_COLOR\r\n                )\r\n            ) {\r\n                this.unknownColorVars.delete(v);\r\n            } else {\r\n                this.undefinedVars.add(v);\r\n            }\r\n        });\r\n        this.unknownBgVars.forEach((v) => {\r\n            const hasColor =\r\n                this.findVarRef(v, (ref) => {\r\n                    return (\r\n                        this.unknownColorVars.has(ref) ||\r\n                        this.isVarType(\r\n                            ref,\r\n                            VAR_TYPE_BG_COLOR |\r\n                                VAR_TYPE_TEXT_COLOR |\r\n                                VAR_TYPE_BORDER_COLOR\r\n                        )\r\n                    );\r\n                }) != null;\r\n            if (hasColor) {\r\n                this.iterateVarRefs(v, (ref) => {\r\n                    this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\r\n                });\r\n            } else if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\r\n                this.unknownBgVars.delete(v);\r\n            } else {\r\n                this.undefinedVars.add(v);\r\n            }\r\n        });\r\n        this.changedTypeVars.forEach((varName) => {\r\n            if (this.typeChangeSubscriptions.has(varName)) {\r\n                this.typeChangeSubscriptions\r\n                    .get(varName)\r\n                    .forEach((callback) => {\r\n                        callback();\r\n                    });\r\n            }\r\n        });\r\n        this.changedTypeVars.clear();\r\n    }\r\n    getModifierForVariable(options) {\r\n        return (theme) => {\r\n            const {\r\n                varName,\r\n                sourceValue,\r\n                rule,\r\n                ignoredImgSelectors,\r\n                isCancelled\r\n            } = options;\r\n            const getDeclarations = () => {\r\n                const declarations = [];\r\n                const addModifiedValue = (\r\n                    typeNum,\r\n                    varNameWrapper,\r\n                    colorModifier\r\n                ) => {\r\n                    if (!this.isVarType(varName, typeNum)) {\r\n                        return;\r\n                    }\r\n                    const property = varNameWrapper(varName);\r\n                    let modifiedValue;\r\n                    if (isVarDependant(sourceValue)) {\r\n                        if (isConstructedColorVar(sourceValue)) {\r\n                            let value = insertVarValues(\r\n                                sourceValue,\r\n                                this.unstableVarValues\r\n                            );\r\n                            if (!value) {\r\n                                value =\r\n                                    typeNum === VAR_TYPE_BG_COLOR\r\n                                        ? \"#ffffff\"\r\n                                        : \"#000000\";\r\n                            }\r\n                            modifiedValue = colorModifier(value, theme);\r\n                        } else {\r\n                            modifiedValue = replaceCSSVariablesNames(\r\n                                sourceValue,\r\n                                (v) => varNameWrapper(v),\r\n                                (fallback) => colorModifier(fallback, theme)\r\n                            );\r\n                        }\r\n                    } else {\r\n                        modifiedValue = colorModifier(sourceValue, theme);\r\n                    }\r\n                    declarations.push({\r\n                        property,\r\n                        value: modifiedValue\r\n                    });\r\n                };\r\n                addModifiedValue(\r\n                    VAR_TYPE_BG_COLOR,\r\n                    wrapBgColorVariableName,\r\n                    tryModifyBgColor\r\n                );\r\n                addModifiedValue(\r\n                    VAR_TYPE_TEXT_COLOR,\r\n                    wrapTextColorVariableName,\r\n                    tryModifyTextColor\r\n                );\r\n                addModifiedValue(\r\n                    VAR_TYPE_BORDER_COLOR,\r\n                    wrapBorderColorVariableName,\r\n                    tryModifyBorderColor\r\n                );\r\n                if (this.isVarType(varName, VAR_TYPE_BG_IMG)) {\r\n                    const property = wrapBgImgVariableName(varName);\r\n                    let modifiedValue = sourceValue;\r\n                    if (isVarDependant(sourceValue)) {\r\n                        modifiedValue = replaceCSSVariablesNames(\r\n                            sourceValue,\r\n                            (v) => wrapBgColorVariableName(v),\r\n                            (fallback) => tryModifyBgColor(fallback, theme)\r\n                        );\r\n                    }\r\n                    const bgModifier = getBgImageModifier(\r\n                        modifiedValue,\r\n                        rule,\r\n                        ignoredImgSelectors,\r\n                        isCancelled\r\n                    );\r\n                    modifiedValue =\r\n                        typeof bgModifier === \"function\"\r\n                            ? bgModifier(theme)\r\n                            : bgModifier;\r\n                    declarations.push({\r\n                        property,\r\n                        value: modifiedValue\r\n                    });\r\n                }\r\n                return declarations;\r\n            };\r\n            const callbacks = new Set();\r\n            const addListener = (onTypeChange) => {\r\n                const callback = () => {\r\n                    const decs = getDeclarations();\r\n                    onTypeChange(decs);\r\n                };\r\n                callbacks.add(callback);\r\n                this.subscribeForVarTypeChange(varName, callback);\r\n            };\r\n            const removeListeners = () => {\r\n                callbacks.forEach((callback) => {\r\n                    this.unsubscribeFromVariableTypeChanges(varName, callback);\r\n                });\r\n            };\r\n            return {\r\n                declarations: getDeclarations(),\r\n                onTypeChange: {addListener, removeListeners}\r\n            };\r\n        };\r\n    }\r\n    getModifierForVarDependant(property, sourceValue) {\r\n        const isConstructedColor = sourceValue.match(/^\\s*(rgb|hsl)a?\\(/);\r\n        const isSimpleConstructedColor = sourceValue.match(\r\n            /^rgba?\\(var\\(--[\\-_A-Za-z0-9]+\\)(\\s*,?\\/?\\s*0?\\.\\d+)?\\)$/\r\n        );\r\n        if (isConstructedColor && !isSimpleConstructedColor) {\r\n            const isBg = property.startsWith(\"background\");\r\n            const isText = isTextColorProperty(property);\r\n            return (theme) => {\r\n                let value = insertVarValues(\r\n                    sourceValue,\r\n                    this.unstableVarValues\r\n                );\r\n                if (!value) {\r\n                    value = isBg ? \"#ffffff\" : \"#000000\";\r\n                }\r\n                const modifier = isBg\r\n                    ? tryModifyBgColor\r\n                    : isText\r\n                      ? tryModifyTextColor\r\n                      : tryModifyBorderColor;\r\n                return modifier(value, theme);\r\n            };\r\n        }\r\n        if (\r\n            property === \"background-color\" ||\r\n            (isSimpleConstructedColor && property === \"background\")\r\n        ) {\r\n            return (theme) => {\r\n                const defaultFallback = tryModifyBgColor(\r\n                    isConstructedColor ? \"255, 255, 255\" : \"#ffffff\",\r\n                    theme\r\n                );\r\n                return replaceCSSVariablesNames(\r\n                    sourceValue,\r\n                    (v) => wrapBgColorVariableName(v),\r\n                    (fallback) => tryModifyBgColor(fallback, theme),\r\n                    defaultFallback\r\n                );\r\n            };\r\n        }\r\n        if (isTextColorProperty(property)) {\r\n            return (theme) => {\r\n                const defaultFallback = tryModifyTextColor(\r\n                    isConstructedColor ? \"0, 0, 0\" : \"#000000\",\r\n                    theme\r\n                );\r\n                return replaceCSSVariablesNames(\r\n                    sourceValue,\r\n                    (v) => wrapTextColorVariableName(v),\r\n                    (fallback) => tryModifyTextColor(fallback, theme),\r\n                    defaultFallback\r\n                );\r\n            };\r\n        }\r\n        if (\r\n            property === \"background\" ||\r\n            property === \"background-image\" ||\r\n            property === \"box-shadow\"\r\n        ) {\r\n            return (theme) => {\r\n                const unknownVars = new Set();\r\n                const modify = () => {\r\n                    const variableReplaced = replaceCSSVariablesNames(\r\n                        sourceValue,\r\n                        (v) => {\r\n                            if (this.isVarType(v, VAR_TYPE_BG_COLOR)) {\r\n                                return wrapBgColorVariableName(v);\r\n                            }\r\n                            if (this.isVarType(v, VAR_TYPE_BG_IMG)) {\r\n                                return wrapBgImgVariableName(v);\r\n                            }\r\n                            unknownVars.add(v);\r\n                            return v;\r\n                        },\r\n                        (fallback) => tryModifyBgColor(fallback, theme)\r\n                    );\r\n                    if (property === \"box-shadow\") {\r\n                        const shadowModifier =\r\n                            getShadowModifierWithInfo(variableReplaced);\r\n                        const modifiedShadow = shadowModifier(theme);\r\n                        if (\r\n                            modifiedShadow.unparsableMatchesLength !==\r\n                            modifiedShadow.matchesLength\r\n                        ) {\r\n                            return modifiedShadow.result;\r\n                        }\r\n                    }\r\n                    return variableReplaced;\r\n                };\r\n                const modified = modify();\r\n                if (unknownVars.size > 0) {\r\n                    const isFallbackResolved = modified.match(\r\n                        /^var\\(.*?, ((var\\(--darkreader-bg--.*\\))|(#[0-9A-Fa-f]+)|([a-z]+)|(rgba?\\(.+\\))|(hsla?\\(.+\\)))\\)$/\r\n                    );\r\n                    if (isFallbackResolved) {\r\n                        return modified;\r\n                    }\r\n                    return new Promise((resolve) => {\r\n                        for (const unknownVar of unknownVars.values()) {\r\n                            const callback = () => {\r\n                                this.unsubscribeFromVariableTypeChanges(\r\n                                    unknownVar,\r\n                                    callback\r\n                                );\r\n                                const newValue = modify();\r\n                                resolve(newValue);\r\n                            };\r\n                            this.subscribeForVarTypeChange(\r\n                                unknownVar,\r\n                                callback\r\n                            );\r\n                        }\r\n                    });\r\n                }\r\n                return modified;\r\n            };\r\n        }\r\n        if (property.startsWith(\"border\") || property.startsWith(\"outline\")) {\r\n            return (theme) => {\r\n                return replaceCSSVariablesNames(\r\n                    sourceValue,\r\n                    (v) => wrapBorderColorVariableName(v),\r\n                    (fallback) => tryModifyBorderColor(fallback, theme)\r\n                );\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    subscribeForVarTypeChange(varName, callback) {\r\n        if (!this.typeChangeSubscriptions.has(varName)) {\r\n            this.typeChangeSubscriptions.set(varName, new Set());\r\n        }\r\n        const rootStore = this.typeChangeSubscriptions.get(varName);\r\n        if (!rootStore.has(callback)) {\r\n            rootStore.add(callback);\r\n        }\r\n    }\r\n    unsubscribeFromVariableTypeChanges(varName, callback) {\r\n        if (this.typeChangeSubscriptions.has(varName)) {\r\n            this.typeChangeSubscriptions.get(varName).delete(callback);\r\n        }\r\n    }\r\n    collectVariablesAndVarDep() {\r\n        this.rulesQueue.forEach((rules) => {\r\n            iterateCSSRules(rules, (rule) => {\r\n                if (rule.style) {\r\n                    this.collectVarsFromCSSDeclarations(rule.style);\r\n                }\r\n            });\r\n        });\r\n        this.inlineStyleQueue.forEach((style) => {\r\n            this.collectVarsFromCSSDeclarations(style);\r\n        });\r\n        this.rulesQueue.clear();\r\n        this.inlineStyleQueue.splice(0);\r\n    }\r\n    collectVarsFromCSSDeclarations(style) {\r\n        iterateCSSDeclarations(style, (property, value) => {\r\n            if (isVariable(property)) {\r\n                this.inspectVariable(property, value);\r\n            }\r\n            if (isVarDependant(value)) {\r\n                this.inspectVarDependant(property, value);\r\n            }\r\n        });\r\n    }\r\n    shouldProcessRootVariables() {\r\n        return (\r\n            this.rulesQueue.size > 0 &&\r\n            document.documentElement.getAttribute(\"style\")?.includes(\"--\")\r\n        );\r\n    }\r\n    collectRootVariables() {\r\n        if (!this.shouldProcessRootVariables()) {\r\n            return;\r\n        }\r\n        iterateCSSDeclarations(\r\n            document.documentElement.style,\r\n            (property, value) => {\r\n                if (isVariable(property)) {\r\n                    this.inspectVariable(property, value);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    inspectVariable(varName, value) {\r\n        this.unstableVarValues.set(varName, value);\r\n        if (isVarDependant(value) && isConstructedColorVar(value)) {\r\n            this.unknownColorVars.add(varName);\r\n            this.definedVars.add(varName);\r\n        }\r\n        if (this.definedVars.has(varName)) {\r\n            return;\r\n        }\r\n        this.definedVars.add(varName);\r\n        const isColor = Boolean(\r\n            value.match(rawRGBSpaceRegex) ||\r\n                value.match(rawRGBCommaRegex) ||\r\n                parseColorWithCache(value)\r\n        );\r\n        if (isColor) {\r\n            this.unknownColorVars.add(varName);\r\n        } else if (\r\n            value.includes(\"url(\") ||\r\n            value.includes(\"linear-gradient(\") ||\r\n            value.includes(\"radial-gradient(\")\r\n        ) {\r\n            this.resolveVariableType(varName, VAR_TYPE_BG_IMG);\r\n        }\r\n    }\r\n    resolveVariableType(varName, typeNum) {\r\n        const initialType = this.initialVarTypes.get(varName) || 0;\r\n        const currentType = this.varTypes.get(varName) || 0;\r\n        const newType = currentType | typeNum;\r\n        this.varTypes.set(varName, newType);\r\n        if (newType !== initialType || this.undefinedVars.has(varName)) {\r\n            this.changedTypeVars.add(varName);\r\n            this.undefinedVars.delete(varName);\r\n        }\r\n        this.unknownColorVars.delete(varName);\r\n        this.unknownBgVars.delete(varName);\r\n    }\r\n    collectRootVarDependents() {\r\n        if (!this.shouldProcessRootVariables()) {\r\n            return;\r\n        }\r\n        iterateCSSDeclarations(\r\n            document.documentElement.style,\r\n            (property, value) => {\r\n                if (isVarDependant(value)) {\r\n                    this.inspectVarDependant(property, value);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    inspectVarDependant(property, value) {\r\n        if (isVariable(property)) {\r\n            this.iterateVarDeps(value, (ref) => {\r\n                if (!this.varRefs.has(property)) {\r\n                    this.varRefs.set(property, new Set());\r\n                }\r\n                this.varRefs.get(property).add(ref);\r\n            });\r\n        } else if (\r\n            property === \"background-color\" ||\r\n            property === \"box-shadow\"\r\n        ) {\r\n            this.iterateVarDeps(value, (v) =>\r\n                this.resolveVariableType(v, VAR_TYPE_BG_COLOR)\r\n            );\r\n        } else if (isTextColorProperty(property)) {\r\n            this.iterateVarDeps(value, (v) =>\r\n                this.resolveVariableType(v, VAR_TYPE_TEXT_COLOR)\r\n            );\r\n        } else if (\r\n            property.startsWith(\"border\") ||\r\n            property.startsWith(\"outline\")\r\n        ) {\r\n            this.iterateVarDeps(value, (v) =>\r\n                this.resolveVariableType(v, VAR_TYPE_BORDER_COLOR)\r\n            );\r\n        } else if (\r\n            property === \"background\" ||\r\n            property === \"background-image\"\r\n        ) {\r\n            this.iterateVarDeps(value, (v) => {\r\n                if (this.isVarType(v, VAR_TYPE_BG_COLOR | VAR_TYPE_BG_IMG)) {\r\n                    return;\r\n                }\r\n                const isBgColor =\r\n                    this.findVarRef(v, (ref) => {\r\n                        return (\r\n                            this.unknownColorVars.has(ref) ||\r\n                            this.isVarType(\r\n                                ref,\r\n                                VAR_TYPE_BG_COLOR |\r\n                                    VAR_TYPE_TEXT_COLOR |\r\n                                    VAR_TYPE_BORDER_COLOR\r\n                            )\r\n                        );\r\n                    }) != null;\r\n                this.iterateVarRefs(v, (ref) => {\r\n                    if (isBgColor) {\r\n                        this.resolveVariableType(ref, VAR_TYPE_BG_COLOR);\r\n                    } else {\r\n                        this.unknownBgVars.add(ref);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    iterateVarDeps(value, iterator) {\r\n        const varDeps = new Set();\r\n        iterateVarDependencies(value, (v) => varDeps.add(v));\r\n        varDeps.forEach((v) => iterator(v));\r\n    }\r\n    findVarRef(varName, iterator, stack = new Set()) {\r\n        if (stack.has(varName)) {\r\n            return null;\r\n        }\r\n        stack.add(varName);\r\n        const result = iterator(varName);\r\n        if (result) {\r\n            return varName;\r\n        }\r\n        const refs = this.varRefs.get(varName);\r\n        if (!refs || refs.size === 0) {\r\n            return null;\r\n        }\r\n        for (const ref of refs) {\r\n            const found = this.findVarRef(ref, iterator, stack);\r\n            if (found) {\r\n                return found;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    iterateVarRefs(varName, iterator) {\r\n        this.findVarRef(varName, (ref) => {\r\n            iterator(ref);\r\n            return false;\r\n        });\r\n    }\r\n    setOnRootVariableChange(callback) {\r\n        this.onRootVariableDefined = callback;\r\n    }\r\n    putRootVars(styleElement, theme) {\r\n        const sheet = styleElement.sheet;\r\n        if (sheet.cssRules.length > 0) {\r\n            sheet.deleteRule(0);\r\n        }\r\n        const declarations = new Map();\r\n        iterateCSSDeclarations(\r\n            document.documentElement.style,\r\n            (property, value) => {\r\n                if (isVariable(property)) {\r\n                    if (this.isVarType(property, VAR_TYPE_BG_COLOR)) {\r\n                        declarations.set(\r\n                            wrapBgColorVariableName(property),\r\n                            tryModifyBgColor(value, theme)\r\n                        );\r\n                    }\r\n                    if (this.isVarType(property, VAR_TYPE_TEXT_COLOR)) {\r\n                        declarations.set(\r\n                            wrapTextColorVariableName(property),\r\n                            tryModifyTextColor(value, theme)\r\n                        );\r\n                    }\r\n                    if (this.isVarType(property, VAR_TYPE_BORDER_COLOR)) {\r\n                        declarations.set(\r\n                            wrapBorderColorVariableName(property),\r\n                            tryModifyBorderColor(value, theme)\r\n                        );\r\n                    }\r\n                    this.subscribeForVarTypeChange(\r\n                        property,\r\n                        this.onRootVariableDefined\r\n                    );\r\n                }\r\n            }\r\n        );\r\n        const cssLines = [];\r\n        cssLines.push(\":root {\");\r\n        for (const [property, value] of declarations) {\r\n            cssLines.push(`    ${property}: ${value};`);\r\n        }\r\n        cssLines.push(\"}\");\r\n        const cssText = cssLines.join(\"\\n\");\r\n        sheet.insertRule(cssText);\r\n    }\r\n}\r\nconst variablesStore = new VariablesStore();\r\nfunction getVariableRange(input, searchStart = 0) {\r\n    const start = input.indexOf(\"var(\", searchStart);\r\n    if (start >= 0) {\r\n        const range = getParenthesesRange(input, start + 3);\r\n        if (range) {\r\n            return {start, end: range.end};\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction getVariablesMatches(input) {\r\n    const ranges = [];\r\n    let i = 0;\r\n    let range;\r\n    while ((range = getVariableRange(input, i))) {\r\n        const {start, end} = range;\r\n        ranges.push({start, end, value: input.substring(start, end)});\r\n        i = range.end + 1;\r\n    }\r\n    return ranges;\r\n}\r\nfunction replaceVariablesMatches(input, replacer) {\r\n    const matches = getVariablesMatches(input);\r\n    const matchesCount = matches.length;\r\n    if (matchesCount === 0) {\r\n        return input;\r\n    }\r\n    const inputLength = input.length;\r\n    const replacements = matches.map((m) => replacer(m.value, matches.length));\r\n    const parts = [];\r\n    parts.push(input.substring(0, matches[0].start));\r\n    for (let i = 0; i < matchesCount; i++) {\r\n        parts.push(replacements[i]);\r\n        const start = matches[i].end;\r\n        const end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;\r\n        parts.push(input.substring(start, end));\r\n    }\r\n    return parts.join(\"\");\r\n}\r\nfunction getVariableNameAndFallback(match) {\r\n    const commaIndex = match.indexOf(\",\");\r\n    let name;\r\n    let fallback;\r\n    if (commaIndex >= 0) {\r\n        name = match.substring(4, commaIndex).trim();\r\n        fallback = match.substring(commaIndex + 1, match.length - 1).trim();\r\n    } else {\r\n        name = match.substring(4, match.length - 1).trim();\r\n        fallback = \"\";\r\n    }\r\n    return {name, fallback};\r\n}\r\nfunction replaceCSSVariablesNames(\r\n    value,\r\n    nameReplacer,\r\n    fallbackReplacer,\r\n    finalFallback\r\n) {\r\n    const matchReplacer = (match) => {\r\n        const {name, fallback} = getVariableNameAndFallback(match);\r\n        const newName = nameReplacer(name);\r\n        if (!fallback) {\r\n            if (finalFallback) {\r\n                return `var(${newName}, ${finalFallback})`;\r\n            }\r\n            return `var(${newName})`;\r\n        }\r\n        let newFallback;\r\n        if (isVarDependant(fallback)) {\r\n            newFallback = replaceCSSVariablesNames(\r\n                fallback,\r\n                nameReplacer,\r\n                fallbackReplacer\r\n            );\r\n        } else if (fallbackReplacer) {\r\n            newFallback = fallbackReplacer(fallback);\r\n        } else {\r\n            newFallback = fallback;\r\n        }\r\n        return `var(${newName}, ${newFallback})`;\r\n    };\r\n    return replaceVariablesMatches(value, matchReplacer);\r\n}\r\nfunction iterateVarDependencies(value, iterator) {\r\n    replaceCSSVariablesNames(value, (varName) => {\r\n        iterator(varName);\r\n        return varName;\r\n    });\r\n}\r\nfunction wrapBgColorVariableName(name) {\r\n    return `--darkreader-bg${name}`;\r\n}\r\nfunction wrapTextColorVariableName(name) {\r\n    return `--darkreader-text${name}`;\r\n}\r\nfunction wrapBorderColorVariableName(name) {\r\n    return `--darkreader-border${name}`;\r\n}\r\nfunction wrapBgImgVariableName(name) {\r\n    return `--darkreader-bgimg${name}`;\r\n}\r\nfunction isVariable(property) {\r\n    return property.startsWith(\"--\");\r\n}\r\nfunction isVarDependant(value) {\r\n    return value.includes(\"var(\");\r\n}\r\nfunction isConstructedColorVar(value) {\r\n    return (\r\n        value.match(/^\\s*(rgb|hsl)a?\\(/) ||\r\n        value.match(/^(((\\d{1,3})|(var\\([\\-_A-Za-z0-9]+\\))),?\\s*?){3}$/)\r\n    );\r\n}\r\nconst textColorProps = [\r\n    \"color\",\r\n    \"caret-color\",\r\n    \"-webkit-text-fill-color\",\r\n    \"fill\",\r\n    \"stroke\"\r\n];\r\nfunction isTextColorProperty(property) {\r\n    return textColorProps.includes(property);\r\n}\r\nconst rawRGBSpaceRegex = /^(\\d{1,3})\\s+(\\d{1,3})\\s+(\\d{1,3})$/;\r\nconst rawRGBCommaRegex = /^(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})$/;\r\nfunction parseRawColorValue(input) {\r\n    const match =\r\n        input.match(rawRGBSpaceRegex) ?? input.match(rawRGBCommaRegex);\r\n    if (match) {\r\n        const color = `rgb(${match[1]}, ${match[2]}, ${match[3]})`;\r\n        return {isRaw: true, color};\r\n    }\r\n    return {isRaw: false, color: input};\r\n}\r\nfunction handleRawColorValue(input, theme, modifyFunction) {\r\n    const {isRaw, color} = parseRawColorValue(input);\r\n    const rgb = parseColorWithCache(color);\r\n    if (rgb) {\r\n        const outputColor = modifyFunction(rgb, theme, !isRaw);\r\n        if (isRaw) {\r\n            const outputInRGB = parseColorWithCache(outputColor);\r\n            return outputInRGB\r\n                ? `${outputInRGB.r}, ${outputInRGB.g}, ${outputInRGB.b}`\r\n                : outputColor;\r\n        }\r\n        return outputColor;\r\n    }\r\n    return color;\r\n}\r\nfunction tryModifyBgColor(color, theme) {\r\n    return handleRawColorValue(color, theme, modifyBackgroundColor);\r\n}\r\nfunction tryModifyTextColor(color, theme) {\r\n    return handleRawColorValue(color, theme, modifyForegroundColor);\r\n}\r\nfunction tryModifyBorderColor(color, theme) {\r\n    return handleRawColorValue(color, theme, modifyBorderColor);\r\n}\r\nfunction insertVarValues(source, varValues, fullStack = new Set()) {\r\n    let containsUnresolvedVar = false;\r\n    const matchReplacer = (match, count) => {\r\n        const {name, fallback} = getVariableNameAndFallback(match);\r\n        const stack = count > 1 ? new Set(fullStack) : fullStack;\r\n        if (stack.has(name)) {\r\n            containsUnresolvedVar = true;\r\n            return null;\r\n        }\r\n        stack.add(name);\r\n        const varValue = varValues.get(name) || fallback;\r\n        let inserted = null;\r\n        if (varValue) {\r\n            if (isVarDependant(varValue)) {\r\n                inserted = insertVarValues(varValue, varValues, stack);\r\n            } else {\r\n                inserted = varValue;\r\n            }\r\n        }\r\n        if (!inserted) {\r\n            containsUnresolvedVar = true;\r\n            return null;\r\n        }\r\n        return inserted;\r\n    };\r\n    const replaced = replaceVariablesMatches(source, matchReplacer);\r\n    if (containsUnresolvedVar) {\r\n        return null;\r\n    }\r\n    return replaced;\r\n}\r\n\r\nfunction getThemeKey(theme) {\r\n    let resultKey = \"\";\r\n    themeCacheKeys.forEach((key) => {\r\n        resultKey += `${key}:${theme[key]};`;\r\n    });\r\n    return resultKey;\r\n}\r\nconst asyncQueue = createAsyncTasksQueue();\r\nfunction createStyleSheetModifier() {\r\n    let renderId = 0;\r\n    function getStyleRuleHash(rule) {\r\n        let cssText = rule.cssText;\r\n        if (isMediaRule(rule.parentRule)) {\r\n            cssText = `${rule.parentRule.media.mediaText} { ${cssText} }`;\r\n        }\r\n        return getHashCode(cssText);\r\n    }\r\n    const rulesTextCache = new Set();\r\n    const rulesModCache = new Map();\r\n    const varTypeChangeCleaners = new Set();\r\n    let prevFilterKey = null;\r\n    let hasNonLoadedLink = false;\r\n    let wasRebuilt = false;\r\n    function shouldRebuildStyle() {\r\n        return hasNonLoadedLink && !wasRebuilt;\r\n    }\r\n    function modifySheet(options) {\r\n        const rules = options.sourceCSSRules;\r\n        const {\r\n            theme,\r\n            ignoreImageAnalysis,\r\n            force,\r\n            prepareSheet,\r\n            isAsyncCancelled\r\n        } = options;\r\n        let rulesChanged = rulesModCache.size === 0;\r\n        const notFoundCacheKeys = new Set(rulesModCache.keys());\r\n        const themeKey = getThemeKey(theme);\r\n        const themeChanged = themeKey !== prevFilterKey;\r\n        if (hasNonLoadedLink) {\r\n            wasRebuilt = true;\r\n        }\r\n        const modRules = [];\r\n        iterateCSSRules(\r\n            rules,\r\n            (rule) => {\r\n                const hash = getStyleRuleHash(rule);\r\n                let textDiffersFromPrev = false;\r\n                notFoundCacheKeys.delete(hash);\r\n                if (!rulesTextCache.has(hash)) {\r\n                    rulesTextCache.add(hash);\r\n                    textDiffersFromPrev = true;\r\n                }\r\n                if (textDiffersFromPrev) {\r\n                    rulesChanged = true;\r\n                } else {\r\n                    modRules.push(rulesModCache.get(hash));\r\n                    return;\r\n                }\r\n                if (rule.style.all === \"revert\") {\r\n                    return;\r\n                }\r\n                const modDecs = [];\r\n                rule.style &&\r\n                    iterateCSSDeclarations(rule.style, (property, value) => {\r\n                        const mod = getModifiableCSSDeclaration(\r\n                            property,\r\n                            value,\r\n                            rule,\r\n                            variablesStore,\r\n                            ignoreImageAnalysis,\r\n                            isAsyncCancelled\r\n                        );\r\n                        if (mod) {\r\n                            modDecs.push(mod);\r\n                        }\r\n                    });\r\n                let modRule = null;\r\n                if (modDecs.length > 0) {\r\n                    const parentRule = rule.parentRule;\r\n                    modRule = {\r\n                        selector: rule.selectorText,\r\n                        declarations: modDecs,\r\n                        parentRule\r\n                    };\r\n                    modRules.push(modRule);\r\n                }\r\n                rulesModCache.set(hash, modRule);\r\n            },\r\n            () => {\r\n                hasNonLoadedLink = true;\r\n            }\r\n        );\r\n        notFoundCacheKeys.forEach((key) => {\r\n            rulesTextCache.delete(key);\r\n            rulesModCache.delete(key);\r\n        });\r\n        prevFilterKey = themeKey;\r\n        if (!force && !rulesChanged && !themeChanged) {\r\n            return;\r\n        }\r\n        renderId++;\r\n        function setRule(target, index, rule) {\r\n            const {selector, declarations} = rule;\r\n            let selectorText = selector;\r\n            const emptyIsWhereSelector =\r\n                isChromium &&\r\n                selector.startsWith(\":is(\") &&\r\n                (selector.includes(\":is()\") ||\r\n                    selector.includes(\":where()\") ||\r\n                    (selector.includes(\":where(\") &&\r\n                        selector.includes(\":-moz\")));\r\n            const viewTransitionSelector =\r\n                selector.includes(\"::view-transition-\");\r\n            if (emptyIsWhereSelector || viewTransitionSelector) {\r\n                selectorText = \".darkreader-unsupported-selector\";\r\n            }\r\n            let ruleText = `${selectorText} {`;\r\n            for (const dec of declarations) {\r\n                const {property, value, important} = dec;\r\n                if (value) {\r\n                    ruleText += ` ${property}: ${value}${important ? \" !important\" : \"\"};`;\r\n                }\r\n            }\r\n            ruleText += \" }\";\r\n            target.insertRule(ruleText, index);\r\n        }\r\n        const asyncDeclarations = new Map();\r\n        const varDeclarations = new Map();\r\n        let asyncDeclarationCounter = 0;\r\n        let varDeclarationCounter = 0;\r\n        const rootReadyGroup = {rule: null, rules: [], isGroup: true};\r\n        const groupRefs = new WeakMap();\r\n        function getGroup(rule) {\r\n            if (rule == null) {\r\n                return rootReadyGroup;\r\n            }\r\n            if (groupRefs.has(rule)) {\r\n                return groupRefs.get(rule);\r\n            }\r\n            const group = {rule, rules: [], isGroup: true};\r\n            groupRefs.set(rule, group);\r\n            const parentGroup = getGroup(rule.parentRule);\r\n            parentGroup.rules.push(group);\r\n            return group;\r\n        }\r\n        varTypeChangeCleaners.forEach((clear) => clear());\r\n        varTypeChangeCleaners.clear();\r\n        modRules\r\n            .filter((r) => r)\r\n            .forEach(({selector, declarations, parentRule}) => {\r\n                const group = getGroup(parentRule);\r\n                const readyStyleRule = {\r\n                    selector,\r\n                    declarations: [],\r\n                    isGroup: false\r\n                };\r\n                const readyDeclarations = readyStyleRule.declarations;\r\n                group.rules.push(readyStyleRule);\r\n                function handleAsyncDeclaration(\r\n                    property,\r\n                    modified,\r\n                    important,\r\n                    sourceValue\r\n                ) {\r\n                    const asyncKey = ++asyncDeclarationCounter;\r\n                    const asyncDeclaration = {\r\n                        property,\r\n                        value: null,\r\n                        important,\r\n                        asyncKey,\r\n                        sourceValue\r\n                    };\r\n                    readyDeclarations.push(asyncDeclaration);\r\n                    const currentRenderId = renderId;\r\n                    modified.then((asyncValue) => {\r\n                        if (\r\n                            !asyncValue ||\r\n                            isAsyncCancelled() ||\r\n                            currentRenderId !== renderId\r\n                        ) {\r\n                            return;\r\n                        }\r\n                        asyncDeclaration.value = asyncValue;\r\n                        asyncQueue.add(() => {\r\n                            if (\r\n                                isAsyncCancelled() ||\r\n                                currentRenderId !== renderId\r\n                            ) {\r\n                                return;\r\n                            }\r\n                            rebuildAsyncRule(asyncKey);\r\n                        });\r\n                    });\r\n                }\r\n                function handleVarDeclarations(\r\n                    property,\r\n                    modified,\r\n                    important,\r\n                    sourceValue\r\n                ) {\r\n                    const {declarations: varDecs, onTypeChange} = modified;\r\n                    const varKey = ++varDeclarationCounter;\r\n                    const currentRenderId = renderId;\r\n                    const initialIndex = readyDeclarations.length;\r\n                    let oldDecs = [];\r\n                    if (varDecs.length === 0) {\r\n                        const tempDec = {\r\n                            property,\r\n                            value: sourceValue,\r\n                            important,\r\n                            sourceValue,\r\n                            varKey\r\n                        };\r\n                        readyDeclarations.push(tempDec);\r\n                        oldDecs = [tempDec];\r\n                    }\r\n                    varDecs.forEach((mod) => {\r\n                        if (mod.value instanceof Promise) {\r\n                            handleAsyncDeclaration(\r\n                                mod.property,\r\n                                mod.value,\r\n                                important,\r\n                                sourceValue\r\n                            );\r\n                        } else {\r\n                            const readyDec = {\r\n                                property: mod.property,\r\n                                value: mod.value,\r\n                                important,\r\n                                sourceValue,\r\n                                varKey\r\n                            };\r\n                            readyDeclarations.push(readyDec);\r\n                            oldDecs.push(readyDec);\r\n                        }\r\n                    });\r\n                    onTypeChange.addListener((newDecs) => {\r\n                        if (\r\n                            isAsyncCancelled() ||\r\n                            currentRenderId !== renderId\r\n                        ) {\r\n                            return;\r\n                        }\r\n                        const readyVarDecs = newDecs.map((mod) => {\r\n                            return {\r\n                                property: mod.property,\r\n                                value: mod.value,\r\n                                important,\r\n                                sourceValue,\r\n                                varKey\r\n                            };\r\n                        });\r\n                        const index = readyDeclarations.indexOf(\r\n                            oldDecs[0],\r\n                            initialIndex\r\n                        );\r\n                        readyDeclarations.splice(\r\n                            index,\r\n                            oldDecs.length,\r\n                            ...readyVarDecs\r\n                        );\r\n                        oldDecs = readyVarDecs;\r\n                        rebuildVarRule(varKey);\r\n                    });\r\n                    varTypeChangeCleaners.add(() =>\r\n                        onTypeChange.removeListeners()\r\n                    );\r\n                }\r\n                declarations.forEach(\r\n                    ({property, value, important, sourceValue}) => {\r\n                        if (typeof value === \"function\") {\r\n                            const modified = value(theme);\r\n                            if (modified instanceof Promise) {\r\n                                handleAsyncDeclaration(\r\n                                    property,\r\n                                    modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else if (property.startsWith(\"--\")) {\r\n                                handleVarDeclarations(\r\n                                    property,\r\n                                    modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                );\r\n                            } else {\r\n                                readyDeclarations.push({\r\n                                    property,\r\n                                    value: modified,\r\n                                    important,\r\n                                    sourceValue\r\n                                });\r\n                            }\r\n                        } else {\r\n                            readyDeclarations.push({\r\n                                property,\r\n                                value,\r\n                                important,\r\n                                sourceValue\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n            });\r\n        const sheet = prepareSheet();\r\n        function buildStyleSheet() {\r\n            function createTarget(group, parent) {\r\n                const {rule} = group;\r\n                if (isStyleRule(rule)) {\r\n                    const {selectorText} = rule;\r\n                    const index = parent.cssRules.length;\r\n                    parent.insertRule(`${selectorText} {}`, index);\r\n                    return parent.cssRules[index];\r\n                }\r\n                if (isMediaRule(rule)) {\r\n                    const {media} = rule;\r\n                    const index = parent.cssRules.length;\r\n                    parent.insertRule(`@media ${media.mediaText} {}`, index);\r\n                    return parent.cssRules[index];\r\n                }\r\n                if (isLayerRule(rule)) {\r\n                    const {name} = rule;\r\n                    const index = parent.cssRules.length;\r\n                    parent.insertRule(`@layer ${name} {}`, index);\r\n                    return parent.cssRules[index];\r\n                }\r\n                return parent;\r\n            }\r\n            function iterateReadyRules(group, target, styleIterator) {\r\n                group.rules.forEach((r) => {\r\n                    if (r.isGroup) {\r\n                        const t = createTarget(r, target);\r\n                        iterateReadyRules(r, t, styleIterator);\r\n                    } else {\r\n                        styleIterator(r, target);\r\n                    }\r\n                });\r\n            }\r\n            iterateReadyRules(rootReadyGroup, sheet, (rule, target) => {\r\n                const index = target.cssRules.length;\r\n                rule.declarations.forEach(({asyncKey, varKey}) => {\r\n                    if (asyncKey != null) {\r\n                        asyncDeclarations.set(asyncKey, {rule, target, index});\r\n                    }\r\n                    if (varKey != null) {\r\n                        varDeclarations.set(varKey, {rule, target, index});\r\n                    }\r\n                });\r\n                setRule(target, index, rule);\r\n            });\r\n        }\r\n        function rebuildAsyncRule(key) {\r\n            const {rule, target, index} = asyncDeclarations.get(key);\r\n            target.deleteRule(index);\r\n            setRule(target, index, rule);\r\n            asyncDeclarations.delete(key);\r\n        }\r\n        function rebuildVarRule(key) {\r\n            const {rule, target, index} = varDeclarations.get(key);\r\n            target.deleteRule(index);\r\n            setRule(target, index, rule);\r\n        }\r\n        buildStyleSheet();\r\n    }\r\n    return {modifySheet, shouldRebuildStyle};\r\n}\r\n\r\nlet canUseSheetProxy$1 = false;\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => (canUseSheetProxy$1 = true),\r\n    {once: true}\r\n);\r\nconst overrides$1 = new WeakSet();\r\nconst overridesBySource = new WeakMap();\r\nfunction canHaveAdoptedStyleSheets(node) {\r\n    return Array.isArray(node.adoptedStyleSheets);\r\n}\r\nfunction createAdoptedStyleSheetOverride(node) {\r\n    let cancelAsyncOperations = false;\r\n    function iterateSourceSheets(iterator) {\r\n        node.adoptedStyleSheets.forEach((sheet) => {\r\n            if (!overrides$1.has(sheet)) {\r\n                iterator(sheet);\r\n            }\r\n            defineSheetScope(sheet, node);\r\n        });\r\n    }\r\n    function injectSheet(sheet, override) {\r\n        const newSheets = [...node.adoptedStyleSheets];\r\n        const sheetIndex = newSheets.indexOf(sheet);\r\n        const overrideIndex = newSheets.indexOf(override);\r\n        if (overrideIndex >= 0) {\r\n            newSheets.splice(overrideIndex, 1);\r\n        }\r\n        newSheets.splice(sheetIndex + 1, 0, override);\r\n        node.adoptedStyleSheets = newSheets;\r\n    }\r\n    function clear() {\r\n        const newSheets = [...node.adoptedStyleSheets];\r\n        for (let i = newSheets.length - 1; i >= 0; i--) {\r\n            const sheet = newSheets[i];\r\n            if (overrides$1.has(sheet)) {\r\n                newSheets.splice(i, 1);\r\n            }\r\n        }\r\n        if (node.adoptedStyleSheets.length !== newSheets.length) {\r\n            node.adoptedStyleSheets = newSheets;\r\n        }\r\n        sourceSheets = new WeakSet();\r\n        sourceDeclarations = new WeakSet();\r\n    }\r\n    const cleaners = [];\r\n    function destroy() {\r\n        cleaners.forEach((c) => c());\r\n        cleaners.splice(0);\r\n        cancelAsyncOperations = true;\r\n        clear();\r\n        if (frameId) {\r\n            cancelAnimationFrame(frameId);\r\n            frameId = null;\r\n        }\r\n    }\r\n    let rulesChangeKey = 0;\r\n    function getRulesChangeKey() {\r\n        let count = 0;\r\n        iterateSourceSheets((sheet) => {\r\n            count += sheet.cssRules.length;\r\n        });\r\n        if (count === 1) {\r\n            const rule = node.adoptedStyleSheets[0].cssRules[0];\r\n            return rule instanceof CSSStyleRule ? rule.style.length : count;\r\n        }\r\n        return count;\r\n    }\r\n    let sourceSheets = new WeakSet();\r\n    let sourceDeclarations = new WeakSet();\r\n    function render(theme, ignoreImageAnalysis) {\r\n        clear();\r\n        for (let i = node.adoptedStyleSheets.length - 1; i >= 0; i--) {\r\n            const sheet = node.adoptedStyleSheets[i];\r\n            if (overrides$1.has(sheet)) {\r\n                continue;\r\n            }\r\n            sourceSheets.add(sheet);\r\n            const readyOverride = overridesBySource.get(sheet);\r\n            if (readyOverride) {\r\n                rulesChangeKey = getRulesChangeKey();\r\n                injectSheet(sheet, readyOverride);\r\n                continue;\r\n            }\r\n            const rules = sheet.cssRules;\r\n            const override = new CSSStyleSheet();\r\n            overridesBySource.set(sheet, override);\r\n            iterateCSSRules(rules, (rule) =>\r\n                sourceDeclarations.add(rule.style)\r\n            );\r\n            const prepareSheet = () => {\r\n                for (let i = override.cssRules.length - 1; i >= 0; i--) {\r\n                    override.deleteRule(i);\r\n                }\r\n                override.insertRule(\"#__darkreader__adoptedOverride {}\");\r\n                injectSheet(sheet, override);\r\n                overrides$1.add(override);\r\n                return override;\r\n            };\r\n            const sheetModifier = createStyleSheetModifier();\r\n            sheetModifier.modifySheet({\r\n                prepareSheet,\r\n                sourceCSSRules: rules,\r\n                theme,\r\n                ignoreImageAnalysis,\r\n                force: false,\r\n                isAsyncCancelled: () => cancelAsyncOperations\r\n            });\r\n        }\r\n        rulesChangeKey = getRulesChangeKey();\r\n    }\r\n    let callbackRequested = false;\r\n    function handleArrayChange(callback) {\r\n        if (callbackRequested) {\r\n            return;\r\n        }\r\n        callbackRequested = true;\r\n        queueMicrotask(() => {\r\n            callbackRequested = false;\r\n            const sheets = node.adoptedStyleSheets.filter(\r\n                (s) => !overrides$1.has(s)\r\n            );\r\n            sheets.forEach((sheet) => overridesBySource.delete(sheet));\r\n            callback(sheets);\r\n        });\r\n    }\r\n    function checkForUpdates() {\r\n        return getRulesChangeKey() !== rulesChangeKey;\r\n    }\r\n    let frameId = null;\r\n    function watchUsingRAF(callback) {\r\n        frameId = requestAnimationFrame(() => {\r\n            if (canUseSheetProxy$1) {\r\n                return;\r\n            }\r\n            if (checkForUpdates()) {\r\n                handleArrayChange(callback);\r\n            }\r\n            watchUsingRAF(callback);\r\n        });\r\n    }\r\n    function addSheetChangeEventListener(type, listener) {\r\n        node.addEventListener(type, listener);\r\n        cleaners.push(() => node.removeEventListener(type, listener));\r\n    }\r\n    function watch(callback) {\r\n        const onAdoptedSheetsChange = () => {\r\n            canUseSheetProxy$1 = true;\r\n            handleArrayChange(callback);\r\n        };\r\n        addSheetChangeEventListener(\r\n            \"__darkreader__adoptedStyleSheetsChange\",\r\n            onAdoptedSheetsChange\r\n        );\r\n        addSheetChangeEventListener(\r\n            \"__darkreader__adoptedStyleSheetChange\",\r\n            onAdoptedSheetsChange\r\n        );\r\n        addSheetChangeEventListener(\r\n            \"__darkreader__adoptedStyleDeclarationChange\",\r\n            onAdoptedSheetsChange\r\n        );\r\n        if (canUseSheetProxy$1) {\r\n            return;\r\n        }\r\n        watchUsingRAF(callback);\r\n    }\r\n    return {\r\n        render,\r\n        destroy,\r\n        watch\r\n    };\r\n}\r\nclass StyleSheetCommandBuilder {\r\n    constructor() {\r\n        this.cssRules = [];\r\n        this.commands = [];\r\n    }\r\n    insertRule(cssText, index = 0) {\r\n        this.commands.push({type: \"insert\", index, cssText});\r\n        this.cssRules.splice(index, 0, new StyleSheetCommandBuilder());\r\n        return index;\r\n    }\r\n    deleteRule(index) {\r\n        this.commands.push({type: \"delete\", index});\r\n        this.cssRules.splice(index, 1);\r\n    }\r\n    replaceSync(cssText) {\r\n        this.commands.splice(0);\r\n        this.commands.push({type: \"replace\", cssText});\r\n        if (cssText === \"\") {\r\n            this.cssRules.splice(0);\r\n        } else {\r\n            throw new Error(\r\n                \"StyleSheetCommandBuilder.replaceSync() is not fully supported\"\r\n            );\r\n        }\r\n    }\r\n    getDeepCSSCommands() {\r\n        const deep = [];\r\n        this.commands.forEach((command) => {\r\n            deep.push({\r\n                type: command.type,\r\n                cssText: command.type !== \"delete\" ? command.cssText : \"\",\r\n                path: command.type === \"replace\" ? [] : [command.index]\r\n            });\r\n        });\r\n        this.cssRules.forEach((rule, i) => {\r\n            const childCommands = rule.getDeepCSSCommands();\r\n            childCommands.forEach((c) => c.path.unshift(i));\r\n        });\r\n        return deep;\r\n    }\r\n    clearDeepCSSCommands() {\r\n        this.commands.splice(0);\r\n        this.cssRules.forEach((rule) => rule.clearDeepCSSCommands());\r\n    }\r\n}\r\nfunction createAdoptedStyleSheetFallback() {\r\n    let cancelAsyncOperations = false;\r\n    const builder = new StyleSheetCommandBuilder();\r\n    function render(options) {\r\n        const prepareSheet = () => {\r\n            builder.replaceSync(\"\");\r\n            return builder;\r\n        };\r\n        const sheetModifier = createStyleSheetModifier();\r\n        sheetModifier.modifySheet({\r\n            prepareSheet,\r\n            sourceCSSRules: options.cssRules,\r\n            theme: options.theme,\r\n            ignoreImageAnalysis: options.ignoreImageAnalysis,\r\n            force: false,\r\n            isAsyncCancelled: () => cancelAsyncOperations\r\n        });\r\n    }\r\n    function commands() {\r\n        const commands = builder.getDeepCSSCommands();\r\n        builder.clearDeepCSSCommands();\r\n        return commands;\r\n    }\r\n    function destroy() {\r\n        cancelAsyncOperations = true;\r\n    }\r\n    return {render, destroy, commands};\r\n}\r\n\r\nconst hostsBreakingOnStylePosition = [\"www.diffusioneshop.com\", \"zhale.me\"];\r\nconst mode = hostsBreakingOnStylePosition.includes(location.hostname)\r\n    ? \"away\"\r\n    : \"next\";\r\nfunction getStyleInjectionMode() {\r\n    return mode;\r\n}\r\nfunction injectStyleAway(styleElement) {\r\n    let container = document.body.querySelector(\".darkreader-style-container\");\r\n    if (!container) {\r\n        container = document.createElement(\"div\");\r\n        container.classList.add(\"darkreader\");\r\n        container.classList.add(\"darkreader-style-container\");\r\n        container.style.display = \"none\";\r\n        document.body.append(container);\r\n    }\r\n    container.append(styleElement);\r\n}\r\n\r\nconst overrides = {\r\n    \"background-color\": {\r\n        customProp: \"--darkreader-inline-bgcolor\",\r\n        cssProp: \"background-color\",\r\n        dataAttr: \"data-darkreader-inline-bgcolor\"\r\n    },\r\n    \"background-image\": {\r\n        customProp: \"--darkreader-inline-bgimage\",\r\n        cssProp: \"background-image\",\r\n        dataAttr: \"data-darkreader-inline-bgimage\"\r\n    },\r\n    \"border-color\": {\r\n        customProp: \"--darkreader-inline-border\",\r\n        cssProp: \"border-color\",\r\n        dataAttr: \"data-darkreader-inline-border\"\r\n    },\r\n    \"border-bottom-color\": {\r\n        customProp: \"--darkreader-inline-border-bottom\",\r\n        cssProp: \"border-bottom-color\",\r\n        dataAttr: \"data-darkreader-inline-border-bottom\"\r\n    },\r\n    \"border-left-color\": {\r\n        customProp: \"--darkreader-inline-border-left\",\r\n        cssProp: \"border-left-color\",\r\n        dataAttr: \"data-darkreader-inline-border-left\"\r\n    },\r\n    \"border-right-color\": {\r\n        customProp: \"--darkreader-inline-border-right\",\r\n        cssProp: \"border-right-color\",\r\n        dataAttr: \"data-darkreader-inline-border-right\"\r\n    },\r\n    \"border-top-color\": {\r\n        customProp: \"--darkreader-inline-border-top\",\r\n        cssProp: \"border-top-color\",\r\n        dataAttr: \"data-darkreader-inline-border-top\"\r\n    },\r\n    \"box-shadow\": {\r\n        customProp: \"--darkreader-inline-boxshadow\",\r\n        cssProp: \"box-shadow\",\r\n        dataAttr: \"data-darkreader-inline-boxshadow\"\r\n    },\r\n    \"color\": {\r\n        customProp: \"--darkreader-inline-color\",\r\n        cssProp: \"color\",\r\n        dataAttr: \"data-darkreader-inline-color\"\r\n    },\r\n    \"fill\": {\r\n        customProp: \"--darkreader-inline-fill\",\r\n        cssProp: \"fill\",\r\n        dataAttr: \"data-darkreader-inline-fill\"\r\n    },\r\n    \"stroke\": {\r\n        customProp: \"--darkreader-inline-stroke\",\r\n        cssProp: \"stroke\",\r\n        dataAttr: \"data-darkreader-inline-stroke\"\r\n    },\r\n    \"outline-color\": {\r\n        customProp: \"--darkreader-inline-outline\",\r\n        cssProp: \"outline-color\",\r\n        dataAttr: \"data-darkreader-inline-outline\"\r\n    },\r\n    \"stop-color\": {\r\n        customProp: \"--darkreader-inline-stopcolor\",\r\n        cssProp: \"stop-color\",\r\n        dataAttr: \"data-darkreader-inline-stopcolor\"\r\n    }\r\n};\r\nconst shorthandOverrides = {\r\n    \"background\": {\r\n        customProp: \"--darkreader-inline-bg\",\r\n        cssProp: \"background\",\r\n        dataAttr: \"data-darkreader-inline-bg\"\r\n    },\r\n    \"border\": {\r\n        customProp: \"--darkreader-inline-border-short\",\r\n        cssProp: \"border\",\r\n        dataAttr: \"data-darkreader-inline-border-short\"\r\n    },\r\n    \"border-bottom\": {\r\n        customProp: \"--darkreader-inline-border-bottom-short\",\r\n        cssProp: \"border-bottom\",\r\n        dataAttr: \"data-darkreader-inline-border-bottom-short\"\r\n    },\r\n    \"border-left\": {\r\n        customProp: \"--darkreader-inline-border-left-short\",\r\n        cssProp: \"border-left\",\r\n        dataAttr: \"data-darkreader-inline-border-left-short\"\r\n    },\r\n    \"border-right\": {\r\n        customProp: \"--darkreader-inline-border-right-short\",\r\n        cssProp: \"border-right\",\r\n        dataAttr: \"data-darkreader-inline-border-right-short\"\r\n    },\r\n    \"border-top\": {\r\n        customProp: \"--darkreader-inline-border-top-short\",\r\n        cssProp: \"border-top\",\r\n        dataAttr: \"data-darkreader-inline-border-top-short\"\r\n    }\r\n};\r\nconst overridesList = Object.values(overrides);\r\nconst normalizedPropList = {};\r\noverridesList.forEach(\r\n    ({cssProp, customProp}) => (normalizedPropList[customProp] = cssProp)\r\n);\r\nconst INLINE_STYLE_ATTRS = [\r\n    \"style\",\r\n    \"fill\",\r\n    \"stop-color\",\r\n    \"stroke\",\r\n    \"bgcolor\",\r\n    \"color\",\r\n    \"background\"\r\n];\r\nconst INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(\r\n    (attr) => `[${attr}]`\r\n).join(\", \");\r\nfunction getInlineOverrideStyle() {\r\n    const allOverrides = overridesList.concat(\r\n        Object.values(shorthandOverrides)\r\n    );\r\n    return allOverrides\r\n        .map(({dataAttr, customProp, cssProp}) => {\r\n            return [\r\n                `[${dataAttr}] {`,\r\n                `  ${cssProp}: var(${customProp}) !important;`,\r\n                \"}\"\r\n            ].join(\"\\n\");\r\n        })\r\n        .concat([\r\n            \"[data-darkreader-inline-invert] {\",\r\n            \"    filter: invert(100%) hue-rotate(180deg);\",\r\n            \"}\"\r\n        ])\r\n        .join(\"\\n\");\r\n}\r\nfunction getInlineStyleElements(root) {\r\n    const results = [];\r\n    if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {\r\n        results.push(root);\r\n    }\r\n    if (\r\n        root instanceof Element ||\r\n        (isShadowDomSupported && root instanceof ShadowRoot) ||\r\n        root instanceof Document\r\n    ) {\r\n        push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));\r\n    }\r\n    return results;\r\n}\r\nconst treeObservers = new Map();\r\nconst attrObservers = new Map();\r\nfunction watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {\r\n    deepWatchForInlineStyles(\r\n        document,\r\n        elementStyleDidChange,\r\n        shadowRootDiscovered\r\n    );\r\n    iterateShadowHosts(document.documentElement, (host) => {\r\n        deepWatchForInlineStyles(\r\n            host.shadowRoot,\r\n            elementStyleDidChange,\r\n            shadowRootDiscovered\r\n        );\r\n    });\r\n}\r\nfunction deepWatchForInlineStyles(\r\n    root,\r\n    elementStyleDidChange,\r\n    shadowRootDiscovered\r\n) {\r\n    if (treeObservers.has(root)) {\r\n        treeObservers.get(root).disconnect();\r\n        attrObservers.get(root).disconnect();\r\n    }\r\n    const discoveredNodes = new WeakSet();\r\n    function discoverNodes(node) {\r\n        getInlineStyleElements(node).forEach((el) => {\r\n            if (discoveredNodes.has(el)) {\r\n                return;\r\n            }\r\n            discoveredNodes.add(el);\r\n            elementStyleDidChange(el);\r\n        });\r\n        iterateShadowHosts(node, (n) => {\r\n            if (discoveredNodes.has(node)) {\r\n                return;\r\n            }\r\n            discoveredNodes.add(node);\r\n            shadowRootDiscovered(n.shadowRoot);\r\n            deepWatchForInlineStyles(\r\n                n.shadowRoot,\r\n                elementStyleDidChange,\r\n                shadowRootDiscovered\r\n            );\r\n        });\r\n        variablesStore.matchVariablesAndDependents();\r\n    }\r\n    const treeObserver = createOptimizedTreeObserver(root, {\r\n        onMinorMutations: (_root, {additions}) => {\r\n            additions.forEach((added) => discoverNodes(added));\r\n        },\r\n        onHugeMutations: () => {\r\n            discoverNodes(root);\r\n        }\r\n    });\r\n    treeObservers.set(root, treeObserver);\r\n    let attemptCount = 0;\r\n    let start = null;\r\n    const ATTEMPTS_INTERVAL = getDuration({seconds: 10});\r\n    const RETRY_TIMEOUT = getDuration({seconds: 2});\r\n    const MAX_ATTEMPTS_COUNT = 50;\r\n    let cache = [];\r\n    let timeoutId = null;\r\n    const handleAttributeMutations = throttle((mutations) => {\r\n        const handledTargets = new Set();\r\n        mutations.forEach((m) => {\r\n            const target = m.target;\r\n            if (handledTargets.has(target)) {\r\n                return;\r\n            }\r\n            if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {\r\n                handledTargets.add(target);\r\n                elementStyleDidChange(target);\r\n            }\r\n        });\r\n        variablesStore.matchVariablesAndDependents();\r\n    });\r\n    const attrObserver = new MutationObserver((mutations) => {\r\n        if (timeoutId) {\r\n            cache.push(...mutations);\r\n            return;\r\n        }\r\n        attemptCount++;\r\n        const now = Date.now();\r\n        if (start == null) {\r\n            start = now;\r\n        } else if (attemptCount >= MAX_ATTEMPTS_COUNT) {\r\n            if (now - start < ATTEMPTS_INTERVAL) {\r\n                timeoutId = setTimeout(() => {\r\n                    start = null;\r\n                    attemptCount = 0;\r\n                    timeoutId = null;\r\n                    const attributeCache = cache;\r\n                    cache = [];\r\n                    handleAttributeMutations(attributeCache);\r\n                }, RETRY_TIMEOUT);\r\n                cache.push(...mutations);\r\n                return;\r\n            }\r\n            start = now;\r\n            attemptCount = 1;\r\n        }\r\n        handleAttributeMutations(mutations);\r\n    });\r\n    attrObserver.observe(root, {\r\n        attributes: true,\r\n        attributeFilter: INLINE_STYLE_ATTRS.concat(\r\n            overridesList.map(({dataAttr}) => dataAttr)\r\n        ),\r\n        subtree: true\r\n    });\r\n    attrObservers.set(root, attrObserver);\r\n}\r\nfunction stopWatchingForInlineStyles() {\r\n    treeObservers.forEach((o) => o.disconnect());\r\n    attrObservers.forEach((o) => o.disconnect());\r\n    treeObservers.clear();\r\n    attrObservers.clear();\r\n}\r\nconst inlineStyleCache = new WeakMap();\r\nconst svgInversionCache = new WeakSet();\r\nconst svgAnalysisConditionCache = new WeakMap();\r\nconst themeProps = [\"brightness\", \"contrast\", \"grayscale\", \"sepia\", \"mode\"];\r\nfunction shouldAnalyzeSVGAsImage(svg) {\r\n    if (svgAnalysisConditionCache.has(svg)) {\r\n        return svgAnalysisConditionCache.get(svg);\r\n    }\r\n    const shouldAnalyze = Boolean(\r\n        svg &&\r\n            (svg.getAttribute(\"class\")?.includes(\"logo\") ||\r\n                svg.parentElement?.getAttribute(\"class\")?.includes(\"logo\"))\r\n    );\r\n    svgAnalysisConditionCache.set(svg, shouldAnalyze);\r\n    return shouldAnalyze;\r\n}\r\nfunction getInlineStyleCacheKey(el, theme) {\r\n    return INLINE_STYLE_ATTRS.map(\r\n        (attr) => `${attr}=\"${el.getAttribute(attr)}\"`\r\n    )\r\n        .concat(themeProps.map((prop) => `${prop}=\"${theme[prop]}\"`))\r\n        .join(\" \");\r\n}\r\nfunction shouldIgnoreInlineStyle(element, selectors) {\r\n    for (let i = 0, len = selectors.length; i < len; i++) {\r\n        const ingnoredSelector = selectors[i];\r\n        if (element.matches(ingnoredSelector)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction overrideInlineStyle(\r\n    element,\r\n    theme,\r\n    ignoreInlineSelectors,\r\n    ignoreImageSelectors\r\n) {\r\n    const cacheKey = getInlineStyleCacheKey(element, theme);\r\n    if (cacheKey === inlineStyleCache.get(element)) {\r\n        return;\r\n    }\r\n    const unsetProps = new Set(Object.keys(overrides));\r\n    function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {\r\n        const mod = getModifiableCSSDeclaration(\r\n            modifierCSSProp,\r\n            cssVal,\r\n            {style: element.style},\r\n            variablesStore,\r\n            ignoreImageSelectors,\r\n            null\r\n        );\r\n        if (!mod) {\r\n            return;\r\n        }\r\n        function setStaticValue(value) {\r\n            const {customProp, dataAttr} =\r\n                overrides[targetCSSProp] ?? shorthandOverrides[targetCSSProp];\r\n            element.style.setProperty(customProp, value);\r\n            if (!element.hasAttribute(dataAttr)) {\r\n                element.setAttribute(dataAttr, \"\");\r\n            }\r\n            unsetProps.delete(targetCSSProp);\r\n        }\r\n        function setVarDeclaration(mod) {\r\n            let prevDeclarations = [];\r\n            function setProps(declarations) {\r\n                prevDeclarations.forEach(({property}) => {\r\n                    element.style.removeProperty(property);\r\n                });\r\n                declarations.forEach(({property, value}) => {\r\n                    if (!(value instanceof Promise)) {\r\n                        element.style.setProperty(property, value);\r\n                    }\r\n                });\r\n                prevDeclarations = declarations;\r\n            }\r\n            setProps(mod.declarations);\r\n            mod.onTypeChange.addListener(setProps);\r\n        }\r\n        function setAsyncValue(promise, sourceValue) {\r\n            promise.then((value) => {\r\n                if (\r\n                    value &&\r\n                    targetCSSProp === \"background\" &&\r\n                    value.startsWith(\"var(--darkreader-bg--\")\r\n                ) {\r\n                    setStaticValue(value);\r\n                }\r\n                if (value && targetCSSProp === \"background-image\") {\r\n                    if (\r\n                        (element === document.documentElement ||\r\n                            element === document.body) &&\r\n                        value === sourceValue\r\n                    ) {\r\n                        value = \"none\";\r\n                    }\r\n                    setStaticValue(value);\r\n                }\r\n                inlineStyleCache.set(\r\n                    element,\r\n                    getInlineStyleCacheKey(element, theme)\r\n                );\r\n            });\r\n        }\r\n        const value =\r\n            typeof mod.value === \"function\" ? mod.value(theme) : mod.value;\r\n        if (typeof value === \"string\") {\r\n            setStaticValue(value);\r\n        } else if (value instanceof Promise) {\r\n            setAsyncValue(value, cssVal);\r\n        } else if (typeof value === \"object\") {\r\n            setVarDeclaration(value);\r\n        }\r\n    }\r\n    if (ignoreInlineSelectors.length > 0) {\r\n        if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {\r\n            unsetProps.forEach((cssProp) => {\r\n                element.removeAttribute(overrides[cssProp].dataAttr);\r\n            });\r\n            return;\r\n        }\r\n    }\r\n    const isSVGElement = element instanceof SVGElement;\r\n    const svg = isSVGElement\r\n        ? (element.ownerSVGElement ??\r\n          (element instanceof SVGSVGElement ? element : null))\r\n        : null;\r\n    if (isSVGElement && theme.mode === 1 && svg) {\r\n        if (svgInversionCache.has(svg)) {\r\n            return;\r\n        }\r\n        if (shouldAnalyzeSVGAsImage(svg)) {\r\n            svgInversionCache.add(svg);\r\n            const analyzeSVGAsImage = () => {\r\n                let svgString = svg.outerHTML;\r\n                svgString = svgString.replaceAll(\r\n                    '<style class=\"darkreader darkreader--sync\" media=\"screen\"></style>',\r\n                    \"\"\r\n                );\r\n                const dataURL = `data:image/svg+xml;base64,${btoa(svgString)}`;\r\n                getImageDetails(dataURL).then((details) => {\r\n                    if (\r\n                        (details.isDark && details.isTransparent) ||\r\n                        (details.isLarge &&\r\n                            details.isLight &&\r\n                            !details.isTransparent)\r\n                    ) {\r\n                        svg.setAttribute(\"data-darkreader-inline-invert\", \"\");\r\n                    } else {\r\n                        svg.removeAttribute(\"data-darkreader-inline-invert\");\r\n                    }\r\n                });\r\n            };\r\n            analyzeSVGAsImage();\r\n            if (!isDOMReady()) {\r\n                addDOMReadyListener(analyzeSVGAsImage);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    if (element.hasAttribute(\"bgcolor\")) {\r\n        let value = element.getAttribute(\"bgcolor\");\r\n        if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\r\n            value = `#${value}`;\r\n        }\r\n        setCustomProp(\"background-color\", \"background-color\", value);\r\n    }\r\n    if (\r\n        (element === document.documentElement || element === document.body) &&\r\n        element.hasAttribute(\"background\")\r\n    ) {\r\n        const url = getAbsoluteURL(\r\n            location.href,\r\n            element.getAttribute(\"background\") ?? \"\"\r\n        );\r\n        const value = `url(\"${url}\")`;\r\n        setCustomProp(\"background-image\", \"background-image\", value);\r\n    }\r\n    if (element.hasAttribute(\"color\") && element.rel !== \"mask-icon\") {\r\n        let value = element.getAttribute(\"color\");\r\n        if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {\r\n            value = `#${value}`;\r\n        }\r\n        setCustomProp(\"color\", \"color\", value);\r\n    }\r\n    if (isSVGElement) {\r\n        if (element.hasAttribute(\"fill\")) {\r\n            const SMALL_SVG_LIMIT = 32;\r\n            const value = element.getAttribute(\"fill\");\r\n            if (value !== \"none\") {\r\n                if (!(element instanceof SVGTextElement)) {\r\n                    const handleSVGElement = () => {\r\n                        const {width, height} = element.getBoundingClientRect();\r\n                        const isBg =\r\n                            width > SMALL_SVG_LIMIT || height > SMALL_SVG_LIMIT;\r\n                        setCustomProp(\r\n                            \"fill\",\r\n                            isBg ? \"background-color\" : \"color\",\r\n                            value\r\n                        );\r\n                    };\r\n                    if (isReadyStateComplete()) {\r\n                        handleSVGElement();\r\n                    } else {\r\n                        addReadyStateCompleteListener(handleSVGElement);\r\n                    }\r\n                } else {\r\n                    setCustomProp(\"fill\", \"color\", value);\r\n                }\r\n            }\r\n        }\r\n        if (element.hasAttribute(\"stop-color\")) {\r\n            setCustomProp(\r\n                \"stop-color\",\r\n                \"background-color\",\r\n                element.getAttribute(\"stop-color\")\r\n            );\r\n        }\r\n    }\r\n    if (element.hasAttribute(\"stroke\")) {\r\n        const value = element.getAttribute(\"stroke\");\r\n        setCustomProp(\r\n            \"stroke\",\r\n            element instanceof SVGLineElement ||\r\n                element instanceof SVGTextElement\r\n                ? \"border-color\"\r\n                : \"color\",\r\n            value\r\n        );\r\n    }\r\n    element.style &&\r\n        iterateCSSDeclarations(element.style, (property, value) => {\r\n            if (property === \"background-image\" && value.includes(\"url\")) {\r\n                if (\r\n                    element === document.documentElement ||\r\n                    element === document.body\r\n                ) {\r\n                    setCustomProp(property, property, value);\r\n                }\r\n                return;\r\n            }\r\n            if (\r\n                overrides.hasOwnProperty(property) ||\r\n                (property.startsWith(\"--\") && !normalizedPropList[property])\r\n            ) {\r\n                setCustomProp(property, property, value);\r\n            } else if (shorthandOverrides[property] && value.includes(\"var(\")) {\r\n                setCustomProp(property, property, value);\r\n            } else {\r\n                const overriddenProp = normalizedPropList[property];\r\n                if (\r\n                    overriddenProp &&\r\n                    !element.style.getPropertyValue(overriddenProp) &&\r\n                    !element.hasAttribute(overriddenProp)\r\n                ) {\r\n                    if (\r\n                        overriddenProp === \"background-color\" &&\r\n                        element.hasAttribute(\"bgcolor\")\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    element.style.setProperty(property, \"\");\r\n                }\r\n            }\r\n        });\r\n    if (\r\n        element.style &&\r\n        element instanceof SVGTextElement &&\r\n        element.style.fill\r\n    ) {\r\n        setCustomProp(\"fill\", \"color\", element.style.getPropertyValue(\"fill\"));\r\n    }\r\n    if (element.getAttribute(\"style\")?.includes(\"--\")) {\r\n        variablesStore.addInlineStyleForMatching(element.style);\r\n    }\r\n    forEach(unsetProps, (cssProp) => {\r\n        element.removeAttribute(overrides[cssProp].dataAttr);\r\n    });\r\n    inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));\r\n}\r\n\r\nconst metaThemeColorName = \"theme-color\";\r\nconst metaThemeColorSelector = `meta[name=\"${metaThemeColorName}\"]`;\r\nlet srcMetaThemeColor = null;\r\nlet observer = null;\r\nfunction changeMetaThemeColor(meta, theme) {\r\n    srcMetaThemeColor = srcMetaThemeColor || meta.content;\r\n    const color = parseColorWithCache(srcMetaThemeColor);\r\n    if (!color) {\r\n        logWarn(\"Invalid meta color\", color);\r\n        return;\r\n    }\r\n    meta.content = modifyBackgroundColor(color, theme, false);\r\n}\r\nfunction changeMetaThemeColorWhenAvailable(theme) {\r\n    const meta = document.querySelector(metaThemeColorSelector);\r\n    if (meta) {\r\n        changeMetaThemeColor(meta, theme);\r\n    } else {\r\n        if (observer) {\r\n            observer.disconnect();\r\n        }\r\n        observer = new MutationObserver((mutations) => {\r\n            loop: for (let i = 0; i < mutations.length; i++) {\r\n                const {addedNodes} = mutations[i];\r\n                for (let j = 0; j < addedNodes.length; j++) {\r\n                    const node = addedNodes[j];\r\n                    if (\r\n                        node instanceof HTMLMetaElement &&\r\n                        node.name === metaThemeColorName\r\n                    ) {\r\n                        observer.disconnect();\r\n                        observer = null;\r\n                        changeMetaThemeColor(node, theme);\r\n                        break loop;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        observer.observe(document.head, {childList: true});\r\n    }\r\n}\r\nfunction restoreMetaThemeColor() {\r\n    if (observer) {\r\n        observer.disconnect();\r\n        observer = null;\r\n    }\r\n    const meta = document.querySelector(metaThemeColorSelector);\r\n    if (meta && srcMetaThemeColor) {\r\n        meta.content = srcMetaThemeColor;\r\n    }\r\n}\r\n\r\nconst cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;\r\nfunction removeCSSComments(cssText) {\r\n    return cssText.replace(cssCommentsRegex, \"\");\r\n}\r\n\r\nlet canUseSheetProxy = false;\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => (canUseSheetProxy = true),\r\n    {once: true}\r\n);\r\nfunction createSheetWatcher(element, safeGetSheetRules, callback, isCancelled) {\r\n    let rafSheetWatcher = null;\r\n    function watchForSheetChanges() {\r\n        watchForSheetChangesUsingProxy();\r\n        if (!(canUseSheetProxy && element.sheet)) {\r\n            rafSheetWatcher = createRAFSheetWatcher(\r\n                element,\r\n                safeGetSheetRules,\r\n                callback,\r\n                isCancelled\r\n            );\r\n            rafSheetWatcher.start();\r\n        }\r\n    }\r\n    let areSheetChangesPending = false;\r\n    function onSheetChange() {\r\n        canUseSheetProxy = true;\r\n        rafSheetWatcher?.stop();\r\n        if (areSheetChangesPending) {\r\n            return;\r\n        }\r\n        function handleSheetChanges() {\r\n            areSheetChangesPending = false;\r\n            if (isCancelled()) {\r\n                return;\r\n            }\r\n            callback();\r\n        }\r\n        areSheetChangesPending = true;\r\n        queueMicrotask(handleSheetChanges);\r\n    }\r\n    function watchForSheetChangesUsingProxy() {\r\n        element.addEventListener(\"__darkreader__updateSheet\", onSheetChange);\r\n    }\r\n    function stopWatchingForSheetChangesUsingProxy() {\r\n        element.removeEventListener(\"__darkreader__updateSheet\", onSheetChange);\r\n    }\r\n    function stopWatchingForSheetChanges() {\r\n        stopWatchingForSheetChangesUsingProxy();\r\n        rafSheetWatcher?.stop();\r\n    }\r\n    return {\r\n        start: watchForSheetChanges,\r\n        stop: stopWatchingForSheetChanges\r\n    };\r\n}\r\nfunction createRAFSheetWatcher(\r\n    element,\r\n    safeGetSheetRules,\r\n    callback,\r\n    isCancelled\r\n) {\r\n    let rulesChangeKey = null;\r\n    let rulesCheckFrameId = null;\r\n    function getRulesChangeKey() {\r\n        const rules = safeGetSheetRules();\r\n        return rules ? rules.length : null;\r\n    }\r\n    function didRulesKeyChange() {\r\n        return getRulesChangeKey() !== rulesChangeKey;\r\n    }\r\n    function watchForSheetChangesUsingRAF() {\r\n        rulesChangeKey = getRulesChangeKey();\r\n        stopWatchingForSheetChangesUsingRAF();\r\n        const checkForUpdate = () => {\r\n            const cancelled = isCancelled();\r\n            if (!cancelled && didRulesKeyChange()) {\r\n                rulesChangeKey = getRulesChangeKey();\r\n                callback();\r\n            }\r\n            if (cancelled || (canUseSheetProxy && element.sheet)) {\r\n                stopWatchingForSheetChangesUsingRAF();\r\n                return;\r\n            }\r\n            rulesCheckFrameId = requestAnimationFrame(checkForUpdate);\r\n        };\r\n        checkForUpdate();\r\n    }\r\n    function stopWatchingForSheetChangesUsingRAF() {\r\n        rulesCheckFrameId && cancelAnimationFrame(rulesCheckFrameId);\r\n    }\r\n    return {\r\n        start: watchForSheetChangesUsingRAF,\r\n        stop: stopWatchingForSheetChangesUsingRAF\r\n    };\r\n}\r\n\r\nconst STYLE_SELECTOR = 'style, link[rel*=\"stylesheet\" i]:not([disabled])';\r\nfunction isFontsGoogleApiStyle(element) {\r\n    if (!element.href) {\r\n        return false;\r\n    }\r\n    try {\r\n        const elementURL = new URL(element.href);\r\n        return elementURL.hostname === \"fonts.googleapis.com\";\r\n    } catch (err) {\r\n        logInfo(`Couldn't construct ${element.href} as URL`);\r\n        return false;\r\n    }\r\n}\r\nconst hostsBreakingOnSVGStyleOverride = [\r\n    \"account.containerstore.com\",\r\n    \"containerstore.com\",\r\n    \"www.onet.pl\"\r\n];\r\nfunction shouldManageStyle(element) {\r\n    return (\r\n        (element instanceof HTMLStyleElement ||\r\n            (element instanceof SVGStyleElement &&\r\n                !hostsBreakingOnSVGStyleOverride.includes(location.hostname)) ||\r\n            (element instanceof HTMLLinkElement &&\r\n                Boolean(element.rel) &&\r\n                element.rel.toLowerCase().includes(\"stylesheet\") &&\r\n                Boolean(element.href) &&\r\n                !element.disabled &&\r\n                (isFirefox\r\n                    ? !element.href.startsWith(\"moz-extension://\")\r\n                    : true) &&\r\n                !isFontsGoogleApiStyle(element))) &&\r\n        !element.classList.contains(\"darkreader\") &&\r\n        element.media.toLowerCase() !== \"print\" &&\r\n        !element.classList.contains(\"stylus\")\r\n    );\r\n}\r\nfunction getManageableStyles(node, results = [], deep = true) {\r\n    if (shouldManageStyle(node)) {\r\n        results.push(node);\r\n    } else if (\r\n        node instanceof Element ||\r\n        (isShadowDomSupported && node instanceof ShadowRoot) ||\r\n        node === document\r\n    ) {\r\n        forEach(node.querySelectorAll(STYLE_SELECTOR), (style) =>\r\n            getManageableStyles(style, results, false)\r\n        );\r\n        if (deep) {\r\n            iterateShadowHosts(node, (host) =>\r\n                getManageableStyles(host.shadowRoot, results, false)\r\n            );\r\n        }\r\n    }\r\n    return results;\r\n}\r\nconst syncStyleSet = new WeakSet();\r\nconst corsStyleSet = new WeakSet();\r\nlet loadingLinkCounter = 0;\r\nconst rejectorsForLoadingLinks = new Map();\r\nfunction cleanLoadingLinks() {\r\n    rejectorsForLoadingLinks.clear();\r\n}\r\nfunction manageStyle(element, {update, loadingStart, loadingEnd}) {\r\n    const inMode = getStyleInjectionMode();\r\n    let corsCopy = null;\r\n    let syncStyle = null;\r\n    if (inMode === \"next\") {\r\n        const prevStyles = [];\r\n        let next = element;\r\n        while (\r\n            (next = next.nextElementSibling) &&\r\n            next.matches(\".darkreader\")\r\n        ) {\r\n            prevStyles.push(next);\r\n        }\r\n        corsCopy =\r\n            prevStyles.find(\r\n                (el) => el.matches(\".darkreader--cors\") && !corsStyleSet.has(el)\r\n            ) || null;\r\n        syncStyle =\r\n            prevStyles.find(\r\n                (el) => el.matches(\".darkreader--sync\") && !syncStyleSet.has(el)\r\n            ) || null;\r\n    }\r\n    let corsCopyPositionWatcher = null;\r\n    let syncStylePositionWatcher = null;\r\n    let cancelAsyncOperations = false;\r\n    let isOverrideEmpty = true;\r\n    const isAsyncCancelled = () => cancelAsyncOperations;\r\n    const sheetModifier = createStyleSheetModifier();\r\n    const observer = new MutationObserver((mutations) => {\r\n        if (\r\n            mutations.some((m) => m.type === \"characterData\") &&\r\n            containsCSSImport()\r\n        ) {\r\n            const cssText = (element.textContent ?? \"\").trim();\r\n            createOrUpdateCORSCopy(cssText, location.href).then(update);\r\n        } else {\r\n            update();\r\n        }\r\n    });\r\n    const observerOptions = {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: true,\r\n        characterData: true\r\n    };\r\n    function containsCSSImport() {\r\n        if (!(element instanceof HTMLStyleElement)) {\r\n            return false;\r\n        }\r\n        const cssText = removeCSSComments(element.textContent ?? \"\").trim();\r\n        return cssText.match(cssImportRegex);\r\n    }\r\n    function hasImports(cssRules, checkCrossOrigin) {\r\n        let result = false;\r\n        if (cssRules) {\r\n            let rule;\r\n            cssRulesLoop: for (let i = 0, len = cssRules.length; i < len; i++) {\r\n                rule = cssRules[i];\r\n                if (rule.href) {\r\n                    if (checkCrossOrigin) {\r\n                        if (\r\n                            !rule.href.startsWith(\r\n                                \"https://fonts.googleapis.com/\"\r\n                            ) &&\r\n                            rule.href.startsWith(\"http\") &&\r\n                            !rule.href.startsWith(location.origin)\r\n                        ) {\r\n                            result = true;\r\n                            break cssRulesLoop;\r\n                        }\r\n                    } else {\r\n                        result = true;\r\n                        break cssRulesLoop;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function getRulesSync() {\r\n        if (corsCopy) {\r\n            return corsCopy.sheet.cssRules;\r\n        }\r\n        if (containsCSSImport()) {\r\n            return null;\r\n        }\r\n        const cssRules = safeGetSheetRules();\r\n        if (\r\n            element instanceof HTMLLinkElement &&\r\n            !isRelativeHrefOnAbsolutePath(element.href) &&\r\n            hasImports(cssRules, false)\r\n        ) {\r\n            return null;\r\n        }\r\n        if (hasImports(cssRules, true)) {\r\n            return null;\r\n        }\r\n        !cssRules && logWarn(\"[getRulesSync] cssRules is null, trying again.\");\r\n        return cssRules;\r\n    }\r\n    function insertStyle() {\r\n        if (inMode === \"next\") {\r\n            if (corsCopy) {\r\n                if (element.nextSibling !== corsCopy) {\r\n                    element.parentNode.insertBefore(\r\n                        corsCopy,\r\n                        element.nextSibling\r\n                    );\r\n                }\r\n                if (corsCopy.nextSibling !== syncStyle) {\r\n                    element.parentNode.insertBefore(\r\n                        syncStyle,\r\n                        corsCopy.nextSibling\r\n                    );\r\n                }\r\n            } else if (element.nextSibling !== syncStyle) {\r\n                element.parentNode.insertBefore(syncStyle, element.nextSibling);\r\n            }\r\n        } else if (inMode === \"away\") {\r\n            if (corsCopy && !corsCopy.parentNode) {\r\n                injectStyleAway(corsCopy);\r\n            }\r\n            injectStyleAway(syncStyle);\r\n        }\r\n    }\r\n    function createSyncStyle() {\r\n        syncStyle =\r\n            element instanceof SVGStyleElement\r\n                ? document.createElementNS(\r\n                      \"http://www.w3.org/2000/svg\",\r\n                      \"style\"\r\n                  )\r\n                : document.createElement(\"style\");\r\n        syncStyle.classList.add(\"darkreader\");\r\n        syncStyle.classList.add(\"darkreader--sync\");\r\n        syncStyle.media = \"screen\";\r\n        if (element.title) {\r\n            syncStyle.title = element.title;\r\n        }\r\n        syncStyleSet.add(syncStyle);\r\n    }\r\n    let isLoadingRules = false;\r\n    let wasLoadingError = false;\r\n    const loadingLinkId = ++loadingLinkCounter;\r\n    async function getRulesAsync() {\r\n        let cssText;\r\n        let cssBasePath;\r\n        if (element instanceof HTMLLinkElement) {\r\n            let [cssRules, accessError] = getRulesOrError();\r\n            if (accessError) {\r\n                logWarn(accessError);\r\n            }\r\n            if (\r\n                (isSafari && !element.sheet) ||\r\n                (!isSafari && !cssRules && !accessError) ||\r\n                isStillLoadingError(accessError)\r\n            ) {\r\n                try {\r\n                    logInfo(\r\n                        `Linkelement ${loadingLinkId} is not loaded yet and thus will be await for`,\r\n                        element\r\n                    );\r\n                    await linkLoading(element, loadingLinkId);\r\n                } catch (err) {\r\n                    logWarn(err);\r\n                    wasLoadingError = true;\r\n                }\r\n                if (cancelAsyncOperations) {\r\n                    return null;\r\n                }\r\n                [cssRules, accessError] = getRulesOrError();\r\n                if (accessError) {\r\n                    logWarn(accessError);\r\n                }\r\n            }\r\n            if (cssRules) {\r\n                if (!hasImports(cssRules, false)) {\r\n                    return cssRules;\r\n                }\r\n            }\r\n            try {\r\n                cssText = await loadText(element.href);\r\n            } catch (err) {\r\n                logWarn(err);\r\n                cssText = \"\";\r\n            }\r\n            cssBasePath = getCSSBaseBath(element.href);\r\n            if (cancelAsyncOperations) {\r\n                return null;\r\n            }\r\n        } else if (containsCSSImport()) {\r\n            cssText = element.textContent.trim();\r\n            cssBasePath = getCSSBaseBath(location.href);\r\n        } else {\r\n            return null;\r\n        }\r\n        await createOrUpdateCORSCopy(cssText, cssBasePath);\r\n        if (corsCopy) {\r\n            return corsCopy.sheet.cssRules;\r\n        }\r\n        return null;\r\n    }\r\n    async function createOrUpdateCORSCopy(cssText, cssBasePath) {\r\n        if (cssText) {\r\n            try {\r\n                const fullCSSText = await replaceCSSImports(\r\n                    cssText,\r\n                    cssBasePath\r\n                );\r\n                if (corsCopy) {\r\n                    if (\r\n                        (corsCopy.textContent?.length ?? 0) < fullCSSText.length\r\n                    ) {\r\n                        corsCopy.textContent = fullCSSText;\r\n                    }\r\n                } else {\r\n                    corsCopy = createCORSCopy(\r\n                        fullCSSText,\r\n                        inMode === \"next\"\r\n                            ? (cc) =>\r\n                                  element.parentNode.insertBefore(\r\n                                      cc,\r\n                                      element.nextSibling\r\n                                  )\r\n                            : injectStyleAway\r\n                    );\r\n                    if (corsCopy) {\r\n                        if (inMode === \"next\") {\r\n                            element.parentNode.insertBefore(\r\n                                corsCopy,\r\n                                element.nextSibling\r\n                            );\r\n                        } else if (inMode === \"away\") {\r\n                            injectStyleAway(corsCopy);\r\n                        }\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                logWarn(err);\r\n            }\r\n            if (corsCopy && inMode === \"next\") {\r\n                corsCopyPositionWatcher = watchForNodePosition(\r\n                    corsCopy,\r\n                    \"prev-sibling\"\r\n                );\r\n            }\r\n        }\r\n    }\r\n    function details(options) {\r\n        const rules = getRulesSync();\r\n        if (!rules) {\r\n            if (options.secondRound) {\r\n                logWarn(\r\n                    \"Detected dead-lock at details(), returning early to prevent it.\"\r\n                );\r\n                return null;\r\n            }\r\n            if (isLoadingRules || wasLoadingError) {\r\n                return null;\r\n            }\r\n            isLoadingRules = true;\r\n            loadingStart();\r\n            getRulesAsync()\r\n                .then((results) => {\r\n                    isLoadingRules = false;\r\n                    loadingEnd();\r\n                    if (results) {\r\n                        update();\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    logWarn(err);\r\n                    isLoadingRules = false;\r\n                    loadingEnd();\r\n                });\r\n            return null;\r\n        }\r\n        return {rules};\r\n    }\r\n    let forceRenderStyle = false;\r\n    function render(theme, ignoreImageAnalysis) {\r\n        const rules = getRulesSync();\r\n        if (!rules) {\r\n            return;\r\n        }\r\n        cancelAsyncOperations = false;\r\n        function removeCSSRulesFromSheet(sheet) {\r\n            if (!sheet) {\r\n                return;\r\n            }\r\n            for (let i = sheet.cssRules.length - 1; i >= 0; i--) {\r\n                sheet.deleteRule(i);\r\n            }\r\n        }\r\n        function prepareOverridesSheet() {\r\n            if (!syncStyle) {\r\n                createSyncStyle();\r\n            }\r\n            syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n            insertStyle();\r\n            if (syncStyle.sheet == null) {\r\n                syncStyle.textContent = \"\";\r\n            }\r\n            const sheet = syncStyle.sheet;\r\n            removeCSSRulesFromSheet(sheet);\r\n            if (syncStylePositionWatcher) {\r\n                syncStylePositionWatcher.run();\r\n            } else if (inMode === \"next\") {\r\n                syncStylePositionWatcher = watchForNodePosition(\r\n                    syncStyle,\r\n                    \"prev-sibling\",\r\n                    () => {\r\n                        forceRenderStyle = true;\r\n                        buildOverrides();\r\n                    }\r\n                );\r\n            }\r\n            return syncStyle.sheet;\r\n        }\r\n        function buildOverrides() {\r\n            const force = forceRenderStyle;\r\n            forceRenderStyle = false;\r\n            sheetModifier.modifySheet({\r\n                prepareSheet: prepareOverridesSheet,\r\n                sourceCSSRules: rules,\r\n                theme,\r\n                ignoreImageAnalysis,\r\n                force,\r\n                isAsyncCancelled\r\n            });\r\n            isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;\r\n            if (sheetModifier.shouldRebuildStyle()) {\r\n                addReadyStateCompleteListener(() => update());\r\n            }\r\n        }\r\n        buildOverrides();\r\n    }\r\n    function getRulesOrError() {\r\n        try {\r\n            if (element.sheet == null) {\r\n                return [null, null];\r\n            }\r\n            return [element.sheet.cssRules, null];\r\n        } catch (err) {\r\n            return [null, err];\r\n        }\r\n    }\r\n    function isStillLoadingError(error) {\r\n        return error && error.message && error.message.includes(\"loading\");\r\n    }\r\n    function safeGetSheetRules() {\r\n        const [cssRules, err] = getRulesOrError();\r\n        if (err) {\r\n            logWarn(err);\r\n            return null;\r\n        }\r\n        return cssRules;\r\n    }\r\n    const sheetChangeWatcher = createSheetWatcher(\r\n        element,\r\n        safeGetSheetRules,\r\n        update,\r\n        isAsyncCancelled\r\n    );\r\n    function pause() {\r\n        observer.disconnect();\r\n        cancelAsyncOperations = true;\r\n        corsCopyPositionWatcher && corsCopyPositionWatcher.stop();\r\n        syncStylePositionWatcher && syncStylePositionWatcher.stop();\r\n        sheetChangeWatcher.stop();\r\n    }\r\n    function destroy() {\r\n        pause();\r\n        removeNode(corsCopy);\r\n        removeNode(syncStyle);\r\n        loadingEnd();\r\n        if (rejectorsForLoadingLinks.has(loadingLinkId)) {\r\n            const reject = rejectorsForLoadingLinks.get(loadingLinkId);\r\n            rejectorsForLoadingLinks.delete(loadingLinkId);\r\n            reject && reject();\r\n        }\r\n    }\r\n    function watch() {\r\n        observer.observe(element, observerOptions);\r\n        if (element instanceof HTMLStyleElement) {\r\n            sheetChangeWatcher.start();\r\n        }\r\n    }\r\n    const maxMoveCount = 10;\r\n    let moveCount = 0;\r\n    function restore() {\r\n        if (!syncStyle) {\r\n            return;\r\n        }\r\n        moveCount++;\r\n        if (moveCount > maxMoveCount) {\r\n            logWarn(\"Style sheet was moved multiple times\", element);\r\n            return;\r\n        }\r\n        logWarn(\"Restore style\", syncStyle, element);\r\n        insertStyle();\r\n        corsCopyPositionWatcher && corsCopyPositionWatcher.skip();\r\n        syncStylePositionWatcher && syncStylePositionWatcher.skip();\r\n        if (!isOverrideEmpty) {\r\n            forceRenderStyle = true;\r\n            update();\r\n        }\r\n    }\r\n    return {\r\n        details,\r\n        render,\r\n        pause,\r\n        destroy,\r\n        watch,\r\n        restore\r\n    };\r\n}\r\nasync function linkLoading(link, loadingId) {\r\n    return new Promise((resolve, reject) => {\r\n        const cleanUp = () => {\r\n            link.removeEventListener(\"load\", onLoad);\r\n            link.removeEventListener(\"error\", onError);\r\n            rejectorsForLoadingLinks.delete(loadingId);\r\n        };\r\n        const onLoad = () => {\r\n            cleanUp();\r\n            resolve();\r\n        };\r\n        const onError = () => {\r\n            cleanUp();\r\n            reject(`Linkelement ${loadingId} couldn't be loaded. ${link.href}`);\r\n        };\r\n        rejectorsForLoadingLinks.set(loadingId, () => {\r\n            cleanUp();\r\n            reject();\r\n        });\r\n        link.addEventListener(\"load\", onLoad, {passive: true});\r\n        link.addEventListener(\"error\", onError, {passive: true});\r\n        if (!link.href) {\r\n            onError();\r\n        }\r\n    });\r\n}\r\nfunction getCSSImportURL(importDeclaration) {\r\n    return getCSSURLValue(\r\n        importDeclaration\r\n            .substring(7)\r\n            .trim()\r\n            .replace(/;$/, \"\")\r\n            .replace(/screen$/, \"\")\r\n    );\r\n}\r\nasync function loadText(url) {\r\n    if (url.startsWith(\"data:\")) {\r\n        return await (await fetch(url)).text();\r\n    }\r\n    const cache = readCSSFetchCache(url);\r\n    if (cache) {\r\n        return cache;\r\n    }\r\n    const parsedURL = new URL(url);\r\n    let text;\r\n    if (parsedURL.origin === location.origin) {\r\n        text = await loadAsText(url, \"text/css\", location.origin);\r\n    } else {\r\n        text = await bgFetch({\r\n            url,\r\n            responseType: \"text\",\r\n            mimeType: \"text/css\",\r\n            origin: location.origin\r\n        });\r\n    }\r\n    writeCSSFetchCache(url, text);\r\n    return text;\r\n}\r\nasync function replaceCSSImports(cssText, basePath, cache = new Map()) {\r\n    cssText = removeCSSComments(cssText);\r\n    cssText = replaceCSSFontFace(cssText);\r\n    cssText = replaceCSSRelativeURLsWithAbsolute(cssText, basePath);\r\n    const importMatches = getMatchesWithOffsets(cssImportRegex, cssText);\r\n    let prev = null;\r\n    let shouldIgnoreImportsInBetween = false;\r\n    let diff = 0;\r\n    for (const match of importMatches) {\r\n        let importedCSS;\r\n        const prevImportEnd = prev ? prev.offset + prev.text.length : 0;\r\n        const nextImportStart = match.offset;\r\n        const openBraceIndex = cssText.indexOf(\"{\", prevImportEnd);\r\n        const closeBraceIndex = cssText.indexOf(\"}\", prevImportEnd);\r\n        if (\r\n            shouldIgnoreImportsInBetween ||\r\n            (openBraceIndex >= 0 &&\r\n                openBraceIndex < nextImportStart &&\r\n                closeBraceIndex >= 0 &&\r\n                closeBraceIndex < nextImportStart)\r\n        ) {\r\n            shouldIgnoreImportsInBetween = true;\r\n            importedCSS = \"\";\r\n        } else {\r\n            const importURL = getCSSImportURL(match.text);\r\n            const absoluteURL = getAbsoluteURL(basePath, importURL);\r\n            if (cache.has(absoluteURL)) {\r\n                importedCSS = cache.get(absoluteURL);\r\n            } else {\r\n                try {\r\n                    importedCSS = await loadText(absoluteURL);\r\n                    cache.set(absoluteURL, importedCSS);\r\n                    importedCSS = await replaceCSSImports(\r\n                        importedCSS,\r\n                        getCSSBaseBath(absoluteURL),\r\n                        cache\r\n                    );\r\n                } catch (err) {\r\n                    logWarn(err);\r\n                    importedCSS = \"\";\r\n                }\r\n            }\r\n        }\r\n        cssText =\r\n            cssText.substring(0, match.offset + diff) +\r\n            importedCSS +\r\n            cssText.substring(match.offset + match.text.length + diff);\r\n        diff += importedCSS.length - match.text.length;\r\n        prev = match;\r\n    }\r\n    cssText = cssText.trim();\r\n    return cssText;\r\n}\r\nfunction createCORSCopy(cssText, inject) {\r\n    if (!cssText) {\r\n        return null;\r\n    }\r\n    const cors = document.createElement(\"style\");\r\n    cors.classList.add(\"darkreader\");\r\n    cors.classList.add(\"darkreader--cors\");\r\n    cors.media = \"screen\";\r\n    cors.textContent = cssText;\r\n    inject(cors);\r\n    cors.sheet.disabled = true;\r\n    corsStyleSet.add(cors);\r\n    return cors;\r\n}\r\n\r\nfunction injectProxy(enableStyleSheetsProxy, enableCustomElementRegistryProxy) {\r\n    document.dispatchEvent(\r\n        new CustomEvent(\"__darkreader__inlineScriptsAllowed\")\r\n    );\r\n    const cleaners = [];\r\n    function cleanUp() {\r\n        cleaners.forEach((clean) => clean());\r\n        cleaners.splice(0);\r\n    }\r\n    function documentEventListener(type, listener, options) {\r\n        document.addEventListener(type, listener, options);\r\n        cleaners.push(() => document.removeEventListener(type, listener));\r\n    }\r\n    function disableConflictingPlugins() {\r\n        const disableWPDarkMode = () => {\r\n            if (window?.WPDarkMode?.deactivate) {\r\n                window.WPDarkMode.deactivate();\r\n            }\r\n        };\r\n        disableWPDarkMode();\r\n    }\r\n    documentEventListener(\"__darkreader__cleanUp\", cleanUp);\r\n    documentEventListener(\r\n        \"__darkreader__disableConflictingPlugins\",\r\n        disableConflictingPlugins\r\n    );\r\n    function overrideProperty(cls, prop, overrides) {\r\n        const proto = cls.prototype;\r\n        const oldDescriptor = Object.getOwnPropertyDescriptor(proto, prop);\r\n        if (!oldDescriptor) {\r\n            return;\r\n        }\r\n        const newDescriptor = {...oldDescriptor};\r\n        Object.keys(overrides).forEach((key) => {\r\n            const factory = overrides[key];\r\n            newDescriptor[key] = factory(oldDescriptor[key]);\r\n        });\r\n        Object.defineProperty(proto, prop, newDescriptor);\r\n        cleaners.push(() => Object.defineProperty(proto, prop, oldDescriptor));\r\n    }\r\n    function override(cls, prop, factory) {\r\n        overrideProperty(cls, prop, {value: factory});\r\n    }\r\n    function isDRElement(element) {\r\n        return element?.classList?.contains(\"darkreader\");\r\n    }\r\n    function isDRSheet(sheet) {\r\n        return isDRElement(sheet.ownerNode);\r\n    }\r\n    const updateSheetEvent = new CustomEvent(\"__darkreader__updateSheet\");\r\n    const adoptedSheetChangeEvent = new CustomEvent(\r\n        \"__darkreader__adoptedStyleSheetChange\"\r\n    );\r\n    const shadowDomAttachingEvent = new CustomEvent(\r\n        \"__darkreader__shadowDomAttaching\",\r\n        {bubbles: true}\r\n    );\r\n    const adoptedSheetOwners = new WeakMap();\r\n    const adoptedDeclarationSheets = new WeakMap();\r\n    function onAdoptedSheetChange(sheet) {\r\n        const owners = adoptedSheetOwners.get(sheet);\r\n        owners?.forEach((node) => {\r\n            if (node.isConnected) {\r\n                node.dispatchEvent(adoptedSheetChangeEvent);\r\n            } else {\r\n                owners.delete(node);\r\n            }\r\n        });\r\n    }\r\n    function reportSheetChange(sheet) {\r\n        if (sheet.ownerNode && !isDRSheet(sheet)) {\r\n            sheet.ownerNode.dispatchEvent(updateSheetEvent);\r\n        }\r\n        if (adoptedSheetOwners.has(sheet)) {\r\n            onAdoptedSheetChange(sheet);\r\n        }\r\n    }\r\n    function reportSheetChangeAsync(sheet, promise) {\r\n        const {ownerNode} = sheet;\r\n        if (\r\n            ownerNode &&\r\n            !isDRSheet(sheet) &&\r\n            promise &&\r\n            promise instanceof Promise\r\n        ) {\r\n            promise.then(() => ownerNode.dispatchEvent(updateSheetEvent));\r\n        }\r\n        if (adoptedSheetOwners.has(sheet)) {\r\n            if (promise && promise instanceof Promise) {\r\n                promise.then(() => onAdoptedSheetChange(sheet));\r\n            }\r\n        }\r\n    }\r\n    override(\r\n        CSSStyleSheet,\r\n        \"addRule\",\r\n        (native) =>\r\n            function (selector, style, index) {\r\n                native.call(this, selector, style, index);\r\n                reportSheetChange(this);\r\n                return -1;\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"insertRule\",\r\n        (native) =>\r\n            function (rule, index) {\r\n                const returnValue = native.call(this, rule, index);\r\n                reportSheetChange(this);\r\n                return returnValue;\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"deleteRule\",\r\n        (native) =>\r\n            function (index) {\r\n                native.call(this, index);\r\n                reportSheetChange(this);\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"removeRule\",\r\n        (native) =>\r\n            function (index) {\r\n                native.call(this, index);\r\n                reportSheetChange(this);\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"replace\",\r\n        (native) =>\r\n            function (cssText) {\r\n                const returnValue = native.call(this, cssText);\r\n                reportSheetChangeAsync(this, returnValue);\r\n                return returnValue;\r\n            }\r\n    );\r\n    override(\r\n        CSSStyleSheet,\r\n        \"replaceSync\",\r\n        (native) =>\r\n            function (cssText) {\r\n                native.call(this, cssText);\r\n                reportSheetChange(this);\r\n            }\r\n    );\r\n    override(\r\n        Element,\r\n        \"attachShadow\",\r\n        (native) =>\r\n            function (options) {\r\n                this.dispatchEvent(shadowDomAttachingEvent);\r\n                return native.call(this, options);\r\n            }\r\n    );\r\n    const shouldWrapHTMLElement =\r\n        location.hostname === \"baidu.com\" ||\r\n        location.hostname.endsWith(\".baidu.com\");\r\n    if (shouldWrapHTMLElement) {\r\n        override(\r\n            Element,\r\n            \"getElementsByTagName\",\r\n            (native) =>\r\n                function (tagName) {\r\n                    if (tagName !== \"style\") {\r\n                        return native.call(this, tagName);\r\n                    }\r\n                    const getCurrentElementValue = () => {\r\n                        const elements = native.call(this, tagName);\r\n                        return Object.setPrototypeOf(\r\n                            [...elements].filter(\r\n                                (element) => element && !isDRElement(element)\r\n                            ),\r\n                            NodeList.prototype\r\n                        );\r\n                    };\r\n                    let elements = getCurrentElementValue();\r\n                    const nodeListBehavior = {\r\n                        get: function (_, property) {\r\n                            return getCurrentElementValue()[\r\n                                Number(property) || property\r\n                            ];\r\n                        }\r\n                    };\r\n                    elements = new Proxy(elements, nodeListBehavior);\r\n                    return elements;\r\n                }\r\n        );\r\n    }\r\n    const shouldProxyChildNodes = [\"brilliant.org\", \"www.vy.no\"].includes(\r\n        location.hostname\r\n    );\r\n    if (shouldProxyChildNodes) {\r\n        overrideProperty(Node, \"childNodes\", {\r\n            get: (native) =>\r\n                function () {\r\n                    const childNodes = native.call(this);\r\n                    return Object.setPrototypeOf(\r\n                        [...childNodes].filter((element) => {\r\n                            return !isDRElement(element);\r\n                        }),\r\n                        NodeList.prototype\r\n                    );\r\n                }\r\n        });\r\n    }\r\n    function resolveCustomElement(tag) {\r\n        customElements.whenDefined(tag).then(() => {\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__isDefined\", {detail: {tag}})\r\n            );\r\n        });\r\n    }\r\n    documentEventListener(\"__darkreader__addUndefinedResolver\", (e) =>\r\n        resolveCustomElement(e.detail.tag)\r\n    );\r\n    if (enableCustomElementRegistryProxy) {\r\n        override(\r\n            CustomElementRegistry,\r\n            \"define\",\r\n            (native) =>\r\n                function (name, constructor, options) {\r\n                    resolveCustomElement(name);\r\n                    native.call(this, name, constructor, options);\r\n                }\r\n        );\r\n    }\r\n    let blobURLAllowed = null;\r\n    function checkBlobURLSupport() {\r\n        if (blobURLAllowed != null) {\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\r\n                    detail: {blobURLAllowed}\r\n                })\r\n            );\r\n            return;\r\n        }\r\n        const svg =\r\n            '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1\" height=\"1\"><rect width=\"1\" height=\"1\" fill=\"transparent\"/></svg>';\r\n        const bytes = new Uint8Array(svg.length);\r\n        for (let i = 0; i < svg.length; i++) {\r\n            bytes[i] = svg.charCodeAt(i);\r\n        }\r\n        const blob = new Blob([bytes], {type: \"image/svg+xml\"});\r\n        const objectURL = URL.createObjectURL(blob);\r\n        const image = new Image();\r\n        image.onload = () => {\r\n            blobURLAllowed = true;\r\n            sendBlobURLCheckResponse();\r\n        };\r\n        image.onerror = () => {\r\n            blobURLAllowed = false;\r\n            sendBlobURLCheckResponse();\r\n        };\r\n        image.src = objectURL;\r\n    }\r\n    function sendBlobURLCheckResponse() {\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__blobURLCheckResponse\", {\r\n                detail: {blobURLAllowed}\r\n            })\r\n        );\r\n    }\r\n    documentEventListener(\r\n        \"__darkreader__blobURLCheckRequest\",\r\n        checkBlobURLSupport\r\n    );\r\n    if (enableStyleSheetsProxy) {\r\n        overrideProperty(Document, \"styleSheets\", {\r\n            get: (native) =>\r\n                function () {\r\n                    const getCurrentValue = () => {\r\n                        const docSheets = native.call(this);\r\n                        const filteredSheets = [...docSheets].filter(\r\n                            (styleSheet) =>\r\n                                styleSheet.ownerNode && !isDRSheet(styleSheet)\r\n                        );\r\n                        filteredSheets.item = (item) => filteredSheets[item];\r\n                        return Object.setPrototypeOf(\r\n                            filteredSheets,\r\n                            StyleSheetList.prototype\r\n                        );\r\n                    };\r\n                    let elements = getCurrentValue();\r\n                    const styleSheetListBehavior = {\r\n                        get: function (_, property) {\r\n                            return getCurrentValue()[property];\r\n                        }\r\n                    };\r\n                    elements = new Proxy(elements, styleSheetListBehavior);\r\n                    return elements;\r\n                }\r\n        });\r\n    }\r\n    {\r\n        const adoptedSheetsSourceProxies = new WeakMap();\r\n        const adoptedSheetsProxySources = new WeakMap();\r\n        const adoptedSheetsChangeEvent = new CustomEvent(\r\n            \"__darkreader__adoptedStyleSheetsChange\"\r\n        );\r\n        const adoptedSheetOverrideCache = new WeakSet();\r\n        const adoptedSheetsSnapshots = new WeakMap();\r\n        const isDRAdoptedSheetOverride = (sheet) => {\r\n            if (!sheet || !sheet.cssRules) {\r\n                return false;\r\n            }\r\n            if (adoptedSheetOverrideCache.has(sheet)) {\r\n                return true;\r\n            }\r\n            if (\r\n                sheet.cssRules.length > 0 &&\r\n                sheet.cssRules[0].cssText.startsWith(\r\n                    \"#__darkreader__adoptedOverride\"\r\n                )\r\n            ) {\r\n                adoptedSheetOverrideCache.add(sheet);\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        const areArraysEqual = (a, b) => {\r\n            return a.length === b.length && a.every((x, i) => x === b[i]);\r\n        };\r\n        const onAdoptedSheetsChange = (node) => {\r\n            const prev = adoptedSheetsSnapshots.get(node);\r\n            const curr = (node.adoptedStyleSheets || []).filter(\r\n                (s) => !isDRAdoptedSheetOverride(s)\r\n            );\r\n            adoptedSheetsSnapshots.set(node, curr);\r\n            if (!prev || !areArraysEqual(prev, curr)) {\r\n                curr.forEach((sheet) => {\r\n                    if (!adoptedSheetOwners.has(sheet)) {\r\n                        adoptedSheetOwners.set(sheet, new Set());\r\n                    }\r\n                    adoptedSheetOwners.get(sheet).add(node);\r\n                    for (const rule of sheet.cssRules) {\r\n                        const declaration = rule.style;\r\n                        if (declaration) {\r\n                            adoptedDeclarationSheets.set(declaration, sheet);\r\n                        }\r\n                    }\r\n                });\r\n                node.dispatchEvent(adoptedSheetsChangeEvent);\r\n            }\r\n        };\r\n        const proxyAdoptedSheetsArray = (node, source) => {\r\n            if (adoptedSheetsProxySources.has(source)) {\r\n                return source;\r\n            }\r\n            if (adoptedSheetsSourceProxies.has(source)) {\r\n                return adoptedSheetsSourceProxies.get(source);\r\n            }\r\n            const proxy = new Proxy(source, {\r\n                deleteProperty(target, property) {\r\n                    delete target[property];\r\n                    return true;\r\n                },\r\n                set(target, property, value) {\r\n                    target[property] = value;\r\n                    if (property === \"length\") {\r\n                        onAdoptedSheetsChange(node);\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n            adoptedSheetsSourceProxies.set(source, proxy);\r\n            adoptedSheetsProxySources.set(proxy, source);\r\n            return proxy;\r\n        };\r\n        [Document, ShadowRoot].forEach((ctor) => {\r\n            overrideProperty(ctor, \"adoptedStyleSheets\", {\r\n                get: (native) =>\r\n                    function () {\r\n                        const source = native.call(this);\r\n                        return proxyAdoptedSheetsArray(this, source);\r\n                    },\r\n                set: (native) =>\r\n                    function (source) {\r\n                        if (adoptedSheetsProxySources.has(source)) {\r\n                            source = adoptedSheetsProxySources.get(source);\r\n                        }\r\n                        native.call(this, source);\r\n                        onAdoptedSheetsChange(this);\r\n                    }\r\n            });\r\n        });\r\n        const adoptedDeclarationChangeEvent = new CustomEvent(\r\n            \"__darkreader__adoptedStyleDeclarationChange\"\r\n        );\r\n        [\"setProperty\", \"removeProperty\"].forEach((key) => {\r\n            override(CSSStyleDeclaration, key, (native) => {\r\n                return function (...args) {\r\n                    const returnValue = native.apply(this, args);\r\n                    const sheet = adoptedDeclarationSheets.get(this);\r\n                    if (sheet) {\r\n                        const owners = adoptedSheetOwners.get(sheet);\r\n                        if (owners) {\r\n                            owners.forEach((node) => {\r\n                                node.dispatchEvent(\r\n                                    adoptedDeclarationChangeEvent\r\n                                );\r\n                            });\r\n                        }\r\n                    }\r\n                    return returnValue;\r\n                };\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nconst definedCustomElements = new Set();\r\nconst undefinedGroups = new Map();\r\nlet elementsDefinitionCallback;\r\nfunction isCustomElement(element) {\r\n    if (element.tagName.includes(\"-\") || element.getAttribute(\"is\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction recordUndefinedElement(element) {\r\n    let tag = element.tagName.toLowerCase();\r\n    if (!tag.includes(\"-\")) {\r\n        const extendedTag = element.getAttribute(\"is\");\r\n        if (extendedTag) {\r\n            tag = extendedTag;\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n    if (!undefinedGroups.has(tag)) {\r\n        undefinedGroups.set(tag, new Set());\r\n        customElementsWhenDefined(tag).then(() => {\r\n            if (elementsDefinitionCallback) {\r\n                const elements = undefinedGroups.get(tag);\r\n                ASSERT(\r\n                    \"recordUndefinedElement() undefined groups should not be empty\",\r\n                    elements\r\n                );\r\n                undefinedGroups.delete(tag);\r\n                elementsDefinitionCallback(Array.from(elements));\r\n            }\r\n        });\r\n    }\r\n    undefinedGroups.get(tag).add(element);\r\n}\r\nfunction collectUndefinedElements(root) {\r\n    if (!isDefinedSelectorSupported) {\r\n        return;\r\n    }\r\n    forEach(root.querySelectorAll(\":not(:defined)\"), recordUndefinedElement);\r\n}\r\nlet canOptimizeUsingProxy = false;\r\ndocument.addEventListener(\r\n    \"__darkreader__inlineScriptsAllowed\",\r\n    () => {\r\n        canOptimizeUsingProxy = true;\r\n    },\r\n    {once: true, passive: true}\r\n);\r\nconst unhandledShadowHosts = new Set();\r\ndocument.addEventListener(\"__darkreader__shadowDomAttaching\", (e) => {\r\n    const host = e.target;\r\n    if (unhandledShadowHosts.size === 0) {\r\n        queueMicrotask(() => {\r\n            const hosts = [...unhandledShadowHosts].filter(\r\n                (el) => el.shadowRoot\r\n            );\r\n            elementsDefinitionCallback?.(hosts);\r\n            unhandledShadowHosts.clear();\r\n        });\r\n    }\r\n    unhandledShadowHosts.add(host);\r\n});\r\nconst resolvers = new Map();\r\nfunction handleIsDefined(e) {\r\n    canOptimizeUsingProxy = true;\r\n    const tag = e.detail.tag;\r\n    ASSERT(\r\n        \"handleIsDefined() expects lower-case node names\",\r\n        () => tag.toLowerCase() === tag\r\n    );\r\n    definedCustomElements.add(tag);\r\n    if (resolvers.has(tag)) {\r\n        const r = resolvers.get(tag);\r\n        resolvers.delete(tag);\r\n        r.forEach((r) => r());\r\n    }\r\n}\r\nasync function customElementsWhenDefined(tag) {\r\n    ASSERT(\r\n        \"customElementsWhenDefined() expects lower-case node names\",\r\n        () => tag.toLowerCase() === tag\r\n    );\r\n    if (definedCustomElements.has(tag)) {\r\n        return;\r\n    }\r\n    return new Promise((resolve) => {\r\n        if (\r\n            window.customElements &&\r\n            typeof customElements.whenDefined === \"function\"\r\n        ) {\r\n            customElements.whenDefined(tag).then(() => resolve());\r\n        } else if (canOptimizeUsingProxy) {\r\n            if (resolvers.has(tag)) {\r\n                resolvers.get(tag).push(resolve);\r\n            } else {\r\n                resolvers.set(tag, [resolve]);\r\n            }\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__addUndefinedResolver\", {\r\n                    detail: {tag}\r\n                })\r\n            );\r\n        } else {\r\n            const checkIfDefined = () => {\r\n                const elements = undefinedGroups.get(tag);\r\n                if (elements && elements.size > 0) {\r\n                    if (elements.values().next().value.matches(\":defined\")) {\r\n                        resolve();\r\n                    } else {\r\n                        requestAnimationFrame(checkIfDefined);\r\n                    }\r\n                }\r\n            };\r\n            requestAnimationFrame(checkIfDefined);\r\n        }\r\n    });\r\n}\r\nfunction watchWhenCustomElementsDefined(callback) {\r\n    elementsDefinitionCallback = callback;\r\n}\r\nfunction unsubscribeFromDefineCustomElements() {\r\n    elementsDefinitionCallback = null;\r\n    undefinedGroups.clear();\r\n    document.removeEventListener(\"__darkreader__isDefined\", handleIsDefined);\r\n}\r\n\r\nconst observers = [];\r\nlet observedRoots;\r\nlet handledShadowHosts;\r\nfunction watchForStylePositions(currentStyles, update, shadowRootDiscovered) {\r\n    stopWatchingForStylePositions();\r\n    const prevStylesByRoot = new WeakMap();\r\n    const getPrevStyles = (root) => {\r\n        if (!prevStylesByRoot.has(root)) {\r\n            prevStylesByRoot.set(root, new Set());\r\n        }\r\n        return prevStylesByRoot.get(root);\r\n    };\r\n    currentStyles.forEach((node) => {\r\n        let root = node;\r\n        while ((root = root.parentNode)) {\r\n            if (\r\n                root === document ||\r\n                root.nodeType === Node.DOCUMENT_FRAGMENT_NODE\r\n            ) {\r\n                const prevStyles = getPrevStyles(root);\r\n                prevStyles.add(node);\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    const prevStyleSiblings = new WeakMap();\r\n    const nextStyleSiblings = new WeakMap();\r\n    function saveStylePosition(style) {\r\n        prevStyleSiblings.set(style, style.previousElementSibling);\r\n        nextStyleSiblings.set(style, style.nextElementSibling);\r\n    }\r\n    function forgetStylePosition(style) {\r\n        prevStyleSiblings.delete(style);\r\n        nextStyleSiblings.delete(style);\r\n    }\r\n    function didStylePositionChange(style) {\r\n        return (\r\n            style.previousElementSibling !== prevStyleSiblings.get(style) ||\r\n            style.nextElementSibling !== nextStyleSiblings.get(style)\r\n        );\r\n    }\r\n    currentStyles.forEach(saveStylePosition);\r\n    function handleStyleOperations(root, operations) {\r\n        const {createdStyles, removedStyles, movedStyles} = operations;\r\n        createdStyles.forEach((s) => saveStylePosition(s));\r\n        movedStyles.forEach((s) => saveStylePosition(s));\r\n        removedStyles.forEach((s) => forgetStylePosition(s));\r\n        const prevStyles = getPrevStyles(root);\r\n        createdStyles.forEach((s) => prevStyles.add(s));\r\n        removedStyles.forEach((s) => prevStyles.delete(s));\r\n        if (createdStyles.size + removedStyles.size + movedStyles.size > 0) {\r\n            update({\r\n                created: Array.from(createdStyles),\r\n                removed: Array.from(removedStyles),\r\n                moved: Array.from(movedStyles),\r\n                updated: []\r\n            });\r\n        }\r\n    }\r\n    function handleMinorTreeMutations(root, {additions, moves, deletions}) {\r\n        const createdStyles = new Set();\r\n        const removedStyles = new Set();\r\n        const movedStyles = new Set();\r\n        additions.forEach((node) =>\r\n            getManageableStyles(node).forEach((style) =>\r\n                createdStyles.add(style)\r\n            )\r\n        );\r\n        deletions.forEach((node) =>\r\n            getManageableStyles(node).forEach((style) =>\r\n                removedStyles.add(style)\r\n            )\r\n        );\r\n        moves.forEach((node) =>\r\n            getManageableStyles(node).forEach((style) => movedStyles.add(style))\r\n        );\r\n        handleStyleOperations(root, {\r\n            createdStyles,\r\n            removedStyles,\r\n            movedStyles\r\n        });\r\n        additions.forEach((n) => {\r\n            deepObserve(n);\r\n            collectUndefinedElements(n);\r\n        });\r\n        additions.forEach(\r\n            (node) => isCustomElement(node) && recordUndefinedElement(node)\r\n        );\r\n        additions.forEach((node) => checkImageSelectors(node));\r\n    }\r\n    function handleHugeTreeMutations(root) {\r\n        const styles = new Set(getManageableStyles(root));\r\n        const createdStyles = new Set();\r\n        const removedStyles = new Set();\r\n        const movedStyles = new Set();\r\n        const prevStyles = getPrevStyles(root);\r\n        styles.forEach((s) => {\r\n            if (!prevStyles.has(s)) {\r\n                createdStyles.add(s);\r\n            }\r\n        });\r\n        prevStyles.forEach((s) => {\r\n            if (!styles.has(s)) {\r\n                removedStyles.add(s);\r\n            }\r\n        });\r\n        styles.forEach((s) => {\r\n            if (\r\n                !createdStyles.has(s) &&\r\n                !removedStyles.has(s) &&\r\n                didStylePositionChange(s)\r\n            ) {\r\n                movedStyles.add(s);\r\n            }\r\n        });\r\n        handleStyleOperations(root, {\r\n            createdStyles,\r\n            removedStyles,\r\n            movedStyles\r\n        });\r\n        deepObserve(root);\r\n        collectUndefinedElements(root);\r\n        checkImageSelectors(root);\r\n    }\r\n    function handleAttributeMutations(mutations) {\r\n        const updatedStyles = new Set();\r\n        const removedStyles = new Set();\r\n        mutations.forEach((m) => {\r\n            const {target} = m;\r\n            if (target.isConnected) {\r\n                if (shouldManageStyle(target)) {\r\n                    updatedStyles.add(target);\r\n                } else if (\r\n                    target instanceof HTMLLinkElement &&\r\n                    target.disabled\r\n                ) {\r\n                    removedStyles.add(target);\r\n                }\r\n            }\r\n        });\r\n        if (updatedStyles.size + removedStyles.size > 0) {\r\n            update({\r\n                updated: Array.from(updatedStyles),\r\n                created: [],\r\n                removed: Array.from(removedStyles),\r\n                moved: []\r\n            });\r\n        }\r\n    }\r\n    function observe(root) {\r\n        if (observedRoots.has(root)) {\r\n            return;\r\n        }\r\n        const treeObserver = createOptimizedTreeObserver(root, {\r\n            onMinorMutations: handleMinorTreeMutations,\r\n            onHugeMutations: handleHugeTreeMutations\r\n        });\r\n        const attrObserver = new MutationObserver(handleAttributeMutations);\r\n        attrObserver.observe(root, {\r\n            attributeFilter: [\"rel\", \"disabled\", \"media\", \"href\"],\r\n            subtree: true\r\n        });\r\n        observers.push(treeObserver, attrObserver);\r\n        observedRoots.add(root);\r\n    }\r\n    function subscribeForShadowRootChanges(node) {\r\n        const {shadowRoot} = node;\r\n        if (shadowRoot == null || observedRoots.has(shadowRoot)) {\r\n            return;\r\n        }\r\n        observe(shadowRoot);\r\n        shadowRootDiscovered(shadowRoot);\r\n    }\r\n    function deepObserve(node) {\r\n        iterateShadowHosts(node, subscribeForShadowRootChanges);\r\n    }\r\n    observe(document);\r\n    deepObserve(document.documentElement);\r\n    watchWhenCustomElementsDefined((hosts) => {\r\n        hosts = hosts.filter((node) => !handledShadowHosts.has(node));\r\n        const newStyles = [];\r\n        hosts.forEach((host) =>\r\n            push(newStyles, getManageableStyles(host.shadowRoot))\r\n        );\r\n        update({created: newStyles, updated: [], removed: [], moved: []});\r\n        hosts.forEach((host) => {\r\n            const {shadowRoot} = host;\r\n            if (shadowRoot == null) {\r\n                return;\r\n            }\r\n            subscribeForShadowRootChanges(host);\r\n            deepObserve(shadowRoot);\r\n            collectUndefinedElements(shadowRoot);\r\n        });\r\n        hosts.forEach((node) => handledShadowHosts.add(node));\r\n    });\r\n    document.addEventListener(\"__darkreader__isDefined\", handleIsDefined);\r\n    collectUndefinedElements(document);\r\n}\r\nfunction resetObservers() {\r\n    observers.forEach((o) => o.disconnect());\r\n    observers.splice(0, observers.length);\r\n    observedRoots = new WeakSet();\r\n    handledShadowHosts = new WeakSet();\r\n}\r\nfunction stopWatchingForStylePositions() {\r\n    resetObservers();\r\n    unsubscribeFromDefineCustomElements();\r\n}\r\n\r\nfunction watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {\r\n    watchForStylePositions(currentStyles, update, shadowRootDiscovered);\r\n}\r\nfunction stopWatchingForStyleChanges() {\r\n    stopWatchingForStylePositions();\r\n}\r\n\r\nconst INSTANCE_ID = generateUID();\r\nconst styleManagers = new Map();\r\nconst adoptedStyleManagers = [];\r\nconst adoptedStyleFallbacks = new Map();\r\nconst adoptedStyleChangeTokens = new WeakMap();\r\nlet theme = null;\r\nlet fixes = null;\r\nlet isIFrame$1 = null;\r\nlet ignoredImageAnalysisSelectors = [];\r\nlet ignoredInlineSelectors = [];\r\nlet staticStyleMap = new WeakMap();\r\nfunction createOrUpdateStyle(className, root = document.head || document) {\r\n    let element = root.querySelector(`.${className}`);\r\n    if (!staticStyleMap.has(root)) {\r\n        staticStyleMap.set(root, new Map());\r\n    }\r\n    const classMap = staticStyleMap.get(root);\r\n    if (element) {\r\n        classMap.set(className, element);\r\n    } else if (classMap.has(className)) {\r\n        element = classMap.get(className);\r\n    } else {\r\n        element = document.createElement(\"style\");\r\n        element.classList.add(\"darkreader\");\r\n        element.classList.add(className);\r\n        element.media = \"screen\";\r\n        element.textContent = \"\";\r\n        classMap.set(className, element);\r\n    }\r\n    return element;\r\n}\r\nfunction createOrUpdateScript(className, root = document.head || document) {\r\n    let element = root.querySelector(`.${className}`);\r\n    if (!element) {\r\n        element = document.createElement(\"script\");\r\n        element.classList.add(\"darkreader\");\r\n        element.classList.add(className);\r\n    }\r\n    return element;\r\n}\r\nconst nodePositionWatchers = new Map();\r\nfunction setupNodePositionWatcher(node, alias, callback) {\r\n    nodePositionWatchers.has(alias) && nodePositionWatchers.get(alias).stop();\r\n    nodePositionWatchers.set(\r\n        alias,\r\n        watchForNodePosition(node, \"head\", callback)\r\n    );\r\n}\r\nfunction stopStylePositionWatchers() {\r\n    forEach(nodePositionWatchers.values(), (watcher) => watcher.stop());\r\n    nodePositionWatchers.clear();\r\n}\r\nfunction injectStaticStyle(style, prevNode, watchAlias, callback) {\r\n    const mode = getStyleInjectionMode();\r\n    if (mode === \"next\") {\r\n        document.head.insertBefore(\r\n            style,\r\n            prevNode ? prevNode.nextSibling : document.head.firstChild\r\n        );\r\n        setupNodePositionWatcher(style, watchAlias, callback);\r\n    } else if (mode === \"away\") {\r\n        injectStyleAway(style);\r\n    }\r\n}\r\nfunction createStaticStyleOverrides() {\r\n    const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\", document);\r\n    fallbackStyle.textContent = getModifiedFallbackStyle(theme, {strict: true});\r\n    injectStaticStyle(fallbackStyle, null, \"fallback\");\r\n    const userAgentStyle = createOrUpdateStyle(\"darkreader--user-agent\");\r\n    userAgentStyle.textContent = getModifiedUserAgentStyle(\r\n        theme,\r\n        isIFrame$1,\r\n        theme.styleSystemControls\r\n    );\r\n    injectStaticStyle(userAgentStyle, fallbackStyle, \"user-agent\");\r\n    const textStyle = createOrUpdateStyle(\"darkreader--text\");\r\n    if (theme.useFont || theme.textStroke > 0) {\r\n        textStyle.textContent = createTextStyle(theme);\r\n    } else {\r\n        textStyle.textContent = \"\";\r\n    }\r\n    injectStaticStyle(textStyle, userAgentStyle, \"text\");\r\n    const invertStyle = createOrUpdateStyle(\"darkreader--invert\");\r\n    if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n        invertStyle.textContent = [\r\n            `${fixes.invert.join(\", \")} {`,\r\n            `    filter: ${getCSSFilterValue({\r\n                ...theme,\r\n                contrast:\r\n                    theme.mode === 0\r\n                        ? theme.contrast\r\n                        : clamp(theme.contrast - 10, 0, 100)\r\n            })} !important;`,\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n    } else {\r\n        invertStyle.textContent = \"\";\r\n    }\r\n    injectStaticStyle(invertStyle, textStyle, \"invert\");\r\n    const inlineStyle = createOrUpdateStyle(\"darkreader--inline\");\r\n    inlineStyle.textContent = getInlineOverrideStyle();\r\n    injectStaticStyle(inlineStyle, invertStyle, \"inline\");\r\n    const variableStyle = createOrUpdateStyle(\"darkreader--variables\");\r\n    const selectionColors = theme?.selectionColor\r\n        ? getSelectionColor(theme)\r\n        : null;\r\n    const neutralBackgroundColor = modifyBackgroundColor(\r\n        parseColorWithCache(\"#ffffff\"),\r\n        theme\r\n    );\r\n    const neutralTextColor = modifyForegroundColor(\r\n        parseColorWithCache(\"#000000\"),\r\n        theme\r\n    );\r\n    variableStyle.textContent = [\r\n        `:root {`,\r\n        `   --darkreader-neutral-background: ${neutralBackgroundColor};`,\r\n        `   --darkreader-neutral-text: ${neutralTextColor};`,\r\n        `   --darkreader-selection-background: ${selectionColors?.backgroundColorSelection ?? \"initial\"};`,\r\n        `   --darkreader-selection-text: ${selectionColors?.foregroundColorSelection ?? \"initial\"};`,\r\n        `}`\r\n    ].join(\"\\n\");\r\n    injectStaticStyle(variableStyle, inlineStyle, \"variables\", () =>\r\n        registerVariablesSheet(variableStyle.sheet)\r\n    );\r\n    registerVariablesSheet(variableStyle.sheet);\r\n    const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n    injectStaticStyle(rootVarsStyle, variableStyle, \"root-vars\");\r\n    const enableStyleSheetsProxy = !(fixes && fixes.disableStyleSheetsProxy);\r\n    const enableCustomElementRegistryProxy = !(\r\n        fixes && fixes.disableCustomElementRegistryProxy\r\n    );\r\n    document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\r\n    {\r\n        const proxyScript = createOrUpdateScript(\"darkreader--proxy\");\r\n        proxyScript.append(\r\n            `(${injectProxy})(${enableStyleSheetsProxy}, ${enableCustomElementRegistryProxy})`\r\n        );\r\n        document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);\r\n        proxyScript.remove();\r\n    }\r\n    const overrideStyle = createOrUpdateStyle(\"darkreader--override\");\r\n    overrideStyle.textContent =\r\n        fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\r\n    injectStaticStyle(overrideStyle, document.head.lastChild, \"override\");\r\n}\r\nconst shadowRootsWithOverrides = new Set();\r\nfunction createShadowStaticStyleOverridesInner(root) {\r\n    const inlineStyle = createOrUpdateStyle(\"darkreader--inline\", root);\r\n    inlineStyle.textContent = getInlineOverrideStyle();\r\n    root.insertBefore(inlineStyle, root.firstChild);\r\n    const overrideStyle = createOrUpdateStyle(\"darkreader--override\", root);\r\n    overrideStyle.textContent =\r\n        fixes && fixes.css ? replaceCSSTemplates(fixes.css) : \"\";\r\n    root.insertBefore(overrideStyle, inlineStyle.nextSibling);\r\n    const invertStyle = createOrUpdateStyle(\"darkreader--invert\", root);\r\n    if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {\r\n        invertStyle.textContent = [\r\n            `${fixes.invert.join(\", \")} {`,\r\n            `    filter: ${getCSSFilterValue({\r\n                ...theme,\r\n                contrast:\r\n                    theme.mode === 0\r\n                        ? theme.contrast\r\n                        : clamp(theme.contrast - 10, 0, 100)\r\n            })} !important;`,\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n    } else {\r\n        invertStyle.textContent = \"\";\r\n    }\r\n    root.insertBefore(invertStyle, overrideStyle.nextSibling);\r\n    shadowRootsWithOverrides.add(root);\r\n}\r\nfunction delayedCreateShadowStaticStyleOverrides(root) {\r\n    const observer = new MutationObserver((mutations, observer) => {\r\n        observer.disconnect();\r\n        for (const {type, removedNodes} of mutations) {\r\n            if (type === \"childList\") {\r\n                for (const {nodeName, className} of removedNodes) {\r\n                    if (\r\n                        nodeName === \"STYLE\" &&\r\n                        [\r\n                            \"darkreader darkreader--inline\",\r\n                            \"darkreader darkreader--override\",\r\n                            \"darkreader darkreader--invert\"\r\n                        ].includes(className)\r\n                    ) {\r\n                        createShadowStaticStyleOverridesInner(root);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    observer.observe(root, {childList: true});\r\n}\r\nfunction createShadowStaticStyleOverrides(root) {\r\n    const delayed = root.firstChild === null;\r\n    createShadowStaticStyleOverridesInner(root);\r\n    if (delayed) {\r\n        delayedCreateShadowStaticStyleOverrides(root);\r\n    }\r\n}\r\nfunction replaceCSSTemplates($cssText) {\r\n    return $cssText.replace(/\\${(.+?)}/g, (_, $color) => {\r\n        const color = parseColorWithCache($color);\r\n        if (color) {\r\n            const lightness = getSRGBLightness(color.r, color.g, color.b);\r\n            if (lightness > 0.5) {\r\n                return modifyBackgroundColor(color, theme);\r\n            }\r\n            return modifyForegroundColor(color, theme);\r\n        }\r\n        logWarn(\"Couldn't parse CSSTemplate's color.\");\r\n        return $color;\r\n    });\r\n}\r\nfunction cleanFallbackStyle() {\r\n    const fallback =\r\n        staticStyleMap.get(document.head)?.get(\"darkreader--fallback\") ||\r\n        staticStyleMap.get(document)?.get(\"darkreader--fallback\") ||\r\n        document.querySelector(\".darkreader--fallback\");\r\n    if (fallback) {\r\n        fallback.textContent = \"\";\r\n    }\r\n}\r\nfunction createDynamicStyleOverrides() {\r\n    cancelRendering();\r\n    const allStyles = getManageableStyles(document);\r\n    const newManagers = allStyles\r\n        .filter((style) => !styleManagers.has(style))\r\n        .map((style) => createManager(style));\r\n    newManagers\r\n        .map((manager) => manager.details({secondRound: false}))\r\n        .filter((detail) => detail && detail.rules.length > 0)\r\n        .forEach((detail) => {\r\n            variablesStore.addRulesForMatching(detail.rules);\r\n        });\r\n    variablesStore.matchVariablesAndDependents();\r\n    variablesStore.setOnRootVariableChange(() => {\r\n        const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n        variablesStore.putRootVars(rootVarsStyle, theme);\r\n    });\r\n    const rootVarsStyle = createOrUpdateStyle(\"darkreader--root-vars\");\r\n    variablesStore.putRootVars(rootVarsStyle, theme);\r\n    styleManagers.forEach((manager) =>\r\n        manager.render(theme, ignoredImageAnalysisSelectors)\r\n    );\r\n    if (loadingStyles.size === 0) {\r\n        cleanFallbackStyle();\r\n    }\r\n    newManagers.forEach((manager) => manager.watch());\r\n    const inlineStyleElements = toArray(\r\n        document.querySelectorAll(INLINE_STYLE_SELECTOR)\r\n    );\r\n    iterateShadowHosts(document.documentElement, (host) => {\r\n        createShadowStaticStyleOverrides(host.shadowRoot);\r\n        const elements = host.shadowRoot.querySelectorAll(\r\n            INLINE_STYLE_SELECTOR\r\n        );\r\n        if (elements.length > 0) {\r\n            push(inlineStyleElements, elements);\r\n        }\r\n    });\r\n    inlineStyleElements.forEach((el) =>\r\n        overrideInlineStyle(\r\n            el,\r\n            theme,\r\n            ignoredInlineSelectors,\r\n            ignoredImageAnalysisSelectors\r\n        )\r\n    );\r\n    handleAdoptedStyleSheets(document);\r\n    variablesStore.matchVariablesAndDependents();\r\n    if (isFirefox) {\r\n        const onAdoptedCssChange = (e) => {\r\n            const {sheets} = e.detail;\r\n            if (!Array.isArray(sheets) || sheets.length === 0) {\r\n                return;\r\n            }\r\n            sheets.forEach(({sheet}) => {\r\n                const {cssRules} = sheet;\r\n                variablesStore.addRulesForMatching(cssRules);\r\n            });\r\n            variablesStore.matchVariablesAndDependents();\r\n            const response = [];\r\n            sheets.forEach(({sheetId, sheet}) => {\r\n                const fallback = getAdoptedStyleSheetFallback(sheet);\r\n                const cssRules = sheet.cssRules;\r\n                fallback.render({\r\n                    theme: theme,\r\n                    ignoreImageAnalysis: ignoredImageAnalysisSelectors,\r\n                    cssRules\r\n                });\r\n                const commands = fallback.commands();\r\n                response.push({sheetId, commands});\r\n            });\r\n            requestAnimationFrameOnce(\r\n                getAdoptedStyleChangeToken(sheets[0].sheet),\r\n                () => {\r\n                    document.dispatchEvent(\r\n                        new CustomEvent(\r\n                            \"__darkreader__adoptedStyleSheetCommands\",\r\n                            {detail: JSON.stringify(response)}\r\n                        )\r\n                    );\r\n                }\r\n            );\r\n        };\r\n        document.addEventListener(\r\n            \"__darkreader__adoptedStyleSheetsChange\",\r\n            onAdoptedCssChange\r\n        );\r\n        cleaners.push(() =>\r\n            document.removeEventListener(\r\n                \"__darkreader__adoptedStyleSheetsChange\",\r\n                onAdoptedCssChange\r\n            )\r\n        );\r\n        document.dispatchEvent(\r\n            new CustomEvent(\"__darkreader__startAdoptedStyleSheetsWatcher\")\r\n        );\r\n    }\r\n}\r\nlet loadingStylesCounter = 0;\r\nconst loadingStyles = new Set();\r\nfunction createManager(element) {\r\n    const loadingStyleId = ++loadingStylesCounter;\r\n    function loadingStart() {\r\n        if (!isDOMReady() || !documentIsVisible()) {\r\n            loadingStyles.add(loadingStyleId);\r\n            logInfo(`Current amount of styles loading: ${loadingStyles.size}`);\r\n            const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\r\n            if (!fallbackStyle.textContent) {\r\n                fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\r\n                    strict: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n    function loadingEnd() {\r\n        loadingStyles.delete(loadingStyleId);\r\n        logInfo(\r\n            `Removed loadingStyle ${loadingStyleId}, now awaiting: ${loadingStyles.size}`\r\n        );\r\n        if (loadingStyles.size === 0 && isDOMReady()) {\r\n            cleanFallbackStyle();\r\n        }\r\n    }\r\n    function update() {\r\n        const details = manager.details({secondRound: true});\r\n        if (!details) {\r\n            return;\r\n        }\r\n        variablesStore.addRulesForMatching(details.rules);\r\n        variablesStore.matchVariablesAndDependents();\r\n        manager.render(theme, ignoredImageAnalysisSelectors);\r\n    }\r\n    const manager = manageStyle(element, {update, loadingStart, loadingEnd});\r\n    styleManagers.set(element, manager);\r\n    return manager;\r\n}\r\nfunction removeManager(element) {\r\n    const manager = styleManagers.get(element);\r\n    if (manager) {\r\n        manager.destroy();\r\n        styleManagers.delete(element);\r\n    }\r\n}\r\nconst throttledRenderAllStyles = throttle((callback) => {\r\n    styleManagers.forEach((manager) =>\r\n        manager.render(theme, ignoredImageAnalysisSelectors)\r\n    );\r\n    adoptedStyleManagers.forEach((manager) =>\r\n        manager.render(theme, ignoredImageAnalysisSelectors)\r\n    );\r\n    callback && callback();\r\n});\r\nconst cancelRendering = function () {\r\n    throttledRenderAllStyles.cancel();\r\n};\r\nfunction onDOMReady() {\r\n    if (loadingStyles.size === 0) {\r\n        cleanFallbackStyle();\r\n        return;\r\n    }\r\n    logWarn(`DOM is ready, but still have styles being loaded.`, loadingStyles);\r\n}\r\nfunction runDynamicStyle() {\r\n    createDynamicStyleOverrides();\r\n    watchForUpdates();\r\n}\r\nfunction createThemeAndWatchForUpdates() {\r\n    createStaticStyleOverrides();\r\n    if (!documentIsVisible() && !theme.immediateModify) {\r\n        setDocumentVisibilityListener(runDynamicStyle);\r\n    } else {\r\n        runDynamicStyle();\r\n    }\r\n    changeMetaThemeColorWhenAvailable(theme);\r\n}\r\nfunction handleAdoptedStyleSheets(node) {\r\n    if (isFirefox) {\r\n        return;\r\n    }\r\n    if (canHaveAdoptedStyleSheets(node)) {\r\n        node.adoptedStyleSheets.forEach((s) => {\r\n            variablesStore.addRulesForMatching(s.cssRules);\r\n        });\r\n        const newManger = createAdoptedStyleSheetOverride(node);\r\n        adoptedStyleManagers.push(newManger);\r\n        newManger.render(theme, ignoredImageAnalysisSelectors);\r\n        newManger.watch((sheets) => {\r\n            sheets.forEach((s) => {\r\n                variablesStore.addRulesForMatching(s.cssRules);\r\n            });\r\n            variablesStore.matchVariablesAndDependents();\r\n            newManger.render(theme, ignoredImageAnalysisSelectors);\r\n        });\r\n    }\r\n}\r\nfunction getAdoptedStyleChangeToken(sheet) {\r\n    if (adoptedStyleChangeTokens.has(sheet)) {\r\n        return adoptedStyleChangeTokens.get(sheet);\r\n    }\r\n    const token = Symbol();\r\n    adoptedStyleChangeTokens.set(sheet, token);\r\n    return token;\r\n}\r\nfunction getAdoptedStyleSheetFallback(sheet) {\r\n    let fallback = adoptedStyleFallbacks.get(sheet);\r\n    if (!fallback) {\r\n        fallback = createAdoptedStyleSheetFallback();\r\n        adoptedStyleFallbacks.set(sheet, fallback);\r\n    }\r\n    return fallback;\r\n}\r\nfunction watchForUpdates() {\r\n    const managedStyles = Array.from(styleManagers.keys());\r\n    watchForStyleChanges(\r\n        managedStyles,\r\n        ({created, updated, removed, moved}) => {\r\n            const stylesToRemove = removed;\r\n            const stylesToManage = created\r\n                .concat(updated)\r\n                .concat(moved)\r\n                .filter((style) => !styleManagers.has(style));\r\n            const stylesToRestore = moved.filter((style) =>\r\n                styleManagers.has(style)\r\n            );\r\n            stylesToRemove.forEach((style) => removeManager(style));\r\n            const newManagers = stylesToManage.map((style) =>\r\n                createManager(style)\r\n            );\r\n            newManagers\r\n                .map((manager) => manager.details({secondRound: false}))\r\n                .filter((detail) => detail && detail.rules.length > 0)\r\n                .forEach((detail) => {\r\n                    variablesStore.addRulesForMatching(detail.rules);\r\n                });\r\n            variablesStore.matchVariablesAndDependents();\r\n            newManagers.forEach((manager) =>\r\n                manager.render(theme, ignoredImageAnalysisSelectors)\r\n            );\r\n            newManagers.forEach((manager) => manager.watch());\r\n            stylesToRestore.forEach((style) =>\r\n                styleManagers.get(style).restore()\r\n            );\r\n        },\r\n        (shadowRoot) => {\r\n            createShadowStaticStyleOverrides(shadowRoot);\r\n            handleAdoptedStyleSheets(shadowRoot);\r\n        }\r\n    );\r\n    watchForInlineStyles(\r\n        (element) => {\r\n            overrideInlineStyle(\r\n                element,\r\n                theme,\r\n                ignoredInlineSelectors,\r\n                ignoredImageAnalysisSelectors\r\n            );\r\n            if (element === document.documentElement) {\r\n                const styleAttr = element.getAttribute(\"style\") || \"\";\r\n                if (styleAttr.includes(\"--\")) {\r\n                    variablesStore.matchVariablesAndDependents();\r\n                    const rootVarsStyle = createOrUpdateStyle(\r\n                        \"darkreader--root-vars\"\r\n                    );\r\n                    variablesStore.putRootVars(rootVarsStyle, theme);\r\n                }\r\n            }\r\n        },\r\n        (root) => {\r\n            createShadowStaticStyleOverrides(root);\r\n            const inlineStyleElements = root.querySelectorAll(\r\n                INLINE_STYLE_SELECTOR\r\n            );\r\n            if (inlineStyleElements.length > 0) {\r\n                forEach(inlineStyleElements, (el) =>\r\n                    overrideInlineStyle(\r\n                        el,\r\n                        theme,\r\n                        ignoredInlineSelectors,\r\n                        ignoredImageAnalysisSelectors\r\n                    )\r\n                );\r\n            }\r\n        }\r\n    );\r\n    addDOMReadyListener(onDOMReady);\r\n}\r\nfunction stopWatchingForUpdates() {\r\n    styleManagers.forEach((manager) => manager.pause());\r\n    stopStylePositionWatchers();\r\n    stopWatchingForStyleChanges();\r\n    stopWatchingForInlineStyles();\r\n    removeDOMReadyListener(onDOMReady);\r\n    cleanReadyStateCompleteListeners();\r\n}\r\nlet metaObserver;\r\nlet headObserver = null;\r\nfunction addMetaListener() {\r\n    metaObserver = new MutationObserver(() => {\r\n        if (document.querySelector('meta[name=\"darkreader-lock\"]')) {\r\n            metaObserver.disconnect();\r\n            removeDynamicTheme();\r\n        }\r\n    });\r\n    metaObserver.observe(document.head, {childList: true, subtree: true});\r\n}\r\nfunction createDarkReaderInstanceMarker() {\r\n    const metaElement = document.createElement(\"meta\");\r\n    metaElement.name = \"darkreader\";\r\n    metaElement.content = INSTANCE_ID;\r\n    document.head.appendChild(metaElement);\r\n}\r\nfunction isDRLocked() {\r\n    return document.querySelector('meta[name=\"darkreader-lock\"]') != null;\r\n}\r\nfunction isAnotherDarkReaderInstanceActive() {\r\n    const meta = document.querySelector('meta[name=\"darkreader\"]');\r\n    if (meta) {\r\n        if (meta.content !== INSTANCE_ID) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    createDarkReaderInstanceMarker();\r\n    addMetaListener();\r\n    return false;\r\n}\r\nlet interceptorAttempts = 2;\r\nfunction interceptOldScript({success, failure}) {\r\n    if (--interceptorAttempts <= 0) {\r\n        failure();\r\n        return;\r\n    }\r\n    const oldMeta = document.head.querySelector('meta[name=\"darkreader\"]');\r\n    if (!oldMeta || oldMeta.content === INSTANCE_ID) {\r\n        return;\r\n    }\r\n    const lock = document.createElement(\"meta\");\r\n    lock.name = \"darkreader-lock\";\r\n    document.head.append(lock);\r\n    queueMicrotask(() => {\r\n        lock.remove();\r\n        success();\r\n    });\r\n}\r\nfunction disableConflictingPlugins() {\r\n    if (document.documentElement.hasAttribute(\"data-wp-dark-mode-preset\")) {\r\n        const disableWPDarkMode = () => {\r\n            document.dispatchEvent(\r\n                new CustomEvent(\"__darkreader__disableConflictingPlugins\")\r\n            );\r\n            document.documentElement.classList.remove(\"wp-dark-mode-active\");\r\n            document.documentElement.removeAttribute(\r\n                \"data-wp-dark-mode-active\"\r\n            );\r\n        };\r\n        disableWPDarkMode();\r\n        const observer = new MutationObserver(() => {\r\n            if (\r\n                document.documentElement.classList.contains(\r\n                    \"wp-dark-mode-active\"\r\n                ) ||\r\n                document.documentElement.hasAttribute(\r\n                    \"data-wp-dark-mode-active\"\r\n                )\r\n            ) {\r\n                disableWPDarkMode();\r\n            }\r\n        });\r\n        observer.observe(document.documentElement, {\r\n            attributes: true,\r\n            attributeFilter: [\"class\", \"data-wp-dark-mode-active\"]\r\n        });\r\n    }\r\n}\r\nlet prevTheme = null;\r\nlet prevFixes = null;\r\nfunction createOrUpdateDynamicThemeInternal(\r\n    themeConfig,\r\n    dynamicThemeFixes,\r\n    iframe\r\n) {\r\n    theme = themeConfig;\r\n    fixes = dynamicThemeFixes;\r\n    const colorAffectingKeys = [\r\n        \"brightness\",\r\n        \"contrast\",\r\n        \"darkSchemeBackgroundColor\",\r\n        \"darkSchemeTextColor\",\r\n        \"grayscale\",\r\n        \"lightSchemeBackgroundColor\",\r\n        \"lightSchemeTextColor\",\r\n        \"sepia\"\r\n    ];\r\n    if (prevTheme && prevFixes) {\r\n        const themeKeys = new Set([\r\n            ...Object.keys(theme),\r\n            ...Object.keys(prevTheme)\r\n        ]);\r\n        let onlyColorsChanged = true;\r\n        for (const key of themeKeys) {\r\n            if (\r\n                theme[key] !== prevTheme[key] &&\r\n                !colorAffectingKeys.includes(key)\r\n            ) {\r\n                onlyColorsChanged = false;\r\n                break;\r\n            }\r\n        }\r\n        if (\r\n            onlyColorsChanged &&\r\n            JSON.stringify(fixes) !== JSON.stringify(prevFixes)\r\n        ) {\r\n            onlyColorsChanged = false;\r\n        }\r\n        if (onlyColorsChanged) {\r\n            const palette = getColorPalette();\r\n            clearColorPalette();\r\n            palette.background.forEach((color) =>\r\n                modifyBackgroundColor(color, theme)\r\n            );\r\n            palette.text.forEach((color) =>\r\n                modifyForegroundColor(color, theme)\r\n            );\r\n            palette.border.forEach((color) => modifyBorderColor(color, theme));\r\n            return;\r\n        }\r\n        clearColorPalette();\r\n    }\r\n    if (fixes) {\r\n        ignoredImageAnalysisSelectors = Array.isArray(fixes.ignoreImageAnalysis)\r\n            ? fixes.ignoreImageAnalysis\r\n            : [];\r\n        ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle)\r\n            ? fixes.ignoreInlineStyle\r\n            : [];\r\n    } else {\r\n        ignoredImageAnalysisSelectors = [];\r\n        ignoredInlineSelectors = [];\r\n    }\r\n    if (theme.immediateModify) {\r\n        setIsDOMReady(() => {\r\n            return true;\r\n        });\r\n    }\r\n    isIFrame$1 = iframe;\r\n    const ready = () => {\r\n        const success = () => {\r\n            disableConflictingPlugins();\r\n            document.documentElement.setAttribute(\r\n                \"data-darkreader-mode\",\r\n                \"dynamic\"\r\n            );\r\n            document.documentElement.setAttribute(\r\n                \"data-darkreader-scheme\",\r\n                theme.mode ? \"dark\" : \"dimmed\"\r\n            );\r\n            createThemeAndWatchForUpdates();\r\n        };\r\n        const failure = () => {\r\n            removeDynamicTheme();\r\n        };\r\n        if (isDRLocked()) {\r\n            removeNode(document.querySelector(\".darkreader--fallback\"));\r\n        } else if (isAnotherDarkReaderInstanceActive()) {\r\n            interceptOldScript({\r\n                success,\r\n                failure\r\n            });\r\n        } else {\r\n            success();\r\n        }\r\n    };\r\n    if (document.head) {\r\n        ready();\r\n    } else {\r\n        if (!isFirefox) {\r\n            const fallbackStyle = createOrUpdateStyle(\"darkreader--fallback\");\r\n            document.documentElement.appendChild(fallbackStyle);\r\n            fallbackStyle.textContent = getModifiedFallbackStyle(theme, {\r\n                strict: true\r\n            });\r\n        }\r\n        headObserver?.disconnect();\r\n        headObserver = new MutationObserver(() => {\r\n            if (document.head) {\r\n                headObserver?.disconnect();\r\n                ready();\r\n            }\r\n        });\r\n        cleaners.push(() => {\r\n            headObserver?.disconnect();\r\n            headObserver = null;\r\n        });\r\n        headObserver.observe(document, {childList: true, subtree: true});\r\n    }\r\n    prevTheme = theme;\r\n    prevFixes = fixes;\r\n}\r\nfunction removeProxy() {\r\n    document.dispatchEvent(new CustomEvent(\"__darkreader__cleanUp\"));\r\n    removeNode(document.head.querySelector(\".darkreader--proxy\"));\r\n}\r\nconst cleaners = [];\r\nfunction removeDynamicTheme() {\r\n    document.documentElement.removeAttribute(`data-darkreader-mode`);\r\n    document.documentElement.removeAttribute(`data-darkreader-scheme`);\r\n    cleanDynamicThemeCache();\r\n    removeNode(document.querySelector(\".darkreader--fallback\"));\r\n    if (document.head) {\r\n        const selectors = [\r\n            \".darkreader--user-agent\",\r\n            \".darkreader--text\",\r\n            \".darkreader--invert\",\r\n            \".darkreader--inline\",\r\n            \".darkreader--override\",\r\n            \".darkreader--variables\",\r\n            \".darkreader--root-vars\",\r\n            'meta[name=\"darkreader\"]'\r\n        ];\r\n        restoreMetaThemeColor();\r\n        selectors.forEach((selector) =>\r\n            removeNode(document.head.querySelector(selector))\r\n        );\r\n        staticStyleMap = new WeakMap();\r\n        removeProxy();\r\n    }\r\n    shadowRootsWithOverrides.forEach((root) => {\r\n        removeNode(root.querySelector(\".darkreader--inline\"));\r\n        removeNode(root.querySelector(\".darkreader--override\"));\r\n    });\r\n    shadowRootsWithOverrides.clear();\r\n    forEach(styleManagers.keys(), (el) => removeManager(el));\r\n    loadingStyles.clear();\r\n    cleanLoadingLinks();\r\n    forEach(document.querySelectorAll(\".darkreader\"), removeNode);\r\n    adoptedStyleManagers.forEach((manager) => manager.destroy());\r\n    adoptedStyleManagers.splice(0);\r\n    adoptedStyleFallbacks.forEach((fallback) => fallback.destroy());\r\n    adoptedStyleFallbacks.clear();\r\n    metaObserver && metaObserver.disconnect();\r\n    cleaners.forEach((clean) => clean());\r\n    cleaners.splice(0);\r\n}\r\nfunction cleanDynamicThemeCache() {\r\n    variablesStore.clear();\r\n    parsedURLCache.clear();\r\n    removeDocumentVisibilityListener();\r\n    cancelRendering();\r\n    stopWatchingForUpdates();\r\n    cleanModificationCache();\r\n    clearColorCache();\r\n    releaseVariablesSheet();\r\n    prevTheme = null;\r\n    prevFixes = null;\r\n}\r\n\r\nfunction parseCSS(cssText) {\r\n    cssText = removeCSSComments(cssText);\r\n    cssText = cssText.trim();\r\n    if (!cssText) {\r\n        return [];\r\n    }\r\n    const rules = [];\r\n    const excludeRanges = getTokenExclusionRanges(cssText);\r\n    const bracketRanges = getAllOpenCloseRanges(\r\n        cssText,\r\n        \"{\",\r\n        \"}\",\r\n        excludeRanges\r\n    );\r\n    let ruleStart = 0;\r\n    bracketRanges.forEach((brackets) => {\r\n        const key = cssText.substring(ruleStart, brackets.start).trim();\r\n        const content = cssText.substring(brackets.start + 1, brackets.end - 1);\r\n        if (key.startsWith(\"@\")) {\r\n            const typeEndIndex = key.search(/[\\s\\(]/);\r\n            const rule = {\r\n                type: typeEndIndex < 0 ? key : key.substring(0, typeEndIndex),\r\n                query:\r\n                    typeEndIndex < 0 ? \"\" : key.substring(typeEndIndex).trim(),\r\n                rules: parseCSS(content)\r\n            };\r\n            rules.push(rule);\r\n        } else {\r\n            const rule = {\r\n                selectors: parseSelectors(key),\r\n                declarations: parseDeclarations(content)\r\n            };\r\n            rules.push(rule);\r\n        }\r\n        ruleStart = brackets.end;\r\n    });\r\n    return rules;\r\n}\r\nfunction getAllOpenCloseRanges(\r\n    input,\r\n    openToken,\r\n    closeToken,\r\n    excludeRanges = []\r\n) {\r\n    const ranges = [];\r\n    let i = 0;\r\n    let range;\r\n    while (\r\n        (range = getOpenCloseRange(\r\n            input,\r\n            i,\r\n            openToken,\r\n            closeToken,\r\n            excludeRanges\r\n        ))\r\n    ) {\r\n        ranges.push(range);\r\n        i = range.end;\r\n    }\r\n    return ranges;\r\n}\r\nfunction getTokenExclusionRanges(cssText) {\r\n    const singleQuoteGoesFirst = cssText.indexOf(\"'\") < cssText.indexOf('\"');\r\n    const firstQuote = singleQuoteGoesFirst ? \"'\" : '\"';\r\n    const secondQuote = singleQuoteGoesFirst ? '\"' : \"'\";\r\n    const excludeRanges = getAllOpenCloseRanges(\r\n        cssText,\r\n        firstQuote,\r\n        firstQuote\r\n    );\r\n    excludeRanges.push(\r\n        ...getAllOpenCloseRanges(\r\n            cssText,\r\n            secondQuote,\r\n            secondQuote,\r\n            excludeRanges\r\n        )\r\n    );\r\n    excludeRanges.push(\r\n        ...getAllOpenCloseRanges(cssText, \"[\", \"]\", excludeRanges)\r\n    );\r\n    excludeRanges.push(\r\n        ...getAllOpenCloseRanges(cssText, \"(\", \")\", excludeRanges)\r\n    );\r\n    return excludeRanges;\r\n}\r\nfunction parseSelectors(selectorText) {\r\n    const excludeRanges = getTokenExclusionRanges(selectorText);\r\n    return splitExcluding(selectorText, \",\", excludeRanges);\r\n}\r\nfunction parseDeclarations(cssDeclarationsText) {\r\n    const declarations = [];\r\n    const excludeRanges = getTokenExclusionRanges(cssDeclarationsText);\r\n    splitExcluding(cssDeclarationsText, \";\", excludeRanges).forEach((part) => {\r\n        const colonIndex = part.indexOf(\":\");\r\n        if (colonIndex > 0) {\r\n            const importantIndex = part.indexOf(\"!important\");\r\n            declarations.push({\r\n                property: part.substring(0, colonIndex).trim(),\r\n                value: part\r\n                    .substring(\r\n                        colonIndex + 1,\r\n                        importantIndex > 0 ? importantIndex : part.length\r\n                    )\r\n                    .trim(),\r\n                important: importantIndex > 0\r\n            });\r\n        }\r\n    });\r\n    return declarations;\r\n}\r\nfunction isParsedStyleRule(rule) {\r\n    return \"selectors\" in rule;\r\n}\r\n\r\nfunction formatCSS(cssText) {\r\n    const parsed = parseCSS(cssText);\r\n    return formatParsedCSS(parsed);\r\n}\r\nfunction formatParsedCSS(parsed) {\r\n    const lines = [];\r\n    const tab = \"    \";\r\n    function formatRule(rule, indent) {\r\n        if (isParsedStyleRule(rule)) {\r\n            formatStyleRule(rule, indent);\r\n        } else {\r\n            formatAtRule(rule, indent);\r\n        }\r\n    }\r\n    function formatAtRule({type, query, rules}, indent) {\r\n        lines.push(`${indent}${type} ${query} {`);\r\n        rules.forEach((child) => formatRule(child, `${indent}${tab}`));\r\n        lines.push(`${indent}}`);\r\n    }\r\n    function formatStyleRule({selectors, declarations}, indent) {\r\n        const lastSelectorIndex = selectors.length - 1;\r\n        selectors.forEach((selector, i) => {\r\n            lines.push(\r\n                `${indent}${selector}${i < lastSelectorIndex ? \",\" : \" {\"}`\r\n            );\r\n        });\r\n        const sorted = sortDeclarations(declarations);\r\n        sorted.forEach(({property, value, important}) => {\r\n            lines.push(\r\n                `${indent}${tab}${property}: ${value}${important ? \" !important\" : \"\"};`\r\n            );\r\n        });\r\n        lines.push(`${indent}}`);\r\n    }\r\n    clearEmptyRules(parsed);\r\n    parsed.forEach((rule) => formatRule(rule, \"\"));\r\n    return lines.join(\"\\n\");\r\n}\r\nfunction sortDeclarations(declarations) {\r\n    const prefixRegex = /^-[a-z]-/;\r\n    return [...declarations].sort((a, b) => {\r\n        const aProp = a.property;\r\n        const bProp = b.property;\r\n        const aPrefix = aProp.match(prefixRegex)?.[0] ?? \"\";\r\n        const bPrefix = bProp.match(prefixRegex)?.[0] ?? \"\";\r\n        const aNorm = aPrefix ? aProp.replace(prefixRegex, \"\") : aProp;\r\n        const bNorm = bPrefix ? bProp.replace(prefixRegex, \"\") : bProp;\r\n        if (aNorm === bNorm) {\r\n            return aPrefix.localeCompare(bPrefix);\r\n        }\r\n        return aNorm.localeCompare(bNorm);\r\n    });\r\n}\r\nfunction clearEmptyRules(rules) {\r\n    for (let i = rules.length - 1; i >= 0; i--) {\r\n        const rule = rules[i];\r\n        if (isParsedStyleRule(rule)) {\r\n            if (rule.declarations.length === 0) {\r\n                rules.splice(i, 1);\r\n            }\r\n        } else {\r\n            clearEmptyRules(rule.rules);\r\n            if (rule.rules.length === 0) {\r\n                rules.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst blobRegex = /url\\(\\\"(blob\\:.*?)\\\"\\)/g;\r\nasync function replaceBlobs(text) {\r\n    const promises = [];\r\n    getMatches(blobRegex, text, 1).forEach((url) => {\r\n        const promise = loadAsDataURL(url);\r\n        promises.push(promise);\r\n    });\r\n    const data = await Promise.all(promises);\r\n    return text.replace(blobRegex, () => `url(\"${data.shift()}\")`);\r\n}\r\nconst banner = `/*\r\n                        _______\r\n                       /       \\\\\r\n                      .==.    .==.\r\n                     ((  ))==((  ))\r\n                    / \"==\"    \"==\"\\\\\r\n                   /____|| || ||___\\\\\r\n       ________     ____    ________  ___    ___\r\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\r\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\r\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\r\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\r\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\r\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\r\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\r\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\r\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\r\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\r\n                https://darkreader.org\r\n*/\r\n\r\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */\r\n`;\r\nasync function collectCSS() {\r\n    const css = [banner];\r\n    function addStaticCSS(selector, comment) {\r\n        const staticStyle = document.querySelector(selector);\r\n        if (staticStyle && staticStyle.textContent) {\r\n            css.push(`/* ${comment} */`);\r\n            css.push(staticStyle.textContent);\r\n            css.push(\"\");\r\n        }\r\n    }\r\n    addStaticCSS(\".darkreader--fallback\", \"Fallback Style\");\r\n    addStaticCSS(\".darkreader--user-agent\", \"User-Agent Style\");\r\n    addStaticCSS(\".darkreader--text\", \"Text Style\");\r\n    addStaticCSS(\".darkreader--invert\", \"Invert Style\");\r\n    addStaticCSS(\".darkreader--variables\", \"Variables Style\");\r\n    const modifiedCSS = [];\r\n    document.querySelectorAll(\".darkreader--sync\").forEach((element) => {\r\n        forEach(element.sheet.cssRules, (rule) => {\r\n            rule && rule.cssText && modifiedCSS.push(rule.cssText);\r\n        });\r\n    });\r\n    if (modifiedCSS.length) {\r\n        const formattedCSS = formatCSS(modifiedCSS.join(\"\\n\"));\r\n        css.push(\"/* Modified CSS */\");\r\n        css.push(await replaceBlobs(formattedCSS));\r\n        css.push(\"\");\r\n    }\r\n    addStaticCSS(\".darkreader--override\", \"Override Style\");\r\n    return css.join(\"\\n\");\r\n}\r\n\r\nlet isDarkReaderEnabled = false;\r\nconst isIFrame = (() => {\r\n    try {\r\n        return window.self !== window.top;\r\n    } catch (err) {\r\n        console.warn(err);\r\n        return true;\r\n    }\r\n})();\r\nfunction enable(themeOptions = {}, fixes = null) {\r\n    const theme = {...DEFAULT_THEME, ...themeOptions};\r\n    if (theme.engine !== ThemeEngine.dynamicTheme) {\r\n        throw new Error(\"Theme engine is not supported.\");\r\n    }\r\n    createOrUpdateDynamicThemeInternal(theme, fixes, isIFrame);\r\n    isDarkReaderEnabled = true;\r\n}\r\nfunction isEnabled() {\r\n    return isDarkReaderEnabled;\r\n}\r\nfunction disable() {\r\n    removeDynamicTheme();\r\n    isDarkReaderEnabled = false;\r\n}\r\nconst darkScheme =\r\n    typeof matchMedia === \"function\"\r\n        ? matchMedia(\"(prefers-color-scheme: dark)\")\r\n        : undefined;\r\nlet store = {\r\n    themeOptions: null,\r\n    fixes: null\r\n};\r\nfunction handleColorScheme() {\r\n    if (darkScheme?.matches) {\r\n        enable(store.themeOptions, store.fixes);\r\n    } else {\r\n        disable();\r\n    }\r\n}\r\nfunction auto(themeOptions = {}, fixes = null) {\r\n    if (themeOptions) {\r\n        store = {themeOptions, fixes};\r\n        handleColorScheme();\r\n        if (isMatchMediaChangeEventListenerSupported) {\r\n            darkScheme?.addEventListener(\"change\", handleColorScheme);\r\n        } else {\r\n            darkScheme?.addListener(handleColorScheme);\r\n        }\r\n    } else {\r\n        if (isMatchMediaChangeEventListenerSupported) {\r\n            darkScheme?.removeEventListener(\"change\", handleColorScheme);\r\n        } else {\r\n            darkScheme?.removeListener(handleColorScheme);\r\n        }\r\n        disable();\r\n    }\r\n}\r\nasync function exportGeneratedCSS() {\r\n    return await collectCSS();\r\n}\r\nconst setFetchMethod = setFetchMethod$1;\r\n\r\nexport {auto, disable, enable, exportGeneratedCSS, isEnabled, setFetchMethod};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}